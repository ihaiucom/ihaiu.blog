<html>
<head>
<title>lesson37-Binary file </title>
	 
	<script type="text/javascript">
	<!--
	function uploadAndSubmit() {
		var form = document.forms["demoForm"];
			
		if (form["file"].files.length > 0)
		{
			var file = form["file"].files[0];
				
			var reader = new FileReader();
				
			reader.onloadstart = function() {
				console.log("onloadstart");
					
	        document.getElementById("bytesTotal").textContent = file.size;
			}
				
			reader.onprogress = function(p) {
				console.log("onprogress");
				document.getElementById("bytesRead").textContent = p.loaded;
			}
				
			reader.onload = function() {
				console.log("load complete");
			}
				
			reader.onloadend = function () {

				if (reader.error) {
				    console.log(reader.error);
				}

				var tt = new Float32Array(reader.result,0,12);
				var ts = tt.toString();
			}
			//reader.readAsBinaryString(file);
			reader.readAsArrayBuffer(file);
		}
		else
		{
			alert ("Please choose a file.");
		}
	}
		
	// -->
	</script>
</head>

<body>
<h1>File API Demo</h1>
<p>
	<form name="demoForm" id="demoForm" method="post" enctype="multipart/form-data" action="javascript: uploadAndSubmit();">
		<p>Upload File: <input type="file" name="file" /></p>
		<p><input type="submit" value="Submit" /></p>
	</form>
	<div>Progessing (in Bytes): <span id="bytesRead"></span> / <span id="bytesTotal"></span></div>
</p>

</body>
</html>
