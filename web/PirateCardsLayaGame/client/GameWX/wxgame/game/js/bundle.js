!function(){"use strict";class e{constructor(){}static get isMobile(){return window.navigator.userAgent.indexOf("Mobile")>-1}static get scaleMode(){return Laya.Stage.SCALE_FIXED_AUTO}static get scaleX(){return Laya.stage.width/this.width}static get scaleY(){return Laya.stage.height/this.height}static init(){Laya.ClassUtils.regClass}}e.width=750,e.height=1334,e.screenMode="none",e.alignV=Laya.Stage.ALIGN_TOP,e.alignH=Laya.Stage.ALIGN_CENTER,e.startScene="test/TestScene.scene",e.sceneRoot="",e.debug=!1,e.stat=!1,e.physicsDebug=!1,e.exportSceneToJson=!0,e.isAntialias=!0,e.init();class i extends excelconfigSources.Card{get name(){if(!Gr.lang.isUseLang)return this.zhCnName;let e=Gr.lang.getValue("Card",this.id,"zhCnName");return isNullOrEmpty(e)?this.zhCnName:e}}class s extends excelconfigSources.CardScoreType{get name(){if(!Gr.lang.isUseLang)return this.zhCnName;let e=Gr.lang.getValue("CardScoreType",this.id,"zhCnName");return isNullOrEmpty(e)?this.zhCnName:e}}class a extends excelconfigSources.Item{get name(){if(!Gr.lang.isUseLang)return this.zhCnName;let e=Gr.lang.getValue("Item",this.id,"zhCnName");return isNullOrEmpty(e)?this.zhCnName:e}get en(){if(!Gr.lang.isUseLang)return this.zhCnEn;let e=Gr.lang.getValue("Item",this.id,"zhCnEn");return isNullOrEmpty(e)?this.zhCnEn:e}get itemDes(){if(!Gr.lang.isUseLang)return this.zhCnItemdes;let e=Gr.lang.getValue("Item",this.id,"zhCnItemdes");return isNullOrEmpty(e)?this.zhCnItemdes:e}}class n extends excelconfigSources.Loader{}class r extends excelconfigSources.Menu{get name(){if(!Gr.lang.isUseLang)return this.zhCnName;let e=Gr.lang.getValue("Menu",this.id,"zhCnName");return isNullOrEmpty(e)?this.zhCnName:e}}class o extends excelconfigSources.Msg{get notice(){if(!Gr.lang.isUseLang)return this.zhCnNotice;let e=Gr.lang.getValue("Msg",this.id,"zhCnNotice");return isNullOrEmpty(e)?this.zhCnNotice:e}}class l extends excelconfigSources.Unlock{get name(){if(!Gr.lang.isUseLang)return this.zhCnName;let e=Gr.lang.getValue("Unlock",this.id,"zhCnName");return isNullOrEmpty(e)?this.zhCnName:e}}class c extends fgui.GButton{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","CardView")}constructFromXML(e){super.constructFromXML(e)}}c.URL="ui://moe42ygrsqzy9s",c.DependPackages=["GameHome"];class h extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","CardViewFrontBg")}constructFromXML(e){super.constructFromXML(e),this.m_state=this.getController("state"),this.m_icon=this.getChild("icon")}}h.URL="ui://moe42ygrsqzya8",h.DependPackages=["GameHome"];class u extends h{}var m;!function(e){e[e.Default=0]="Default",e[e.Warrior=1]="Warrior",e[e.Hero=2]="Hero",e[e.PowerUp=3]="PowerUp"}(m||(m={}));class g extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","CardViewFrontHero")}constructFromXML(e){super.constructFromXML(e),this.m_icon=this.getChild("icon"),this.m_life=this.getChild("life"),this.m_shield=this.getChild("shield"),this.m_shopBar=this.getChild("shopBar")}}g.URL="ui://moe42ygrsqzy9v",g.DependPackages=["GameHome"];class d{}d.Width=640,d.Height=960,d.HeroStartRow=2,d.HeroStartColumn=2,d.CardWidth=198,d.CardHeight=226,d.CardSpaceBetweenWidth=10,d.CardSpaceBetweenHeight=10,d.AnimationTime=185,d.AnimationMultiplier=.5,d.ScaleZoom=1.2,d.ScaleSpeed=50,d.FlipSpeed=200,d.FlipZoom=1.3,d.SmashDelay=200,d.HeroCurrentLife1="HeroCurrentLife1",d.HeroCurrentLife2="HeroCurrentLife2",d.HeroTotalLife1="HeroTotalLife1",d.HeroTotalLife2="HeroTotalLife2",d.CardLife="CardLife",d.CardLife1="CardLife1",d.CardLife2="CardLife2",d.PowerUpCircle="PowerUpCircle",d.PowerUp="PowerUp",d.CardManAnimation="CardManAnimation",d.WaveSize=7,d.ScaleSize=30,d.textFontWeight=22,d.numbersFontWeight=28,d.resultNumbersFontWeight=35,d.creditsColor="#ffffff",d.creditsFontWeight=24,d.BackgroundImageName="BackgroundImageName",d.BackgroundName="BackgroundName",d.LightningDuration=50,d.ShakeIntensity=20,d.ContainerName="container",d.CoinMaxValue=5,d.Shadow="shadow",d.Hero="hero",d.CardWithArm="cardWithArm",d.CardWithMovingArm="cardWithMovingArm",d.ShowTime=300,d.StorageName="pirated-cards-adventure",d.IsDev=!1,d.IsAndroid=!1,d.HighResolutionScale=!1,d.MaxPixelRatio=3,d.WarriorAnimationDuration=500;class p{constructor(){this.onStart=new Signal,this.onComplete=new Signal,this.tweens=[],this.duration=null,this._delay=0}static PoolGet(){return Pool.createByClass(p)}recover(){Laya.timer.clearAll(this),this.recoverArray(this.tweens),this.tweens.length=0,this.onStart.removeAll(),this.onComplete.removeAll(),this.duration=null,this._delay=0,Pool.recoverByClass(this)}recoverArray(e){if(null!=e)if(e instanceof Array)for(var t of e)null!=t&&(t instanceof Array?this.recoverArray(t):t.recover());else e.recover()}get animationDuration(){if(null===this.duration){for(var e=0,t=0,i=this.tweens.length;t<i;t++){var s=this.tweens[t];if(s)if(s instanceof p)e=Math.max(s.animationDuration,e);else if(s instanceof Array)if(s.length>0){var a=s[0];if(a)if(a instanceof p)e=Math.max(a.animationDuration,e);else{var n=a._duration+a._delay;e=Math.max(n,e)}else this.duration=100}else this.duration=100;else{n=s._duration+s._delay;e=Math.max(n,e)}}this.duration=e}return this.duration}set animationDuration(e){this.duration=e}setAnimationDuration(e){return this.duration=e,this}setFirstDelay(e){this._delay=e}restart(){setTimeout(this.onEnd.bind(this),this.animationDuration),this.onStart.dispatch(),this._delay>0?Laya.timer.once(this._delay,this,this.playTweens):this.playTweens()}playTweens(){this.playArray(this.tweens)}playArray(e){if(null!=e)if(e instanceof Array){for(var t of e)if(null!=t)if(t instanceof Array)this.playArray(t);else{if(t instanceof Laya.Tween&&(!t._props||0==t._props.length)){console.error("没设置属性");continue}t.restart()}}else e.restart()}onEnd(){this.onComplete.dispatch(),Laya.timer.once(3e3,this,this.recover)}}var S,C,f,y,w=Laya.Tween;class _{static to(e,t,i,s=null,a=null,n=0,r=!1,o=!0){return Pool.getItemByClass("tween",w)._create(e,t,i,s,a,n,r,!0,o,!1)}static from(e,t,i,s=null,a=null,n=0,r=!1,o=!0){return Pool.getItemByClass("tween",w)._create(e,t,i,s,a,n,r,!1,o,!1)}}class L{static getRandomIntInclusive(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e}static getRandomBool(){return Math.random()>.5}static shuffle(e){for(var t,i,s=e.length;0!==s;)i=Math.floor(Math.random()*s),t=e[s-=1],e[s]=e[i],e[i]=t;return e}}class v{static get instance(){return this._instance||(this._instance=new v),this._instance}get soundBtnIndex(){return Laya.SoundManager.soundMuted?0:1}changeSoundState(){Laya.SoundManager.musicMuted=Laya.SoundManager.soundMuted=!Laya.SoundManager.soundMuted,Laya.SoundManager._musicMuted||this.playMusic()}playSound(e){if(!Laya.SoundManager.soundMuted){var t=`res/sounds/mp3/${e}.mp3`;Laya.SoundManager.playSound(t,1)}}playMusic(){if(!Laya.SoundManager._musicMuted){Laya.timer.clearAll(this);Laya.SoundManager.playMusic(`res/sounds/music/music0${L.getRandomIntInclusive(1,5)}.mp3`,1,Laya.Handler.create(this,this.onPlayMusicEnd),0)}}onPlayMusicEnd(){Laya.timer.clearAll(this),Laya.timer.once(100,this,this.playMusic)}}class T{}T.Click="click",T.Barrel1="barrel1",T.Barrel2="barrel2",T.Bomb="bomb",T.BossAppearance="bossAppearance",T.Buy="buy",T.Cannon="cannon",T.Card="card",T.ChestOpening="chestOpening",T.Coin="coin",T.CoinsBag="coinsBag",T.CoinsCounting="coinsCounting",T.Health1="health1",T.Health2="health2",T.HeroDies="heroDies",T.Hit1="hit1",T.Hit2="hit2",T.Horseshoe="horseshoe",T.Idol="idol",T.IncorrectClick="incorrectClick",T.Lighting="lighting",T.Melody="melody",T.PickLockFail="picklockFail",T.PickLockNeutral="picklockNeutral",T.PickLockSuccess="picklockSuccess",T.Poison="poison",T.Revive="revive",T.ShieldMetal="shieldMetal",T.ShieldWood="shieldWood",T.Skull="skull",T.Move01="move01",T.Move02="move02",T.Trap="trap";class G{static spriteHide(e){Laya.Tween.clearAll(e),Laya.Tween.to(e,{scaleX:0,scaleY:0,rotation:360,alpha:0},700,null,Laya.Handler.create(this,()=>{e.visible=!1,e.rotation=0,e.alpha=1,e.scaleX=1,e.scaleY=1}))}static spriteShow(e){e.visible=!0,e.alpha=1,Laya.Tween.clearAll(e),Laya.Tween.to(e,{scaleX:0,scaleY:0,alpha:1},100),Laya.Tween.to(e,{scaleX:1.5,scaleY:1.5},250,null,null,100),Laya.Tween.to(e,{scaleX:1,scaleY:1},100,null,null,350)}static turnAnimationStart(e,t){e||(e=new p);var i=_.to(t,{scaleX:d.ScaleZoom,scaleY:d.ScaleZoom},d.ScaleSpeed);e.tweens.push(i);var s=_.to(t,{scaleX:.1,scaleY:d.FlipZoom},d.FlipSpeed/2,null,null,d.ScaleSpeed,!1);return e.tweens.push(s),e}static turnAnimationEnd(e,t){e||(e=new p);var i=_.to(t,{scaleX:d.ScaleZoom,scaleY:d.ScaleZoom},d.FlipSpeed/2);e.tweens.push(i);var s=_.to(t,{scaleX:1,scaleY:1},d.FlipSpeed);return e.tweens.push(s),e}static TurnCard(e,t){v.instance.playSound(T.Card),t.setScale(0,d.FlipZoom);var i=G.turnAnimationStart(null,e);i.onComplete.add(()=>{e.visible=!1,t.visible=!0,t.scaleX=.1,G.turnAnimationEnd(null,t).restart()},this),i.restart()}static scaleIn(e,t,i=!0){e||(e=new p),t.enabled=!1;var s=_.to(t,{scaleX:0,scaleY:0},.25*d.ShowTime,null,Laya.Handler.create(this,()=>{t.setScale(1,1),t.visible=!1,t.enabled=!0}));return e.tweens.push(s),e}static scaleOut(e,t,i=1){t.setScale(0,0),t.visible=!0,t.enabled=!0,e||(e=new p);var s=_.to(t,{scaleX:i,scaleY:i},.25*d.ShowTime);return e.tweens.push(s),e}}class I extends g{constructFromXML(e){super.constructFromXML(e),this.m_shield.alpha=1,this.m_shield.visible=!1}SetConfig(e){this.cardConfig=e,this.m_icon.m_sprite.setSelectedIndex(e.id%100-1)}SetCard(e){this.card=e}OnRecover(){this.cardView=null,this.cardConfig=null,this.card=null}setArmorHide(){this.m_shield.visible&&G.spriteHide(this.m_shield)}setArmorShowOrChange(){G.spriteShow(this.m_shield)}}class P extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","CardViewFrontPowerUp")}constructFromXML(e){super.constructFromXML(e),this.m_icon=this.getChild("icon"),this.m_life=this.getChild("life")}}P.URL="ui://moe42ygrsqzyaa",P.DependPackages=["GameHome"];class k extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","FxSmallRing")}constructFromXML(e){super.constructFromXML(e),this.m_shadow=this.getChild("shadow"),this.m_anim=this.getTransition("anim")}}k.URL="ui://moe42ygrsqzy8w",k.DependPackages=["GameHome"];class M extends k{}class b extends P{constructFromXML(e){super.constructFromXML(e),this.fxSmallRing=M.createInstance(),this.fxSmallRing.x=.5*this.width,this.fxSmallRing.y=.5*this.height,this.addChildAt(this.fxSmallRing,0)}SetConfig(e){this.cardConfig=e,this.m_icon.url=e.spriteUrl}SetCard(e){this.card=e}OnRecover(){this.cardView=null,this.cardConfig=null,this.card=null}}class D extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","CardViewFrontPowerUpBarrel")}constructFromXML(e){super.constructFromXML(e),this.m_icon=this.getChild("icon"),this.m_openFx=this.getChild("openFx"),this.m_life=this.getChild("life")}}D.URL="ui://moe42ygrsqzyab",D.DependPackages=["GameHome"];class F extends D{SetConfig(e){this.cardConfig=e}SetCard(e){this.card=e}OnRecover(){this.cardView=null,this.cardConfig=null,this.card=null}}class H extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","CardViewFrontPowerUpCannon")}constructFromXML(e){super.constructFromXML(e),this.m_icon=this.getChild("icon"),this.m_fx=this.getChild("fx"),this.m_life=this.getChild("life")}}H.URL="ui://moe42ygrsqzy9y",H.DependPackages=["GameHome"];class x extends H{SetConfig(e){this.cardConfig=e}SetCard(e){this.card=e}OnRecover(){this.cardView=null,this.cardConfig=null,this.card=null}}class B extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","CardViewFrontPowerUpBomb")}constructFromXML(e){super.constructFromXML(e),this.m_icon=this.getChild("icon"),this.m_fx=this.getChild("fx"),this.m_life=this.getChild("life")}}B.URL="ui://moe42ygrsqzyad",B.DependPackages=["GameHome"];class A extends B{SetConfig(e){this.cardConfig=e}SetCard(e){this.card=e}OnRecover(){this.cardView=null,this.cardConfig=null,this.card=null}}class R extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","CardViewFrontPowerUpChest")}constructFromXML(e){super.constructFromXML(e),this.m_state=this.getController("state"),this.m_icon=this.getChild("icon"),this.m_life=this.getChild("life")}}R.URL="ui://moe42ygrsqzyac",R.DependPackages=["GameHome"];class U extends R{SetConfig(e){this.cardConfig=e}SetCard(e){this.card=e}OnRecover(){this.cardView=null,this.cardConfig=null,this.card=null}}class O extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","CardViewFrontPowerUpSkull")}constructFromXML(e){super.constructFromXML(e),this.m_fx=this.getChild("fx"),this.m_life=this.getChild("life")}}O.URL="ui://moe42ygrsqzyae",O.DependPackages=["GameHome"];class N extends O{SetConfig(e){this.cardConfig=e}SetCard(e){this.card=e}OnRecover(){this.cardView=null,this.cardConfig=null,this.card=null}}class E extends fgui.GButton{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","CardViewFrontWarriowBoss")}constructFromXML(e){super.constructFromXML(e),this.m_icon=this.getChild("icon"),this.m_life=this.getChild("life")}}E.URL="ui://moe42ygrsqzya6",E.DependPackages=["GameHome"];class W extends E{SetConfig(e){this.cardConfig=e,this.m_icon.m_sprite.setSelectedIndex(e.id%100-1)}SetCard(e){this.card=e}OnRecover(){this.cardView=null,this.cardConfig=null,this.card=null}}class V extends fgui.GButton{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","CardViewFrontWarriowEnemy")}constructFromXML(e){super.constructFromXML(e),this.m_icon=this.getChild("icon"),this.m_life=this.getChild("life")}}V.URL="ui://moe42ygrsqzya3",V.DependPackages=["GameHome"];class X extends V{SetConfig(e){this.cardConfig=e,this.m_icon.m_sprite.setSelectedIndex(e.id%100-1)}SetCard(e){this.card=e}OnRecover(){this.cardView=null,this.cardConfig=null,this.card=null}}class q extends fgui.GButton{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","CardViewFrontWarriowTrap")}constructFromXML(e){super.constructFromXML(e),this.m_icon=this.getChild("icon"),this.m_life=this.getChild("life"),this.m_DoClose=this.getTransition("DoClose"),this.m_DoOpen=this.getTransition("DoOpen")}}q.URL="ui://moe42ygrsqzya9",q.DependPackages=["GameHome"];class K extends q{SetConfig(e){this.cardConfig=e}SetCard(e){this.card=e}OnRecover(){this.cardView=null,this.cardConfig=null,this.card=null}SetOpen(){this.m_DoOpen.play()}SetClose(){this.m_DoClose.play()}}class j extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","CardViewFrontWarriow")}constructFromXML(e){super.constructFromXML(e),this.m_icon=this.getChild("icon"),this.m_life=this.getChild("life")}}j.URL="ui://moe42ygrsqzy9w",j.DependPackages=["GameHome"];class z extends j{SetConfig(e){this.cardConfig=e,this.m_icon.url=e.spriteUrl}SetCard(e){this.card=e}OnRecover(){this.cardView=null,this.cardConfig=null,this.card=null}}class Y extends c{constructor(){super(),this.preArmor=-1}static get FrontClassMap(){if(!this._FrontClassMap){var e=new Map;this._FrontClassMap=e,e.set("CardViewFrontHero",I),e.set("CardViewFrontPowerUp",b),e.set("CardViewFrontPowerUpBarrel",F),e.set("CardViewFrontPowerUpBomb",A),e.set("CardViewFrontPowerUpCannon",x),e.set("CardViewFrontPowerUpChest",U),e.set("CardViewFrontPowerUpSkull",N),e.set("CardViewFrontWarriow",z),e.set("CardViewFrontWarriowBoss",W),e.set("CardViewFrontWarriowEnemy",X),e.set("CardViewFrontWarriowTrap",K)}return this._FrontClassMap}static GetFrontClass(e){return this.FrontClassMap.has(e)?this.FrontClassMap.get(e):(console.error("没有找到卡牌视图组件",e),b)}static GetFrontView(e){var t=Y.GetFrontClass(e),i=Pool.getItem(t.URL);return i||(i=t.createInstance()),i}static GetSpriteUrl(e){return"ui://GameHome/"+e}static PoolGet(){var e=Pool.getItem(this.URL);return e||(e=Y.createInstance()),e}PoolRecover(){this.RecoverFront(),this.cardConfig=null,this.cardScoreConfig=null,Pool.recover(Y.URL,this)}constructFromXML(e){super.constructFromXML(e),this.InitBg()}InitBg(){this.bg=u.createInstance(),this.addChild(this.bg),this.bg.setXY(.5*this.width,.5*this.height)}SetBg(e){this.bg.m_state.setSelectedIndex(e)}SetFront(e){var t=Y.GetFrontView(e);t.displayListContainer.mouseThrough=!0,t.displayListContainer.mouseEnabled=!1,t.cardView=this,this.addChild(t),t.setXY(.5*this.width,.5*this.height),this.front=t;var i=this.front.SetConfig;i&&i.call(this.front,this.cardConfig),this.onClick(this,this.OnClickHandler)}RecoverFront(){if(this.front){this.front.removeFromParent();var e=this.front.OnRecover;e&&e.call(this.front);var t=this.front.constructor.URL;Pool.recover(t,this.front),this.front=null}this.offClick(this,this.OnClickHandler)}SetConfig(e){if(this.RecoverFront(),this.cardConfig=e,e){var t=this.cardScoreConfig=e.cardScoreConfig;t&&null!=t.backgroundType||console.error("!cardScoreConfig || cardScoreConfig.backgroundType == undefined",t,e),this.SetBg(t.backgroundType),this.SetFront(t.frontView)}else this.cardScoreConfig=null,this.SetBg(m.Default)}SetCard(e){if(this.card=e,this.front){var t=this.front.SetCard;t&&t.call(this.front,this.card)}}OnClickHandler(){this.card&&this.game.keyboardManager.OnClickCard(this.card)}setHealthText(){if(this.card.isHero){var e=this.card;this.front.m_life.title=e.currentLife+"/"+e.totalLife}else this.setPowerUpText()}setPowerUpText(){var e=this.card;e.isDisplayLife()?this.front.m_life.title=e.lifeAmount.toString():this.front.m_life.title=e.powerUpAmount.toString()}setArmor(){if(this.card.isHero){var e=this.card,t=this.front;e.armor>0?0!=t.m_shield.visible&&this.preArmor==e.armor||(t.setArmorShowOrChange(),this.preArmor=e.armor):t.setArmorHide(),t.m_shield.title=e.armor.toString()}}tweenLife(){var e=this.front.m_life,t=this.card.getScaleTween(e);return t.onComplete.addOnce(this.setHealthText,this),t}tweenPowerUp(){var e=this.front.m_life,t=this.card.getScaleTween(e);return t.onComplete.addOnce(this.setHealthText,this),t}useLuck(){if(this.card.isHero){this.card;this.front.m_shopBar.useLuck()}}useHeart(){if(this.card.isHero){this.card;this.front.m_shopBar.useHeart()}}refreshShopBar(){if(this.card.isHero){this.card;this.front.m_shopBar.refresh()}}setOpen(){this.card.isTrap&&this.front.SetOpen()}setClose(){this.card.isTrap&&this.front.SetClose()}}class $ extends i{get cardScoreConfig(){return Gr.config.cardScoreType.getConfig(this.scoreTypeKey)}get cardScoreType(){var e=this.cardScoreConfig;if(e)return e.id;console.error("CardConfig.cardScoreType    scoreConfig=null",this.name,this)}get heroType(){return this.id%100}get spriteIndex(){return this.heroType-1}get spriteUrl(){return this._spriteUrl||(this._spriteUrl=Y.GetSpriteUrl(this.sprite)),this._spriteUrl}}class J extends s{}class Q extends a{get itemToolType(){return this.id%100-1}get spriteIndex(){return this.itemToolType}}class Z extends n{}!function(e){e[e.Notice=0]="Notice",e[e.Home=100]="Home",e[e.War=601]="War",e[e.Login=101]="Login",e[e.Plot=102]="Plot",e[e.Gashapon=200]="Gashapon",e[e.Hero=201]="Hero",e[e.Bag=202]="Bag",e[e.Equip=203]="Equip",e[e.Draug=204]="Draug",e[e.Sections=207]="Sections",e[e.Quest=300]="Quest",e[e.Team=303]="Team",e[e.BattlePlan=304]="BattlePlan",e[e.PVPHall=401]="PVPHall",e[e.PVEHall=402]="PVEHall",e[e.SystemSetting=500]="SystemSetting",e[e.Mail=501]="Mail",e[e.Rank=502]="Rank",e[e.PlayerInfo=503]="PlayerInfo"}(S||(S={})),window.MenuId=S,function(e){e[e.None=0]="None",e[e.Circle=1]="Circle",e[e.Launch=2]="Launch",e[e.EnterWar=3]="EnterWar",e[e.EnterModule=4]="EnterModule"}(C||(C={}));class ee{static get res3dzip_manifest(){return this.res3dzip+"manifest.json"}static get res3dzip_manifest_pve01(){return this.res3dzip+"pve_01_manifest.json"}static get res3dzip_zip_pve01(){return this.res3dzip+"pve_01.zip"}static get config(){return ee.root+"config/"}static get PathConfig(){return ee.root+"config/path/"}static get GmConfig(){return ee.root+"config/gm/"}static get shader(){return ee.root+"shader/"}static get particles(){return ee.root+"particles/"}static get spine(){return ee.root+"spine/"}static get spineUI(){return ee.root+"spineUI/"}static getConfigIcon(e){return ee.fspriteassets+e+".png"}static get fspriteassets(){return ee.root+"fspriteassets/"}static get actorBodyIcon(){return ee.root+"fspriteassets/ActorBodyIcon/"}static get draugHeroIcon(){return ee.root+"fspriteassets/icon/draugHeroIcon/"}static get draugIcon(){return ee.root+"fspriteassets/icon/draugIcon/"}static get menuIcon(){return ee.root+"fspriteassets/MenuItemIcon/"}static get HeroIcon(){return ee.root+"fspriteassets/icon/heroIcon/"}static getActorBodyIcon(e){return ee.actorBodyIcon+`${e}.png`}static getDraugHeroIcon(e){return-1!=Gr.channel.serverItem.shieldHero.indexOf(e)&&(e=1001),ee.draugHeroIcon+`${e}.png`}static getDraugIcon(e){return ee.draugIcon+`${e}.png`}static getMenuIcon(e){return ee.menuIcon+`${e}.png`}static getSpineSKPathF(e,t){return ee.spine+`${e}_F/${t}_F/${t}_F.sk`}static getSpineSKPathB(e,t){return ee.spine+`${e}_B/${t}_B/${t}_B.sk`}static getSpinePngPathF(e,t){return ee.spine+`${e}_F/${t}_F/${t}_F.png`}static getSpinePngPathB(e,t){return ee.spine+`${e}_B/${t}_B/${t}_B.png`}static getSpineUIPngPath(e){return ee.spineUI+`${e}.png`}static getSpineUISkPath(e){return ee.spineUI+`${e}.sk`}static getSpineSoltPartPath(e){return ee.spine+"SlotTexture/"+e+".png"}static getMenuIconUrl(e){return ee.fspriteassets+"MenuIcon/"+e+".png"}static getMenuNameIconUrl(e){return ee.fspriteassets+"MenuNameIcon/"+e+".png"}static getBgUrl(e){return ee.fspriteassets+"Background/"+e+".png"}static getSpritePath(e){return ee.root+"sprite/"+e+".png"}static getSpritePathHasExt(e){return ee.root+"sprite/"+e}static getShaderVS(e){return ee.shader+e+".vs"}static getShaderPS(e){return ee.shader+e+".fs"}static getParticles(e){return ee.particles+e+".part"}static GetBattleRoleIcon(e){return ee.fspriteassets+e+".png"}static GetAvatarSource(e){let t=Gr.config.avatar.getConfig(e);return ee.fspriteassets+t.icon+".png"}}ee.res3dsrc="",ee.res3dzip="res3dzip/",ee.root="res/";class te{}te.NET_ERROR="网络连接失败！请检查网络设备!加油哦！！",te.Login="登录",te.Auth="授权",te.LangSelectMsg="语言需要重启游戏才有效!",te.FunNoOpen="此功能暂未开放，敬请期待！",te.ButtonSelect="选择",te.ButtonOk="确定",te.ButtonCannel="取消",te.ButtonYes="是",te.ButtonNo="否",te.Disable="内容优化",te.Lock="无解锁配置！",te.LvUpMax="等级达到最大",te.LvUpTo="玩家升级 {0} → {1}",te.Lv="{0}级",te.LVDot="等级：{0}",te.PlayerExp="主公经验：{0}",te.FatigueNotEnough="体力不足，无法进行挑战",te.cannotRecharge="游客不能充值",te.cannotRechargeNoIos="只支持ios内购",te.rechargeError="充值失败，请稍候重试",te.systemTip="系统提示",te.TitleTip="提示",te.ErorNoInitProto="没有初始化网络",te.ErorRequestServerList="请求服务器列表失败",te.ErorAccountFrozen="账号被冻结",te.ErorAccountDropped="账号被停用",te.TipEnterRoleName="输入你的名称",te.ErrorNameEmpty="名字不能是空的",te.ErrorContentEmpty="内容不能是空的",te.ErrorNameUsed="名称已经被使用",te.ErrorFormatName="存在非法字符串，请修改后重试",te.ErrorHttpSendFail="[Error] 发送请求失败",te.HttpTimeOut="网络超时! 当前设置的超时时间是{0}",te.AlertTextBuyActor="是否花费{0}{1}增加艺人数量",te.AlertTextScountActor="是否花费{0}{1} 探查艺人？",te.ToastTextItemNotEnough="{0}数量不足",te.ToastTextItemNotEnough2="数量不足，需要{0} {1}",te.ChangeNameCost="本次改名需要 {0}",te.DuelTempLevel="当前决斗神殿段位：{0}",te.DuelTempMaxLevel="历史最高决斗神殿段位：{0}",te.DuelTempCurrentPvpLevel="当前竞技排名：{0}",te.DuelTempMaxPvpLevel="历史最高竞技排名：{0}",te.BattlePlanTeamHeroNameAndLevel="{0}  {1}级",te.BagCapacity="{0}/{1}",te.BagItemCount="拥有：{0}",te.BagExpiredLimitTip="{0}后过期",te.BagExpiredPeriodTip="将在{0}过期",te.BagItemSell="出售",te.BagItemUse="使用",te.BagItemSplit="分解",te.BagItemForge="锻造",te.BagItemChangeEquip="穿戴",te.BagItemLevelUp="使用可增加{0}英雄经验",te.EquipPropDes="{0}+{1}",te.EquipExclusiveTxtMsg="{0}专属！只有{1}才可穿戴次装备",te.EquipExclusiveTxt="{0}专属",te.EquipEatExp="该装备可提供{0}的强化经验",te.EquipTypeWeapon="武器",te.EquipTypeHelmet="头盔",te.EquipTypeArmor="战甲",te.EquipTypeBoots="战靴",te.EquipTypePendant="玉佩",te.EquipTypeGem="宝物",te.EquipNotEnough="道具不足，无法选择",te.EquipLevelUpStr1="下一级属性",te.EquipLevelUpStr2="强化到{0}级时属性增加",te.EquipAtkRange="系数",te.MailTitle="邮件",te.DeleteRead="删除已读",te.ToReader="致玩家：",te.ReawrdMsg="奖励内容：",te.Progress="{0}/{1}",te.N0="零",te.N1="一",te.N2="二",te.N3="三",te.N4="四",te.N5="五",te.N6="六",te.N7="七",te.N8="八",te.N9="九",te.N10="十",te.N100="百",te.N1000="千",te.N10000="万",te.RewardItemCount="x{0}",te.DATE_MonthBefore="{0}个月前",te.DATE_WeekBefore="{0}周前",te.DATE_DayBefore="{0}天前",te.DATE_HourBefore="{0}小时前",te.DATE_MinuteBefore="{0}分钟前",te.DATE_SecondeBefore="{0}秒前",te.Hour="小时",te.Minute="分",te.Second="秒",te.MissionNotOpen="该关卡尚未开启",te.Chapter="第{0}章",te.ChapterStarTipTitle="本章累计{0}星可领取",te.ChapterStarNotEnough="星星数量不足",te.ChapterRewardAlreadyGet="奖励已经领取过",te.ChapterSpecialTimes="今日精英剩余次数：{0}",te.ChapterMonsterTimes="今日剩余次数：{0}",te.SecretBookTimes="今日剩余次数：{0}",te.SecretBookTimesNotEnough="该副本今日挑战次数不足",te.SectionSpecialTotalTimes="每日一共可购买{0}次精英奖励次数",te.SectionMonsterTotalTimes="每日一共可购买{0}次魔王奖励次数",te.SecretBookTotalTimes="每日一共可购买{0}次秘闻奖励次数",te.SectionBuyTimesToast="奖励次数提升",te.SectionCurrentTimes="今日第{0}次购买",te.SectionTimesNotEnough="今日次数已用完",te.MissionUnlockCondition="{0}级开启",te.ChapterCurrentStarNum="{0}/{1}",te.SecretTimesRemain="今日剩余次数: {0}",te.MissionMaxTime="通关时间低于{0}秒",te.MissionKillBoss="打败首领",te.MissionHPState="剩余生命超过{0}%",te.MissionStamina="x{0}",te.SecretMissionTimesRemain="今日剩余次数：{0}",te.SecretLand_BestScore="最佳成绩：大秘境{0}",te.SecretLand_CurrentKeyStone="当前钥石：{0}级",te.SecretLand_Buy_Roll_Tips="是否消耗{0}点体力兑换Roll币",te.SecretLand_Roll_tips="当日可兑换次数为{0}，Roll积攒数量上限为{1}",te.SecretLand_Fatigue_Not_Enough="您没有足够的体力值，需要{0}体力兑换Roll币",te.Keystone_LevelUp_Time_Limit="{0}分钟",te.SecretLand_Level_Limit="等级达到{0}后开启{1}层大秘境",te.SecretLand_Time_Cost="通关时间: {0}",te.SecretLand_New_Keystone="获取新钥匙：{0}{1}级",te.Gashapon_NextFreeTime="{0}后免费",te.Gashapon_Rate="概率 {0}%",te.Gashapon_PropDisplay="{0} +{1}",te.Gashapon_Times_Remain="每日可招募{0}次，今日剩余{1}次",te.Gashapon_Times_Not_Enough="今日剩余次数不足",te.DuelSeasonDuration="{0} - {1}",te.DuelSeasonRemainDays="距离赛季结束还有{0}",te.DuelCurrentWinTimes="本赛季胜场：{0}",te.DuelSelectHeroGroupFirst="请先选择队伍",te.DuelTempOldSeason="恭喜您，在上赛季结算时的段位达到了{0}，赛季奖励已经发送 到您的邮箱",te.DuelTempNewSeason="由于您上赛季的出色表现，您在本赛季的起始段位为{0}",te.DuelTempWinTimes="胜场：{0}",te.HeroSkillOpenLevel="英雄等级达到{0}级别后解锁",te.HeroMaxLevel="已满级",te.HeroInBattle="当前英雄已在队伍中！！！",te.HeroStarProStr="成长",te.HeroLevelUpNotEnough="当前无法升级，请提升战队等级",te.HeroLevelUpItemNotEnough="物品不足，无法升级",te.HeroLevelUpMax="已提升当前最高级",te.RankMyAllRank="我的全区排行：{0}",te.RankNotOnRank="未上榜",te.RankDanStar="{0} {1}星",te.HeroSkillLevelNotLevel="升级条件不足，需英雄{0}级",te.SecretBookHeroLevelNotEnough="英雄{0}级开启",te.GuideFinish="现在引导结束了，你可以自由体验了",te.GuideGoToBattle="guide_go_section",te.GuideBackHome="guide_go_back_home",te.GuideBack="guide_go_back";class ie{constructor(){this.dict=new Dictionary}static getInstance(){return null==this.__instance&&(this.__instance=new this,this.__instance.install()),this.__instance}validate(e){return!this.dict.hasKey(e)||this.dict.getValue(e).apply(this)}validateTab(e,t){return!0}openMenu(e,t){}openTab(e,t,i){}openItem(e,t,i){}closeRed(e){}add(e,t){this.dict.add(e,t)}install(){}}class se extends ie{install(){}validate(e){return super.validate(e)}warEnableOpen(){return!0}}class ae extends ie{install(){}validate(e){return!!this.dict.hasKey(e)&&this.dict.getValue(e).apply(this)}}class ne{constructor(e,t){this.menuId=e,this.windowClass=t}}!function(e){e[e.Home=1]="Home",e[e.HomeTop=2]="HomeTop",e[e.WarUI=3]="WarUI",e[e.Module=4]="Module",e[e.ModuleTop=5]="ModuleTop",e[e.MainUI=6]="MainUI",e[e.Dialog=7]="Dialog",e[e.Guide=8]="Guide",e[e.Loader=9]="Loader",e[e.GM=10]="GM",e[e.FloatMsg=11]="FloatMsg"}(f||(f={}));class re{static get dialogModel(){return re._dialogModel||(re._dialogModel=new fgui.GComponent),re._dialogModel}static showDialogModel(){re.dialog.width=Gr.screenSetting.screenWidth,re.dialog.height=Gr.screenSetting.screenHeight,re.dialogModel.alpha=.8,re.dialogModel.width=Gr.screenSetting.screenWidth,re.dialogModel.height=Gr.screenSetting.screenHeight,re.dialogModel&&re.dialog.addChildAt(re.dialogModel,0)}static resetDialogModelSize(){re.dialog.width=Gr.screenSetting.screenWidth,re.dialog.height=Gr.screenSetting.screenHeight,re.dialogModel.width=Gr.screenSetting.screenWidth,re.dialogModel.height=Gr.screenSetting.screenHeight}static hideDialogModel(){re.dialogModel&&re.dialogModel.removeFromParent()}static install(){Laya.stage.addChild(fgui.GRoot.inst.displayObject),re.root=fgui.GRoot.inst,re.home=re.createLayer(f.Home,"MenuLayer-home"),re.warUI=re.createLayer(f.WarUI,"MenuLayer-warUI"),re.module=re.createLayer(f.Module,"MenuLayer-module"),re.mainUI=re.createLayer(f.MainUI,"MenuLayer-mainUI"),re.dialog=re.createLayer(f.Dialog,"MenuLayer-dialog"),re.guide=re.createLayer(f.Guide,"MenuLayer-guide"),re.loader=re.createLayer(f.Loader,"MenuLayer-loader"),re.gm=re.createLayer(f.GM,"MenuLayer-gm"),re.floatMsg=re.createLayer(f.FloatMsg,"MenuLayer-floatMsg"),re.dict.add(f.Home,re.home),re.dict.add(f.WarUI,re.warUI),re.dict.add(f.Module,re.module),re.dict.add(f.MainUI,re.mainUI),re.dict.add(f.Dialog,re.dialog),re.dict.add(f.Guide,re.guide),re.dict.add(f.Loader,re.loader),re.dict.add(f.GM,re.gm),re.dict.add(f.FloatMsg,re.floatMsg)}static getLayer(e){return re.dict.getValue(e)}static createLayer(e,t){let i=re.root,s=new fgui.GRoot;if(s.menuLayer=e,t&&(s.name=t),Engine.borwer.isLiuHai)switch(e){case f.Loader:s.x=0,s.y=0,s.setSize(i.width,i.height);break;default:Gr.screenSetting.isLandsape?(s.x=Gr.screenSetting.liuHaiHeightTop,s.setSize(Gr.screenSetting.screenWidthLiuHai,i.height)):(s.y=Gr.screenSetting.liuHaiHeightTop,s.setSize(i.width,i.height-Gr.screenSetting.screenHeightLiuHai))}else s.setSize(i.width,i.height);return i.addChild(s),s}static getLayerHeight(e){if(Engine.borwer.isLiuHai)switch(e){case re.loader:return Gr.screenSetting.screenHeight;default:return Gr.screenSetting.screenHeightLiuHai}return Gr.screenSetting.screenHeight}static getLayerWidth(e){if(Engine.borwer.isLiuHai)switch(e){case re.loader:return Gr.screenSetting.screenWidth;default:return Gr.screenSetting.screenWidthLiuHai}return Gr.screenSetting.screenWidth}}re.dict=new Dictionary,window.MenuLayer=re;class oe extends fgui.Window{constructor(){super(...arguments),this.isAddedStage=!1}get isShowed(){return!!this.contentPane&&null!=this.parent}onWindowWillShow(){this.contentPane&&this.callChildOnWindowWillShow(this.contentPane),this.setScreenSize(),this.isAddedStage||(this.isAddedStage=!0,Laya.stage.on(Laya.Event.RESIZE,this,this.setScreenSize))}onWindowWillHide(){this.contentPane&&this.callChildOnWindowWillHide(this.contentPane),this.isAddedStage=!1,Laya.stage.off(Laya.Event.RESIZE,this,this.setScreenSize)}setScreenSize(){this.contentPane&&(this.windowContainer&&void 0!==this.windowContainer.menuLayer?Gr.screenSetting.isLandsape?(this.width=re.getLayerWidth(this.windowContainer.menuLayer),this.height=this.windowContainer.height,this.contentPane.width=this.width,this.contentPane.height=this.height):(this.width=this.windowContainer.width,this.height=re.getLayerHeight(this.windowContainer.menuLayer),this.contentPane.width=this.width,this.contentPane.height=this.height):(this.width=Gr.screenSetting.screenWidth,this.height=Gr.screenSetting.screenHeight,this.contentPane.width=Gr.screenSetting.screenWidth,this.contentPane.height=Gr.screenSetting.screenHeight),this.callChildOnWindowResize(this.contentPane))}callChildOnWindowWillShow(e){if(e){let t=e.onWindowWillShow;if(t&&t.apply(e),e._children)for(let t=0;t<e._children.length;t++)this.callChildOnWindowWillShow(e._children[t])}}callChildOnWindowWillHide(e){if(e){let t=e.onWindowWillHide;if(t&&t.apply(e),e._children)for(let t=0;t<e._children.length;t++)this.callChildOnWindowWillHide(e._children[t])}}callChildOnWindowResize(e){if(e){let t=e.onWindowResize;if(t&&t.apply(e),e._children)for(let t=0;t<e._children.length;t++)this.callChildOnWindowResize(e._children[t])}}}!function(e){e[e.FguiPackage=0]="FguiPackage",e[e.FspritePackage=1]="FspritePackage",e[e.Image=2]="Image",e[e.TEXTURE2D=3]="TEXTURE2D",e[e.Buffer=4]="Buffer",e[e.Sound=5]="Sound",e[e.Text=6]="Text",e[e.Json=7]="Json",e[e.Xml=8]="Xml",e[e.Font=9]="Font",e[e.TTF=10]="TTF",e[e.PKM=11]="PKM"}(y||(y={}));var le,ce=Laya.Loader;class he{static get layaLoaderType2AssetItemTypeDict(){if(!he._layaLoaderType2AssetItemTypeDict){let e=new Dictionary;e.add(ce.IMAGE,y.Image),e.add(ce.TEXTURE2D,y.TEXTURE2D),e.add(ce.BUFFER,y.Buffer),e.add(ce.SOUND,y.Sound),e.add(ce.TEXT,y.Text),e.add(ce.JSON,y.Json),e.add(ce.XML,y.Xml),e.add(ce.FONT,y.Font),e.add(ce.TTF,y.TTF),he._layaLoaderType2AssetItemTypeDict=e}return he._layaLoaderType2AssetItemTypeDict}static get assetItemType2LayaLoaderTypeDict(){if(!he._assetItemType2LayaLoaderTypeDict){let e=this.layaLoaderType2AssetItemTypeDict.__getDict(),t=new Dictionary;for(let i in e)t[e[i]]=e;he._assetItemType2LayaLoaderTypeDict=t}return he._assetItemType2LayaLoaderTypeDict}static layaLoaderType2AssetItemType(e){return he.layaLoaderType2AssetItemTypeDict.getValue(e)}static assetItemType2LayaLoaderType(e){return he.assetItemType2LayaLoaderTypeDict.getValue(e)}static getAssetItemKey(e){return e.type+" "+e.url}}class ue{}ue.GameHome="GameHome",ue.GameLaunch="GameLaunch",ue.ModuleLogin="ModuleLogin",ue.Sound="Sound",function(e){e[e.None=0]="None",e[e.Tab=2]="Tab",e[e.Subwindow=3]="Subwindow"}(le||(le={}));class me{}me.Test="Test",me.GameBattle_onSyncNormal="GameFrame_onSyncNormal",me.GameBattle_onSyncChasingFrame="GameBattle_onSyncChasingFrame",me.GameBattle_onEntityCreate="GameBattle_onEntityCreate",me.GameBattle_onEntityRemove="GameFrame_onEntityRemove",me.GameBattle_onEntityRollbackBegin="GameFrame_onEntityRollbackBegin",me.GameBattle_onEntityRollbackEnd="GameBattle_onEntityRollbackEnd",me.GameBattle_onShowDamageUI="GameBattle_onShowDamageUI",me.GameBattle_onShowHitUI="GameFrame_onShowHitUI",me.GameBattle_onShakeScreen="GameFrame_onShakeScreen",me.GameBattle_onScreenScale="GameBattle_onScreenScale",me.GameBattle_onScreenMove="GameBattle_onScreenMove",me.GameBattle_onAnimNotify="GameFrame_onAnimNotify",me.GameBattle_onChangeNotify="GameFrame_onChangeNotify",me.GameBattle_onCharacterBorn="GameBattle_onCharacterBorn",me.GameBattle_OnViewAlphaChange="GameBattle_OnViewAlphaChange",me.GameBattle_onPlaySound="GameFrame_onPlaySound",me.GameBattle_onPlaySoundBehit="GameFrame_onPlaySoundBehit",me.GameBattle_onTiggerEffectScreenShow="GameBattle_onTiggerEffectScreenShow",me.GameBattle_onTiggerEffectScreenHide="GameBattle_onTiggerEffectScreenHide",me.GameBattle_onSceneFadeOut="GameFrame_onSceneFadeOut",me.GameBattle_onTiggerUIScreenShow="GameBattle_onTiggerUIScreenShow",me.GameBattle_onTiggerUIScreenHide="GameBattle_onTiggerUIScreenHide",me.GameBattle_onTriggerChangeSceneBg="GameBattle_onTriggerChangeSceneBg",me.GameBattle_onBossAppear="GameBattle_onBossAppear",me.GameBttle_showBossSpecialView="GameBttle_showBossSpecialView",me.GameBattle_onShowGameStart="GameBattle_onShowGameStart",me.GameBattle_onServerError2300="GameBattle_onServerError2300",me.GameBattle_MonsterCreater="GameBattle_nextAirWallMonster",me.GameBattle_WaveChange="GameBattle_WaveChange",me.GameBattle_MonsterHpChange="GameBattle_MonsterHpChange",me.GameBattle_EntityTeleport="GameBattle_EntityTeleport",me.GameBattle_PlayerRevive="GameBattle_PlayerRevive",me.GameBattle_EntityDead="GameBattle_EntityDead",me.GameFrame_OpenMenu="GameFrame_OpenMenu",me.GameFrame_CloseMenu="GameFrame_CloseMenu",me.GameFrame_ReLoginData_Begin="GameFrame_ReLoginData_Begin",me.GameFrame_ReLoginData_End="GameFrame_ReLoginData_End",me.GameFrame_Everyday_Update="GameFrame_Everyday_Update",me.GameFrame_HideOpenDialog="GameFrame_HideOpenDialog",me.GameFrame_ShowOpenDialog="GameFrame_ShowOpenDialog",me.GameFrame_TeamMemberNetStateChange="GameFrame_TeamMemberStateChange",me.GameFrame_TeamMemberLeave="GameFrame_TeamMemberLeave",me.GameFrame_UseItem="GameFrame_UseItem",me.GameFrame_ConsumeItem="GameFrame_ConsumeItem",me.GameFrame_HeroLevelUp="GameFrame_HeroLevelUp",me.GameFrame_HeroStarUp="GameFrame_HeroStarUp",me.GameFrame_AddHero="GameFrame_AddHero",me.GameFrame_HeroSkillLevel="GameFrame_HeroSkillLevel",me.GameFrame_HeroLeveling="GameFrame_HeroLeveling",me.GameFrame_UpdateEXP="GameFrame_UpdateEXP",me.GameFrame_UpdateProp="GameFrame_UpdateProp",me.GameFrame_BackUpData="GameFrame_BackUpData",me.GameFrame_RestoreData="GameFrame_RestoreData",me.GameFrame_ItemExceedBound="GameFrame_ItemExceedBound",me.GameFrame_LevelExceedBound="GameFrame_LevelExceedBound",me.GameFrame_LevelExceedMaxLevelInLoop="GameFrame_LevelExceedMaxLevelInLoop",me.GameFrame_EquipStarUp="GameFrame_EquipStarUp",me.GameFrame_EquipLevelUp="GameFrame_EquipLevelUp",me.GameFrame_EquipQualitySelect="GameFrame_EquipQualitySelect",me.GameFrame_EquipQualitySort="GameFrame_EquipQualitySort",me.GameFrame_EquipItemSelect="GameFrame_EquipItemSelect",me.GameFrame_HeroSelectEquip="GameFrame_HeroSelectEquip",me.GameFrame_BattlePlanDataUpdate="GameFrame_BattlePlanDataUpdate",me.GameFrame_BattlePlanUnlockNewTeam="GameFrame_BattlePlanUnlockNewTeam",me.GameFrame_BattlePlanChangeTeamName="GameFrame_BattlePlanChangeTeamName",me.GameFrame_BattlePlanChangeHero="GameFrame_BattlePlanChangeHero",me.GameFrame_BattlePlanTeamCentern="GameFrame_BattlePlanTeamCentern",me.GameFrame_BattlePlanUnlockNewHeroChair="GameFrame_BattlePlanUnlockNewHeroChair",me.GameFrame_BattlePlanSelectedTeam="GameFrame_BattlePlanSelectedTeam",me.GameFrame_BattlePlanSecondHero="GameFrame_BattlePlanSecondHero",me.GameFrame_BattlePlanRefreshCommonSkill="GameFrame_BattlePlanRefreshCommonSkill",me.GameFrame_HomeWindowBattleStartBtn="GameFrame_HomeWindowBattleStartBtn",me.GameFrame_HeroWindowEquipPanel="GameFrame_HeroWindowEquipPanel",me.GameFrame_HeroPanelBack="GameFrame_HeroPanelBack",me.Gameframe_HeroEquipClose="Gameframe_HeroEquipClose",me.GameFrame_BattleEnterOnClick="GameFrame_BattleEnterOnClick",me.GameFrame_SectionEnterOnClick="GameFrame_SectionEnterOnClick",me.GameFrame_SectionDeltaEnterOnClick="GameFrame_SectionDeltaEnterOnClick",me.GameFrame_BattlePlanEnter="GameFrame_BattlePlanEnter",me.GameFrame_GuideJoystickFinish="GameFrame_GuideJoystickFinish",me.GameFrame_BattleOneWave="GameFrame_GuideAttackStart",me.GameFrame_GuideAttackFinish="GameFrame_GuideAttackFinish",me.GameFrame_GuideFirSkillStart="GameFrame_GuideFirSkillStart",me.GameFrame_GuideFirSkillEnd="GameFrame_GuideFirSkillEnd",me.GameFrame_GuideBattleEndRemove="GameFrame_GuideBattleEndRemove",me.GameFrame_SectionBackBtnOnClick="GameFrame_SectionBackBtnOnClick",me.GameFrame_HomeHeroBtnOnClick="GameFrame_HomeHeroBtnOnClick",me.GameFrame_HeroPanelChooseHero="GameFrame_HeroPanelChooseHero",me.GameFrame_HeroBattleChooseHero="GameFrame_HeroBattleChooseHero",me.GameFrame_HeroBattleHero="GameFrame_HeroBattleHero",me.GameFrame_HeroInfoShowAddExpPanel="GameFrame_HeroInfoShowAddExpPanel",me.GameFrame_HeroExpIncreaseByItem="GameFrame_HeroExpIncreaseByItem",me.GameFrame_HeroChooseFinish="GameFrame_HeroChooseFinish",me.gameFrame_GuideOpenLevelUpPanel="gameFrame_GuideOpenLevelUpPanel",me.gameFrame_GuideEquipUIFinish="gameFrame_GuideEquipUIFinish",me.gameFrame_GuideEquipList="gameFrame_GuideEquipUIFinish",me.gameFrame_HeroEquip="gameFrame_HeroEquip",me.GameFrame_FinishGuideOpenHeroEquip="GameFrame_FinishOpenHeroEquip",me.GameFrame_OpenHeroEquipList="GameFrame_OpenHeroEquipList",me.GameFrame_gameStart="GameFrame_onShowGameStart",me.GameFrame_SectionFinishSuccess="GameFrame_SectionFinishSuccess",me.GameFrame_HomeEquipBtnOnClick="GameFrame_HomeEquipBtnOnClick",me.GameFrame_EquipSelectFirst="GameFrame_EquipSelectFirst",me.GameFrame_EquipStrengthenBtn="GameFrame_EquipStrengthenBtn",me.GameFrame_EquipStrengthenBtn2="GameFrame_EquipStrengthenBtn2",me.GameFrame_EquipStrengthenEnterBtn="GameFrame_EquipStrengthenEnterBtn",me.GameFrame_BattleNormalBtn="GameFrame_BattleNormal",me.GameFrame_BattleSpecialBtn="GameFrame_BattleSpecialBtn",me.GameFrame_BattleSpecialList="GameFrame_BattleSpecialList",me.GameFrame_GuideChangeHero="GameFrame_GuideChangeHero",me.GameFrame_BtnBackOnClick="GameFrame_BtnBackOnClick",me.GameFrame_HeroLevelGuideUpClose="GameFrame_HeroLevelUpClose";class ge{static setChildWindow(e,t){if(e&&(e.moduleWindow=t,e._children))for(let i=0;i<e._children.length;i++)this.setChildWindow(e._children[i],t)}static callChildOnWindowInited(e){if(e){let t=e.onWindowInited;if(t&&t.apply(e),e._children)for(let t=0;t<e._children.length;t++)this.callChildOnWindowInited(e._children[t])}}static callChildOnWindowDestory(e){let t;if(e instanceof fgui.GObject&&(t=e.displayObject),e){let i=e.onWindowDestory;if(i&&i.apply(e))return;for(let e=t.numChildren-1;e>=0;e--){let i=t.getChildAt(e);i.$owner&&this.callChildOnWindowDestory(i.$owner)}}}static callChildOnWindowShow(e){if(e){let t=!0,i=e.onWindowShow;if(i){if(void 0!==e.whenSelfVisiableCallWindowShowAndHide){e.whenSelfVisiableCallWindowShowAndHide&&0==e.visible&&(t=!1)}t&&i.apply(e)}if(t&&e._children)for(let t=e._children.length-1;t>=0;t--)this.callChildOnWindowShow(e._children[t])}}static callChildOnWindowHide(e){if(e){let t=!0,i=e.onWindowHide;if(i){if(void 0!==e.whenSelfVisiableCallWindowShowAndHide){e.whenSelfVisiableCallWindowShowAndHide&&0==e.visible&&(t=!1)}t&&i.apply(e)}if(t&&e._children)for(let t=0;t<e._children.length;t++)this.callChildOnWindowHide(e._children[t])}}static callChildOnTabShow(e){if(e){let t=e.onTabShow;if(t&&t.apply(e),e._children)for(let t=0;t<e._children.length;t++)this.callChildOnTabShow(e._children[t])}}static callChildOnTabHide(e){if(e){let t=e.onTabHide;if(t&&t.apply(e),e._children)for(let t=0;t<e._children.length;t++)this.callChildOnTabHide(e._children[t])}}static autoScreenScaleShrink(e,t,i){let s=Gr.screenSetting.screenScaleShrink;if(e.scaleX=s,e.scaleY=s,t){let a=fgui.GRoot.inst;switch(t){case Laya.Stage.ALIGN_LEFT:e.x=0;break;case Laya.Stage.ALIGN_CENTER:e.x=.5*(a.width-e.width*s);break;case Laya.Stage.ALIGN_RIGHT:e.x=a.width-e.width*s}switch(i){case Laya.Stage.ALIGN_TOP:e.y=0;break;case Laya.Stage.ALIGN_MIDDLE:e.y=.5*(a.height-e.height*s);break;case Laya.Stage.ALIGN_BOTTOM:e.y=a.height-e.height*s}}}static autoScreenScaleShrink2(e,t=1){let i=Gr.screenSetting.screenScaleShrinkMax;e.scaleX=i*t,e.scaleY=i*t,e.parent&&(e.x=.5*e.parent.width,e.y=.5*e.parent.height)}static autoScreenScale(e,t,i){let s=Gr.screenSetting.screenScaleExpand;if(e.scaleX=s,e.scaleY=s,t){let a=fgui.GRoot.inst;switch(t){case Laya.Stage.ALIGN_LEFT:e.x=0;break;case Laya.Stage.ALIGN_CENTER:e.x=.5*(a.width-e.width*s);break;case Laya.Stage.ALIGN_RIGHT:e.x=a.width-e.width*s}switch(i){case Laya.Stage.ALIGN_TOP:e.y=0;break;case Laya.Stage.ALIGN_MIDDLE:e.parent?(this.helpPoint.y=.5*(a.height-e.height*s),this.helpPoint=e.parent.globalToLocal(0,this.helpPoint.y,this.helpPoint),e.y=this.helpPoint.y):e.y=.5*(a.height-e.height*s);break;case Laya.Stage.ALIGN_BOTTOM:e.y=a.height-e.height*s}}}static autoScreenScale2(e){let t=Gr.screenSetting.screenScaleExpand;e.scaleX=t,e.scaleY=t,e.parent&&(e.x=.5*e.parent.width,e.y=.5*e.parent.height)}static autoScreenScale3(e){let t=Gr.screenSetting.screenScaleExpand;e.scaleX=t,e.scaleY=t}static autoScreenSize(e,t,i){let s=Gr.screenSetting.screenScaleExpand;if(e.width=e.sourceWidth*s,e.height=e.sourceHeight*s,t){let s=fgui.GRoot.inst;switch(t){case Laya.Stage.ALIGN_LEFT:e.x=0;break;case Laya.Stage.ALIGN_CENTER:e.x=.5*(s.width-e.width);break;case Laya.Stage.ALIGN_RIGHT:e.x=s.width-e.width}switch(i){case Laya.Stage.ALIGN_TOP:e.y=0;break;case Laya.Stage.ALIGN_MIDDLE:e.parent?(this.helpPoint.y=.5*(s.height-e.height),this.helpPoint=e.parent.globalToLocal(0,this.helpPoint.y,this.helpPoint),e.y=this.helpPoint.y):e.y=.5*(s.height-e.height);break;case Laya.Stage.ALIGN_BOTTOM:e.y=s.height-e.height}}}static autoParentSize(e,t,i){let s=Gr.screenSetting.screenScaleExpand;if(e.width=e.sourceWidth*s,e.height=e.sourceHeight*s,t){let s=fgui.GRoot.inst;switch(t){case Laya.Stage.ALIGN_LEFT:e.x=0;break;case Laya.Stage.ALIGN_CENTER:e.x=.5*(s.width-e.width);break;case Laya.Stage.ALIGN_RIGHT:e.x=s.width-e.width}switch(i){case Laya.Stage.ALIGN_TOP:e.y=0;break;case Laya.Stage.ALIGN_MIDDLE:e.y=.5*(s.height-e.height);break;case Laya.Stage.ALIGN_BOTTOM:e.y=s.height-e.height}}}static centerScreen(e){e.x=.5*(Gr.screenSetting.screenWidth-e.width),e.y=.5*(Gr.screenSetting.screenHeight-e.height)}static centerScreenForCenter(e){e.x=.5*Gr.screenSetting.screenWidth,e.y=.5*Gr.screenSetting.screenHeight}static setScreenSize(e){e.width=Gr.screenSetting.screenWidth,e.height=Gr.screenSetting.screenHeight}static getValueForPath(e,t,...i){return e.endsWith("()")?ge.getFunResultForPath(e,t,...i):ge.getFieldValueForPath(e,t)}static getFunResultForPath(e,t,...i){if(!e.endsWith("()"))return ge.getFieldValueForPath(e,t);{e=e.replace("()","");let s=ge.getFieldValueForPath(e,t);if(s){let a=e.split(/[\.\/]/);if(1==a.length)return 1==i.length?s.apply(t,i[0]):s.apply(t,i);{let e="",n="";for(let t=0;t<a.length-1;t++)e+=n+a[t],n=".";let r=ge.getFieldValueForPath(e,t);return 1==i.length?s.apply(r,i[0]):s.apply(r,i)}}}}static getFieldValueForPath(e,t){t||(t=window)||(t=this);let i=e.split(/[\.\/]/),s=t;for(let e=0;e<i.length;e++){if(!s[i[e]])return null;s=s[i[e]]}return s}static setStringsSource(e){let t=fgui.TranslationHelper.strings={},i=e.getConfigList();for(let e=0;e<i.length;e++){let r=i[e],o=r.dict.getValue("name"),l=r.dict.getValue("value"),c=o.indexOf("-");if(null!=l&&-1!=c){var s=o.substr(0,c),a=o.substr(c+1),n=t[s];n||(n={},t[s]=n),n[a]=l}}}static setGray(e){if(e){if(!ge.grayscaleFilters){var t=new Laya.ColorFilter(ge.grayscaleMat);ge.grayscaleFilters=[t]}e.displayObject.filters=ge.grayscaleFilters}}static clearFilters(e){e&&(e.displayObject.filters=null)}static get saturationFilters(){return ge._saturationFilters||(ge._saturationFilters=[new Laya.ColorFilter(ge.saturation)]),ge._saturationFilters}static get saturationFilters2(){return ge._saturationFilters2||(ge._saturationFilters2=[new Laya.ColorFilter(ge.saturation2)]),ge._saturationFilters2}static get saturationFilters3(){return ge._saturationFilters3||(ge._saturationFilters3=[(new Laya.ColorFilter).adjustColor(0,-50,-100,0)]),ge._saturationFilters3}static halfStaturation(e){e&&(e.displayObject.filters=ge.saturationFilters)}static half2Staturation(e){e&&(e.displayObject.filters=ge.saturationFilters2)}static half3Staturation(e){e&&(e.displayObject.filters=ge.saturationFilters3)}static boundEffect(e,t=1e3){e.setPivot(.5,.5),e.setScale(.5,.5),Laya.Tween.to(e,{scaleX:1,scaleY:1},t,Laya.Ease.backOut,Laya.Handler.create(null,()=>{}),0,!0,!0)}}ge.helpPoint=new Laya.Point,ge.grayscaleMat=[.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,0,0,0,1,0],ge.grayscaleFilters=null,ge.normalFilters=null,ge.saturation=[.5,0,0,0,0,0,.5,0,0,0,0,0,.5,0,0,0,0,0,1,0],ge.saturation2=[.25,0,0,0,0,0,.25,0,0,0,0,0,.25,0,0,0,0,0,1,0];var de,pe,Se,Ce,fe,ye,we,_e,Le,ve,Te,Ge,Ie=Laya.Point,Pe=Laya.Handler;class ke extends oe{constructor(){super(...arguments),this.sShowComplete=new Signal,this.sHideComplete=new Signal,this.menuIsCreated=!1,this.isDestoryed=!1,this.enableShowAnimation=!0,this.enableShowSignal=!0,this.enableHideSignal=!0,this._loadAssets=[],this._dynamicAssetsList=[],this.toPoint=new Ie,this.srcPoint=new Ie,this.sShowSubwindowComplete=new Signal,this.sHideSubwindowComplete=new Signal,this.subwindowDict=new Dictionary,this.subwindowStack=[],this.tabDict=new Dictionary,this.tabHistorys=[],this.tabCtrlViewsMap=new Map,this.sOpenTab=new Typed2Signal}static async AsyncEnableOpen(){return Promise.resolve(!0)}isOpenSubOrTab(e){return this.menuParameter.openIndex==e}addAssetForFguiPackagename(e){this._loadAssets.push({url:e,type:y.FguiPackage})}addAssetForFguiComponent(e){let t=e.DependPackages;for(let e=0;e<t.length;e++)this.addAssetForFguiPackagename(t[e])}getLoadAssets(e,t){let i=this._loadAssets;for(let s=0;s<i.length;s++){let a=he.getAssetItemKey(i[s]);t.hasKey(a)||(e.push(i[s]),t.add(a,i[s]))}return e}unloadAssetForFguiPackagename(e){switch(e){case ue._ResImageUIV1:case ue.__ResFont:case ue.CommonBase:case ue.CommonGame:case ue.CommonFx:case ue.SystemModuleDialog:return}Gr.asset.unloadFgui(e)}unloadAssetForFguiComponent(e){let t=e.DependPackages;for(let e=0;e<t.length;e++)this.unloadAssetForFguiPackagename(t[e])}unloadAssetFroAssetList(){for(let e=0;e<this._loadAssets.length;e++)this.unloadAssetForFguiPackagename(this._loadAssets[e].url)}addDynamicAsset(e){e&&this._dynamicAssetsList.push(e)}addDynmicAssetForAvatarAll(e){e.getAllAssset(this._dynamicAssetsList)}generateAssetsForDynmic(){this._dynamicAssetsList=[]}getLoadAssetsForDynamic(e,t){let i=this._dynamicAssetsList;for(let s=0;s<i.length;s++){let a=he.getAssetItemKey(i[s]);t.hasKey(a)||(e.push(i[s]),t.add(a,i[s]))}let s=this.subwindowDict.getValues();for(let i=0;i<s.length;i++)s[i].getLoadAssetsForDynamic(e,t);return e}onInit(){this.onMenuCreate(),super.onInit()}onMenuCreate(){this.setChildWindow(this.contentPane),this.callChildOnWindowInited(this.contentPane),this.menuIsCreated=!0,this.onMenuOpen(this.menuParameter)}setCloseBtnEvent(){this.contentPane&&this.contentPane.m_frame&&this.contentPane.m_frame.getChild("closeBtn")&&this.contentPane.m_frame.getChild("closeBtn").onClick(this,this.menuClose)}setBackBtnEvent(){this.contentPane&&this.contentPane.m_frame&&this.contentPane.m_frame.getChild("closeBtn")&&this.contentPane.m_frame.getChild("closeBtn").onClick(this,this.menuBack)}onMenuOpen(e){switch(this.enableShowSignal=!0,this.enableShowAnimation=!0,this.menuParameter=e,e.openType){case le.Subwindow:this.enableShowSignal=!1,this.enableShowAnimation=!1,this.openSubwindowByIndex(e.openIndex,!1,...e.args);break;case le.Tab:this.openTab(e.openIndex);break;default:Gr.event.dispatch(me.GameFrame_OpenMenu,this.menuId,e.openType)}}windowShow(){this.windowContainer?this.showOn(this.windowContainer):this.show()}menuShow(e){switch(this.menuParameter.openType){case le.Subwindow:this.contentPane||this.onInit();break;default:this.showOn(e)}}menuClose(){Gr.menu.close(this.menuId)}menuBack(){Gr.menu.back(this.menuId)}destory(){this.callChildOnWindowDestory(this.contentPane),this.onMenuDestory(),this.sShowComplete.removeAll(),this.sHideComplete.removeAll(),this.sShowSubwindowComplete.removeAll(),this.sHideSubwindowComplete.removeAll(),this.tabDict.clear();let e=this.subwindowDict.getValues();for(let t=0;t<e.length;t++){e[t].destory()}this.subwindowDict.clear(),this.contentPane&&(this.contentPane.dispose(),this.contentPane=null),this.unloadAssetFroAssetList(),super.dispose(),this.isDestoryed=!0}onMenuDestory(){}doShowAnimation(){this.onWindowWillShow(),1==this.openAnimation?(this.srcPoint.x=this.panel.x,this.srcPoint.y=this.panel.y,this.panel.setScale(.1,.1),this.calBuutonPos(),this.panel.setXY(this.toPoint.x,this.toPoint.y),Laya.Tween.to(this.panel,{scaleX:1,scaleY:1,x:this.srcPoint.x,y:this.srcPoint.y},300,Laya.Ease.quadOut,Pe.create(this,()=>{this.onShown()}))):super.doShowAnimation()}get panel(){return this.contentPane.m_panel?this.contentPane.m_panel:this.contentPane}doHideAnimation(){this.onWindowWillHide(),1==this.closeAnimation?(this.panel.setScale(1,1),this.calBuutonPos(),Laya.Tween.to(this.panel,{scaleX:.1,scaleY:.1,x:this.toPoint.x,y:this.toPoint.y},300,Laya.Ease.quadOut,Pe.create(this,()=>{this.panel.x=this.srcPoint.x,this.panel.y=this.srcPoint.y,this.hideImmediately()}))):super.doHideAnimation()}get openAnimation(){return null==this.menuConfig?0:this.menuConfig.openAnimation}get closeAnimation(){return null==this.menuConfig?0:this.menuConfig.closeAnimation}get menuConfig(){return this.menuId>0?Gr.config.menu.getConfig(this.menuId):null}calBuutonPos(){}onShown(){this.enableHideSignal=!0,this.onShowComplete(),this.contentPane&&this.callChildOnWindowShow(this.contentPane)}onMenuClose(){this.hide();let e=this.subwindowDict.getValues();for(let t=0;t<e.length;t++){e[t].hide()}}onHide(){this.enableShowSignal=!0,this.onHideComplete(),this.clearTabHistorys(),this.contentPane&&this.callChildOnWindowHide(this.contentPane)}onShowComplete(){this.enableShowSignal&&this.sShowComplete.dispatch()}onHideComplete(){this.enableHideSignal&&this.sHideComplete.dispatch()}getSubwindow(e){return this.subwindowDict.getValue(e)}registerSubwindow(e){this.subwindowDict.add(e.subwindowIndex,e)}__onSubWindowClose(e){for(let t=this.subwindowStack.length-1;t>=0;t--)this.subwindowStack[t]==e&&this.subwindowStack.splice(t,1)}__getLastOpenSubWindow(e){for(let t=this.subwindowStack.length-1;t>=0;t--){let i=this.subwindowStack[t];if(!e||-1==e.indexOf(i))return i}return null}closeAllSubwindowSelf(e){let t=[];for(let e=this.subwindowStack.length-1;e>=0;e--)t.push(this.subwindowStack[e]);for(let i=0;i<t.length;i++){let s=t[i];e&&-1!=e.indexOf(s)||s.closeSelf()}}closeLastSubwindowSelf(){let e=this.__getLastOpenSubWindow();e&&e.closeSelf()}getLastMenuParameter(){let e=this.__getLastOpenSubWindow();return e?e.menuParameter:this.menuParameter}openSubwindow(e,t=!1,...i){e.__backSubWindow=this.__getLastOpenSubWindow([e]),this.menuParameter.openType=le.Subwindow,this.menuParameter.openIndex=e.subwindowIndex,this.menuParameter.args=i;let s={openType:this.menuParameter.openType,openIndex:this.menuParameter.openIndex,args:i,dontCloseOther:t};if(!t){let t={on:()=>{if(e.whenOpenCloseMainwindow&&(this.enableHideSignal=!1,this.hideImmediately()),e.whenOpenCloseOthersubwindow){let t=this.subwindowDict.getValues;for(let i=0;i<t.length;i++){let s=t[i];s!=e&&(s.hideImmediately(),this.__onSubWindowClose(s))}}this.sShowSubwindowComplete.dispatch()}};e.sShowComplete.addOnce(t.on,t)}let a=this.subwindowStack.indexOf(e);-1!=a&&this.subwindowStack.splice(a,1),this.subwindowStack.push(e),e.menuIsCreated?e.onMenuOpen(s):e.menuParameter=s,e.showOn(this.windowContainer),Gr.event.dispatch(me.GameFrame_OpenMenu,this.menuId,s.openType,s.openIndex)}openSubwindowByIndex(e,t=!1,...i){let s=this.getSubwindow(e);this.openSubwindow(s,t,...i)}onSubwindowBack(e){this.menuParameter.openType=le.None,this.menuParameter.openIndex=0,this.sShowComplete.addOnce(()=>{e.hide()},e),this.windowContainer.parent&&e.hide(),this.showOn(this.windowContainer),this.subwindowStack=[]}getTabDispyaObjects(e){if(this.tabDict.hasKey(e))return this.tabDict.getValue(e);let t=[];return this.tabDict.add(e,t),t}registerControllerTabViews(e,t=null){t||(t=this.contentPane);let i=t.numChildren;for(let a=0;a<i;a++){let i=t.getChildAt(a);if(i._gears&&i._gears.length>0)for(let t of i._gears)if(t&&t.controller==e&&t instanceof fgui.GearDisplay&&t.pages&&t.pages.length>0)for(let e of t.pages){let t=toInt(e);var s;this.registerTab(t,i),this.tabCtrlViewsMap.has(t)?s=this.tabCtrlViewsMap.get(t):(s=[],this.tabCtrlViewsMap.set(t,s)),s.push(i)}}}registerControllerTab(e,t=null){t||(t=this.contentPane);let i=t.numChildren;for(let s=0;s<i;s++){let i=t.getChildAt(s);if(i._gears&&i._gears.length>0)for(let t of i._gears)if(t&&t.controller==e&&t instanceof fgui.GearDisplay&&t.pages&&t.pages.length>0)for(let e of t.pages){let t=toInt(e);this.registerTab(t,i)}}}registerTab(e,t){this.getTabDispyaObjects(e).push(t)}setTabVisiable(e,t){let i;i=e instanceof Array?e:this.getTabDispyaObjects(e);for(let e=0;e<i.length;e++)t?this.callChildOnTabShow(i[e]):i[e].visible&&this.callChildOnTabHide(i[e]),i[e].visible=t}setOpenTab(e){this.menuParameter.openIndex=e;let t=this.tabDict.getKeys();for(let i=0;i<t.length;i++)t[i]!=e&&this.setTabVisiable(t[i],!1);this.tabCtrlViewsMap.forEach((t,i)=>{i!=e&&this.setTabVisiable(t,!1)});var i=this.tabCtrlViewsMap.get(e);i&&this.setTabVisiable(i,!0),this.setTabVisiable(e,!0),this.onOpenTab(e)}openTab(e){this.tabHistorys.push(e),this.setOpenTab(e),this.sOpenTab.dispatch(e,this),Gr.event.dispatch(me.GameFrame_OpenMenu,this.menuId,le.Tab,e)}onOpenTab(e){}backTab(){if(this.tabHistorys.length>0){let e;for(let t=this.tabHistorys.length-1;t>=0;t--)this.tabHistorys[t]==this.menuParameter.openIndex&&t>0&&this.tabHistorys[t-1]!=this.menuParameter.openIndex&&(e=this.tabHistorys[t-1]);void 0===e?this.menuBack():this.openTab(e)}}clearTabHistorys(){this.tabHistorys=[]}setChildWindow(e){ge.setChildWindow(e,this)}callChildOnWindowInited(e){ge.callChildOnWindowInited(e)}callChildOnWindowDestory(e){ge.callChildOnWindowDestory(e)}callChildOnWindowShow(e){ge.callChildOnWindowShow(e)}callChildOnWindowHide(e){ge.callChildOnWindowHide(e)}callChildOnTabShow(e){ge.callChildOnTabShow(e)}callChildOnTabHide(e){ge.callChildOnTabHide(e)}}class Me extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("ModuleLogin","LoginWindowUI")}constructFromXML(e){super.constructFromXML(e),this.m_Show=this.getController("Show"),this.m_txt_resVer=this.getChild("txt_resVer"),this.m_txt_gamever=this.getChild("txt_gamever"),this.m_screenBG=this.getChild("screenBG"),this.m_loginPanel=this.getChild("loginPanel"),this.m_wxPanel=this.getChild("wxPanel"),this.m_cdkPanel=this.getChild("cdkPanel"),this.m_panelCheckID=this.getChild("panelCheckID"),this.m_btnBulletin=this.getChild("btnBulletin"),this.m_panelBulletin=this.getChild("panelBulletin"),this.m_panelServer=this.getChild("panelServer")}}Me.URL="ui://4698ugpknz0c0",Me.DependPackages=["ModuleLogin","GameLaunch"],function(e){e[e.None=0]="None",e[e.Man=1]="Man",e[e.Woman=2]="Woman"}(de||(de={}));class be{constructor(){this.isAuthed=!1,this.language="",this.nickName="",this.avatarUrl="",this.gender=de.None,this.country="",this.province="",this.city="",this.unionId="",this.openId="",this.sessionId="",this.sign=""}ToString(){return" UserInfo::<br/>NickName:"+this.nickName+",<br/>AvatarUrl:"+this.avatarUrl+",<br/>OpenID:"+this.openId+",<br/>City:"+this.city+",<br/>SessionID:"+this.sessionId}}class De{constructor(){this.code=""}}class Fe{}!function(e){e[e.RemoveRankList=0]="RemoveRankList",e[e.FetchFriendRankList=1]="FetchFriendRankList",e[e.SubmitScore=3]="SubmitScore",e[e.GameOverRank=4]="GameOverRank",e[e.FetchGroupFriendRankList=5]="FetchGroupFriendRankList",e[e.NotifyTime=6]="NotifyTime"}(pe||(pe={}));class He{constructor(){this.m_stSystemInfo=null,this.m_stSdkUserInfo=null,this.m_stSdkLoginInfo=null,this.m_stSystemInfo=new Fe,this.m_stSdkUserInfo=new be,this.m_stSdkLoginInfo=new De}static get platformWX(){return Engine.borwer.isWXGame}get userInfo(){return this.m_stSdkUserInfo}get systemInfo(){return this.m_stSystemInfo}async Login(e=null,t="",i=1,s=1){return null}async Login2(e=null,t=""){return null}async CheckCdk(e,t){return null}async CheckIDCard(e,t,i){return null}async Areas(){return null}async newAndUseRole(e,t,i){return null}async useRole(e,t){return null}async FastLogin(e,t,i){return null}async GameDoSdkAuthAsync(){return null}async GameDoSdkLoginAsync(){return new Promise(e=>{e(this.m_stSdkLoginInfo)})}GetLaunchOptions(){return{}}async UserCheck(){return new Promise(e=>{e(!0)})}async Share(e,t,i){return null}}He.sGetUserInfoBtnVisiable=new TypedSignal;class xe extends He{constructor(){super()}async Login(e=null,t="",i=1,s=1){net.config.channel="mine";let a=e;return isNullOrEmpty(a)&&(a=Ae.LocationUrlParam("name")||Ae.RandName(2,7)),new Promise(e=>{net.auth.mineLogin(a,t,a,s,i,function(t,i){if(t){net.logic.connect();let t=function(i){net.logic.gamerLoginS2C.off(t),e(i)};net.logic.gamerLoginS2C.on(t)}else e(i)})})}async Login2(e=null,t=""){net.config.channel="mine";let i=e;return isNullOrEmpty(i)&&(i=Ae.LocationUrlParam("name")||Ae.RandName(2,7)),new Promise(e=>{net.auth.mineLogin2(i,t,function(t,i){e(i)})})}async CheckCdk(e,t){return new Promise(i=>{net.auth.checkcdk(e,t,function(e,t){i(e?{}:t)})})}async CheckIDCard(e,t,i){return new Promise(s=>{net.auth.checkIDCard(e,t,i,function(e,t){s(e?{}:t)})})}async Areas(){return new Promise(e=>{net.auth.areas(function(t,i){t?e(i):this.Areas()})})}async newAndUseRole(e,t,i){return new Promise(s=>{net.auth.newAndUseRole(e,t,1,i,"",function(e,t){if(e){net.logic.connect();let e=function(t){net.logic.gamerLoginS2C.off(e),s(t)};net.logic.gamerLoginS2C.on(e)}else s(t)})})}async useRole(e,t){return new Promise(i=>{net.auth.useRole(e,t,function(e,t){if(e){net.logic.connect();let e=function(t){net.logic.gamerLoginS2C.off(e),i(t)};net.logic.gamerLoginS2C.on(e)}else i(t)})})}async FastLogin(e,t,i){return net.config.channel=t,new Promise(s=>{net.auth.fastLogin(e,t,i,function(e,t){if(e){net.logic.connect();let e=function(t){net.logic.gamerLoginS2C.off(e),s(t)};net.logic.gamerLoginS2C.on(e)}else s(t)})})}async GameDoSdkAuthAsync(){return this.m_stSdkUserInfo.nickName="ANTMINE-NICKNAME",this.m_stSdkUserInfo.avatarUrl="https://wx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKpmpnxfYeeUqFOlwK9x260xibs866I7NpmuHjgerLXgUk1B77HpIo2oZP0wAbnib4Lkc30N7yibYoww/132",this.m_stSdkUserInfo.gender=de.Man,this.m_stSdkUserInfo.city="上海",this.m_stSdkUserInfo.country="中国",this.m_stSdkUserInfo.language="zh_CN",this.m_stSdkUserInfo.province="上海",new Promise(e=>{e(this.m_stSdkUserInfo)})}GetLaunchOptions(){return{key1:Ae.LocationUrlParam("key1"),key2:Ae.LocationUrlParam("key2")}}}class Be extends He{constructor(){super(),this.GetSystemInfo(),wx.setKeepScreenOn&&wx.setKeepScreenOn({keepScreenOn:!0,success:function(){console.log("常亮设置成功！")}})}async WXGetSdkAuthSetting(){return new Promise(e=>{wx.getSetting({success:function(t){console.info("success: wx.getSetting",t),e(t.authSetting["scope.userInfo"])},fail:function(t){console.log("fail: wx.getSetting",t.errMsg),e(!1)}})})}async UserCheck(){return await this.WXGetSdkAuthSetting()}async WXGetSdkUserInfo(){return new Promise(e=>{console.log("发起向微信获取用户信息"),wx.getUserInfo({success:t=>{console.info("success: wx.getUserInfo",t),e(t.userInfo)},fail:t=>{console.log("fail: wx.getUserInfo",t.errMsg),e(null)}})})}async WXAuth(){let e=await this.GameDoSdkAuthAsync();for(;!e;)e=await this.GameDoSdkAuthAsync();return e}async Login(e=null,t="",i=1,s=1){let a=await this.GameDoSdkLoginAsync();for(;!a;)a=await this.GameDoSdkLoginAsync();let n=this.m_stSdkLoginInfo.code;return net.config.channel="wechat",new Promise(e=>{net.auth.sdkLogin(n,"",this.m_stSdkUserInfo.nickName,s,i,null,function(t,i){if(t){net.logic.connect();let t=function(i){net.logic.gamerLoginS2C.off(t),e(i)};net.logic.gamerLoginS2C.on(t)}else e(i)})})}async Login2(e=null,t=""){let i=await this.GameDoSdkLoginAsync();for(;!i;)i=await this.GameDoSdkLoginAsync();let s=this.m_stSdkLoginInfo.code;return net.config.channel="wechat",new Promise(e=>{net.auth.sdkLogin2(s,"",function(t,i){e(i)})})}async CheckCdk(e,t){return new Promise(i=>{net.auth.checkcdk(e,t,function(e,t){i(e?{}:t)})})}async CheckIDCard(e,t,i){return new Promise(s=>{net.auth.checkIDCard(e,t,i,function(e,t){s(e?{}:t)})})}async Areas(){return new Promise(e=>{net.auth.areas(function(t,i){t?e(i):this.Areas()})})}async newAndUseRole(e,t,i){return t=this.m_stSdkLoginInfo.code,new Promise(s=>{net.auth.newAndUseRole(e,t,1,i,"",function(e,t){if(e){net.logic.connect();let e=function(t){net.logic.gamerLoginS2C.off(e),s(t)};net.logic.gamerLoginS2C.on(e)}else s(t)})})}async useRole(e,t){return new Promise(i=>{net.auth.useRole(e,t,function(e,t){if(e){net.logic.connect();let e=function(t){net.logic.gamerLoginS2C.off(e),i(t)};net.logic.gamerLoginS2C.on(e)}else i(t)})})}async GameDoSdkAuthAsync(){let e=await this.WXGetSdkAuthSetting()?await this.WXGetSdkUserInfo():await this.WXCreateWXUserButton();return e?(this.SetUserInfo(e),new Promise(e=>{e(this.m_stSdkUserInfo)})):(console.error("GameDoSdkAuthAsync 获取授权 获取用户信息 失败"),new Promise(e=>{e(null)}))}async GameDoSdkLoginAsync(){return console.log("发起登录微信 wx.login"),new Promise(e=>{wx.login({success:t=>{console.info("success: wx.login",t),this.m_stSdkLoginInfo.code=t.code,e(this.m_stSdkLoginInfo)},fail:t=>{console.info("fail: wx.login",t),e(null)}})})}async WXCreateWXUserButton(){let e=wx.createUserInfoButton({type:"text",lang:"zh_CN",text:"",style:{left:0,top:0,width:2e3,height:2e3,lineHeight:40,textAlign:"center",fontSize:16,borderRadius:4}});return e.show(),He.sGetUserInfoBtnVisiable.dispatch(!0),new Promise(t=>{e.onTap(function(i){i.userInfo?(console.log("按钮获取用户信息成功","wxLogin auth success"),e.hide(),He.sGetUserInfoBtnVisiable.dispatch(!1),t(i.userInfo)):(console.error("按钮获取用户信息失败"),t(null))})})}SetUserInfo(e){console.info("用户信息",e),this.m_stSdkUserInfo.isAuthed=!0,this.m_stSdkUserInfo.language=e.language,this.m_stSdkUserInfo.nickName=e.nickName,this.m_stSdkUserInfo.avatarUrl=e.avatarUrl,this.m_stSdkUserInfo.gender=e.gender,this.m_stSdkUserInfo.country=e.country,this.m_stSdkUserInfo.province=e.province,this.m_stSdkUserInfo.city=e.city}GetSystemInfo(){let e=wx.getSystemInfoSync();return console.info("wx.getSystemInfoSync:",e),this.m_stSystemInfo.benchmarkLevel=e.benchmarkLevel,this.m_stSystemInfo.model=e.model,this.m_stSystemInfo.pixelRatio=e.pixelRatio,this.m_stSystemInfo.platform=e.platform,this.m_stSystemInfo.screenHeight=e.screenHeight,this.m_stSystemInfo.screenWidth=e.screenWidth,this.m_stSystemInfo.system=e.system,this.m_stSystemInfo.version=e.version,this.m_stSystemInfo.windowHeight=e.windowHeight,this.m_stSystemInfo.windowWidth=e.windowWidth,this.m_stSystemInfo.SDKVersion=e.SDKVersion,this.m_stSystemInfo}async Share(e,t,i){return new Promise(s=>{wx.shareAppMessage({title:e,imageUrl:t,query:i,success:function(){console.error("share success!"),s(!0)},fail:function(){console.error("share fail!"),s(!1)}})})}GetLaunchOptions(){return wx.getLaunchOptionsSync().query}}class Ae{static LocationUrlParam(e){if(Engine.borwer.isWXGame)return null;var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),i=window.location.search.substr(1).match(t);return null!=i?unescape(i[2]):null}static RandName(e,t,i=!0){let s="",a=e,n=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"];i&&(a=Math.round(Math.random()*(t-e))+e);for(var r=0;r<a;r++){s+=n[Math.round(Math.random()*(n.length-1))]}return s}static get platform(){return Ae._insPlatform||(Engine.borwer.isWXGame&&Ae.enableWXLogin?Ae._insPlatform=new Be:Ae._insPlatform=new xe),Ae._insPlatform}}Ae.enableWXLogin=VersionConfig.IsEnableWx,Ae._insPlatform=null,window.AntFrame=Ae;class Re extends Me{onWindowShow(){this.m_panelBulletin.m_bg.m_btn_Close.onClick(this,this.onCloseBulletin),this.m_panelServer.m_btnChange.onClick(this,this.onChangeServer),this.m_panelServer.m_btnStart.onClick(this,this.onStartGame),this.m_panelServer.m_bg.m_btn_Close.onClick(this,this.onReturnServer),this.m_panelCheckID.m_btnClose.onClick(this,this.onCloseCheckID),this.m_panelCheckID.m_btnClose.visible=!1,this.m_panelCheckID.m_btnMake.onClick(this,this.onMakeCheckID),this.m_loginPanel.m_btn_login.onClick(this,this.onClickLogin),this.m_loginPanel.m_btn_randomLogin.onClick(this,this.onClickRandomLogin),this.m_cdkPanel.m_btn_cdk.onClick(this,this.onClickCdk),Gr.net.gamerLoginS2C.on(this.GamerLoginS2C,this),Gr.event.add("SUCCESS_LOGIN",this.LoginSuccess,this),Gr.event.add("LOGIN_CDK",this.LoginCdk,this),Gr.event.add("ERROR_CDK",this.ErrorCdk,this),Gr.event.add("ERROR_IDCARD",this.ErrorIdCard,this),Gr.event.add("ERROR_AREAS",this.ErrorAreas,this),Gr.event.add("SUCCESS_AREAS",this.SucessAreas,this),Gr.event.add("INDULGE_END",this.IndulgeEnd,this),this.Init()}onWindowHide(){this.m_panelBulletin.m_bg.m_btn_Close.offClick(this,this.onCloseBulletin),this.m_panelServer.m_btnChange.offClick(this,this.onChangeServer),this.m_panelServer.m_btnStart.offClick(this,this.onStartGame),this.m_panelServer.m_bg.m_btn_Close.offClick(this,this.onReturnServer),this.m_panelCheckID.m_btnClose.onClick(this,this.onCloseCheckID),this.m_panelCheckID.m_btnMake.onClick(this,this.onMakeCheckID),this.m_loginPanel.m_btn_login.offClick(this,this.onClickLogin),this.m_loginPanel.m_btn_randomLogin.offClick(this,this.onClickRandomLogin),this.m_cdkPanel.m_btn_cdk.offClick(this,this.onClickCdk),Gr.net.gamerLoginS2C.off(this.GamerLoginS2C,this),Gr.event.remove("SUCCESS_LOGIN",this.LoginSuccess,this),Gr.event.remove("LOGIN_CDK",this.LoginCdk,this),Gr.event.remove("ERROR_CDK",this.ErrorCdk,this),Gr.event.remove("ERROR_IDCARD",this.ErrorIdCard,this),Gr.event.remove("ERROR_AREAS",this.ErrorAreas,this),Gr.event.remove("SUCCESS_AREAS",this.SucessAreas,this),Gr.event.remove("INDULGE_END",this.IndulgeEnd,this),this.Reset()}onCloseBulletin(){this.m_Show.selectedIndex=3}onChangeServer(){this.m_panelServer.m_Server.selectedIndex=1}onReturnServer(){this.m_panelServer.m_Server.selectedIndex=0}onCloseCheckID(){this.GetServer()}onMakeCheckID(){switch(this.m_panelCheckID.m_Type.selectedIndex){case 3:Gr.moduleModel.login.isIndulge?this.m_Show.selectedIndex=0:this.GetServer();break;case 1:this.SendIDCard()}}onStartGame(){let e=this.m_panelServer.lastServer;if(!e)return void Gr.system.toastText("尚未获取服务器列表！");Gr.localStorage.server=e.id;let t=this.m_panelServer.GetRole(e.id);t?Gr.sender.login.useRole(this.login_session,t.id):Gr.sender.login.newAndUseRole(this.login_session,this.m_loginPanel.account,e.id)}onClickLogin(){this.m_loginPanel.password="123",Boolean(this.m_loginPanel.account)&&Boolean(this.m_loginPanel.password)?Gr.sender.login.login(this.m_loginPanel.account,this.m_loginPanel.password,!0):Gr.system.toastText("请输入账号和密码！")}onClickRandomLogin(){this.m_loginPanel.account=Ae.RandName(2,7),Gr.sender.login.login(this.m_loginPanel.account,"123",!0)}onClickCancel(){this.m_Show.selectedIndex=0}onClickCdk(){let e=this.login_session,t=this.m_cdkPanel.cdk,i=this.m_loginPanel.account,s=this.m_loginPanel.password;Gr.sender.login.check(e,t,i,s)}GamerLoginS2C(e){e.error}LoginSuccess(e,t){this.login_session=e,this.m_panelServer.SetRoles(t);let i=this.m_loginPanel.account;VersionConfig.IsOpenIDCard&&-1==["jjsg1","jjsg2","jjsg3","jjsg4","jjsg5","jjsg6"].indexOf(i)?this.SendIDCard():this.GetServer(),this.m_Show.selectedIndex=1}LoginCdk(e){this.login_session=e,this.m_Show.selectedIndex=4}ErrorCdk(e){switch(e){case 1017:Gr.system.toastText("验证码错误！");break;case 1001:Gr.system.toastText("验证时间超时！"),this.onStartGame()}}ErrorIdCard(e){switch(e){case 0:case 1023:""!=this.m_panelCheckID.m_labName.text&&""!=this.m_panelCheckID.m_labID.text&&Gr.system.toastText("实名制验证成功！"),this.GetServer();break;case 1021:case 1022:case 1026:Gr.system.toastText("实名制验证失败！");case 1025:this.m_Show.selectedIndex=5,this.m_panelCheckID.m_Type.selectedIndex=1;break;case 1024:this.m_Show.selectedIndex=5,this.m_panelCheckID.m_Type.selectedIndex=3}}ErrorAreas(){Gr.system.toastText("拉取服务器错误！")}SucessAreas(e){e.sort((e,t)=>e.id-t.id),this.m_panelServer.Open(e)}IndulgeEnd(){if(5!=this.m_Show.selectedIndex){switch(Gr.moduleModel.login.error){case 1024:this.m_panelCheckID.m_Type.selectedIndex=0;break;default:this.m_panelCheckID.m_Type.selectedIndex=3}}}Init(){this.m_txt_gamever.text="GameVersion:"+Gr.version.localAppVersionData.toString(),this.m_txt_resVer.text="ResVersion:"+Gr.version.localResVersionData.toString(),this.StartGame()}Reset(){this.m_txt_gamever.text="",this.m_txt_resVer.text="",this.m_Show.selectedIndex=0}GetServer(){Gr.sender.login.areas()}StartGame(){Ae.platform instanceof Be&&VersionConfig.IsEnableWx?(Gr.sender.login.login("",""),this.m_Show.selectedIndex=3):this.m_Show.selectedIndex=0}SendIDCard(){let e=this.login_session,t=this.m_panelCheckID.m_labName.text,i=this.m_panelCheckID.m_labID.text;Gr.sender.login.CheckIDCard(e,t,i)}}!function(e){e[e.Login=0]="Login",e[e.LoginGuest=1]="LoginGuest",e[e.Register=2]="Register",e[e.Agreement=3]="Agreement"}(Se||(Se={}));class Ue extends ke{constructor(){super(),this.addAssetForFguiComponent(Re)}generateAssetsForDynmic(){super.generateAssetsForDynmic()}onMenuCreate(){let e=Re.createInstance();this.conent=e,this.contentPane=e,super.onMenuCreate()}onShowComplete(){super.onShowComplete()}onHideComplete(){super.onHideComplete()}}class Oe extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","WindowHomeUI")}constructFromXML(e){super.constructFromXML(e),this.m_Tab=this.getController("Tab"),this.m_bg=this.getChild("bg"),this.m_mainMenu=this.getChild("mainMenu"),this.m_chooseHero=this.getChild("chooseHero"),this.m_shop=this.getChild("shop"),this.m_chooseGameFormat=this.getChild("chooseGameFormat"),this.m_result=this.getChild("result"),this.m_menuTopPanel=this.getChild("menuTopPanel"),this.m_shareBtnBar=this.getChild("shareBtnBar")}}Oe.URL="ui://moe42ygrsqzy8a",Oe.DependPackages=["GameHome","GameLaunch"];class Ne extends Oe{}!function(e){e[e.MenuMenu=0]="MenuMenu",e[e.ChooseHero=1]="ChooseHero",e[e.Shop=2]="Shop",e[e.ChooseGameFormat=3]="ChooseGameFormat",e[e.Result=4]="Result"}(Ce||(Ce={})),window.HomeTabType=Ce;class Ee extends ke{constructor(){super(),this.addAssetForFguiComponent(Ne)}generateAssetsForDynmic(){super.generateAssetsForDynmic()}onMenuCreate(){let e=Ne.createInstance();this.conent=e,this.contentPane=e,this.registerControllerTabViews(this.conent.m_Tab),super.onMenuCreate(),v.instance.playMusic()}openTab(e){this.conent&&this.conent.m_Tab.setSelectedIndex(e),super.openTab(e)}onShowComplete(){super.onShowComplete()}onHideComplete(){super.onHideComplete()}}class We extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","WindowWarUI")}constructFromXML(e){super.constructFromXML(e),this.m_bg=this.getChild("bg"),this.m_menuTopPanel=this.getChild("menuTopPanel"),this.m_container=this.getChild("container"),this.m_chectPopupPanel=this.getChild("chectPopupPanel"),this.m_pausePanel=this.getChild("pausePanel"),this.m_shareBtnBar=this.getChild("shareBtnBar")}}We.URL="ui://moe42ygrsqzy9c",We.DependPackages=["GameHome","GameLaunch"],function(e){e[e.None=0]="None",e[e.Hero=1]="Hero",e[e.Trap=2]="Trap",e[e.Enemy=3]="Enemy",e[e.Boss=4]="Boss",e[e.Warrior=18]="Warrior",e[e.Health=5]="Health",e[e.Gold=6]="Gold",e[e.Armor=7]="Armor",e[e.Cannon=8]="Cannon",e[e.Barrel=9]="Barrel",e[e.Chest=10]="Chest",e[e.Bomb=11]="Bomb",e[e.Poison=12]="Poison",e[e.Horseshoe=13]="Horseshoe",e[e.Lightning=14]="Lightning",e[e.Multiplier=15]="Multiplier",e[e.Skull=16]="Skull"}(fe||(fe={})),function(e){e[e.Base=1]="Base",e[e.Bomb=2]="Bomb",e[e.Gun=3]="Gun",e[e.Key=4]="Key"}(ye||(ye={}));class Ve{static degToRad(e){return e*Ve.DEG_TO_RAD}static radToDeg(e){return e*Ve.RAD_TO_DEG}static getNextPowerOfTwo(e){if(e>0&&0==(e&e-1))return e;for(var t=1;t<e;)t<<=1;return t}static isPowerOfTwo(e,t){return e>0&&0==(e&e-1)&&t>0&&0==(t&t-1)}static random(e,t){if(void 0===e&&(e=0),void 0===t&&(t=1),e===t)return e;if(e>t){var i=e;e=t,t=i}return Math.random()*(t-e)+e}static between(e,t){if(void 0===e&&(e=0),void 0===t&&(t=1),e===t)return e;if(e>t){var i=e;e=t,t=i}return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e}static fuzzyEqual(e,t,i){return void 0===i&&(i=1e-4),Math.abs(e-t)<i}static fuzzyLessThan(e,t,i){return void 0===i&&(i=1e-4),e<t+i}static fuzzyGreaterThan(e,t,i){return void 0===i&&(i=1e-4),e>t-i}static fuzzyCeil(e,t){return void 0===t&&(t=1e-4),Math.ceil(e-t)}static fuzzyFloor(e,t){return void 0===t&&(t=1e-4),Math.floor(e+t)}static average(){for(var e=0,t=arguments.length,i=0;i<t;i++)e+=+arguments[i];return e/t}static shear(e){return e%1}static snapTo(e,t,i){return void 0===i&&(i=0),0===t?e:(e-=i,i+(e=t*Math.round(e/t)))}static snapToFloor(e,t,i){return void 0===i&&(i=0),0===t?e:(e-=i,i+(e=t*Math.floor(e/t)))}static snapToCeil(e,t,i){return void 0===i&&(i=0),0===t?e:(e-=i,i+(e=t*Math.ceil(e/t)))}static roundTo(e,t,i){void 0===t&&(t=0),void 0===i&&(i=10);var s=Math.pow(i,-t);return Math.round(e*s)/s}static floorTo(e,t,i){void 0===t&&(t=0),void 0===i&&(i=10);var s=Math.pow(i,-t);return Math.floor(e*s)/s}static ceilTo(e,t,i){void 0===t&&(t=0),void 0===i&&(i=10);var s=Math.pow(i,-t);return Math.ceil(e*s)/s}static trunc(e){return isFinite(e)?e-e%1||(e<0?-0:0===e?e:0):e}static rotateToAngle(e,t,i){return void 0===i&&(i=.05),e===t?e:(Math.abs(t-e)<=i||Math.abs(t-e)>=Ve.PI2-i?e=t:(Math.abs(t-e)>Math.PI&&(t<e?t+=Ve.PI2:t-=Ve.PI2),t>e?e+=i:t<e&&(e-=i)),e)}static getShortestAngle(e,t){var i=t-e;return 0===i?0:i-360*Math.floor((i- -180)/360)}static angleBetween(e,t,i,s){return Math.atan2(s-t,i-e)}static angleBetweenY(e,t,i,s){return Math.atan2(i-e,s-t)}static angleBetweenPoints(e,t){return Math.atan2(t.y-e.y,t.x-e.x)}static angleBetweenPointsY(e,t){return Math.atan2(t.x-e.x,t.y-e.y)}static reverseAngle(e){return this.normalizeAngle(e+Math.PI)}static normalizeAngle(e){return(e%=2*Math.PI)>=0?e:e+2*Math.PI}static maxAdd(e,t,i){return Math.min(e+t,i)}static minSub(e,t,i){return Math.max(e-t,i)}static wrap(e,t,i){var s=i-t;if(s<=0)return 0;var a=(e-t)%s;return a<0&&(a+=s),a+t}static wrapValue(e,t,i){return((e=Math.abs(e))+(t=Math.abs(t)))%Math.abs(i)}static isOdd(e){return!!(1&e)}static isEven(e){return!(1&e)}static min(){if(1===arguments.length&&"object"==typeof arguments[0])e=arguments[0];else var e=arguments;for(var t=1,i=0,s=e.length;t<s;t++)e[t]<e[i]&&(i=t);return e[i]}static max(){if(1===arguments.length&&"object"==typeof arguments[0])e=arguments[0];else var e=arguments;for(var t=1,i=0,s=e.length;t<s;t++)e[t]>e[i]&&(i=t);return e[i]}static minProperty(e){if(2===arguments.length&&"object"==typeof arguments[1])t=arguments[1];else var t=arguments.slice(1);for(var i=1,s=0,a=t.length;i<a;i++)t[i][e]<t[s][e]&&(s=i);return t[s][e]}static maxProperty(e){if(2===arguments.length&&"object"==typeof arguments[1])t=arguments[1];else var t=arguments.slice(1);for(var i=1,s=0,a=t.length;i<a;i++)t[i][e]>t[s][e]&&(s=i);return t[s][e]}static wrapAngle(e,t){return t?this.wrap(e,-Math.PI,Math.PI):this.wrap(e,-180,180)}static linearInterpolation(e,t){var i=e.length-1,s=i*t,a=Math.floor(s);return t<0?this.linear(e[0],e[1],s):t>1?this.linear(e[i],e[i-1],i-s):this.linear(e[a],e[a+1>i?i:a+1],s-a)}static bezierInterpolation(e,t){for(var i=0,s=e.length-1,a=0;a<=s;a++)i+=Math.pow(1-t,s-a)*Math.pow(t,a)*e[a]*this.bernstein(s,a);return i}static catmullRomInterpolation(e,t){var i=e.length-1,s=i*t,a=Math.floor(s);return e[0]===e[i]?(t<0&&(a=Math.floor(s=i*(1+t))),this.catmullRom(e[(a-1+i)%i],e[a],e[(a+1)%i],e[(a+2)%i],s-a)):t<0?e[0]-(this.catmullRom(e[0],e[0],e[1],e[1],-s)-e[0]):t>1?e[i]-(this.catmullRom(e[i],e[i],e[i-1],e[i-1],s-i)-e[i]):this.catmullRom(e[a?a-1:0],e[a],e[i<a+1?i:a+1],e[i<a+2?i:a+2],s-a)}static linear(e,t,i){return(t-e)*i+e}static bernstein(e,t){return this.factorial(e)/this.factorial(t)/this.factorial(e-t)}static factorial(e){if(0===e)return 1;for(var t=e;--e;)t*=e;return t}static catmullRom(e,t,i,s,a){var n=.5*(i-e),r=.5*(s-t),o=a*a;return(2*t-2*i+n+r)*(a*o)+(-3*t+3*i-2*n-r)*o+n*a+t}static difference(e,t){return Math.abs(e-t)}static roundAwayFromZero(e){return e>0?Math.ceil(e):Math.floor(e)}static sinCosGenerator(e,t,i,s){void 0===t&&(t=1),void 0===i&&(i=1),void 0===s&&(s=1);for(var a=t,n=i,r=s*Math.PI/e,o=[],l=[],c=0;c<e;c++)a+=(n-=a*r)*r,o[c]=n,l[c]=a;return{sin:l,cos:o,length:e}}static hypot(e,t){return Math.sqrt(e*e+t*t)}static distance(e,t,i,s){var a=e-i,n=t-s;return Math.sqrt(a*a+n*n)}static distanceSq(e,t,i,s){var a=e-i,n=t-s;return a*a+n*n}static distancePow(e,t,i,s,a){return void 0===a&&(a=2),Math.sqrt(Math.pow(i-e,a)+Math.pow(s-t,a))}static clamp(e,t,i){return e<t?t:i<e?i:e}static clampBottom(e,t){return e<t?t:e}static within(e,t,i){return Math.abs(e-t)<=i}static mapLinear(e,t,i,s,a){return s+(e-t)*(a-s)/(i-t)}static smoothstep(e,t,i){return(e=Math.max(0,Math.min(1,(e-t)/(i-t))))*e*(3-2*e)}static smootherstep(e,t,i){return(e=Math.max(0,Math.min(1,(e-t)/(i-t))))*e*e*(e*(6*e-15)+10)}static sign(e){return e<0?-1:e>0?1:0}static percent(e,t,i){return void 0===i&&(i=0),e>t||i>t?1:e<i||i>e?0:(e-i)/t}}Ve.PI2=2*Math.PI,Ve.HALF_PI=.5*Math.PI,Ve.DEG_TO_RAD=Math.PI/180,Ve.RAD_TO_DEG=180/Math.PI;class Xe{static getRandomItem(e,t,i){if(null===e)return null;void 0===t&&(t=0),void 0===i&&(i=e.length);var s=t+Math.floor(Math.random()*i);return void 0===e[s]?null:e[s]}static removeRandomItem(e,t,i){if(null==e)return null;void 0===t&&(t=0),void 0===i&&(i=e.length);var s=t+Math.floor(Math.random()*i);if(s<e.length){var a=e.splice(s,1);return void 0===a[0]?null:a[0]}return null}static remove(e,t,i){var s=e.length;if(!(t>=s||0===i)){null==i&&(i=1);for(var a=s-i,n=t;n<a;++n)e[n]=e[n+i];e.length=a}}static shuffle(e){for(var t=e.length-1;t>0;t--){var i=Math.floor(Math.random()*(t+1)),s=e[t];e[t]=e[i],e[i]=s}return e}static transposeMatrix(e){for(var t=e.length,i=e[0].length,s=new Array(i),a=0;a<i;a++){s[a]=new Array(t);for(var n=t-1;n>-1;n--)s[a][n]=e[n][a]}return s}static rotateMatrix(e,t){if("string"!=typeof t&&(t=(t%360+360)%360),90===t||-270===t||"rotateLeft"===t)e=(e=Xe.transposeMatrix(e)).reverse();else if(-90===t||270===t||"rotateRight"===t)e=e.reverse(),e=Xe.transposeMatrix(e);else if(180===Math.abs(t)||"rotate180"===t){for(var i=0;i<e.length;i++)e[i].reverse();e=e.reverse()}return e}static findClosest(e,t){if(!t.length)return NaN;if(1===t.length||e<t[0])return t[0];for(var i=1;t[i]<e;)i++;var s=t[i-1],a=i<t.length?t[i]:Number.POSITIVE_INFINITY;return a-e<=e-s?a:s}static rotateRight(e){var t=e.pop();return e.unshift(t),t}static rotateLeft(e){var t=e.shift();return e.push(t),t}static numberArray(e,t){null!=t||(t=e,e=0);for(var i=[],s=e;s<=t;s++)i.push(s);return i}static numberArrayStep(e,t,i){null!=e||(e=0),null!=t||(t=e,e=0),void 0===i&&(i=1);for(var s=[],a=Math.max(Ve.roundAwayFromZero((t-e)/(i||1)),0),n=0;n<a;n++)s.push(e),e+=i;return s}}class qe{static isCardScoreTypeNegative(e){return e==fe.Trap||e==fe.Boss||e==fe.Enemy||e==fe.Poison}static isCardScoreTypePositive(e){return e==fe.Health||e==fe.Armor||e==fe.Cannon||e==fe.Horseshoe||e==fe.Lightning||e==fe.Skull}static getRandomFromChest(){return Xe.getRandomItem(qe.itemsFromChest)}static getRandomPowerUpFromBarrel(){return Xe.getRandomItem(qe.itemsFromBarrel)}static getRandomPowerUp(){return Xe.getRandomItem(qe.powerUps)}}qe.itemsFromChest=[fe.Bomb,fe.Poison,fe.Horseshoe,fe.Lightning,fe.Multiplier,fe.Skull],qe.itemsFromBarrel=[fe.Health,fe.Gold,fe.Armor,fe.Cannon],qe.powerUps=[fe.Health,fe.Armor,fe.Cannon,fe.Barrel,fe.Gold];class Ke{static addGameLevel(){this.gameLevel++}static init(){this.currentHero==ye.Key&&(this.isKey=!0),this.isHeroAlive=!0,this.gameLevel=1,this.levelStep=10,this.turnsToBoss=this.levelStep,this.goldPerGame=0,this.movesAfterLastSpecialCard=0,this.cardCounter=0,this.isNeedCreateBoss=!1}static load(){Gr.localStorage.hasItem(this.DATE_KEY,!1)&&(this.data=Gr.localStorage.getJSON(this.DATE_KEY))}static save(){Gr.localStorage.setJSON(this.DATE_KEY,this.data,!1)}static get gold(){return this.data.gold}static set gold(e){this.data.gold=e,this.save(),this.sGold.dispatch()}static get bestGoldPerGame(){return this.data.bestGoldPerGame}static set bestGoldPerGame(e){this.data.bestGoldPerGame=e,this.save()}static get isTutorialSeen(){return this.data.isTutorialSeen}static set isTutorialSeen(e){this.data.isTutorialSeen=e,this.save()}static get isTutorialStep1Done(){return this.data.isTutorialSeen}static set isTutorialStep1Done(e){this.data.isTutorialStep1Done=e,this.save()}static get isTutorialStep2Done(){return this.data.isTutorialStep2Done}static set isTutorialStep2Done(e){this.data.isTutorialStep2Done=e,this.save()}static get isTutorialChestSeen(){return this.data.isTutorialChestSeen}static set isTutorialChestSeen(e){this.data.isTutorialChestSeen=e,this.save()}static get isBombHero(){return this.data.isBombHero}static set isBombHero(e){this.data.isBombHero=e,this.save()}static get isKeyHero(){return this.data.isKeyHero}static set isKeyHero(e){this.data.isKeyHero=e,this.save()}static get isGunHero(){return this.data.isGunHero}static set isGunHero(e){this.data.isGunHero=e,this.save()}static get isFourXFour(){return this.data.isFourXFour}static set isFourXFour(e){this.data.isFourXFour=e,this.save()}static get isHorseshoe(){return this.data.isHorseshoe}static set isHorseshoe(e){this.data.isHorseshoe=e,this.save()}static get isHeart(){return this.data.isHeart}static set isHeart(e){this.data.isHeart=e,this.save()}static get isLuck(){return this.data.isLuck}static set isLuck(e){this.data.isLuck=e,this.save()}static get isKey(){return this.data.isKey}static set isKey(e){this.data.isKey=e,this.save()}static get lastAdvCoolDown(){return this.data.lastAdvCoolDown}static set lastAdvCoolDown(e){this.data.lastAdvCoolDown=e,this.save()}static get lastResultAdvCoolDown(){return this.data.lastResultAdvCoolDown}static set lastResultAdvCoolDown(e){this.data.lastResultAdvCoolDown=e,this.save()}static get lastItemWithAdv(){return this.data.lastItemWithAdv}static set lastItemWithAdv(e){this.data.lastItemWithAdv=e,this.save()}static addGold(e){this.goldPerGame+=e,this.bestGoldPerGame<this.goldPerGame&&(this.bestGoldPerGame=this.goldPerGame)}static resetShop(){this.isHeart=!1,this.isHorseshoe=!1,this.isLuck=!1,this.isKey=!1}static updateMovesAfterSpecialCard(e){e==fe.Health||e==fe.Armor?this.movesAfterLastSpecialCard=0:this.movesAfterLastSpecialCard++}static updateCardCounter(e){qe.isCardScoreTypeNegative(e)&&this.cardCounter--,qe.isCardScoreTypePositive(e)&&this.cardCounter++}static stepUpdate(){this.isBossShouldBeCreated()&&(this.isNeedCreateBoss=!0,this.levelStep++,this.turnsToBoss=this.levelStep+1)}static isBossShouldBeCreated(){return!this.isNeedCreateBoss&&1==this.turnsToBoss}static decreaseTurnsToBoss(){return this.turnsToBoss&&this.turnsToBoss--}}Ke.sGold=new Signal,Ke.DATE_KEY="GameStatus",Ke.data={gold:0,bestGoldPerGame:0,isTutorialSeen:!1,isTutorialStep1Done:!1,isTutorialStep2Done:!1,isTutorialChestSeen:!1,isBombHero:!1,isKeyHero:!1,isGunHero:!1,isFourXFour:!1,isHorseshoe:!1,isHeart:!1,isLuck:!1,isKey:!1,lastAdvCoolDown:0,lastItemWithAdv:0,lastResultAdvCoolDown:0},Ke.gameLevel=1,Ke.levelStep=10,Ke.turnsToBoss=10,Ke.goldPerGame=0,Ke.cardCounter=0,Ke.isNeedCreateBoss=!1,Ke.isNeedCreateChest=!1,Ke.currentHero=ye.Base,Ke.RowCount=3,Ke.ColumnCount=3,Ke.isHeroAlive=!1,Ke.isGameEnd=!1,Ke.isNeedCreateChestOnNextStep=!1,Ke.movesAfterLastSpecialCard=0,window.GameStatus=Ke;class je extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","FxShootLightningBig")}constructFromXML(e){super.constructFromXML(e),this.m_fx=this.getChild("fx")}}je.URL="ui://moe42ygrsqzyai",je.DependPackages=["GameHome"];class ze extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","FxShootLightningSmall")}constructFromXML(e){super.constructFromXML(e),this.m_fx=this.getChild("fx")}}ze.URL="ui://moe42ygrsqzyal",ze.DependPackages=["GameHome"];class Ye extends ze{static PoolGet(){var e=Pool.getItem(this.URL);return e||(e=Ye.createInstance()),e}PoolRecover(){Laya.timer.clearAll(this),Laya.Tween.clearAll(this.m_fx),this.removeFromParent(),this.m_fx.playing=!1,Pool.recover(Ye.URL,this)}Play(){this.m_fx.frame=0,this.m_fx.playing=!0,this.alpha=0;var e=p.PoolGet(),t=_.to(this.m_fx,{alpha:1},1);e.tweens.push(t);t=_.to(this,{alpha:0},1,null,null,102);return e.tweens.push(t),Laya.timer.once(103,this,this.PoolRecover),e.restart(),e}}class $e extends je{static PoolGet(){var e=Pool.getItem(this.URL);return e||(e=$e.createInstance()),e}PoolRecover(){Laya.timer.clearAll(this),Laya.Tween.clearAll(this.m_fx),this.removeFromParent(),this.m_fx.playing=!1,Pool.recover($e.URL,this)}Play(){this.m_fx.frame=0,this.m_fx.playing=!0,this.m_fx.alpha=0,this.m_fx.y=20;var e=p.PoolGet(),t=_.to(this.m_fx,{alpha:1},50);e.tweens.push(t);t=_.to(this.m_fx,{y:-20},200,null,null,50);e.tweens.push(t);t=_.to(this.m_fx,{alpha:0},50,null,null,250);return e.tweens.push(t),e.onStart.addOnce(this.onStart,this),Laya.timer.once(300,this,this.PoolRecover),e}onStart(){if(this.parent){var e=Ye.PoolGet(),t=d.CardWidth/2-20,i=d.CardHeight/2-20;L.getRandomBool()&&(t=-t),L.getRandomBool()&&(i=-i),this.parent.addChild(e),e.setXY(this.x,this.y),e.m_fx.setXY(t,i),e.Play()}}}class Je{constructor(){this.type=fe.None,this.view=Y.PoolGet(),this.reset()}poolRecover(){this.reset(),Pool.recoverByClass(this)}reset(){this.view.setXY(-200,-200),this.view.setScale(1,1)}SetEmpty(){this.SetConfig(null)}SetConfig(e){this.config=e,this.view.game=this.game,this.view.SetConfig(e),this.view.SetCard(this)}get isEmpty(){return this.type==fe.None}get isHero(){return this.type==fe.Hero}get isBoss(){return this.type==fe.Boss}get isTrap(){return this.type==fe.Trap}get isCannon(){return this.type==fe.Cannon}get level(){return this.config.level}setCoordinate(e){this.game.container.addChild(this.view),this.view.setXY(e.x,e.y),this.view.alpha=1}moveTo(e,t){return this.game.container.addChild(this.view),e.alpha=1,_.to(this.view,e,t)}getCenterX(){return this.view.x}getCenterY(){return this.view.y}endTurnAnimationStart(){this.view.setScale(0,d.FlipZoom)}startTurnAnimation(e,t){var i=G.turnAnimationStart(null,this.view);return i.onStart.add(this.playCardSoundInSeconds,this),i.onComplete.add(this.removeShapeFromStage,this),i.onComplete.add(e,t),i}endTurnAnimationEnd(){this.isBoss&&v.instance.playSound(T.BossAppearance),this.view.scaleX=.1,G.turnAnimationEnd(null,this.view).restart()}playCardSoundInSeconds(){setTimeout(this.playCardSound.bind(this),50)}playCardSound(){v.instance.playSound(T.Card)}removeChild(){var e=p.PoolGet(),t=_.to(this.view,{scaleX:1.1,scaleY:1.1},50);return e.tweens.push(t),t=_.to(this.view,{scaleX:1,scaleY:1},50,null,null,50),e.tweens.push(t),t=_.to(this.view,{scaleX:1.1,scaleY:1.1},50,null,null,100),e.tweens.push(t),t=_.to(this.view,{scaleX:0,scaleY:0},80,null,Laya.Handler.create(this,this.removeShapeFromStage),150),e.tweens.push(t),e}removeShapeFromStage(){this.view.parent&&(this.view.removeFromParent(),this.delayPoolRecover())}delayPoolRecover(){Laya.timer.frameOnce(10,this,this.poolRecover)}runLightning(){var e=$e.PoolGet();return e.setXY(this.getCenterX(),this.getCenterY()),this.game.container.addChild(e),e.Play()}getScaleTween(e,t){t||(t=p.PoolGet());var i=_.to(e,{scaleX:2.5,scaleY:2.5},200);return t.tweens.push(i),i=_.to(e,{scaleX:1,scaleY:1},200,null,null,200),t.tweens.push(i),t}}class Qe extends Je{reset(){super.reset(),this.view.alpha=0}stepUpdate(){}isNegative(){return!1}getScore(){return 0}getGoldValue(){return 0}reduceScoreInNSeconds(e,t){}increaseScoreInNSeconds(e,t){}}class Ze extends Je{constructor(){super(...arguments),this.initialLife=0,this.lifeAmount=0,this.powerUpAmount=0,this.isOpen=!1,this.canLightningStrike=!1}static GetDefault(e){var t=Pool.createByClass(Qe);return t.game=e,t.type=fe.None,t.SetEmpty(),t}static GetNew(e,t,i,s){var a=Gr.config.card.getTypeLevelConfig(t,i);null==a&&console.error("没有找到卡牌配置",t,i,s);var n=Pool.createByClass(Ze);return n.game=e,n.type=t,n.SetConfig(a),n.setScore(s),Ke.updateCardCounter(t),Ke.updateMovesAfterSpecialCard(t),n}reset(){super.reset(),this.initialLife=0,this.lifeAmount=0,this.powerUpAmount=0,this.isOpen=!1,this.canLightningStrike=!1}multiplyScore(e){var t;return this.lifeAmount>0?((t=this.view.tweenLife()).onComplete.addOnce(()=>{this.increaseLife(e)},this),t):this.powerUpAmount>0?((t=this.view.tweenLife()).onComplete.addOnce(()=>{this.increasePowerUp(e)},this),t):null}setScore(e){switch(this.type){case fe.Boss:case fe.Enemy:this.initialLife=e,this.setLife(e);break;case fe.Gold:case fe.Health:case fe.Armor:case fe.Poison:case fe.Cannon:case fe.Lightning:case fe.Multiplier:case fe.Skull:case fe.Barrel:this.setPowerUp(e);break;case fe.Bomb:this.setLife(e),this.setPowerUp(10);break;case fe.Trap:this.setPowerUp(e),this.setLife(e),this.changeStatus();break;case fe.Chest:break;case fe.Horseshoe:this.setPowerUp(1)}}getLife(){return this.lifeAmount}getPowerUp(){return this.powerUpAmount}setPowerUp(e){this.powerUpAmount=e,this.setPowerUpText()}setLife(e){null!=e&&(this.lifeAmount=e),this.setHealthText()}setHealthText(){this.isDisplayLife()&&this.view.setHealthText()}setPowerUpText(){this.isDisplayLife()||this.view.setPowerUpText()}increasePowerUpTween(){this.view.tweenPowerUp().restart()}increaseLifeTween(){this.view.tweenLife().restart()}increaseLife(e){this.setLife(this.lifeAmount*e),this.type===fe.Trap&&this.setPowerUp(this.powerUpAmount*e)}increasePowerUp(e){this.setPowerUp(this.powerUpAmount*e)}isNegative(){switch(this.type){case fe.Boss:case fe.Enemy:case fe.Trap:case fe.Bomb:case fe.Poison:return!0;case fe.Health:case fe.Gold:case fe.Armor:case fe.Cannon:case fe.Chest:case fe.Barrel:case fe.Horseshoe:case fe.Lightning:case fe.Multiplier:case fe.Skull:case fe.Hero:case fe.None:return!1}}isDisplayLife(){switch(this.type){case fe.Boss:case fe.Enemy:case fe.Trap:case fe.Poison:return!0}return!1}getScore(){return this.type==fe.Trap?this.lifeAmount:this.lifeAmount+this.powerUpAmount}getGoldValue(){return this.initialLife}reduceScoreInNSeconds(e,t){this.powerUpAmount>0&&(this.powerUpAmount=this.powerUpAmount-e,setTimeout(this.setPowerUpText.bind(this),t)),this.lifeAmount>0&&(this.lifeAmount=this.lifeAmount-e,setTimeout(this.setHealthText.bind(this),t))}increaseScoreInNSeconds(e,t){this.powerUpAmount>0&&(this.powerUpAmount=this.powerUpAmount+e,this.isDisplayLife()||setTimeout(this.increasePowerUpTween.bind(this),t)),this.lifeAmount>0&&(this.lifeAmount=this.lifeAmount+e,this.isDisplayLife()&&setTimeout(this.increaseLifeTween.bind(this),t))}stepUpdate(){if(this.isTrap){var e=this.changeStatus(),t=Ke.currentHero==ye.Gun;this.lifeAmount=t?0:e?this.powerUpAmount:0,this.setHealthText()}this.type==fe.Poison&&this.setPowerUp(this.powerUpAmount+1),this.type==fe.Bomb&&this.setPowerUp(this.powerUpAmount-1),this.type==fe.Barrel&&this.powerUpAmount>2&&this.setPowerUp(this.powerUpAmount-1)}changeStatus(){return this.isOpen?(this.view.setClose(),this.isOpen=!1):(this.view.setOpen(),this.isOpen=!0),this.isOpen}open(){return null}}!function(e){e[e.Right=1]="Right",e[e.Down=2]="Down",e[e.Left=3]="Left",e[e.Up=4]="Up"}(we||(we={}));class et{constructor(e,t){this.x=0,this.y=0,this.x=e,this.y=t}}class tt{constructor(e,t){this.column=0,this.row=0,this.column=e,this.row=t}getNewPosition(e){var t=new tt(this.column,this.row);switch(e){case we.Right:t.column++;break;case we.Down:t.row++;break;case we.Left:t.column--;break;case we.Up:t.row--}return t}getPoint(){return new et(this.pointX,this.pointY)}get pointX(){return this.column*d.CardWidth+d.CardWidth/2+this.column*d.CardSpaceBetweenWidth}get pointY(){return this.row*d.CardHeight+d.CardHeight/2+this.row*d.CardSpaceBetweenHeight}}class it{constructor(){this.columnCount=3,this.rowCount=3}clear(){if(this.items&&0!=this.items.length){for(var e=0;e<this.rowCount;e++)for(var t=0;t<this.columnCount;t++){this.items[t][e].removeShapeFromStage()}this.items.length=0}}init(e=3,t=3,i){this.columnCount=e,this.rowCount=t,this.game=i,this.initArray()}initArray(){this.items=[];for(var e=0;e<this.rowCount;e++){for(var t=[],i=0;i<this.columnCount;i++)t.push(Ze.GetDefault(this.game));this.items.push(t)}}getColumnCount(){return this.columnCount}getRowCount(){return this.rowCount}getAll(){for(var e=[],t=0;t<this.rowCount;t++)for(var i=0;i<this.columnCount;i++)e.push(this.items[i][t]);return e}findHeroCard(){for(var e,t=0;t<this.rowCount;t++)for(var i=0;i<this.columnCount;i++)if((e=this.items[i][t]).isHero)return e;return null}findHeroPosition(){for(var e=0;e<this.rowCount;e++)for(var t=0;t<this.columnCount;t++)if(this.items[t][e].isHero)return new tt(t,e);return null}findPosition(e){for(var t=0;t<this.rowCount;t++)for(var i=0;i<this.columnCount;i++){if(this.items[i][t]==e)return new tt(i,t)}return null}getPosition(e){for(var t=0;t<this.rowCount;t++)for(var i=0;i<this.columnCount;i++){var s=new tt(i,t);if(e(this.get(s)))return s}return null}getPositions(e){for(var t=[],i=0;i<this.rowCount;i++)for(var s=0;s<this.columnCount;s++){var a=new tt(s,i);e(this.get(a))&&t.push(a)}return t}get(e){return this.items[e.column][e.row]}set(e,t){this.items[e.column][e.row]=t}any(e){for(var t=0;t<this.rowCount;t++)for(var i=0;i<this.columnCount;i++){var s=new tt(i,t);if(e(this.get(s)))return!0}return!1}isPositionValid(e){return e.column>=0&&e.column<this.columnCount&&e.row>=0&&e.row<this.rowCount}}!function(e){e[e.Random=1]="Random",e[e.AfterChest=2]="AfterChest",e[e.AfterBarrel=3]="AfterBarrel",e[e.Positive=4]="Positive"}(_e||(_e={})),function(e){e[e.Start=1]="Start",e[e.Center=2]="Center",e[e.End=3]="End"}(Le||(Le={}));class st{constructor(e,t,i){this.isHeroAlive=e,this.isChest=t,this.isMove=i}}class at{static GetBuyHero(e){return this.BuyHero_0+e}static GetBuyShop(e){return this.BuyShop_0+e}static GetBuyMenuHomeTab(e){return this.MenuHomeTab_0+e}}at.SystemPlatform="0",at.Open="1",at.Menu="2",at.War3x3="3",at.War4x4="4",at.WarOver="5",at.Share="6",at.ShareBtn="7",at.ShareResult="8",at.ShareWar="9",at.Gold="10",at.GoldBest="11",at.BuyHero="12",at.BuyShop="13",at.BuyHero_0=14,at.BuyShop_0=19,at.MenuHomeTab_0=24;class nt{static GetBuyHero(e){return"BuyHero_"+e}static GetBuyShop(e){return"BuyShop_"+e}static GetBuyMenuHomeTab(e){return"MenuHomeTab_"+e}}nt.SystemPlatform="SystemPlatform",nt.Open="Open",nt.Menu="Menu",nt.War3x3="War3x3",nt.War4x4="War4x4",nt.WarOver="WarOver",nt.Share="Share",nt.ShareBtn="ShareBtn",nt.ShareResult="ShareResult",nt.ShareWar="ShareWar",nt.Gold="Gold",nt.GoldBest="GoldBest",nt.BuyHero="BuyHero",nt.BuyShop="BuyShop";class rt{static Send(e,t){}static SendAnalytics(e,t){}static SendEvent(e,t){Engine.borwer.isWXGame&&wx.aldSendEvent(e,t)}static OnOpen(){var e=(new Date).getDate(),t=Gr.localStorage.getInt("ReportManitor_Open_Date",!0),i=Gr.localStorage.getInt("ReportManitor_Open",!0);t!=e&&(Gr.localStorage.setInt("ReportManitor_Open_Date",e,!0),this.SystemPlatform(),i=0),i++,Gr.localStorage.setInt("ReportManitor_Open",i,!0),this.Send(at.Open,1),this.SendAnalytics(nt.Open,i),this.SendEvent("打开游戏",{openNum:i})}static OnMenu(e,t){this.SendEvent("打开菜单",{menuId:e,tabIndex:t}),e==S.Home&&(null==t?t=0:"string"==typeof t&&(t=parseInt(t)),this.Send(at.GetBuyMenuHomeTab(t).toString(),1),this.SendAnalytics(nt.GetBuyMenuHomeTab(t),1))}static OnWar(e){e?(this.SendEvent("进入关卡",{type:3}),this.war4x4++,this.Send(at.War4x4,1),this.SendAnalytics(nt.War4x4,this.war4x4),rt.OnStageStart(4,"关卡4x4")):(this.SendEvent("进入关卡",{type:4}),this.war3x3++,this.Send(at.War3x3,1),this.SendAnalytics(nt.War3x3,this.war3x3),rt.OnStageStart(3,"关卡3x3"))}static OnWarOver(){this.warOver++,this.SendEvent("战斗结束",{"结束次数":this.warOver}),this.Send(at.ShareResult,1),this.SendAnalytics(nt.ShareResult,this.warOver),this.OnStageEnd(Ke.gameLevel,Ke.gold)}static SystemPlatform(){var e=0,t="";Laya.Browser.onAndroid?(t="Android",e=1):Laya.Browser.onIPhone?(t="IPhone",e=2):Laya.Browser.onIPad?(t="IPad",e=3):Laya.Browser.onIOS&&(t="IOS",e=4),this.SendEvent("系统平台",{platform:t}),this.Send(at.SystemPlatform,e),this.SendAnalytics(nt.SystemPlatform,e)}static OnShare(e){this.Send(at.Share,1),this.SendAnalytics(nt.Share,1)}static OnShareBtn(e){this.Send(at.ShareBtn,1),this.SendAnalytics(nt.ShareBtn,1)}static OnShareResult(e){this._shareResult++,this.Send(at.ShareResult,1),this.SendAnalytics(nt.ShareResult,1)}static OnShareWar(e){this._shareWar++,this.Send(at.ShareWar,1),this.SendAnalytics(nt.ShareWar,1)}static OnGload(e){this.SendAnalytics(nt.Gold,e),this.SendEvent("一次关卡活得金币数量",{value:e})}static OnGloadBest(e){var t=Gr.localStorage.getInt("ReportManitor_GoldBest",!1);t!=e&&(Gr.localStorage.setInt("ReportManitor_GoldBest",e,!1),this.SendAnalytics(nt.GoldBest,e),this.SendEvent("一次关卡活得最多金币数量",{value:t}))}static OnBuyHero(e){this.Send(at.GetBuyHero(e).toString(),1),this.SendAnalytics(nt.GetBuyHero(e),1),this.SendEvent(nt.GetBuyHero(e),{value:1})}static OnBuyShop(e){this.SendEvent(nt.GetBuyShop(e),{value:1}),this.Send(at.GetBuyShop(e).toString(),1),this.SendAnalytics(nt.GetBuyShop(e),1)}static OnStageStart(e,t){this.stageId=e,this.stageName=t,Engine.borwer.isWXGame&&wx.aldStage.onStart({stageId:e,stageName:t,userId:Ae.platform.userInfo.nickName})}static OnStageRuningTools(e){if(Engine.borwer.isWXGame){var t=Gr.moduleModel.item.getItemToolByType(e),i="不知名道具",s="不知名道具";t&&t.itemConfig&&(i=t.itemConfig.name,s=t.itemConfig.itemDes),wx.aldStage.onRunning({stageId:this.stageId,stageName:this.name,userId:Ae.platform.userInfo.nickName,event:"tools",params:{itemName:i,itemCount:1,desc:s}})}}static OnStageEnd(e,t){Engine.borwer.isWXGame&&wx.aldStage.onEnd({stageId:this.stageId,stageName:this.name,userId:Ae.platform.userInfo.nickName,event:"complete",params:{desc:"关卡完成",gold:t,level:e}})}}rt.war4x4=0,rt.war3x3=0,rt.warOver=0,rt._shareResult=0,rt._shareWar=0,rt.stageId="",rt.stageName="",function(e){e[e.Heart=0]="Heart",e[e.Horseshoe=1]="Horseshoe",e[e.Luck=2]="Luck",e[e.Key=3]="Key"}(ve||(ve={}));class ot extends Je{constructor(){super(...arguments),this.currentLife=0,this.totalLife=0,this.armor=0,this.needRunLightning=!1,this.lightningScore=0,this.needShoot=!1,this.shootScore=0,this.needShootMultiplier=!1,this.multiplierScore=0,this.needShootSkull=!1}reset(){super.reset(),this.currentLife=0,this.totalLife=0,this.armor=0,this.needRunLightning=!1,this.lightningScore=0,this.needShoot=!1,this.shootScore=0,this.needShootMultiplier=!1,this.multiplierScore=0,this.needShootSkull=!1}fight(e){var t=new st(!0,!1,!0);switch(e.type){case fe.Trap:e.getLife()>0&&Ke.currentHero!=ye.Gun&&(v.instance.playSound(T.Trap),this.currentLife>e.getScore()?(this.currentLife-=e.getScore(),Ke.addGold(e.getScore()),t.isHeroAlive=!0):t.isHeroAlive=!1);break;case fe.Boss:case fe.Enemy:v.instance.playSound(Xe.getRandomItem([T.Hit1,T.Hit2])),t.isHeroAlive=this.fightWithEnemy(e),t.isHeroAlive&&e.isBoss&&(t.isNeedIncreaseLifeByOneAfterBoss=!0);break;case fe.Armor:v.instance.playSound(T.ShieldWood),Ke.currentHero==ye.Gun?this.needSmashLightning(e.getScore()):this.armor<e.getScore()?(this.armor=e.getScore(),this.setArmorFrame(e)):Ke.currentHero==ye.Base&&this.armor++;break;case fe.Gold:1==e.level?v.instance.playSound(T.Coin):v.instance.playSound(T.CoinsBag),Ke.addGold(e.getScore());break;case fe.Health:v.instance.playSound(Xe.getRandomItem([T.Health1,T.Health2])),this.currentLife+=e.getScore(),this.currentLife>this.totalLife&&(this.currentLife=this.totalLife);break;case fe.Cannon:this.needShoot=!0,this.shootScore=e.getScore();break;case fe.Chest:t.isChest=!0;break;case fe.Poison:if(v.instance.playSound(T.Poison),Ke.isLuck)return t.isHeroAlive=!0,this.useLuck(),t;if(e.getScore()>=this.currentLife)return t.isHeroAlive=!1,t;this.currentLife-=e.getScore();break;case fe.Horseshoe:t.isNeedIncreaseLifeByOne=!0;break;case fe.Bomb:break;case fe.Lightning:this.needSmashLightning(e.getScore());break;case fe.Multiplier:this.needShootMultiplier=!0,this.multiplierScore=e.getScore();break;case fe.Skull:this.needShootSkull=!0;break;case fe.Barrel:v.instance.playSound(Xe.getRandomItem([T.Barrel1,T.Barrel2])),t.isMove=!1}return this.setStatus(),t}needSmashLightning(e){this.needRunLightning=!0,this.lightningScore=e}fightWithEnemy(e){if(e.getScore()>=this.armor+this.currentLife)return!1;if(e.getScore()<=this.armor)e.getScore()<this.armor&&Ke.currentHero==ye.Base?this.armor-=1:this.armor-=e.getScore();else if(this.armor>0){var t=e.getScore()-this.armor;this.armor=0,this.currentLife-=t}else this.currentLife-=e.getScore();return Ke.addGold(e.getScore()),!0}increaseLifeByOneTween(){var e=this.view.tweenLife();return e.onStart.addOnce(this.playHorseshoe,this),e.onComplete.addOnce(this.increaseLifeByOne,this),e}playHorseshoe(){v.instance.playSound(T.Horseshoe)}increaseLifeByOne(){this.currentLife++,this.totalLife++,this.setLife()}stepUpdate(){}isNegative(){return!1}getScore(){return this.currentLife+this.armor}getGoldValue(){return 0}reduceScoreInNSeconds(e,t){if(e<=this.armor)this.armor-=e;else{var i=e-this.armor;this.armor=0,this.currentLife-=i}setTimeout(this.setStatus.bind(this),t)}increaseScoreInNSeconds(e,t){this.totalLife-this.currentLife>e?this.currentLife=this.totalLife:this.currentLife+=e,setTimeout(this.setStatus.bind(this),t)}setStatus(){this.setLife(),this.setArmor()}setLife(){this.view.setHealthText()}setArmor(){this.view.setArmor()}setArmorFrame(e){this.view.setArmor()}setShopItemsStatus(){this.view.refreshShopBar()}useLuck(){this.view.useLuck(),Ke.isLuck=!1,rt.OnStageRuningTools(ve.Luck)}useHeart(){Ke.isHeroAlive=!0,this.currentLife=this.totalLife,this.view.useHeart(),setTimeout(()=>{this.setStatus(),this.setShopItemsStatus()},200),rt.OnStageRuningTools(ve.Heart)}}class lt extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","FxShootCannon")}constructFromXML(e){super.constructFromXML(e),this.m_core=this.getChild("core")}}lt.URL="ui://moe42ygrsqzyaf",lt.DependPackages=["GameHome"];class ct extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","FxShootSmoke")}constructFromXML(e){super.constructFromXML(e),this.m_smoke=this.getChild("smoke")}}ct.URL="ui://moe42ygrsqzyag",ct.DependPackages=["GameHome"];class ht extends ct{static PoolGet(){var e=Pool.getItem(this.URL);return e||(e=ht.createInstance()),e}PoolRecover(){Laya.timer.clearAll(this),this.removeFromParent(),this.m_smoke.playing=!1,Pool.recover(ht.URL,this)}Play(){this.m_smoke.frame=0,this.m_smoke.playing=!0;var e=Math.floor(1e4/24);Laya.timer.once(e,this,this.PoolRecover)}}class ut extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","FxShootBoom")}constructFromXML(e){super.constructFromXML(e),this.m_boom=this.getChild("boom")}}ut.URL="ui://moe42ygrsqzyah",ut.DependPackages=["GameHome"];class mt extends ut{static PoolGet(){var e=Pool.getItem(this.URL);return e||(e=mt.createInstance()),e}PoolRecover(){Laya.timer.clearAll(this),this.removeFromParent(),this.m_boom.playing=!1,Pool.recover(mt.URL,this)}DelayPalay(e,t){Laya.timer.once(e,this,()=>{t.addChild(this),this.Play()})}Play(){this.m_boom.frame=0,this.m_boom.playing=!0;var e=Math.floor(750);Laya.timer.once(e,this,this.PoolRecover)}}class gt extends lt{constructor(){super(...arguments),this._tweenProgress=0}static PoolGet(){var e=Pool.getItem(this.URL);return e||(e=gt.createInstance()),e}PoolRecover(){Laya.timer.clearAll(this),Laya.Tween.clearAll(this),this.removeFromParent(),Pool.recover(gt.URL,this)}moveTo(e,t,i,s,a){this.setXY(e,t),this.tweenProgress=0;var n=p.PoolGet(),r=_.to(this,{x:i,y:s,tweenProgress:100},a,null,Laya.Handler.create(this,this.onMoveEnd));return n.tweens.push(r),n}get tweenProgress(){return this._tweenProgress}set tweenProgress(e){if(this._tweenProgress=e,Math.floor(e)%10&&this.parent){var t=ht.PoolGet();this.parent.addChild(t),t.setXY(this.x,this.y),t.Play()}}onMoveEnd(){if(this.parent){var e=mt.PoolGet();this.parent.addChild(e),e.setXY(this.x,this.y),e.Play()}Laya.timer.frameOnce(2,this,this.PoolRecover)}}class dt extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","FxSkull")}constructFromXML(e){super.constructFromXML(e),this.m_fx=this.getChild("fx")}}dt.URL="ui://moe42ygrsqzyam",dt.DependPackages=["GameHome"];class pt extends dt{constructor(){super(...arguments),this._tweenProgress=0}static PoolGet(){var e=Pool.getItem(this.URL);return e||(e=pt.createInstance()),e}PoolRecover(){Laya.timer.clearAll(this),Laya.Tween.clearAll(this),this.removeFromParent(),Pool.recover(pt.URL,this)}moveTo(e,t,i,s,a){this.setXY(e,t),this.tweenProgress=0;var n=p.PoolGet(),r=_.to(this,{x:i,y:s,tweenProgress:100},a,null,Laya.Handler.create(this,this.onMoveEnd));return n.tweens.push(r),n}get tweenProgress(){return this._tweenProgress}set tweenProgress(e){if(this._tweenProgress=e,Math.floor(e)%10&&this.parent){var t=ht.PoolGet();this.parent.addChild(t),t.setXY(this.x,this.y),t.Play()}}onMoveEnd(){if(this.parent){var e=mt.PoolGet();this.parent.addChild(e),e.setXY(this.x,this.y),e.Play()}Laya.timer.frameOnce(2,this,this.PoolRecover)}}class St{constructor(e){this.step=1,this.field=new it,this.game=e,this.cardFactory=e.cardFactory}uninstall(){this.field.clear()}initField(){var e=[],t=Ke.ColumnCount,i=Ke.RowCount,s=d.AnimationTime-(i*t==9?0:50);this.field.clear(),this.field.init(t,i,this.game);L.getRandomIntInclusive(1,5);for(var a=0;a<i;a++)for(var n=0;n<t;n++){var r=void 0,o=a===d.HeroStartRow-1,l=n===d.HeroStartColumn-1;o&&l?(r=this.cardFactory.getHero(),Ke.isHeroAlive=!0,Ke.isGameEnd=!1):r=this.getCardFromFactory();var c=new tt(n,a),h=this.cardFactory.getDefault();e.push(this.moveAndSetWithAnimation(c,h,s)),e.push(this.replaceCardByPosition(c,r).setAnimationDuration(1))}return e}addShadow(){var e=this.game.add.graphics(0,0);e.name=d.Shadow,e.alpha=.5,e.beginFill(0),e.drawRect(2*-this.game.width,2*-this.game.height,4*this.game.width,4*this.game.height),this.cardFactory.container.add(e),this.cardFactory.container.bringToTop(this.cardFactory.container.getByName(d.Hero)),this.cardFactory.container.bringToTop(this.cardFactory.container.getByName(d.CardWithArm))}runArmTween(){var e=this.cardFactory.container.getByName(d.Shadow);e&&this.cardFactory.container.bringToTop(e),this.cardFactory.container.bringToTop(this.cardFactory.container.getByName(d.Hero)),this.cardFactory.container.bringToTop(this.cardFactory.container.getByName(d.CardWithMovingArm)),this.movingArm.alpha=1,this.movingArm.y=this.movingArmY;var t=this.movingArmY+150,i=this.game.add.tween(this.movingArm).to({y:this.movingArmY},200).to({y:t},600),s=this.game.add.tween(this.movingArm).to({y:t},200);i.onStart.add(function(){this.movingArm.changeFrame(1)},this),s.onStart.add(function(){this.movingArm.changeFrame(0)},this),s.onComplete.add(this.runArmTween,this),i.chain(s),i.start()}getChestCardFromFactory(){return this.cardFactory.getChestCard()}getCardFromFactory(e=_e.Random,t=0){return this.cardFactory.getCard(e,t,this.getCardTypesOnTheTable())}getEnemyCardFromFactory(e){return this.cardFactory.getEnemy(e)}getHealsCardFromFactory(e){return this.cardFactory.getHealth(e)}getCardTypesOnTheTable(){return this.field.getAll().map(function(e){return e.type})}getCoinCardFromFactory(e){return this.cardFactory.getCoinCard(e)}getHero(){return this.field.get(this.getHeroPosition())}getHeroPosition(){return this.field.findHeroPosition()}getCardToFight(e){var t=this.field.findHeroPosition();if(null!=t){var i=t.getNewPosition(e);if(this.field.isPositionValid(i))return this.field.get(i)}return null}replaceCard(e,t,i=0){var s=this.field.getPosition(function(e){return e instanceof ot}),a=Array(),n=this.getCardFromFactory(t,i);return a.push(this.replaceCardByPosition(s.getNewPosition(e),n)),a}tutorialStep1(){var e=this;this.movingArm.animations.stop(),this.runArmTween(),Ke.isTutorialStep1Done=!0,this.field.getAll().forEach(function(t){t instanceof Ze&&t.view.name===d.CardWithMovingArm&&t.setOnClickEvent(e.onCardDown,e.onCardUp,e)})}tutorialStep2(e){Ke.isTutorialStep2Done=!0,this.runAllCardsAroundHero(e)}tutorialStep3(e){this.runAllCardsAroundHero(e)}tutorialStep4(){var e=this.cardFactory.container.getByName(d.Shadow);this.game.add.tween(e).to({alpha:0},100).start().onComplete.add(function(){var i=this;e.destroy(),Ke.isTutorialSeen=!0,this.field.getAll().forEach(function(e){e instanceof t.Card&&e.setOnClickEvent(i.onCardDown,i.onCardUp,i)})}.bind(this))}runAllCardsAroundHero(e){for(var i=0,s=[e.getNewPosition(we.Left),e.getNewPosition(we.Up),e.getNewPosition(we.Right),e.getNewPosition(we.Down)];i<s.length;i++){var a=s[i];if(this.field.isPositionValid(a)){var n=this.field.get(a);this.cardFactory.container.bringToTop(n.view),n instanceof t.Card&&n.setOnClickEvent(this.onCardDown,this.onCardUp,this)}}}move(e){var t=[],i=this.getHeroPosition(),s=i.getNewPosition(e),a=this.field.get(s);if(a.isEmpty)return t;this.isPlayMove(a)&&setTimeout(this.playMoveSound.bind(this),115);var n=this.field.get(i);if(a.type===fe.Bomb)t.push(this.moveAndSetWithAnimation(i.getNewPosition(e),n,d.AnimationTime).setAnimationDuration(1)),t.push(this.moveAndSetWithAnimation(i,a,d.AnimationTime));else{a.isBoss&&Ke.addGameLevel();var r=this.getCardPositionType(e,i),o=this.getCardToReplace(a),l=p.PoolGet();switch(l.tweens.push(a.removeChild()),t.push(l),r){case Le.Center:switch(t.push(this.moveAndSetWithAnimation(i.getNewPosition(e),n,d.AnimationTime)),e){case we.Left:if(0===i.row){var c=i.getNewPosition(we.Down),h=this.moveAllLine(we.Down,we.Up,c,o);t.push(h)}else{c=i.getNewPosition(we.Up),h=this.moveAllLine(we.Up,we.Down,c,o);t.push(h)}break;case we.Right:if(i.row===this.field.getRowCount()-1){c=i.getNewPosition(we.Up),h=this.moveAllLine(we.Up,we.Down,c,o);t.push(h)}else{c=i.getNewPosition(we.Down),h=this.moveAllLine(we.Down,we.Up,c,o);t.push(h)}break;case we.Up:if(i.column===this.field.getColumnCount()-1){c=i.getNewPosition(we.Left),h=this.moveAllLine(we.Left,we.Right,c,o);t.push(h)}else{c=i.getNewPosition(we.Right),h=this.moveAllLine(we.Right,we.Left,c,o);t.push(h)}break;case we.Down:if(0===i.column){c=i.getNewPosition(we.Right),h=this.moveAllLine(we.Right,we.Left,c,o);t.push(h)}else{c=i.getNewPosition(we.Left),h=this.moveAllLine(we.Left,we.Right,c,o);t.push(h)}}break;case Le.End:t.push(this.moveAllLine(this.getOppositeMoveType(e),e,i,o))}}return Ke.isTutorialSeen||this.step++,t}isPlayMove(e){switch(e.type){case fe.Boss:case fe.Enemy:return!1;case fe.Trap:return!e.isOpen;case fe.Health:case fe.Gold:case fe.Armor:case fe.Cannon:case fe.Barrel:case fe.Chest:case fe.Bomb:case fe.Poison:case fe.Horseshoe:case fe.Lightning:case fe.Multiplier:case fe.Skull:return!0}}playMoveSound(){v.instance.playSound(Xe.getRandomItem([T.Move01,T.Move02]))}getCardToReplace(e){return e.isBoss?this.getChestCardFromFactory():this.getCardFromFactory()}getCardToReplaceAfterSmash(e){var t;return e.isBoss&&(Ke.isNeedCreateChestOnNextStep=!0),t=e.getGoldValue()>0?e.getGoldValue():e.getScore(),this.getCoinCardFromFactory(t)}getCardPositionType(e,t){switch(e){case we.Right:return t.column==this.field.getColumnCount()-1?Le.Start:0==t.column?Le.Center:Le.End;case we.Down:return t.row==this.field.getRowCount()-1?Le.Start:0==t.row?Le.Center:Le.End;case we.Left:return 0==t.column?Le.Start:t.column==this.field.getColumnCount()-1?Le.Center:Le.End;case we.Up:return 0==t.row?Le.Start:t.row==this.field.getRowCount()-1?Le.Center:Le.End}}removeAllChild(){var e=[];v.instance.playSound(T.HeroDies);for(var t=this.field.getAll(),i=0,s=t=L.shuffle(t);i<s.length;i++){var a=t[i],n=p.PoolGet();n.animationDuration=L.getRandomIntInclusive(50,150),n.tweens.push(a.removeChild()),e.push(n)}return e}isBossInTheField(){return this.field.any(function(e){return e.isBoss})}moveAllLine(e,t,i,s){for(var a=[],n=d.AnimationTime*d.AnimationMultiplier;this.field.isPositionValid(i);)a.push(this.moveAndSetWithAnimation(i.getNewPosition(t),this.field.get(i),d.AnimationTime).setAnimationDuration(n)),i=i.getNewPosition(e);var r=this.cardFactory.getDefault(),o=i.getNewPosition(t);return a.push(this.moveAndSetWithAnimation(o,r,d.AnimationTime)),a.push(this.replaceCardByPosition(o,s).setAnimationDuration(1)),a}stepUpdate(){for(var e=0,t=this.field.getAll();e<t.length;e++){t[e].stepUpdate()}}shootCannon(){v.instance.playSound(T.Cannon);var e=this.getHeroPosition(),t=this.field.get(e),i=[];return i.push(this.shootCannonInDirection(we.Right,t,e)),i.push(this.shootCannonInDirection(we.Left,t,e)),i.push(this.shootCannonInDirection(we.Up,t,e)),i.push(this.shootCannonInDirection(we.Down,t,e)),i}shootCannonInDirection(e,t,i){var s=[],a=i.getNewPosition(e);if(!this.field.isPositionValid(a))return s;var n=this.field.get(a);if(St.canShootCard(n)){var r=this.shootCard(t.getCenterX(),t.getCenterY(),n.getCenterX(),n.getCenterY(),200);if(s.push(r),n.type===fe.Cannon)n.increaseScoreInNSeconds(t.shootScore,400);else if(t.shootScore>=n.getScore()){var o=this.getCardToReplaceAfterSmash(n),l=this.replaceCardByPosition(a,o,!0).setAnimationDuration(1);l.setFirstDelay(400),s.push(l)}else n.reduceScoreInNSeconds(t.shootScore,400)}return s}shootCard(e,t,i,s,a){var n=gt.PoolGet();this.game.container.addChild(n);var r=n.moveTo(e,t,i,s,a);return r.animationDuration=1,r}static canShootCard(e){if(e.isEmpty)return!1;if(e.isHero)return!1;switch(e.type){case fe.Boss:case fe.Enemy:case fe.Trap:case fe.Armor:case fe.Health:case fe.Poison:case fe.Cannon:return!0;default:return!1}}smashBomb(){for(var e=this.field.getPositions(function(e){return e.type===fe.Bomb&&e.getPowerUp()<=0}),t=[],i=0;i<e.length;i++){var s=e[i];v.instance.playSound(T.Bomb);var a=this.field.get(s);this.addBombExplosionAnimation(a.view.x,a.view.y,100);var n=this.getCardToReplaceAfterSmash(this.field.get(s)),r=this.replaceCardByPosition(s,n,!0);t.push(r);for(var o=a.getLife(),l=[we.Up,we.Down,we.Left,we.Right],c=0;c<l.length;c++){var h=l[c];if(t.push(this.smashBombInDirection(h,s,o)),!Ke.isHeroAlive)return t}}return t}smashBombInDirection(e,t,i){var s=[],a=d.SmashDelay;for(t=t.getNewPosition(e);this.field.isPositionValid(t);){if(s.push(this.smashBombInPosition(t,a,i)),!Ke.isHeroAlive)return s;a+=d.SmashDelay,t=t.getNewPosition(e)}return s}smashBombInPosition(e,t,i){var s=this.field.get(e),a=4==Ke.RowCount?1e3:500;if(this.game.shake(d.ShakeIntensity,a),this.addBombExplosionAnimation(s.view.x,s.view.y,t),s.type==fe.Chest)return[];if(s.isHero&&Ke.currentHero==ye.Bomb)return[];if(i>=s.getScore()){if(!s.isHero){var n=this.getCardToReplaceAfterSmash(s);return[this.replaceCardByPosition(e,n,!0).setAnimationDuration(1)]}if(!Ke.isHeart)return Ke.isHeroAlive=!1,this.removeAllChild();var r=s;Ke.isHeart=!1,this.keyboardManager.reset(),r.useHeart()}else s.reduceScoreInNSeconds(i,1.2*t);return[]}addBombExplosionAnimation(e,t,i){setTimeout(this.playBombExplosionAnimation.bind(this,e,t),i)}playBombExplosionAnimation(e,t){var i=mt.PoolGet();i.setXY(e,t),this.game.container.addChild(i),i.Play()}replaceCardByPosition(e,t,i=!1){var s=p.PoolGet(),a=s.tweens,n=this.field.get(e);return i&&(n.type==fe.Chest?a.push(n.open()):n.type==fe.Barrel&&a.push(n.open())),n.isBoss&&Ke.addGameLevel(),this.moveAndSet(e,t),t.endTurnAnimationStart(),s.tweens.push(n.startTurnAnimation(t.endTurnAnimationEnd,t)),s}moveAndSet(e,t){this.field.set(e,t),t.setCoordinate(e.getPoint())}moveAndSetWithAnimation(e,t,i){var s=e.getPoint();this.field.set(e,t);var a=p.PoolGet();return a.tweens.push(t.moveTo(s,i)),a}getOppositeMoveType(e){switch(e){case we.Up:return we.Down;case we.Down:return we.Up;case we.Left:return we.Right;case we.Right:return we.Left}}shootLightning(){var e=this.getHeroPosition(),t=this.field.get(e),i=[],s=this.shootLightningInAllDirections(t.lightningScore,e,d.LightningDuration);return i.push(s),this.clearLightning(),i.length>0&&v.instance.playSound(T.Lighting),i}clearLightning(){this.field.getAll().forEach(function(e){e.canLightningStrike=!1})}shootLightningInAllDirections(e,t,i){var s=[];return s.push(this.shootLightningInDirection(we.Right,e,t,i)),s.push(this.shootLightningInDirection(we.Left,e,t,i)),s.push(this.shootLightningInDirection(we.Up,e,t,i)),s.push(this.shootLightningInDirection(we.Down,e,t,i)),s}shootLightningInDirection(e,t,i,s){var a=[],n=i.getNewPosition(e);if(!this.field.isPositionValid(n))return a;var r=this.field.get(n);if(r.isHero)return a;if(r.canLightningStrike)return a;if(St.canShootLightning(r)){var o=s+d.LightningDuration,l=p.PoolGet();if(l.tweens.push(r.runLightning()),l.setAnimationDuration(d.LightningDuration),a.push(l),t>=r.getScore()){var c=this.getCardToReplaceAfterSmash(r);c.canLightningStrike=!0;var h=this.replaceCardByPosition(n,c,!0).setAnimationDuration(1);h.setFirstDelay(2*o),a.push(h)}else r.reduceScoreInNSeconds(t,2*o);r.canLightningStrike=!1,a.push(this.shootLightningInAllDirections(t,n,o))}return a}static canShootLightning(e){switch(e.type){case fe.Boss:case fe.Enemy:case fe.Trap:return!0;default:return!1}}shootMultiplier(){v.instance.playSound(T.Idol);var e=this.getHeroPosition(),t=this.field.get(e),i=[];return i.push(this.shootMultiplierInDirection(we.Right,t.multiplierScore,e)),i.push(this.shootMultiplierInDirection(we.Left,t.multiplierScore,e)),i.push(this.shootMultiplierInDirection(we.Up,t.multiplierScore,e)),i.push(this.shootMultiplierInDirection(we.Down,t.multiplierScore,e)),i}shootSkull(){v.instance.playSound(T.Skull);for(var e=this.getHeroPosition().getPoint(),t=this.field.getPositions(function(e){return!e.isHero}),i=[],s=0;s<t.length;s++){var a=t[s],n=a.getPoint();i.push(this.shootSkullInCoordinate(e.x,e.y,n.x,n.y,300));var r=this.getCardToReplaceAfterSmash(this.field.get(a)),o=this.replaceCardByPosition(a,r,!0).setAnimationDuration(1);o.setFirstDelay(350),i.push(o)}return i}shootSkullInCoordinate(e,t,i,s,a){var n=pt.PoolGet(),r=n.moveTo(e,t,i,s,a);return this.game.container.addChild(n),r.animationDuration=1,r}shootMultiplierInDirection(e,t,i){var s=[],a=i.getNewPosition(e);if(!this.field.isPositionValid(a))return s;var n=this.field.get(a);if(St.canMultiply(n.type,n.getScore())){var r=n.multiplyScore(t);if(!r)return s;r.setAnimationDuration(1),s.push(r)}return s}static canMultiply(e,t){switch(e){case fe.Armor:case fe.Bomb:case fe.Cannon:case fe.Gold:case fe.Health:case fe.Lightning:case fe.Poison:case fe.Boss:case fe.Enemy:case fe.Barrel:return!0;case fe.Trap:return t>0;case fe.Multiplier:case fe.Horseshoe:case fe.Chest:case fe.Skull:return!1}}stopAllAnimations(){}playAllAnimations(){}replaceAllNegativeCards(){for(var e=[],i=0,s=this.field.getPositions(function(e){return!(e instanceof t.Hero)});i<s.length;i++){var a=s[i];if(this.field.get(a).isNegative()){var n=this.getCardFromFactory(t.CardGenerationType.Positive),r=this.replaceCardByPosition(a,n,!0).setAnimationDuration(1);r.tweens[0].delay(200),e.push(r)}}return e}smashHero(e){var t=this.getHero();this.addBombExplosionAnimation(t.getCenterX(),t.getCenterY(),e)}}class Ct{}Ct.MVMouseClick="MVMouseClick";class ft{constructor(){this._isInstalled=!1,this._lastTime=0,this.gap=100}install(){this._isInstalled||(this._isInstalled=!0,Laya.stage.on(Laya.Event.MOUSE_DOWN,this,this.onMouseDown))}uninstall(){Laya.stage.off(Laya.Event.MOUSE_DOWN,this,this.onMouseDown)}onMouseDown(e){if(yt.showCount<10&&Laya.timer.currTimer-this._lastTime>this.gap){let t=yt.poolGet();t.setXY(e.stageX,e.stageY),t.show(),this._lastTime=Laya.timer.currTimer}}}class yt{constructor(){this.halfWidth=100,this.halfHeight=100,this.fx=fgui.UIPackage.createObject(ue.GameHome,Ct.MVMouseClick),this.fx.displayObject.blendMode=Laya.BlendMode.ADD,this.halfWidth=this.fx.width>>1,this.halfHeight=this.fx.height>>1}show(){yt.showCount++,this.fx.setPlaySettings(0,-1,1,-1,Laya.Handler.create(this,this.hide,null,!0)),re.floatMsg.addChild(this.fx)}hide(){this.fx.removeFromParent(),this.poolRecover(),yt.showCount--}setXY(e,t){e-=this.halfWidth,t-=this.halfHeight,this.fx.setXY(e,t)}poolRecover(){yt._poolRecover(this)}static poolGet(){let e;return e=yt.pool.length>0?yt.pool.pop():new yt}static _poolRecover(e){-1==this.pool.indexOf(e)&&this.pool.push(e)}}yt.showCount=0,yt.pool=[];class wt{constructor(){this.items={},this.count=0}ContainsKey(e){return this.items.hasOwnProperty(e)}Count(){return this.count}Add(e,t){this.items.hasOwnProperty(e)||this.count++,this.items[e]=t}Remove(e){var t=this.items[e];return delete this.items[e],this.count--,t}Item(e){return this.items[e]}Keys(){var e=[];for(var t in this.items)this.items.hasOwnProperty(t)&&e.push(t);return e}Values(){var e=[];for(var t in this.items)this.items.hasOwnProperty(t)&&e.push(this.items[t]);return e}}class _t{constructor(e=.2,t=.2,i=!1){this.status=new wt,this.initialStatus=new wt,this.updateVal=.2,this.step=.2,this.resetToZero=!1,this.updateVal=e,this.step=t,this.resetToZero=i}fillBasket(e,t){for(var i=e;i<=t;i++){var s=3-(i-1)*this.step;this.initialStatus.ContainsKey(i.toString())||(this.initialStatus.Add(i.toString(),s),this.status.Add(i.toString(),s))}}fillBasketWithStep(e,t,i,s){this.fillBasket(e,Ve.clamp(t+Math.floor(Ke.gameLevel/i),e,s))}getFromBasket(){for(var e=this.status.Values().reduce(function(e,t){return e+t}),t=Math.random()*e,i=0,s=0,a=this.status.Keys();s<a.length;s++){var n=a[s],r=this.status.Item(n);if(t>i&&t<r+i)return this.removeFromBasket(n),n;i+=r}throw new Error("Item not found in the basked")}removeFromBasket(e){this.status.Keys().forEach(t=>{t===e?this.resetToZero?this.status.Add(e,0):this.status.Add(e,this.initialStatus.Item(e)):this.status.Add(t,this.status.Item(t)+this.updateVal)})}static AfterChestBasket(){var e=new _t(.5,.2,!0);return e.add(fe.Horseshoe.toString(),1),e.add(fe.Bomb.toString(),1),e.add(fe.Lightning.toString(),1),e.add(fe.Skull.toString(),1),e.add(fe.Multiplier.toString(),1),e}add(e,t){this.status.Add(e,t),this.initialStatus.Add(e,t)}print(e){this.status.Values().reduce(function(e,t){return e+t});for(var t=0,i=this.status.Keys();t<i.length;t++){var s=i[t];this.status.Item(s),this.initialStatus.Item(s)}console.groupEnd()}}class Lt{static reset(){this.PositiveCardProbability=0,this.CurrentPositiveCardProbability=0,this.ChanceOfNegativeFromBox=0,this.ChanceOfPositiveFromBox=0}}Lt.PositiveCardProbability=0,Lt.CurrentPositiveCardProbability=0,Lt.ChanceOfNegativeFromBox=0,Lt.ChanceOfPositiveFromBox=0;class vt{constructor(e){this.movesAfterLastSpecialCard=0,this.healthBasket=new _t,this.armorBasket=new _t,this.cannonBasket=new _t,this.enemyBasket=new _t,this.goldBasket=new _t,this.chestBasket=_t.AfterChestBasket(),this.game=e,this.container=e.container}getDefault(){return Ze.GetDefault(this.game)}getHero(){var e=Gr.config.card.getTypeLevelConfig(fe.Hero,Ke.currentHero),t=new ot;return t.game=this.game,t.type=fe.Hero,t.SetConfig(e),t.setShopItemsStatus(),t.totalLife=10,t.currentLife=10,t.armor=0,Ke.isHorseshoe&&(t.totalLife+=1,t.currentLife+=1),t.setStatus(),this.movesAfterLastSpecialCard++,t}getCard(e=_e.Random,t,i){return Ke.isNeedCreateBoss&&e==_e.Random?(Ke.isNeedCreateBoss=!1,this.getBoss()):Ke.isNeedCreateChest&&e==_e.Random?(Ke.isNeedCreateChest=!1,this.getChestCard()):this.generateCardType(e,i)==m.Warrior?this.getEnemy(t):this.getPowerUp(e,t,i)}getHealth(e){var t=fe.Health,i=1;return e<=5&&(i=2),Ze.GetNew(this.game,t,i,e)}generateCardType(e,t){if(e==_e.AfterBarrel&&Ke.currentHero==ye.Key)return m.PowerUp;if(e==_e.AfterChest||e==_e.Positive)return m.PowerUp;if(e==_e.AfterBarrel&&Math.random()<.75)return m.PowerUp;if(Lt.reset(),Ke.cardCounter>2){var i=Math.random();if(Lt.ChanceOfNegativeFromBox=i,i<.8)return m.Warrior}if(Ke.cardCounter<-3){var s=Math.random();if(Lt.ChanceOfPositiveFromBox=s,s<.8)return m.PowerUp}return vt.isShouldBePositiveCard(t)?m.PowerUp:m.Warrior}static isShouldBePositiveCard(e){var t=e.filter(qe.isCardScoreTypePositive).length,i=e.filter(qe.isCardScoreTypeNegative).length;if(!Ke.isFourXFour&&Math.random()<.85&&t<=1)return Math.random()<.8;if(Ke.isFourXFour&&Math.random()<.85&&t<=2)return Math.random()<.8;var s=Math.min(.35,.4-.01*Ke.levelStep),a=i*(Ke.isFourXFour?.02:.03),n=Ve.clamp(s+a,.2,.75),r=Math.random();return Lt.PositiveCardProbability=n,Lt.CurrentPositiveCardProbability=r,r<n}getPowerUp(e,t,i){var s=this.generatePowerUpType(e,i);t=this.generateCardScore(s,t);return Ze.GetNew(this.game,s,1,t)}generateCardScore(e,t=0){if(0==t)switch(e){case fe.Armor:this.armorBasket.fillBasketWithStep(1,4,3,10),t=Number(this.armorBasket.getFromBasket());break;case fe.Health:this.healthBasket.fillBasketWithStep(1,4,3,10),t=Number(this.healthBasket.getFromBasket());break;case fe.Cannon:this.cannonBasket.fillBasketWithStep(1,1,3,10),t=Number(this.cannonBasket.getFromBasket()),Ke.currentHero==ye.Bomb&&(t+=2);break;case fe.Barrel:t=this.generateScore(2,4,3,10);break;case fe.Poison:var i=1+Math.ceil(Ke.gameLevel/2);t=i>10?10:i;break;case fe.Lightning:t=this.generateScore(1,4,3,10);break;case fe.Gold:this.goldBasket.fillBasketWithStep(1,4,2,1e3),t=Number(this.goldBasket.getFromBasket());break;default:t=this.game.rnd.integerInRange(1,5)}return e===fe.Bomb&&(t=this.game.rnd.integerInRange(1,4+Math.ceil(Ke.gameLevel/2)))>10&&(t=10),e===fe.Multiplier&&(t=2),t}generateScore(e,t,i,s){var a=t+Math.ceil(Ke.gameLevel/i),n=this.game.rnd.integerInRange(e,a);return Ve.clamp(n,e,s)}getEnemy(e){var t=this.generateEnemyPower(e);return d.IsDev&&this.enemyBasket.print("Enemy"),0==e&&(e=t,Ke.gameLevel>10&&(e+=Math.floor((Ke.gameLevel-10)/2))),0==t?this.getTrap(e+1):this.getWarrior(t,e)}getTrap(e){return Ze.GetNew(this.game,fe.Trap,1,e)}getWarrior(e,t){return Ze.GetNew(this.game,fe.Enemy,e,t)}static getTrapScore(){return Ke.currentHero==ye.Gun?0:1+L.getRandomIntInclusive(0,Math.ceil(Ke.gameLevel/4))}getBoss(){var e=vt.generateBossPower(),t=8+Ke.gameLevel;return Ze.GetNew(this.game,fe.Boss,e,t)}getChestCard(){return Ze.GetNew(this.game,fe.Chest,1,0)}getCoinCard(e){var t=fe.Gold;0===e&&(e=this.generateCardScore(t));var i=e<6?1:2;return Ze.GetNew(this.game,t,i,e)}static generateBossPower(){return L.getRandomIntInclusive(1,3)}generatePowerUpType(e,t){return e==_e.AfterChest?this.generatePowerUpTypeFromChest():e==_e.AfterBarrel?vt.generatePowerUpTypeFromBarrel(t):vt.generatePowerUpCardScoreType(t)}generatePowerUpTypeFromChest(){return Number(this.chestBasket.getFromBasket())}static generatePowerUpTypeFromBarrel(e){return vt.generateFromBasket(e,qe.getRandomPowerUpFromBarrel,this.maxPowerUpNumber())}static generatePowerUpCardScoreType(e){return vt.generateFromBasket(e,qe.getRandomPowerUp,this.maxPowerUpNumber())}static generateFromBasket(e,t,i){for(var s,a=e=>e===s,n=0;n<10&&(s=t(),!(e.filter(a).length<i));n++);return s}static maxPowerUpNumber(){return L.getRandomIntInclusive(1,2)}generateEnemyPower(e){if(this.enemyBasket.fillBasketWithStep(0,4,2,9),0==e)return Number(this.enemyBasket.getFromBasket());var t=Ve.clamp(e,0,9);return this.enemyBasket.removeFromBasket(t.toString()),t}}class Tt{constructor(e=[]){this.c=1,this.s0=0,this.s1=0,this.s2=0,"string"==typeof e?this.state(e):this.sow(e)}rnd(){var e=2091639*this.s0+2.3283064365386963e-10*this.c;return this.c=0|e,this.s0=this.s1,this.s1=this.s2,this.s2=e-this.c,this.s2}sow(e){if(this.s0=this.hash(" "),this.s1=this.hash(this.s0),this.s2=this.hash(this.s1),this.c=1,e)for(var t=0;t<e.length&&null!=e[t];t++){var i=e[t];this.s0-=this.hash(i),this.s0+=~~(this.s0<0),this.s1-=this.hash(i),this.s1+=~~(this.s1<0),this.s2-=this.hash(i),this.s2+=~~(this.s2<0)}}hash(e){var t,i,s;for(s=4022871197,e=e.toString(),i=0;i<e.length;i++)t=.02519603282416938*(s+=e.charCodeAt(i)),t-=s=t>>>0,s=(t*=s)>>>0,s+=4294967296*(t-=s);return 2.3283064365386963e-10*(s>>>0)}integer(){return 4294967296*this.rnd.apply(this)}frac(){return this.rnd.apply(this)+1.1102230246251565e-16*(2097152*this.rnd.apply(this)|0)}real(){return this.integer()+this.frac()}integerInRange(e,t){return Math.floor(this.realInRange(0,t-e+1)+e)}between(e,t){return this.integerInRange(e,t)}realInRange(e,t){return this.frac()*(t-e)+e}normal(){return 1-2*this.frac()}uuid(){for(var e=0,t="";e++<36;t+=~e%5|3*e&4?(15^e?8^this.frac()*(20^e?16:4):4).toString(16):"-");return t}pick(e){return e[this.integerInRange(0,e.length-1)]}sign(){return this.pick([-1,1])}weightedPick(e){return e[~~(Math.pow(this.frac(),2)*(e.length-1)+.5)]}timestamp(e,t){return this.realInRange(e||9466848e5,t||1577862e6)}angle(){return this.integerInRange(-180,180)}state(e){return"string"==typeof e&&e.match(/^!rnd/)&&(e=e.split(","),this.c=parseFloat(e[1]),this.s0=parseFloat(e[2]),this.s1=parseFloat(e[3]),this.s2=parseFloat(e[4])),["!rnd",this.c,this.s0,this.s1,this.s2].join(",")}}class Gt{constructor(){this.isUp=!1,this.isDown=!1,this.isLeft=!1,this.isRight=!1,this.isSpace=!1}init(e){this.game=e}reset(){this.isUp=!1,this.isDown=!1,this.isLeft=!1,this.isRight=!1,this.isSpace=!1}getMoveType(){return this.isDown?we.Down:this.isLeft?we.Left:this.isRight?we.Right:this.isUp?we.Up:void 0}isPressed(){return this.isUp||this.isDown||this.isLeft||this.isRight||this.isSpace}StartListenKeyboard(){Laya.stage.on(Laya.Event.KEY_UP,this,this.OnKeyboard)}StopListenKeyboard(){Laya.stage.off(Laya.Event.KEY_UP,this,this.OnKeyboard)}OnKeyboard(e){switch(e.keyCode){case Laya.Keyboard.LEFT:case Laya.Keyboard.A:this.reset(),this.isLeft=!0;break;case Laya.Keyboard.RIGHT:case Laya.Keyboard.D:this.reset(),this.isRight=!0;break;case Laya.Keyboard.UP:case Laya.Keyboard.W:this.reset(),this.isUp=!0;break;case Laya.Keyboard.DOWN:case Laya.Keyboard.S:this.reset(),this.isDown=!0}}OnClickCard(e){if(!e.isEmpty&&!e.isHero){var t=this.game.field.field.findHeroPosition(),i=this.game.field.field.findPosition(e);if(i){if(t.row==i.row)1==(s=i.column-t.column)?(this.reset(),this.isRight=!0):-1==s&&(this.reset(),this.isLeft=!0);else if(t.column==i.column){var s;1==(s=i.row-t.row)?(this.reset(),this.isDown=!0):-1==s&&(this.reset(),this.isUp=!0)}}else console.error("OnClickCard position=null",e.type)}}}class It{constructor(){this._isShaking=!1,this._startTime=0,this._offsetPos=[0,0],this.shank_I=0,this._orgX=0,this._orgY=0}exe(e,t=30,i=300,s=6){this._isShaking||(this._isShaking=!0,this._startTime=Laya.timer.currTimer,this._offsetPos=[0,0],this.shank_I=0,this._target=e,this._orgX=e.x,this._orgY=e.y,Laya.timer.loop(t,this,this._pos,[i,s]))}_pos(e,t){this._offsetPos[this.shank_I%2]=this._offsetPos[this.shank_I%2]>0?-t:t,this.shank_I++,this._target.x+=this._offsetPos[0],this._target.y+=this._offsetPos[1],Laya.timer.currTimer-this._startTime>=e&&(Laya.timer.clearAll(this),this.shank_I=0,this._isShaking=!1,this._target.x=this._orgX,this._target.y=this._orgY,this._target=null)}}class Pt{constructor(){this.shakeHandler=new It,this.animationQueue=[],this.keyboardManager=new Gt,this.isAnimationing=!1,this.isPause=!1,this.isChest=!1}init(e){window.game=this,this.windowUI=e,this.container=e.m_container,this.stageClickFx=new ft,this.keyboardManager.init(this),this.rnd=new Tt([(Date.now()*Math.random()).toString()]),this.cardFactory=new vt(this),this.field=new St(this)}testCardViews(){for(var e=Gr.config.card.getConfigList(),t=0,i=e.length;t<i;t++){var s=e[t],a=Y.PoolGet();a.SetConfig(s),this.container.addChild(a);var n=t%5*a.width+.5*a.width,r=Math.floor(t/5)*a.height;a.setXY(n,r),console.log(t,n,r,s.name,s.id)}this.container.setScale(.5,.5)}launch(){rt.OnWar(4==Ke.ColumnCount),Ke.init(),this.container.width=Ke.ColumnCount*d.CardWidth+(Ke.ColumnCount-1)*d.CardSpaceBetweenWidth,this.container.height=Ke.RowCount*d.CardHeight+(Ke.RowCount-1)*d.CardSpaceBetweenHeight;var e=(3*d.CardWidth+2*d.CardSpaceBetweenWidth)/this.container.width;this.container.setScale(e,e),this.stageClickFx.install(),this.keyboardManager.StartListenKeyboard(),this.animationQueue=this.field.initField(),Laya.timer.frameLoop(1,this,this.update)}uninstall(){Laya.timer.clear(this,this.update),this.stageClickFx.uninstall(),this.keyboardManager.StopListenKeyboard(),this.field.uninstall();for(var e=this.container.numChildren-1;e>=0;e--){var t=this.container.getChildAt(e),i=t.PoolRecover;i&&i.call(this),t.parent&&t.removeFromParent()}this.container}update(){this.isPause||this.isAnimationing||(this.animationQueue.length>0?this.runAnimationFromQueue():this.fillQueue())}playAllAnimations(){for(;this.animationQueue.length>0;)this.runAnimationFromQueue()}runAnimationFromQueue(){var e=this.animationQueue.shift();if(e instanceof p){var t=e.animationDuration;this.isAnimationing=!0,e.restart(),setTimeout(this.onAnimationComplete.bind(this),t)}else console.error(e),this.onAnimationComplete()}onAnimationComplete(){this.isAnimationing=!1,this.keyboardManager.reset()}fillQueue(){if(Ke.isHeroAlive){var e=this.field.getHero();if(e.needShoot)return this.addToAnimationQueue(this.field.shootCannon()),void(e.needShoot=!1);if(e.needRunLightning)return this.addToAnimationQueue(this.field.shootLightning()),void(e.needRunLightning=!1);if(e.needShootMultiplier)return this.addToAnimationQueue(this.field.shootMultiplier()),void(e.needShootMultiplier=!1);if(e.needShootSkull)return this.addToAnimationQueue(this.field.shootSkull()),void(e.needShootSkull=!1);this.addToAnimationQueue(this.field.smashBomb()),this.checkKeyHandler()}else Ke.isGameEnd||this.setGameEnd()}setGameOver(){Ke.isHeroAlive=!1,this.addToAnimationQueue(this.field.removeAllChild()),this.isPause=!1}setGameEnd(){Ke.resetShop(),Ke.isGameEnd=!0,kt.exit()}addToAnimationQueue(e){if(null!=e)if(e instanceof Array)for(var t of e)null!=t&&(t instanceof Array?this.addToAnimationQueue(t):this.animationQueue.push(t));else this.animationQueue.push(e)}checkKeyHandler(){var e=this.keyboardManager.getMoveType();if(e){var t=this.move(e);t&&t.length>0?(this.field.stepUpdate(),this.addToAnimationQueue(t)):this.keyboardManager.reset()}}move(e){var t=this.field.getCardToFight(e);if(null==t)return[];var i,s=this.field.getHero(),a=s.fight(t);if(!a.isHeroAlive)return Ke.isHeart?(Ke.isHeart=!1,this.keyboardManager.reset(),s.useHeart(),this.field.move(e)):(Ke.isHeroAlive=!1,this.field.removeAllChild());if(a.isChest)return this.moveType=e,Ke.currentHero==ye.Key?this.chestOpened():Ke.isKey?(this.chestOpened(),this.field.getHero().setShopItemsStatus()):this.openChestPopUp(),[];var n=[];if(Ke.stepUpdate(),a.isNeedIncreaseLifeByOne&&((i=p.PoolGet()).tweens.push(this.field.getHero().increaseLifeByOneTween()),n.push(i)),a.isMove)n.push(this.field.move(e));else{i=p.PoolGet();var r=this.field.replaceCard(e,_e.AfterBarrel,t.getScore());i.tweens.push(r),n.push(i)}return a.isNeedIncreaseLifeByOneAfterBoss&&n.push(this.field.getHero().increaseLifeByOneTween()),this.isChangeTurnsToBoss()&&Ke.decreaseTurnsToBoss(),n}isChangeTurnsToBoss(){return!Ke.isNeedCreateBoss&&!this.field.isBossInTheField()}shake(e,t){this.shakeHandler.exe(this.windowUI,e,t)}openChestPopUp(){this.isPause||this.isChest||(this.isChest=!0,this.windowUI.m_chectPopupPanel.sResult.addOnce(e=>{e?this.chestOpened():this.chestClosed()},this),this.windowUI.m_chectPopupPanel.Open())}chestOpened(){v.instance.playSound(T.ChestOpening),this.isChest=!1,this.playAllAnimations(),this.chestOpenedAction()}chestOpenedAction(){this.destroyChestDelayed(),this.addToAnimationQueue(this.field.replaceCard(this.moveType,_e.AfterChest)),Ke.stepUpdate(),this.isChangeTurnsToBoss(),Ke.decreaseTurnsToBoss()}destroyChestDelayed(e=1){setTimeout(this.destroyChest.bind(this),e)}destroyChest(){}chestClosed(){this.isChest=!1;var e=4==Ke.RowCount?1e3:500;this.shake(d.ShakeIntensity,e),this.field.smashHero(600),this.playAllAnimations(),this.destroyChestDelayed(500);var t=this.field.getHero();Ke.currentHero!=ye.Bomb&&t.reduceScoreInNSeconds(1,1),0==t.getScore()?(this.addToAnimationQueue(this.field.removeAllChild()),Ke.isHeroAlive=!1):this.addToAnimationQueue(this.field.move(this.moveType)),Ke.stepUpdate(),this.isChangeTurnsToBoss()&&Ke.decreaseTurnsToBoss()}}class kt{static init(e){this.isInited||(this.game=new Pt,this.game.init(e),this.isInited=!0)}static launch(){this.uninstall(),this.game.launch()}static setGameOver(){this.game.setGameOver()}static uninstall(){this.game.uninstall()}static exit(){Ke.gold+=Ke.goldPerGame,rt.OnGload(Ke.goldPerGame),rt.OnGloadBest(Ke.bestGoldPerGame),rt.OnWarOver(),this.uninstall(),Gr.menu.openTab(S.Home,Ce.Result)}}kt.isInited=!1,window.War=kt;class Mt extends We{constructor(){super(...arguments),this.preGold=0}onWindowInited(){kt.init(this),this.m_menuTopPanel.m_puaseBtn.onClick(this,this.OnClickPauseBtn)}onWindowDestory(){return!1}onWindowWillShow(){this.m_pausePanel.Close()}onWindowWillHide(){}onWindowShow(){this.preGold=0,this.m_menuTopPanel.SetCoinIconState(),kt.launch(),Laya.timer.frameLoop(1,this,this.OnUpdate)}onWindowHide(){Laya.timer.clearAll(this)}OnClickPauseBtn(){this.m_pausePanel.Open()}OnUpdate(){this.m_menuTopPanel.m_coinText.text=Ke.goldPerGame+"",this.m_menuTopPanel.m_countText.text=Ke.turnsToBoss+"",this.m_menuTopPanel.m_levelTex.text=Ke.gameLevel+"",this.preGold!=Ke.goldPerGame&&(this.preGold=Ke.goldPerGame,this.m_menuTopPanel.PlayFxCoin())}}class bt extends ke{constructor(){super(),this.addAssetForFguiComponent(Mt)}generateAssetsForDynmic(){super.generateAssetsForDynmic()}onMenuCreate(){let e=Mt.createInstance();this.conent=e,this.contentPane=e,super.onMenuCreate()}onShowComplete(){super.onShowComplete()}onHideComplete(){super.onHideComplete()}}class Dt{static get dict(){return this._dict||(this._dict=new Dictionary),this._dict}static get(e){return Dt.dict.getValue(e)}static add(e,t){Dt.dict.add(e,new ne(e,t))}static install(){Dt.add(S.Login,Ue),Dt.add(S.Home,Ee),Dt.add(S.War,bt)}}class Ft extends r{get menuId(){return this.id}get menuLayer(){return this.layer}get menuCloseOtherType(){return this.closeOtherType}get menuLoaderId(){return C.Launch}get iconUrl(){return this._iconUrl||isNullOrEmpty(this.icon)||(this._iconUrl=ee.getMenuIconUrl(this.icon)),this._iconUrl}get nameIconUrl(){return this._nameIcon||isNullOrEmpty(this.moduleNameIcon)||(this._nameIcon=ee.getMenuNameIconUrl(this.moduleNameIcon)),this._nameIcon}get isSubbarMainButton(){return this.menuId>=S.SubMenuButtonBegin}get isUnlock(){let e=this.menuId;return!Gr.config.unlock.hasConfig(e)||Gr.moduleModel.home.IsOpen(e)}get lockText(){let e=Gr.config.unlock.getUnlockConfig(this.menuId);if(e){let t=e.openLevel<=Gr.user.level?"":`需要主公等级达到${e.openLevel}`;if(!e.checkPoint)return t+"后开启";let i=Gr.config.checkPoint.getConfig(e.checkPoint),s=Gr.moduleModel.section.getMissionDataById(e.checkPoint).isActive,a=`通过关卡${i.chapter}-${i.mapID}`;return Boolean(t)?t+(s?",且"+a:""):a+"后开启"}return te.Lock}get lockVisiable(){let e=Gr.config.unlock.getConfig(this.menuId);return!e||0==e.showType}get enableOpen(){return se.getInstance().validate(this.menuId)}get isNew(){return ae.getInstance().validate(this.menuId)}async openMenu(){if(this.menuId<S.SubMenuButtonBegin){if(!this.isUnlock)return Gr.system.toastText(this.lockText),!1;let e=Dt.get(this.menuId);if(!e)return Gr.system.toastText(te.Disable),!1;if(e.windowClass){if(!await e.windowClass.AsyncEnableOpen())return!1}if(this.enableOpen)return Gr.menu.open(this.menuId),!0}return!0}}class Ht extends o{}class xt extends l{get menuConfig(){return Gr.config.menu.getConfig(this.menuId)}get lockvisible(){return 1==this.showType}get isUnlock(){let e=this.menuConfig;return!!e&&e.isUnlock}get IsNew(){let e=this.menuConfig;return!!e&&e.isNew}get isOpenShow(){return!1}get isOpenShowMenu(){return!1}get iconUrl(){return""}}class Bt{constructor(e,t){this._configList=[],this.tableName=e,this.tabelConfigClass=t}onGameLoadedAll(){}get configDict(){return this._configDict||(this._configDict=Vt.pbconfig[this.tableName]),this._configDict}get configList(){if(0==this._configList.length)for(let e in this.configDict)this._configList.push(this.configDict[e]);return this._configList}getConfigList(){return this.configList}getConfig(e){return this.configDict[e]||console.log(`${this.tableName} 没有 id=${e} 的配置`),this.configDict[e]}hasConfig(e){return!!this.configDict[e]}shieldConfig(e){for(let t=0,i=e.length;t<i;t++){let i=e[t];if(this.hasConfig(i)){delete this._configDict[i];let e=this.configList;for(let t=0,s=e.length;t<s;t++)if(e[t].id==i){e.splice(t,1);break}}}}}class At extends Bt{constructor(){super(...arguments),this.typeMap=new Map}static GetId(e,t=1){return 100*e+t}getTypeLevelConfig(e,t=1){var i=At.GetId(e,t);return this.getConfig(i)}onGameLoadedAll(){super.onGameLoadedAll(),this.typeMap.clear();let e=this.configList;for(let s=0;s<e.length;s++){var t,i=e[s];this.typeMap.has(i.cardScoreType)?t=this.typeMap.get(i.cardScoreType):(t=[],this.typeMap.set(i.cardScoreType,t)),t.push(i)}}getConfigListByTypeKey(e){return this.typeMap.get(e)}}class Rt extends Bt{constructor(){super(...arguments),this.configsByKey=new Map}onGameLoadedAll(){if(0!=this.configsByKey.size)return;super.onGameLoadedAll();let e=this.configList;for(let t=0;t<e.length;t++){let i=e[t].key;isNullOrEmpty(i)&&(i=e[t].id),this.configsByKey.set(i,e[t])}}getConfig(e){if(0==this.configsByKey.size&&this.onGameLoadedAll(),!this.configsByKey.has(e)){if(this.hasConfig(e))return super.getConfig(e);console.log(`${this.tableName} 没有 key=${e} 的配置`)}return this.configsByKey.get(e)}keyToTypeId(e){var t=this.getConfig(e);if(t)return t.id}}class Ut extends Bt{constructor(){super(...arguments),this.typeMap=new Map}onGameLoadedAll(){super.onGameLoadedAll(),this.typeMap.clear();let e=this.configList;for(let s=0;s<e.length;s++){var t,i=e[s];this.typeMap.has(i.type)?t=this.typeMap.get(i.type):(t=[],this.typeMap.set(i.type,t)),t.push(i)}}getConfigListByTypeKey(e){return this.typeMap.get(e)}}class Ot extends Bt{}class Nt extends Bt{constructor(){super(...arguments),this.barDict=new Dictionary}getBarMenus(e){let t=[],i=[];for(let s=0,a=(t=this.barDict.getValue(e)).length;s<a;s++){let e=t[s],a=Gr.config.unlock.getUnlockConfig(e.menuId);a&&2!=a.showType&&e.menuId!=S.Sections&&i.push(e)}return i.sort((e,t)=>e.barIndex-t.barIndex),i}getShowBarMenus(e){let t=[],i=[];for(let s=0,a=(t=this.barDict.getValue(e)).length;s<a;s++){let e=t[s],a=Gr.config.unlock.getUnlockConfig(e.menuId);a&&1==a.showType&&a.showLevel<=Gr.user.level&&i.push(e)}return i.sort((e,t)=>e.barIndex-t.barIndex),i}onGameLoadedAll(){let e=this.configList;for(let t=0;t<e.length;t++){let i=e[t],s=this.barDict.getValue(i.barType);s||(s=[],this.barDict.add(i.barType,s)),s.push(i)}}}class Et extends Bt{constructor(){super(...arguments),this.configsByKey=new Map}onGameLoadedAll(){super.onGameLoadedAll();let e=this.configList;for(let t=0;t<e.length;t++){let i=e[t].key;isNullOrEmpty(i)&&(i=e[t].id),this.configsByKey.set(i,e[t])}}getConfig(e){if(!this.configsByKey.has(e)){if(this.hasConfig(e))return super.getConfig(e);console.log(`${this.tableName} 没有 key=${e} 的配置`)}return this.configsByKey.get(e)}getTxt(e){let t=this.getConfig(e);return t?t.notice:`[Error]${this.tableName} 没有 key=${e} 的配置`}getTxtFormat(e,...t){return this.getTxt(e).format(...t)}}class Wt extends Bt{constructor(){super(...arguments),this.menuConfigs=new Dictionary,this.menuGroups=new Dictionary,this.unlockGroups=new Dictionary,this.sortMenus=new Dictionary}setConfig(e){let t,i,s,a;e.menuIndexId?this.menuConfigs.add(e.menuIndexId,e):this.menuConfigs.add(e.menuId,e),i=e.group,this.menuGroups.hasKey(i)?t=this.menuGroups.getValue(i):(t=[],this.menuGroups.add(i,t)),t.push(e),a=e.openType,this.unlockGroups.hasKey(a)?s=this.unlockGroups.getValue(a):(s=[],this.unlockGroups.add(a,s)),s.push(e)}getUnlockConfig(e){return this.menuConfigs.getValue(e)}getBarMenus(e){let t=this.menuGroups.getValue(e);return 0==this.sortMenus.hasKey(e)&&(t.sort((e,t)=>e.groupId-t.groupId),this.sortMenus.add(e,!0)),t}getUnlocks(e){return this.unlockGroups.getValue(e)}onGameLoadedAll(){let e=this.configList;for(let t of e)this.setConfig(t)}}class Vt{constructor(){this.card=new At("Card",$),this.cardScoreType=new Rt("CardScoreType",J),this.item=new Ut("Item",Q),this.loader=new Ot("Loader",Z),this.menu=new Nt("Menu",Ft),this.msg=new Et("Msg",Ht),this.unlock=new Wt("Unlock",xt)}static Init(){excelconfig.Card=$,excelconfig.CardScoreType=J,excelconfig.Item=Q,excelconfig.Loader=Z,excelconfig.Menu=Ft,excelconfig.Msg=Ht,excelconfig.Unlock=xt}}class Xt extends Vt{}!function(e){e[e.pb=0]="pb",e[e.json=1]="json"}(Te||(Te={}));class qt extends Xt{constructor(){super(...arguments),this.sLoadProgress=new Typed3Signal,this.sLoaded=new Signal,this.loadProgress=0,this.readers=[],this.readerMap=new Map,this.configType=Te.json}initList(){Vt.Init(),this.readers.length=0;for(let e in this){let t=this[e];t instanceof Bt&&(this.readers.push(t),this.readerMap.set(t.tableName,t))}}shieldList(){let e=Gr.channel.serverItem.shieldHero;e&&e.length&&Gr.config.hero.shieldConfig(e)}async loadAllAsync(){this.loadProgress=0;this.readers.length;switch(this.configType){case Te.pb:await this.loadPB();break;default:await this.loadJson()}window.Global=Vt.pbconfig.Global,this.onGameLoadedAll()}async loadPB(){let e=await Gr.asset.loadResAsync("res/config/pb/excelconfig.bin",Laya.Loader.BUFFER),t=new Uint8Array(e);Vt.pbconfig=excelconfig.ConfigMng.decode(t)}async loadJson(){let e=await Gr.asset.loadResAsync("res/config/pb/excelconfig.json",Laya.Loader.JSON);this.InstallJson(e)}InstallJson(e){let t=Vt.pbconfig=new excelconfig.ConfigMng,i=e.Global,s=new excelconfig.Global;for(var a in i){this.keyToPbKey(a);s[a]=i[a]}t.Global=s;for(let i in e){let s=e[i];if(!this.readerMap.has(i))continue;let n=this.readerMap.get(i).tabelConfigClass;t[i]={};for(let e in s){let r=s[e],o=new n;for(var a in r){o[this.keyToPbKey(a)]=r[a]}t[i][e]=o}}}keyToPbKey(e){if(-1==e.indexOf("_"))return e;let t=e.split("_");for(let e=1;e<t.length;e++){let i=t[e];i.length>=1&&(t[e]=i.substr(0,1).toUpperCase()+i.substr(1,i.length-1))}return e=t.join("")}onGameLoadedAll(){for(let e=0;e<this.readers.length;e++)this.readers[e].onGameLoadedAll();this.sLoaded.dispatch()}}class Kt{constructor(){this.developWidth=750,this.developHeight=1334}get developAspect(){return this.developWidth/this.developHeight}get isLandsape(){return this.developWidth>this.developHeight}get screenWidth(){return Laya.stage.width}get screenHeight(){return Laya.stage.height}get isWX(){return!!window.wx}get safeArea(){if(this.isWX)return wx.getSystemInfoSync().safeArea}get liuHaiHeightTop(){return 44}get liuHaiHeightBottom(){return this.isWX?this.liuHaiHeightTop:44}get screenHeightLiuHai(){return fgui.GRoot.inst.height-this.liuHaiHeightTop-this.liuHaiHeightBottom}get screenWidthLiuHai(){return fgui.GRoot.inst.width-this.liuHaiHeightTop-this.liuHaiHeightBottom}get screenAspect(){return this.screenWidth/this.screenHeight}get screenScaleExpand(){let e=1;return e=this.screenAspect<=this.developAspect?this.screenHeight/this.developHeight/(this.screenWidth/this.developWidth):this.screenWidth/this.developWidth/(this.screenHeight/this.developHeight)}get screenScaleX(){return this.screenWidth/this.developWidth}get screenScaleY(){return this.screenHeight/this.developHeight}get screenScaleShrink(){return Math.min(this.screenScaleX,this.screenScaleY)}get screenScaleShrinkMax(){let e=1;return e=this.screenAspect<=this.developAspect?this.screenHeight/this.developHeight:this.screenWidth/this.developWidth}}class jt{get username(){return this._username||(this._username=this.getString("username",!0)),this._username}set username(e){this._username=e,this.setString("username",e,!0),Gr.sound.onLogin()}getKey(e,t=!1){return t?e:this.username+"_"+e}setItem(e,t,i=!1){Laya.LocalStorage.setItem(this.getKey(e,i),t)}getItem(e,t=!1){return Laya.LocalStorage.getItem(this.getKey(e,t))}setString(e,t,i=!1){Laya.LocalStorage.setItem(this.getKey(e,i),t)}getString(e,t=!1){let i=Laya.LocalStorage.getItem(this.getKey(e,t));return null==i&&(i=""),i}setBoolean(e,t,i=!1){Laya.LocalStorage.setItem(this.getKey(e,i),t?"true":"false")}getBoolean(e,t=!1){return"true"==Laya.LocalStorage.getItem(this.getKey(e,t))}setInt(e,t,i=!1){Laya.LocalStorage.setItem(this.getKey(e,i),t.toString())}getInt(e,t=!1){let i=Laya.LocalStorage.getItem(this.getKey(e,t));return i?parseInt(i):0}setFloat(e,t,i=!1){Laya.LocalStorage.setItem(this.getKey(e,i),t.toString())}getFloat(e,t=!1){let i=Laya.LocalStorage.getItem(this.getKey(e,t));return i?parseFloat(i):0}setJSON(e,t,i=!1){Laya.LocalStorage.setJSON(this.getKey(e,i),t)}getJSON(e,t=!1){return Laya.LocalStorage.getJSON(this.getKey(e,t))}removeItem(e,t=!1){return Laya.LocalStorage.removeItem(this.getKey(e,t))}hasItem(e,t=!1){return!isNullOrEmpty(Laya.LocalStorage.getItem(this.getKey(e,t)))}clear(){return Laya.LocalStorage.clear()}}class zt extends jt{static get Instance(){return zt._Instance||(zt._Instance=new zt),zt._Instance}get gmX(){return void 0===this._gmX&&(this._gmX=this.getFloat("gmX",!0)),this._gmX}set gmX(e){this._gmX=e,this.setFloat("gmX",e,!0)}get gmY(){return void 0===this._gmY&&(this.hasItem("gmY",!0)?this._gmY=this.getFloat("gmY",!0):this._gmY=100),this._gmY}set gmY(e){this._gmY=e,this.setFloat("gmY",e,!0)}get fontSetting(){return this._fontSetting||(this._fontSetting=this.getItem("fontSetting",!0)),this._fontSetting}set fontSetting(e){this._fontSetting=e,this.setItem("fontSetting",e,!0)}get serverName(){return this._serverName||(this._serverName=this.getItem("serverName",!0)),this._serverName}set serverName(e){this._serverName=e,this.setItem("serverName",e,!0)}get useraccountList(){return this._useraccountList||(this._useraccountList=this.getJSON("_useraccountList",!0)),this._useraccountList||(this._useraccountList=[]),this._useraccountList}set useraccountList(e){this._useraccountList=e,this.setJSON("_useraccountList",e,!0)}addUseraccount(e,t){let i=!1,s=this.useraccountList?this.useraccountList:[];for(let a=0;a<s.length;a++)s[a].username==e&&(s[a].password=t,s[a].lasttime=Gr.time.localTimeMS,i=!0);i||s.push({username:e,password:t,lasttime:Gr.time.localTimeMS}),s.sort((e,t)=>t.lasttime-e.lasttime),this.useraccountList=s}get password(){return this._password||(this._password=this.getItem("password"),null==this._password&&(this._password="")),this._password}set password(e){this._password=e,this.setItem("password",e)}get server(){return this._server||(this._server=this.getInt("server"),null==this._server&&(this._server=0)),this._server}set server(e){this._server=e,this.setInt("server",e)}get deviceId(){if(!this._deviceId&&!(this._deviceId&&"undefined"!=this._deviceId&&null!=this._deviceId||(this._deviceId=this.getString("_deviceId",!0),this._deviceId))){let e=(new Date).getTime(),t=Math.random();this._deviceId=e.toString()+"."+t.toString()}return this._deviceId}set deviceId(e){this._deviceId=e,this.setString("_deviceId",e,!0)}get guestusername(){return this._guestusername||(this._guestusername=this.getString("guest",!0)),this._guestusername}set guestusername(e){this._guestusername=e,this.setString("guest",e,!0),Gr.sound.onLogin()}get isGuest(){return void 0===this._isGuest&&(this._isGuest=this.getBoolean("isGuest",!0)),this._isGuest}set isGuest(e){this._isGuest=e,this.setBoolean("isGuest",e,!0)}get isGameGuest(){return void 0===this._isGameGuest&&(this._isGameGuest=this.getBoolean("isGameGuest",!0)),this._isGameGuest}set isGameGuest(e){this._isGameGuest=e,this.setBoolean("isGameGuest",e,!0)}get isNoticTodayNoOpen(){return void 0===this._isNoticTodayNoOpen&&(this._isNoticTodayNoOpen=this.getBoolean("isNoticTodayNoOpen",!0)),this._isNoticTodayNoOpen}set isNoticTodayNoOpen(e){this._isNoticTodayNoOpen=e,this.setBoolean("isNoticTodayNoOpen",e,!0)}get lastOpenShopSpecialTime(){return void 0===this._lastOpenShopSpecialTime&&(this._lastOpenShopSpecialTime=this.getFloat("lastOpenShopSpecialTime",!0)),this._lastOpenShopSpecialTime}set lastOpenShopSpecialTime(e){this._lastOpenShopSpecialTime=e,this.setFloat("lastOpenShopSpecialTime",e,!0)}get lastOpenShopSingleTime(){return void 0===this._lastOpenShopSingleTime&&(this._lastOpenShopSingleTime=this.getFloat("lastOpenShopSingleTime",!0)),this._lastOpenShopSingleTime}set lastOpenShopSingleTime(e){this._lastOpenShopSingleTime=e,this.setFloat("lastOpenShopSingleTime",e,!0)}}!function(e){e[e.VeryLower=0]="VeryLower",e[e.Lower=1]="Lower",e[e.Middle=2]="Middle",e[e.Hight=3]="Hight"}(Ge||(Ge={}));class Yt{constructor(){this.skeletonCacheMaxNum=10,this.unitMaxNum=10,this.roomUnitMaxNum=2,this.menuCacheTime=1e4,this.fguiLoaderCacheNum=100,this.fguiLoaderCacheTime=100,this.trailNum=5,this._performanceType=Ge.Lower,this._networkType=-1}get performanceType(){return this._performanceType}set performanceType(e){switch(this._performanceType=e,e){case Ge.VeryLower:this.skeletonCacheMaxNum=5,this.unitMaxNum=18,this.roomUnitMaxNum=2,this.menuCacheTime=3e3,this.fguiLoaderCacheNum=50,this.fguiLoaderCacheTime=3e3,this.trailNum=1;break;case Ge.Lower:this.skeletonCacheMaxNum=10,this.unitMaxNum=20,this.roomUnitMaxNum=3,this.menuCacheTime=3e3,this.fguiLoaderCacheNum=30,this.fguiLoaderCacheTime=3e3,this.trailNum=2;break;case Ge.Middle:this.skeletonCacheMaxNum=25,this.unitMaxNum=30,this.roomUnitMaxNum=4,this.menuCacheTime=1e4,this.fguiLoaderCacheNum=60,this.fguiLoaderCacheTime=1e4,this.trailNum=4;break;case Ge.Hight:this.skeletonCacheMaxNum=50,this.unitMaxNum=50,this.roomUnitMaxNum=4,this.menuCacheTime=3e5,this.fguiLoaderCacheNum=100,this.fguiLoaderCacheTime=1e5,this.trailNum=5}}init(){let e=this.getTotalMem();this.performanceType=e<=0?Ge.Hight:e<=1048576?Ge.VeryLower:e<=2097152?Ge.Middle:Ge.Hight}get isApp(){return!!window.conch}getTotalMem(){return this.isApp?window.conch.config.getTotalMem():0}getUsedMem(){return this.isApp?window.conch.config.getUsedMem():0}getAvalidMem(){return this.isApp?window.conch.config.getAvalidMem():0}getNetworkType(){return-1!=this._networkType?this._networkType:this.isApp?(this._networkType=window.conch.config.getNetworkType(),this._networkType):NetworkType.NET_UNKNOWN}set networkType(e){this._networkType=e}printInfo(){let e=` TotalMem: ${kbToStr(this.getTotalMem())}\n UsedMem: ${kbToStr(this.getUsedMem())}\n AvalidMem: ${kbToStr(this.getAvalidMem())}\n NetworkType: ${this.getNetworkType()}`;console.log(e)}}class $t{static toLang(e){-1!=(e=e.replace("-","_").toLowerCase()).indexOf("en")&&(e=$t.en);{let t=!1;for(let i in $t)if(i==e){t=!0;break}t||(e=$t.en)}return e}}$t.zh_cn="zh_cn",$t.zh_tw="zh_tw",$t.en="en";class Jt{constructor(){this.configs=new Dictionary}getConfigList(){return this.configs.getValues()}get configList(){return this.configs.getValues()}getConfig(e){return this.configs.hasKey(e)||console.log(`${this.tableName} 没有 id=${e} 的配置`),this.configs.getValue(e)}addConfig(e){this.configs.add(e.id,e)}getConfigPath(){return ee.config+`csv/${this.tableName}.csv`}load(e,t){}reload(e,t){}onGameLoadedAll(){}clear(){this.configs.clear()}}class Qt extends Jt{constructor(){super(...arguments),this.csvDelimiter="\t",this.csvSeparatorReplace=null,this.csvLineSeparatorReplace="|n|",this.headTypes=new Dictionary,this.headKeyEns=new Dictionary,this.headKeyFields=new Dictionary,this.headKeyCns=new Dictionary}ReplaceSpearator(e){return"TextFgui"==this.tableName&&e.indexOf(this.csvLineSeparatorReplace),e=(e=e.replace(/\|n\|/g,"\n")).replace(/\r/g,"")}load(e,t){e.loadConfig(this.getConfigPath(),(i,s)=>{this.parse(i),t&&t(this),e.unloadConfig(this.getConfigPath())})}reload(e,t){this.clear(),this.load(e,t)}clear(){this.headTypes.clear(),this.headKeyEns.clear(),this.headKeyFields.clear(),this.headKeyCns.clear(),super.clear()}parse(e){if(null==e)return void console.error(`${this.tableName}: txt=${e}`);let t,i,s=e.split("\n");i=(t=s[0]).split(this.csvDelimiter),this.ParseHeadTypes(i),i=(t=s[1]).split(this.csvDelimiter),this.ParseHeadKeyCN(i),i=(t=s[2]).split(this.csvDelimiter),this.ParseHeadKeyEN(i);for(let e=3;e<s.length;e++)if(t=s[e],!isNullOrEmpty(t)){i=t.split(this.csvDelimiter);for(let e=0;e<i.length;e++)i[e]=this.ReplaceSpearator(i[e]);this.ParseCsv(i)}}ParseHeadTypes(e){let t;for(let i=0;i<e.length;i++)t=e[i],isNullOrEmpty(t)||(t=t.trim(),this.headTypes.add(i,t))}ParseHeadKeyCN(e){let t;for(let i=0;i<e.length;i++)t=this.ReplaceSpearator(e[i]),isNullOrEmpty(t)||(t=t.trim(),this.headKeyCns.add(i,t))}ParseHeadKeyEN(e){let t;for(let i=0;i<e.length;i++)t=e[i],isNullOrEmpty(t)||(t=t.trim(),this.headKeyEns.hasKey(t)&&console.error(`${this.tableName}: ParseHeadKeyEN 已经存在key= ${t},  i = ${i}`),this.headKeyEns.add(t,i),this.headKeyFields.add(i,t))}ParseCsv(e){}GetHeadType(e){return this.headTypes.getValue(e)}GetHeadField(e){return this.headKeyFields.getValue(e)}GetHeadIndex(e){return this.headKeyEns.hasKey(e)?this.headKeyEns.getValue(e):(console.error(`${this.tableName}: headKeyEns[${e}] = -1`),-1)}onGameLoadedAll(){}}class Zt{}class ei extends Zt{constructor(){super(...arguments),this.dict=new Dictionary}}class ti{}ti.MString="string",ti.MStringArray="string[]";class ii extends Qt{constructor(e){super(),this.lang="zh_cn",this.tableName=e}getConfigPath(){return`config/lang/${this.lang}/${this.tableName}.csv`}get headKeyFieldList(){return this._headKeyFieldList||(this._headKeyFieldList=this.headKeyFields.getValues()),this._headKeyFieldList}ParseCsv(e){let t=new ei;t.id=csvGetInt(e,this.GetHeadIndex("id"));let i=this.headKeyFieldList;for(let s=0;s<i.length;s++){let a=csvGetString(e,this.GetHeadIndex(i[s]));switch(this.GetHeadType(s)){case ti.MStringArray:t.dict.add(i[s],toStringArray(a));break;default:t.dict.add(i[s],a)}}this.addConfig(t)}}class si{constructor(){this.lang="zh_cn",this.renders=[],this.textCode=new ii("TextCode"),this.textFgui=new ii("TextFgui")}initList(){}}class ai extends si{constructor(){super(...arguments),this.sLoadProgress=new Typed3Signal,this.sLoaded=new Signal,this.loadProgress=0,this.isLoadCompleted=!1,this.textRenders=[],this.sTextLoaded=new Signal}async loadAllAsync(){return new Promise(e=>{this.loadAll(),this.sLoaded.addOnce(()=>{e()},this)})}loadAll(){this.loadProgress=0;let e=this.renders.length,t=0,i=()=>{t++,this.loadProgress=t/e,this.sLoadProgress.dispatch(t,e,this.loadProgress),t>=e&&this.onGameLoadedAll()};for(let e=0;e<this.renders.length;e++)this.renders[e].lang=this.lang,this.renders[e].load(this.configLoader,i)}onGameLoadedAll(){for(let e=0;e<this.renders.length;e++)this.renders[e].onGameLoadedAll();this.setCodeTEXT(),ge.setStringsSource(this.textFgui),this.isLoadCompleted=!0,this.sLoaded.dispatch()}loadText(){let e=this.textRenders;0==e.length&&(e.push(this.textCode),e.push(this.textFgui)),this.loadProgress=0;let t=e.length,i=0,s=()=>{++i>=t&&this.onLoadTextComplte()};for(let t=0;t<e.length;t++)e[t].lang=this.lang,e[t].load(this.configLoader,s)}onLoadTextComplte(){let e=this.textRenders;for(let t=0;t<e.length;t++)e[t].onGameLoadedAll();this.setCodeTEXT(),ge.setStringsSource(this.textFgui),this.sTextLoaded.dispatch()}setCodeTEXT(){if(!this._srcTEXT&&te){this._srcTEXT=new Dictionary;for(let e in te)this._srcTEXT.add(e,te[e])}let e=this.textCode.getConfigList();for(let t=0;t<e.length;t++){let i=e[t],s=i.dict.getValue("key"),a=i.dict.getValue("value");isNullOrEmpty(a)||(te[s]=a)}}}class ni{constructor(){this.isUseLang=!1,this._lang=null,this.langListDict=new Dictionary}static get Instance(){return ni._Instance||(ni._Instance=new ni),ni._Instance}get httpLang(){return this._httpLang||(this.httpLang=this.lang),this._httpLang}set httpLang(e){if((e=e.replace("_","-")).indexOf("-")){let t=e.split("-");for(let e=1;e<t.length;e++)t[e]=t[e].toUpperCase();e=t.join("-")}this._httpLang=e}get lang(){return this._lang||(Gr.localStorage.hasItem("_lang",!0)?this._lang=Gr.localStorage.getString("_lang",!0):this._lang=$t.zh_cn,this.httpLang=this._lang),this._lang}set lang(e){this._lang=e,this.httpLang=e,Gr.localStorage.setString("_lang",e,!0)}get current(){if(this._current)return this._current;if(!this.langListDict.hasKey(this.lang)){let e=new ai;e.lang=this.lang,this.langListDict.add(e.lang,e),this._current=e}return this.langListDict.getValue(this.lang)}getValue(e,t,i){let s=this.current[e];if(s){let e=s.getConfig(t);if(e)return e.dict.getValue(i)}return null}}class ri{static getResPackagePath(e,t){return isNullOrEmpty(t)?`${ri.resRoot}${e}`:`${ri.resRoot}${t}/${e}`}static getResPath(e,t){return isNullOrEmpty(t)?`${ri.resRoot}${e}`:`${ri.resRoot}${t}/${e}`}static getMapPath(e){return this.getResPath(e,"map")}static addPackage(e,t){if(ri._uiPackageDict.hasKey(e))return ri._uiPackageDict.getValue(e);{let t=fgui.UIPackage.addPackage(e);return ri._uiPackageDict.add(e,t),t}}static removePackage(e,t){let i=ri._uiPackageDict.getValue(e);i&&(fgui.UIPackage.removePackage(i.id),i.dispose(),ri._uiPackageDict.remove(e)),ri._uiPackageDictForReferenceNum.remove(e)}static hasLoadPackage(e){return ri._uiPackageDict.hasKey(e)}static addPackageReferenceNum(e){let t=ri.getPackageReferenceNum(e)+1;return 0==t&&(t=1),console.log("~~addPackageReferenceNum:  "+t+"  "+e),ri._uiPackageDictForReferenceNum.add(e,t),t}static removePackageReferenceNum(e){let t=ri.getPackageReferenceNum(e)-1;return t<0&&(t=0),console.log("~~removePackageReferenceNum:  "+t+"  "+e),ri._uiPackageDictForReferenceNum.add(e,t),t}static getPackageReferenceNum(e){return ri._uiPackageDictForReferenceNum.hasKey(e)?ri._uiPackageDictForReferenceNum.getValue(e):0}}ri.resRoot="res/",ri.packageFileExtension="bin",ri._uiPackageDict=new Dictionary,ri._uiPackageDictForReferenceNum=new Dictionary;var oi=Laya.Handler,li=Laya.Loader;class ci{constructor(){this.loadedAssets=new Dictionary}loadConfig(e,t){if(t){let i={onLoaded:()=>{let i=Laya.loader.getRes(e);t(i,e)}};Laya.loader.load(e,oi.create(i,i.onLoaded),null,li.TEXT)}}unloadConfig(e){Laya.loader.clearRes(e)}loadList(e,t,i,s){let a=e.length,n=0,r={onComplete:r=>{let o=e[n];if(n++,s){s(a>0?n/a:1,n,a,o)}n>=a&&i&&(t?i.apply(t):i())},onProgress:e=>{}};if(e&&e.length>0){let t,i=[];for(let s=0;s<e.length;s++)switch((t=e[s])||r.onComplete(t),t.type){case y.FguiPackage:this.loadFguiByPackagename(t.url,r,r.onComplete);break;case y.FspritePackage:this.loadFSpriteByPackagename(t.url,r,r.onComplete);break;case y.Image:i.push({url:t.url,type:li.IMAGE});break;case y.Buffer:i.push({url:t.url,type:li.BUFFER});break;case y.Sound:i.push({url:t.url,type:li.SOUND});break;case y.Text:i.push({url:t.url,type:li.TEXT});break;case y.Json:i.push({url:t.url,type:li.JSON});break;case y.Xml:i.push({url:t.url,type:li.XML});break;case y.Font:i.push({url:t.url,type:li.FONT});break;case y.TTF:i.push({url:t.url,type:li.TTF})}if(i.length>0)for(let e=0;e<i.length;e++)this.loadedAssets.hasKey(i[e].url)?r.onComplete(!0):Laya.loader.load([i[e]],oi.create(r,r.onComplete),oi.create(r,r.onProgress)),this.loadedAssets.add(i[e].url,Gr.time.localTimeMS)}else r.onComplete(null)}loadFguiByPackagename(e,t,i){let s=Gr.guiRes.getconfig(e);this.loadFgui(s,t,i)}async loadFguiByPackagenameAsync(e){return new Promise(t=>{this.loadFguiByPackagename(e,this,e=>{t(e)})})}loadFSpriteByPackagename(e,t,i){let s=Gr.spriteRes.getconfig(e);s?this.loadFgui(s,t,i):console.error(`AssetManager loadFSpriteByPackagename: packageConfig=${s} packageName=${e}`)}loadFgui(e,t,i){if(!e)return void console.error(`AssetManager loadFgui: packageConfig=${e}`);let s={apply:()=>{if(ri.addPackage(e.packagePath,e),i){if(t)return i.apply(t,[e]);i(e)}}};ri.addPackageReferenceNum(e.packagePath),ri.hasLoadPackage(e.packagePath)?s.apply():Laya.loader.load(e.loadList,oi.create(s,s.apply))}unloadFgui(e,t){void 0===t&&(t=!1);let i=Gr.guiRes.getconfig(e);if(i||(i=Gr.spriteRes.getconfig(e)),i){let e=ri.removePackageReferenceNum(i.packagePath);if(!t&&e>0)return;ri.removePackage(i.packagePath,i);let s=i.loadList;for(let e=0;e<s.length;e++)Laya.loader.clearRes(s[e].url)}}loadFx(e,t,i){Laya.loader.load(e,oi.create(null,e=>{i&&(t?i.apply(t,e):i(e))}),null,li.JSON)}load(e,t,i,s){Laya.loader.load(e,oi.create(null,e=>{t&&(i?t.apply(i,[e]):t(e))}),null,he.assetItemType2LayaLoaderType(s))}async loadAsync(e,t){return new Promise(i=>{this.load(e,e=>{i(e)},null,t)})}async loadResAsync(e,t){return new Promise(i=>{Laya.loader.load(e,Laya.Handler.create(null,e=>{Laya.timer.frameOnce(1,null,()=>{i(e)})}),null,t)})}async loadShaderVSAsync(e){return(await this.loadAsync(ee.getShaderVS(e),y.Text)).replace(/\r/g,"")}async loadShaderPSAsync(e){return(await this.loadAsync(ee.getShaderPS(e),y.Text)).replace(/\r/g,"")}async preloadAndInstallSoundAsync(e){return new Promise(t=>{if(!Engine.borwer.isWXGame)return void t(!1);let i=Laya.SoundManager.preloadSound(e);i?(i.once(Laya.Event.COMPLETE,this,()=>{t(!0),i.offAll()}),i.once(Laya.Event.ERROR,this,()=>{t(!1),i.offAll()})):t(!1)})}preloadAndInstallSound(e,t,i){var s=e=>{i&&(t?i.call(t,e):i(Vector4))};let a=Laya.SoundManager.preloadSound(e);a?(a.once(Laya.Event.COMPLETE,this,()=>{s(!0),a.offAll()}),a.once(Laya.Event.ERROR,this,()=>{s(!0),a.offAll()})):s(!1)}}window.AssetManager=ci;var hi,ui,mi=Laya.Loader;class gi{constructor(){this.resAtlas=[],this.sounds=[]}get loadList(){if(!this._loadList){let e=[];if(e.push({url:ri.getResPath(this.resBin,this.resDir),type:mi.BUFFER}),this.resAtlas)for(let t=0;t<this.resAtlas.length;t++)e.push({url:ri.getResPath(this.resAtlas[t],this.resDir),type:mi.IMAGE});if(this.sounds)for(let t=0;t<this.sounds.length;t++)e.push({url:ri.getResPath(this.sounds[t],this.resDir),type:mi.SOUND});this._loadList=e}return this._loadList}get packagePath(){return ri.getResPackagePath(this.packageName,this.resDir)}}class di{constructor(){this.dict=new Dictionary}addconfig(e){this.dict.add(e.packageName,e)}getconfig(e){return this.dict.getValue(e)}install(){let e;(e=new gi).resDir="fgui",e.packageName="GameHome",e.resBin="GameHome.bin",e.resAtlas.push("GameHome_atlas0.png"),e.resAtlas.push("GameHome_atlas_sqzy0.jpg"),e.resAtlas.push("GameHome_atlas_sqzy1.jpg"),e.sounds.push("GameHome_sqzy7p.mp3"),this.addconfig(e),(e=new gi).resDir="fgui",e.packageName="GameLaunch",e.resBin="GameLaunch.bin",e.resAtlas.push("GameLaunch_atlas0.png"),e.resAtlas.push("GameLaunch_atlas_qyvzw2s.png"),e.resAtlas.push("GameLaunch_atlas_tnlhw3c.png"),this.addconfig(e),(e=new gi).resDir="fgui",e.packageName="ModuleLogin",e.resBin="ModuleLogin.bin",e.resAtlas.push("ModuleLogin_atlas0.png"),e.resAtlas.push("ModuleLogin_atlas_je283m.png"),e.resAtlas.push("ModuleLogin_atlas_je283n.png"),e.resAtlas.push("ModuleLogin_atlas_tnlh35.png"),e.resAtlas.push("ModuleLogin_atlas_tnlh3d.png"),e.resAtlas.push("ModuleLogin_atlas_tnlh3e.png"),e.resAtlas.push("ModuleLogin_atlas_tnlh3j.png"),this.addconfig(e),(e=new gi).resDir="fgui",e.packageName="Sound",e.resBin="Sound.bin",this.addconfig(e)}}class pi{constructor(){this.dict=new Dictionary}addconfig(e){this.dict.add(e.packageName,e)}getconfig(e){return this.dict.getValue(e)}install(){let e;(e=new gi).resDir="fsprite",e.packageName="ActivityIcon",e.resBin="ActivityIcon.bin",e.resAtlas.push("ActivityIcon@atlas0.png"),this.addconfig(e),(e=new gi).resDir="fsprite",e.packageName="ActorBodyIcon",e.resBin="ActorBodyIcon.bin",e.resAtlas.push("ActorBodyIcon@atlas0.png"),e.resAtlas.push("ActorBodyIcon@atlas0_1.png"),e.resAtlas.push("ActorBodyIcon@atlas0_2.png"),e.resAtlas.push("ActorBodyIcon@atlas0_3.png"),e.resAtlas.push("ActorBodyIcon@atlas0_4.png"),e.resAtlas.push("ActorBodyIcon@atlas0_5.png"),this.addconfig(e),(e=new gi).resDir="fsprite",e.packageName="BlockIcon",e.resBin="BlockIcon.bin",e.resAtlas.push("BlockIcon@atlas0.png"),this.addconfig(e),(e=new gi).resDir="fsprite",e.packageName="Building",e.resBin="Building.bin",e.resAtlas.push("Building@atlas0.png"),e.resAtlas.push("Building@atlas0_1.png"),this.addconfig(e),(e=new gi).resDir="fsprite",e.packageName="CinemaIcon",e.resBin="CinemaIcon.bin",e.resAtlas.push("CinemaIcon@atlas0.png"),this.addconfig(e),(e=new gi).resDir="fsprite",e.packageName="Icon_En",e.resBin="Icon_En.bin",e.resAtlas.push("Icon_En@atlas0.png"),this.addconfig(e),(e=new gi).resDir="fsprite",e.packageName="Icon_ZH_CN",e.resBin="Icon_ZH_CN.bin",e.resAtlas.push("Icon_ZH_CN@atlas0.png"),this.addconfig(e),(e=new gi).resDir="fsprite",e.packageName="ItemIcon",e.resBin="ItemIcon.bin",e.resAtlas.push("ItemIcon@atlas0.png"),this.addconfig(e),(e=new gi).resDir="fsprite",e.packageName="MeetingIcon",e.resBin="MeetingIcon.bin",e.resAtlas.push("MeetingIcon@atlas0.png"),this.addconfig(e),(e=new gi).resDir="fsprite",e.packageName="MenuIcon",e.resBin="MenuIcon.bin",e.resAtlas.push("MenuIcon@atlas0.png"),this.addconfig(e),(e=new gi).resDir="fsprite",e.packageName="NPCHeadIcon",e.resBin="NPCHeadIcon.bin",e.resAtlas.push("NPCHeadIcon@atlas0.png"),this.addconfig(e),(e=new gi).resDir="fsprite",e.packageName="PlayerBodyIcon",e.resBin="PlayerBodyIcon.bin",e.resAtlas.push("PlayerBodyIcon@atlas0.png"),this.addconfig(e),(e=new gi).resDir="fsprite",e.packageName="PlayerHeadIcon",e.resBin="PlayerHeadIcon.bin",e.resAtlas.push("PlayerHeadIcon@atlas0.png"),this.addconfig(e),(e=new gi).resDir="fsprite",e.packageName="SettingIcon",e.resBin="SettingIcon.bin",e.resAtlas.push("SettingIcon@atlas0.png"),this.addconfig(e),(e=new gi).resDir="fsprite",e.packageName="ShootIcon",e.resBin="ShootIcon.bin",e.resAtlas.push("ShootIcon@atlas0.png"),this.addconfig(e),(e=new gi).resDir="fsprite",e.packageName="SkillIcon",e.resBin="SkillIcon.bin",e.resAtlas.push("SkillIcon@atlas0.png"),this.addconfig(e),(e=new gi).resDir="fsprite",e.packageName="StoryIcon",e.resBin="StoryIcon.bin",e.resAtlas.push("StoryIcon@atlas0.png"),e.resAtlas.push("StoryIcon@atlas0_1.png"),e.resAtlas.push("StoryIcon@atlas0_2.png"),e.resAtlas.push("StoryIcon@atlas0_3.png"),this.addconfig(e),(e=new gi).resDir="fsprite",e.packageName="StoryStackIcon",e.resBin="StoryStackIcon.bin",e.resAtlas.push("StoryStackIcon@atlas0.png"),this.addconfig(e)}}!function(e){e[e.Closed=1]="Closed",e[e.Loading=2]="Loading",e[e.Opened=3]="Opened",e[e.Destoryed=4]="Destoryed"}(hi||(hi={}));class Si{static get idDict(){return Si._idDict||Si.init(),Si._idDict}static get extDict(){return Si._extDict||Si.init(),Si._extDict}static getId(e){return Si.idDict.hasKey(e)?Si.idDict.getValue(e):(console.error("SoundKey 不存在 key="+e),"")}static getUrl(e){return`ui://${Si.SoundPackageId}${Si.getId(e)}`}static getPath(e){return ri.getResPath(`${Si.SoundPackageName}_${Si.getId(e)}${Si.extDict.getValue(e)}`,"fgui")}static init(){Si._idDict=new Dictionary,Si._extDict=new Dictionary}}Si.SoundPackageName="Sound",Si.SoundPackageId="44whq70o",function(e){e[e.None=0]="None",e[e.ExceptSelf_All=1]="ExceptSelf_All",e[e.ExceptSelf_Module=2]="ExceptSelf_Module",e[e.ExceptSelf_SameLayer=3]="ExceptSelf_SameLayer"}(ui||(ui={}));class Ci{constructor(){this.sOpen=new Signal,this.backMenuId=-1,this.backExcludeMenuIdMenuId=-1,this.closeTime=0,this.closeIsDestory=!0}open(e){this.openParametar=e,this.moduleWindow||(this.moduleWindow=new this.menuWindowConfig.windowClass,this.moduleWindow.menuId=this.menuId,this.moduleWindow.name=this.menuConfig.name,this.moduleWindow.windowContainer=re.getLayer(this.menuConfig.menuLayer)),this.load()}close(){this.state!=hi.Closed&&this.state!=hi.Destoryed&&this.__menuManager.__onMenuClose(this)}__delayClose(){this.moduleWindow&&this.moduleWindow.menuIsCreated&&(Gr.event.dispatch(me.GameFrame_CloseMenu,this.moduleWindow.menuId),this.moduleWindow.onMenuClose(),this.closeTime=Gr.time.localTimeMS),this.state=hi.Closed}destory(){this.moduleWindow&&(this.moduleWindow.sShowComplete.remove(this.closeOther,this),this.moduleWindow.destory(),this.moduleWindow=null),this.state=hi.Destoryed}load(){this.state=hi.Loading;let e=this.getLoadAssets();if(e&&0!=e.length){this.loadBeginTime=Gr.time.localTimeMS;let t=Gr.loader.open(this.menuConfig.menuLoaderId);t.setMax(e.length),t.setProgress(0);let i=(e,i,s,a)=>{t.setProgress(i)};Gr.asset.loadList(e,this,this.onLoadComplete,i)}else this.loadBeginTime=0,this.onLoadComplete()}onLoadComplete(){this.setShow(),Gr.loader.close(this.menuConfig.menuLoaderId),this.loadBeginTime>0&&console.log("加载界面花费时间 ("+this.menuConfig.moduleName+") :"+(Gr.time.localTimeMS-this.loadBeginTime)+" 毫秒")}getLoadAssets(){let e=[],t=new Dictionary;return this.moduleWindow.menuIsCreated||this.moduleWindow.getLoadAssets(e,t),this.moduleWindow.generateAssetsForDynmic(),this.moduleWindow.getLoadAssetsForDynamic(e,t),e}setShow(){if(this.moduleWindow){switch(console.log(`设置显示面板 ${this.menuConfig.name}(${this.menuConfig.moduleName}): ${this.menuId}`),this.moduleWindow.sShowComplete.addOnce(this.closeOther,this),this.moduleWindow.sShowSubwindowComplete.addOnce(this.closeOther,this),this.state=hi.Opened,this.moduleWindow.menuIsCreated?this.moduleWindow.onMenuOpen(this.openParametar):this.moduleWindow.menuParameter=this.openParametar,this.moduleWindow.menuShow(this.moduleWindow.windowContainer),this.menuId){case S.Login:case S.Home:Gr.sound.playMusic(Si.MM_BGM_01)}this.sOpen.dispatch()}else console.warn(`设置显示 但是模块已销毁 ${this.menuConfig.name}(${this.menuConfig.moduleName}): ${this.menuId}`)}setCloseDontDestory(){}closeOther(){let e=this.__menuManager.isOpened(S.Home),t=this.__menuManager.getLastModuleOpenMenuId([this.backExcludeMenuIdMenuId,this.menuId,S.BattleResultWindow]),i=!1,s=Gr.menu.dict.getValues();switch(this.menuConfig.menuCloseOtherType){case ui.None:break;case ui.ExceptSelf_All:for(let t=0;t<s.length;t++){let a=s[t];a!=this&&(a.closeIsDestory=e,a.close(),i=!0)}break;case ui.ExceptSelf_Module:for(let t=0;t<s.length;t++){let a=s[t];a!=this&&a.menuConfig.menuLayer==f.Module&&(a.closeIsDestory=e,a.close(),i=!0)}break;case ui.ExceptSelf_SameLayer:for(let t=0;t<s.length;t++){let a=s[t];a.menuId!=S.Home&&(a!=this&&a.menuConfig.menuLayer==this.menuConfig.menuLayer&&(a.closeIsDestory=e,a.close(),i=!0))}}if(this.menuConfig.closeHomeWindow){let e=this.__menuManager.getMenuCtl(S.Home);e&&e.moduleWindow&&e.close()}i?-1!=t&&(this.backMenuId=t):this.backMenuId=-1}}class fi extends fgui.GLoader{static get freeList(){fi._freeList.length>0&&(fi._freeList.length=0);let e=fi.freeDictForNum.__getDict();for(let t in e)fi.freeDictForNum.getValue(t)<=0&&fi._freeList.push(t);return fi._freeList}static setUse(e){let t=fi.freeDictForNum.hasKey(e)?fi.freeDictForNum.getValue(e)+1:1;fi.freeDictForNum.add(e,t)}static setFree(e){if(-1!=e.indexOf("/MenuIcon/"))return;fi.freeDictForTime.add(e,Gr.time.localTimeMS);let t=fi.freeDictForNum.hasKey(e)?fi.freeDictForNum.getValue(e)-1:0;t<0&&(t=0),fi.freeDictForNum.add(e,t)}static removeFree(e){fi.freeDictForTime.remove(e),fi.freeDictForNum.remove(e)}static clearAllFree(e){for(e||(e=fi.freeList);e.length>0;){let t=e.pop();fi.removeFree(t),Laya.loader.clearRes(t)}}static clearFreeLong(){if(fi.freeDictForNum.count<=Gr.deviceSetting.fguiLoaderCacheNum)return;fi._freeLongList.length=0;let e=fi.freeDictForNum.__getDict();for(let t in e)if(fi.freeDictForNum.getValue(t)<=0){Gr.time.localTimeMS-fi.freeDictForTime.getValueOrDefault(t,0)>Gr.deviceSetting.fguiLoaderCacheTime&&fi._freeLongList.push(t)}fi.clearAllFree(fi._freeLongList)}loadContent(){super.loadContent()}getPackagenameByUrl(e){return e.replace("ui://","").split("/")[0]}loadFromPackage(e){if(fgui.UIPackage.getItemByURL(e))super.loadFromPackage(e);else{let t=this.getPackagenameByUrl(e),i=Gr.spriteRes.getconfig(t);i||(i=Gr.guiRes.getconfig(t)),i&&Gr.asset.loadFgui(i,this,this.onLoadPackage)}}onLoadPackage(){super.loadFromPackage(this.url)}loadExternal(){fi.setUse(this.url),super.loadExternal()}freeExternal(e){super.freeExternal(e),isNullOrEmpty(e.url)||(fi.setFree(e.url),e.url="")}onExternalLoadSuccess(e){super.onExternalLoadSuccess(e)}onExternalLoadFailed(){super.onExternalLoadFailed()}}fi.freeDictForTime=new Dictionary,fi.freeDictForNum=new Dictionary,fi._freeList=[],fi._freeLongList=[];var yi,wi,_i,Li,vi,Ti=Laya.Pool;class Gi{constructor(e,t){this.logType=e,this.msg=t+""}poolRecover(){Ti.recover(Gi.POOL_SIGN,this)}static poolGet(){return Ti.getItemByClass(Gi.POOL_SIGN,Gi)}}Gi.POOL_SIGN="LogItem";!function(e){e[e.Debug=0]="Debug",e[e.Info=0]="Info",e[e.Warn=2]="Warn",e[e.Error=3]="Error"}(yi||(yi={})),function(e){e.Debug="Debug",e.Info="Info",e.Warn="Warn",e.Error="Error"}(wi||(wi={}));class Ii{static get Level(){return this.level}static set Level(e){this.level=e}static Debug(...e){this.level>yi.Debug||(this.logger.debug(...e),this.mineloger.debug(...e))}static Info(...e){this.level>yi.Info||(this.logger.info(...e),this.mineloger.info(...e))}static Warn(...e){this.level>yi.Warn||(this.logger.warn(...e),this.mineloger.warn(...e))}static Error(...e){this.level>yi.Warn||(this.logger.error(...e),this.mineloger.error(...e))}static clear(){this.logger.clear(),this.mineloger.clear()}}Ii.mineloger=new class{constructor(){this.maxcount=1e3,this.enable=!0,this.dict=new Dictionary,this.list=[]}getList(e){if(this.dict.hasKey(e))return this.dict.getValue(e);let t=[];return this.dict.add(e,t),t}get listAll(){return this.list}getListByTypes(e){let t=[];for(let i=0;i<this.list.length;i++)-1!=e.indexOf(this.list[i].logType)&&t.push(this.list[i]);return t}addLog(e,t,...i){if(this.enable)if(t){let s=Gi.poolGet();s.logType=e,s.msg=this.stringFormat(t,...i),this.add(s)}else{let i=Gi.poolGet();i.logType=e,i.msg=t,this.add(i)}}add(e){if(!this.enable)return;let t=this.getList(e.logType);t.push(e),this.list.push(e),this.list.length>this.maxcount&&this.list.shift().poolRecover(),t.length>this.maxcount&&t.shift().poolRecover()}clear(){console.clear();for(let e of this.list)e.poolRecover();this.list=[],this.dict.clear()}stringFormat(e,...t){if(t)for(let i=0;i<t.length&&/%s|%d|%i|%o/.test(e);i++)e=e.replace(/%s|%d|%i|%o/,t[i]);return e}debug(e,...t){this.addLog(yi.Debug,e,...t)}error(e,...t){this.addLog(yi.Error,e,...t)}info(e,...t){this.addLog(yi.Info,e,...t)}log(e,...t){this.addLog(yi.Info,e,...t)}warn(e,...t){this.addLog(yi.Warn,e,...t)}},Ii.logger=console,Ii.level=yi.Debug;class Pi{constructor(){this.dict=new Dictionary,this.list=[],this.stack=[]}install(){}getMenuCtl(e){return this.dict.getValue(e)}destory(e){let t=this.getMenuCtl(e);t&&(t.state==hi.Opened?(t.close(),setTimeout(()=>{t.destory()},100)):t.destory())}openTab(e,t,...i){return this._open(e,{openType:le.Tab,openIndex:t,args:i})}openSubWindow(e,t,...i){return this._open(e,{openType:le.Subwindow,openIndex:t,args:i})}async openAsync(e,...t){let i=this._open(e,{openType:le.None,openIndex:0,args:t});return i.state==hi.Opened?i:new Promise(e=>{i.sOpen.addOnce(()=>{e(i)},this)})}open(e,...t){return this._open(e,{openType:le.None,openIndex:0,args:t})}openByMenuIndexId(e,...t){let i=Gr.config.menuIndex.getConfig(e);if(i)switch(i.openType){case le.Subwindow:this.openSubWindow(i.menuId,i.menuIndex,...t);break;case le.Tab:this.openTab(i.menuId,i.menuIndex,...t);break;default:this.open(i.menuId,...t)}else{Gr.config.menu.getConfig(e)&&this.open(e,...t)}}openHome(){let e=this.getMenuCtl(S.Home);e&&e.state==hi.Opened||(e=this.open(S.Home)),e.moduleWindow.contentPane&&!e.moduleWindow.contentPane.visible&&(e.moduleWindow.contentPane.visible=!0)}closeHome(){let e=this.getMenuCtl(S.Home);e&&e.moduleWindow&&e.moduleWindow.contentPane&&(e.moduleWindow.contentPane.visible=!1)}_open(e,t){rt.OnMenu(e,t.openIndex);let i=this.getMenuCtl(e);if(!i){let t=Gr.config.menu.getConfig(e);if(!t){let t=`MenuManager.open 没有找到menuConfig, menuId=${e}`;return Gr.system.toastText(t),Ii.Warn(t),null}let s=Dt.get(e);if(!s)return Gr.system.toastText(te.Disable),Ii.Warn(`MenuManager.open 没有找到menuWindowConfig, menuId=${e}`),null;if(!s.windowClass)return Ii.Error(`MenuManager.open menuWindowConfig.windowClass=${s.windowClass}, menuId=${e}`),null;(i=new Ci).__menuManager=this,i.menuId=e,i.menuConfig=t,i.menuWindowConfig=s,this.dict.add(e,i),i.menuId!=S.Home&&this.list.push(i)}i.open(t);let s=this.stack.indexOf(i);return-1!=s&&this.stack.splice(s,1),this.stack.push(i),i}back(e){this.close(e)}close(e){let t=this.getMenuCtl(e);t&&(t.closeIsDestory=!0,t.backMenuId=-1,t.close())}closeAll(){for(let e=this.stack.length-1;e>=0;e--)this.stack[e].menuId!=S.War&&this.stack[e].close()}__onMenuClose(e){for(let t=this.stack.length-1;t>=0;t--)this.stack[t]==e&&this.stack.splice(t,1);let t=0,i=0,s=0;for(let a of this.list)if(a.menuId!=e.menuId)switch(a.state){case hi.Opened:if(t++,a.menuConfig.menuLayer==e.menuConfig.menuLayer&&i++,a.menuConfig.menuLayer==f.Module||a.menuConfig.menuLayer==f.ModuleTop||a.menuConfig.menuLayer==f.WarUI){s++;break}}console.log(`关闭面板 ${e.menuConfig.name} ( ${e.menuConfig.moduleName})  :" + openedNum=${t}, sameLayoutOpenedNum=${i}, moduleOpenedNum=${s}`);var a=0==s;if(a&&this.needOpenHomeFun&&(a=this.needOpenHomeFun()),a){let e=this.getMenuCtl(S.Home);e&&e.state==hi.Opened||(e=this.open(S.Home))}e.__delayClose(),this.onTick(),fi.clearFreeLong()}getLastOpenMenuId(){return this.stack.length>0?this.stack[this.stack.length-1].menuId:-1}getLastModuleOpenMenuId(e){for(let t=this.stack.length-1;t>=0;t--){let i=this.stack[t];if(i.menuConfig.menuLayer==f.Module||i.menuConfig.menuLayer==f.ModuleTop){if(e&&-1!=e.indexOf(i.menuId))continue;return i.menuId}}return-1}isOpened(e){let t=!1,i=this.getMenuCtl(e);return i&&i.state==hi.Opened&&(i.menuId==S.Home?i.moduleWindow&&i.moduleWindow.contentPane&&(t=i.moduleWindow.contentPane.visible):t=!0),t}isOpenedSubOrTab(e,t){if(!this.isOpened(e))return!1;let i=this.getMenuCtl(e);return!!i&&i.moduleWindow.isOpenSubOrTab(t)}getSubWindow(e,t){if(!this.isOpened(e))return null;let i=this.getMenuCtl(e);return i?i.moduleWindow.getSubwindow(t):null}onTick(){for(let e=0;e<this.list.length;e++){let t=this.list[e];if(t.state==hi.Closed&&-1!=t.menuConfig.cacheTime){let e=Math.max(t.menuConfig.cacheTime,Gr.deviceSetting.menuCacheTime);Gr.time.localTimeMS-t.closeTime>=e&&t.closeIsDestory&&t.destory()}}}}class ki{static get serverCmdUrl(){return ee.GmConfig+"ServerGM.json"}static get clientCmdUrl(){return ee.GmConfig+"ClientGM.json"}static get serverListUrl(){return this._serverListUrl}static getServerMainUrl(e){if(e)return e.https?443==e.port?"https://"+e.ip:"https://"+e.ip+":"+e.port:"http://"+e.ip+":"+e.port}}ki._serverListUrl="ServerList.json";class Mi{static GetServerMonthDateNum(e,t){let i=this.GetServerDateByTimestamp();return null==e&&(e=i.getFullYear()),null==t&&(t=i.getMonth()+1),(i=new Date(e,t,0)).getDate()}static ToStr(e){return`${e.getFullYear()}-${e.getMonth()+1}-${e.getDate()} 周${0==e.getDay()?7:e.getDay()}  ${e.getHours()}:${e.getMinutes()}:${e.getSeconds()}`}static ToTimeStamp(e){var t=new Date(e.replace(/-/g,"/"));return Math.round(t.valueOf()/1e3)}static GetServerDateByTimestamp(e){return null==e&&(e=Gr.time.serverSeconds),new Date(1e3*e-Gr.time.localSubServerTimeZone)}static GetServerTimestampByHMS(e=0,t=0,i=0){return this.GetServerDateByHMS(e,t,i).getTime()}static GetServerTimestampByHMSText(e){let t,i,s,a=e.split(":");return a[0]&&(t=Number(a[0])||0),a[1]&&(i=Number(a[1])||0),a[2]&&(s=Number(a[2])||0),this.GetServerTimestampByHMS(t,i,s)}static GetServerDateByHMS(e=0,t=0,i=0){let s=this.GetServerDateByTimestamp();return s.setHours(e),s.setMinutes(t),s.setSeconds(i),s}static getServerNextDate(e=0,t=0,i=0){let s=this.GetServerDateByHMS(e,t,i);return s.getTime()>=Gr.time.serverMilliseconds?s:(s.setHours(s.getHours()+24),s)}static getServerNextWeekDate(e,t=0,i=0,s=0){let a=this.GetServerDateByHMS(t,i,s),n=e-a.getDay();return n<0?n+=7:0==n&&a.getTime()<Gr.time.serverMilliseconds&&(n+=7),a.setDate(a.getDate()+n),a}static getServerNextMonthDate(e,t=0,i=0,s=0){let a=this.GetServerDateByHMS(t,i,s),n=e;if(0==e?n=a.getDate():e<0&&(n=this.GetServerMonthDateNum()+e+1),a.setDate(n),a.getTime()>=Gr.time.serverMilliseconds)return a;let r=this.GetServerMonthDateNum(a.getFullYear(),a.getMonth()+1);return e<0&&(n=r+e+1),n>r&&(n=r),a.setMonth(a.getMonth()+1),a.setDate(n),a}static getServerTomorrowZeroPointTimestamp(){return this.GetServerTimestampByHMS()+1e3*this.ONE_DAY_SECONDS}static IsServerWeek(e,t){return this.GetServerDateByTimestamp(e).getDay()==t}static isToday(e){let t=new Date(1e3*e),i=new Date;return t.getFullYear()==i.getFullYear()&&t.getMonth()==i.getMonth()&&t.getDate()==i.getDate()}static IsServerToday(e){let t=this.GetServerDateByTimestamp(e),i=this.GetServerDateByTimestamp();return t.getFullYear()==i.getFullYear()&&t.getMonth()==i.getMonth()&&t.getDate()==i.getDate()}static IsSameDay(e,t){let i=new Date(1e3*e),s=new Date(1e3*t);return i.getFullYear()==s.getFullYear()&&i.getMonth()==s.getMonth()&&i.getDate()==s.getDate()}static IsServerSameDay(e,t){let i=this.GetServerDateByTimestamp(e),s=this.GetServerDateByTimestamp(t);return i.getFullYear()==s.getFullYear()&&i.getMonth()==s.getMonth()&&i.getDate()==s.getDate()}static IsBeyondTimeInSameDay(e,t=0,i=0,s=0){return this.BeyondTimeInSameDay(e,t,i,s)/1e3<=0}static BeyondTimeInSameDay(e,t=0,i=0,s=0){if(24==t){return t=0,this.GetServerDateByHMS(t,i,s).getTime()/1e3+this.ONE_DAY_SECONDS-e}return this.GetServerDateByHMS(t,i,s).getTime()/1e3-e}static SubSecondTimeInDay(e,t=0,i=0,s=0){let a=this.BeyondTimeInSameDay(e,t,i,s);return a<=0&&(a+=this.ONE_DAY_SECONDS),a}static GetYMDHMS(e,t=!0,i=!1){null!=e&&(e*=1e3);let s=i?this.GetServerDateByTimestamp(e):new Date(e);const a=s.getFullYear(),n=s.getMonth()+1<10?"0"+(s.getMonth()+1):s.getMonth()+1,r=s.getDate()<10?"0"+s.getDate():s.getDate(),o=s.getHours()<10?"0"+s.getHours():s.getHours(),l=s.getMinutes()<10?"0"+s.getMinutes():s.getMinutes();return ni.Instance.lang==$t.zh_cn?t?a+"-"+n+"-"+r+" "+o+":"+l:n+"-"+r+" "+o+":"+l:t?a+" "+Mi.MonthText[s.getMonth()]+" "+r+", "+o+":"+l:Mi.MonthText[s.getMonth()]+" "+r+", "+o+":"+l}static GetYMD(e,t=!1){null!=e&&(e*=1e3);let i=t?this.GetServerDateByTimestamp(e):new Date(e);const s=i.getFullYear(),a=i.getMonth()+1<10?"0"+(i.getMonth()+1):i.getMonth()+1,n=i.getDate()<10?"0"+i.getDate():i.getDate();return ni.Instance.lang==$t.zh_cn?s+"-"+a+"-"+n:s+" "+Mi.MonthText[i.getMonth()]+" "+n}static GetMD(e,t=!1){null!=e&&(e*=1e3);let i=t?this.GetServerDateByTimestamp(e):new Date(e);const s=i.getMonth()+1<10?"0"+(i.getMonth()+1):i.getMonth()+1,a=i.getDate()<10?"0"+i.getDate():i.getDate();return ni.Instance.lang==$t.zh_cn?s+"-"+a:Mi.MonthText[i.getMonth()]+" "+a}static GetHM(e,t=!1){null!=e&&(e*=1e3);let i=t?this.GetServerDateByTimestamp(e):new Date(e);return(i.getHours()<10?"0"+i.getHours():i.getHours())+":"+(i.getMinutes()<10?"0"+i.getMinutes():i.getMinutes())}static DaysLeft(e){let t=0,i=e-Gr.time.serverSeconds;return i>0&&(t=Math.floor(i/this.ONE_DAY_SECONDS)),t}static TimeleftHHMMSS(e){let t=e-Gr.time.serverSeconds;return t=Math.max(t,0),this.TimeFormatFixedHHMMSS(t)}static TimeleftIsOver(e){return e-Gr.time.serverSeconds<=0}static TimeFormatFixedHHMMSS(e){let t="",i=Math.floor(e/3600),s=Math.floor(e%3600/60),a=Math.floor(e%60);return t+=i<10?"0"+i:i,t+=":"+(s<10?"0"+s:s),t+=":"+(a<10?"0"+a:a)}static TimeFormatFixedMMSS(e){let t="",i=Math.floor(e%3600/60),s=Math.floor(e%60);return t+=":"+(i<10?"0"+i:i),t+=":"+(s<10?"0"+s:s)}static TimeFormatFixedHHMMSSCN(e){let t="",i=Math.abs(e),s=Math.floor(i/3600),a=Math.floor(i%3600/60),n=Math.floor(i%60);return e<0&&(t="-"),t+=s<10?"0"+s:s,t+="："+(a<10?"0"+a:a),t+="："+(n<10?"0"+n:n)}static TimeFormatFixedXHXMXS(e){let t="",i=Math.floor(e/3600),s=Math.floor(e%3600/60),a=Math.floor(e%60);return i>0&&(t+=i+te.Hour),t+=s+te.Minute,t+=a+te.Second}static TimeFormatHHMMSS(e){let t="",i=Math.abs(e),s=Math.floor(i/3600),a=Math.floor(i%3600/60),n=Math.floor(i%60);return e<0&&(t="-"),t+=0==s?"":s<10?"0"+s:s,t+=(s>0?":":"")+(a<10?"0"+a:a),t+=":"+(n<10?"0"+n:n)}static TimeFormatXHXMXS(e){let t="",i=Math.floor(e/3600),s=Math.floor(e%3600/60),a=Math.floor(e%60);return i>0&&(t+=i+te.Hour),s>0&&(t+=s+te.Minute),t+=a+te.Second}static TimeFormatXHXMXSWithoutZero(e){let t="",i=Math.floor(e/3600),s=Math.floor(e%3600/60),a=Math.floor(e%60);return i>0&&(t+=i+te.Hour),s>0&&(t+=s+te.Minute),a>0&&(t+=a+te.Second),t}static TimeBeforeByTimestamp(e){let t=Gr.time.serverSeconds-e;return this.TimeBefore(t)}static TimeBefore(e){let t=e/this.ONE_DAY_SECONDS;if(t>60)return this.GetYMD(t);if(t>30)return te.DATE_MonthBefore.format(1);if(t>14)return te.DATE_WeekBefore.format(2);if(t>7)return te.DATE_WeekBefore.format(1);if(t>1)return te.DATE_DayBefore.format(Math.floor(t));{let t=e/this.ONE_HOUR_SECONDS;if(t>1)return te.DATE_HourBefore.format(Math.floor(t));{let t=e/60;return t>1?te.DATE_MinuteBefore.format(Math.floor(t)):e>=1?te.DATE_SecondeBefore.format(Math.floor(e)):te.DATE_SecondeBefore.format(1)}}}}Mi.ONE_DAY_SECONDS=86400,Mi.ONE_HOUR_SECONDS=3600,Mi.MonthText=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],window.TimeHelper=Mi,function(e){e[e.Close=0]="Close",e[e.Noraml=1]="Noraml"}(_i||(_i={})),function(e){e[e.Normal=1]="Normal",e[e.StopServer=2]="StopServer"}(Li||(Li={}));class bi{constructor(){this.defaultServerItem={name:"默认",ip:"nisak.123u.com",port:5e3,state:_i.Noraml,https:!0,test:!1,shieldHero:[],main:"https://nisak.123u.com:5000"},this.channelUrl=`https://h5-jjsg-cdn.123u.com/server_config/config.${VersionConfig.AppVersion}.json`}static get Instance(){return bi._Instance||(bi._Instance=new bi),bi._Instance}get serverListUrl(){return ki.serverListUrl}get noticUrl(){return this.serverItem?this.serverItem.noticUrl?this.serverItem.noticUrl:this.serverItem.https?"https://"+this.serverItem.ip+"/notice.html":"http://"+this.serverItem.ip+"/notice.html":"http://172.16.0.93/notice.html"}getServerItem(e){if(!e)return null;if(this.serverList)for(let t=0;t<this.serverList.list.length;t++)if(this.serverList.list[t].name==e)return this.serverList.list[t];return null}get serverName(){if(!this._serverName){if(Gr.localStorage.serverName){this.getServerItem(Gr.localStorage.serverName)&&(this._serverName=Gr.localStorage.serverName)}if(!this._serverName&&this.serverList){this.getServerItem(this.serverList.defaultServer)?this._serverName=this.serverList.defaultServer:this.serverList.list.length>0&&(this._serverName=this.serverList.list[0].name)}}return this._serverName}set serverName(e){this._serverName=e,Gr.localStorage.serverName=e}get serverIndex(){if(this.serverList)for(let e=0;e<this.serverList.list.length;e++)if(this.serverList.list[e].name==this.serverName)return e;return-1}get serverItem(){let e=this.getServerItem(this.serverName);return e||this.defaultServerItem}async requestServerListAsync(){if(this.serverList)return!0;let e=this.serverListUrl;console.log("serverListUrl="+e);let t=await Gr.asset.loadAsync(e,y.Json);if(t){if(this.serverList=isString(t)?JSON.parse(t):t,this.serverList&&this.serverList.list)for(let e of this.serverList.list)e.main=ki.getServerMainUrl(e);return console.log("获取服务器列表成功"),!0}return console.log("ChannelManager LoadFail: ServerList.json "),!1}get isTodayOpenedNotice(){if(Gr.localStorage.isNoticTodayNoOpen&&Gr.localStorage.hasItem("lastOpenNoticeTime",!0)){let e=Gr.localStorage.getInt("lastOpenNoticeTime",!0);return!Mi.isToday(e)}return!0}requestNotice(){console.log(this.noticUrl),Engine.loader.load(this.noticUrl,Handler.create(this,this.onResopneNotic))}onResopneNotic(){let e=Engine.loader.getRes(this.noticUrl);if(console.log(e),e)try{if(this.serverNoticData=isString(e)?JSON.parse(e):e,!this.serverNoticData||0==this.serverNoticData.visible)return;this.serverNoticData.type==Li.Normal?this.isTodayOpenedNotice&&(Gr.menu.open(S.Notice),Gr.localStorage.setInt("lastOpenNoticeTime",Gr.time.localTimeMS,!0)):Gr.system.alrtTextFull(this.serverNoticData.content,this.serverNoticData.title,null,()=>{window.conch&&window.conch.exit&&window.conch.exit()})}catch(e){console.warn("通知有问题")}}set channelServer(e){this._channelServer=e}get channelServer(){return this._channelServer}async requestChannelServerAsync(){let e=this.channelUrl,t=await Gr.asset.loadAsync(e,y.Json);if(t){let e=isString(t)?JSON.parse(t):t;return e.main=ki.getServerMainUrl(e),this.serverList={list:[e],defaultServer:e.name},console.log(`ChannelUrl Request Successed: ${e}`),!0}this.requestChannelServerAsync(),console.log(`ChannelUrl Request Failed: ${e} `)}}class Di{constructor(){this.sStateChange=new Signal}install(){this.startListen()}refreshState(){}startListen(){}stopListen(){}onStateChange(){this.sStateChange.dispatch()}}class Fi extends Di{constructor(){super(...arguments),this._timelong=0,this._error=0,this._session=""}get isIndulge(){return!1}set timeLong(e){this._timelong=e}get timeLong(){return this._timelong}set error(e){this._error=e,0!=e&&1023!=e||Laya.timer.clearAll(this)}get error(){return this._error}set session(e){this._session=e}get session(){return this._session}}class Hi{constructor(){this.id=0,this.isGeted=!1}}class xi extends Di{constructor(){super(...arguments),this.LocalStorageKey="HeroModel",this.list=[],this.map=new Map,this.selectId=-1}install(){for(var e=Gr.config.card.getConfigListByTypeKey(fe.Hero),t=0,i=e.length;t<i;t++){var s=e[t],a=new Hi;a.cardConfig=s,a.id=s.id,this.list.push(a),this.map.set(a.id,a)}this.list.length>0&&(this.list[0].isGeted=!0,this.selectId=this.list[0].id),this.read()}getItem(e){return this.map.get(e)}get selectHero(){var e=this.getItem(this.selectId);return e||(this.list.length>0?(this.selectId=this.list[0].id,this.list[0]):void 0)}set selectHero(e){this.selectId=e.id,Ke.currentHero=e.cardConfig.heroType,this.save()}hasNext(){var e=this.list.indexOf(this.selectHero);return++e<this.list.length}hasPrev(){var e=this.list.indexOf(this.selectHero);return--e>=0}getNextItem(){var e=this.list.indexOf(this.selectHero);return++e<this.list.length&&(this.selectHero=this.list[e]),this.selectHero}getPrevItem(){var e=this.list.indexOf(this.selectHero);return--e>=0&&(this.selectHero=this.list[e]),this.selectHero}enableBuy(){return Ke.gold>=this.selectHero.cardConfig.coin}buy(){this.selectHero.isGeted=!0,Ke.gold-=this.selectHero.cardConfig.coin,this.save(),rt.OnBuyHero(this.selectHero.cardConfig.spriteIndex)}save(){var e={selectId:this.selectId,list:[]};for(var t of this.list)e.list.push({id:t.id,num:t.isGeted?1:0});Gr.localStorage.setJSON(this.LocalStorageKey,e,!1)}read(){if(Gr.localStorage.hasItem(this.LocalStorageKey,!1)){var e=Gr.localStorage.getJSON(this.LocalStorageKey,!1);for(var t of(this.selectId=e.selectId,e.list)){var i=this.getItem(t.id);i&&(i.isGeted=t.num>0)}}}}class Bi{get isGeted(){return Gr.moduleModel.item.getGameStatusVal(this.itemConfig.itemToolType)}set isGeted(e){Gr.moduleModel.item.setGameStatusVal(this.itemConfig.itemToolType,e)}get enabelBuy(){return this.itemConfig.coin<=Ke.gold}buy(){this.isGeted=!0,Ke.gold-=this.itemConfig.coin,rt.OnBuyShop(this.itemConfig.spriteIndex)}}!function(e){e[e.Tool=5]="Tool"}(vi||(vi={}));class Ai extends Di{constructor(){super(...arguments),this.LocalStorageKey="ItemModel",this.list=[],this.map=new Map,this.toolTypeMap=new Map}install(){for(var e=Gr.config.item.getConfigListByTypeKey(vi.Tool),t=0,i=e.length;t<i;t++){var s=e[t],a=new Bi;a.itemConfig=s,a.id=s.id,this.list.push(a),this.map.set(a.id,a),this.toolTypeMap.set(a.itemConfig.itemToolType,a)}}getItemTool(e){return this.map.get(e)}getItemToolByType(e){return this.toolTypeMap.get(e)}getGameStatusVal(e){switch(e){case ve.Heart:return Ke.isHeart;case ve.Horseshoe:return Ke.isHorseshoe;case ve.Luck:return Ke.isLuck;case ve.Key:return Ke.isKey}}setGameStatusVal(e,t){switch(e){case ve.Heart:Ke.isHeart=t;break;case ve.Horseshoe:Ke.isHorseshoe=t;break;case ve.Luck:Ke.isLuck=t;break;case ve.Key:Ke.isKey=t}}}class Ri{constructor(){this.list=[],this.login=new Fi,this.hero=new xi,this.item=new Ai}initList(){this.list.push(this.login),this.list.push(this.hero),this.list.push(this.item)}}class Ui extends Ri{install(){this.initList();for(let e=0;e<this.list.length;e++)this.list[e].install()}}class Oi{constructor(){this.master=0,this.minor=0,this.revised=0,this.revised2=0}get isZero(){return 0==this.master&&0==this.minor&&0==this.revised&&0==this.revised2}setVersionTxt(e){if(null==e)return this;if(isNullOrEmpty(e.trim()))return this;var t=(e=(e=e.toLowerCase()).replace("version:","").replace("version","").replace("ver","").replace("v","")).split(".");return this.master=parseInt(t[0]),t.length>1&&(this.minor=parseInt(t[1])),t.length>2&&(this.revised=parseInt(t[2])),t.length>3&&(this.revised2=parseInt(t[3])),this}equal(e){return this.master==e.master&&this.minor==e.minor&&this.revised==e.revised&&this.revised2==e.revised2}toString(){return`v${this.master}.${this.minor}.${this.revised}.${this.revised2}`}}var Ni=Laya.LocalStorage;class Ei{constructor(){this.sLocalVersionChange=new Signal,this.assetCopytoFileVersionData=new Oi,this.localAppVersionData=new Oi,this.webAppVersionData=new Oi,this.localResVersionData=new Oi,this.webResVersionData=new Oi,this.localPartialVersionData=new Oi,this.webPartialVersionData=new Oi}static get Instance(){return Ei._Instance||(Ei._Instance=new Ei),Ei._Instance}init(){this.localAppVersionData.setVersionTxt(VersionConfig.AppVersion),this.localResVersionData.setVersionTxt(VersionConfig.ResVersion)}get localAppVersion(){return window.VersionConfig&&VersionConfig.AppVersion?VersionConfig.AppVersion:"v1.0.0.0"}get localResVersion(){return this.__localResVersion||(this.__localResVersion=Ni.getItem("__localResVersion"),this.__localResVersion||(this.__localResVersion=this.localAppVersion)),this.__localResVersion}set localResVersion(e){this.__localResVersion=e,Ni.setItem("__localResVersion",e),this.sLocalVersionChange.dispatch()}get assetsCopytoFileVersion(){return this.__assetsCopytoFileVersion||(this.__assetsCopytoFileVersion=Ni.getItem("__assetsCopytoFileVersion"),this.__assetsCopytoFileVersion||(this.__assetsCopytoFileVersion="0.0.0")),this.__assetsCopytoFileVersion}set assetsCopytoFileVersion(e){this.__assetsCopytoFileVersion=e,Ni.setItem("__assetsCopytoFileVersion",e)}get localPartialVersion(){return this.__localPartialVersion||(this.__localPartialVersion=Ni.getItem("__localPartialVersion"),this.__localPartialVersion||(this.__localPartialVersion="0.0.0")),this.__localPartialVersion}set localPartialVersion(e){this.__localPartialVersion=e,Ni.setItem("__localPartialVersion",e)}get isNeedAssetsCopy(){return!1}}var Wi=Laya.SoundManager;Laya.Handler;class Vi{constructor(){this.soundPlayingDic=new Dictionary,this.localUseGlobal=!0}install(){}onAppResume(){this.replayMusic()}onLogin(){}playMusic(e,t,i,s){}replayMusic(){this.lastMusic?this.playMusic(this.lastMusic):this.playMusic(Si.MM_BGM_01)}playSound(e,t,i,s,a){}playSoundComplete(e){this.soundPlayingDic.hasKey(e)&&this.soundPlayingDic.remove(e)}stopSound(e){let t=Si.getPath(e);this.soundPlayingDic.hasKey(t)&&this.soundPlayingDic.remove(t),Wi.stopSound(t)}stopAll(){this.soundPlayingDic&&this.soundPlayingDic.clear(),Wi.stopAll()}stopAllSound(){this.soundPlayingDic&&this.soundPlayingDic.clear(),Wi.stopAllSound()}stopMusic(){Wi.stopMusic()}get muted(){return void 0===this._muted&&(this._muted=!!Gr.localStorage.hasItem("sound_muted",this.localUseGlobal)&&Gr.localStorage.getBoolean("sound_muted",this.localUseGlobal)),this._muted}set muted(e){this._muted=e,Gr.localStorage.setBoolean("sound_muted",e,this.localUseGlobal),Wi.muted=e}get soundMuted(){return void 0===this._soundMuted&&(this._soundMuted=!!Gr.localStorage.hasItem("sound_soundMuted",this.localUseGlobal)&&Gr.localStorage.getBoolean("sound_soundMuted",this.localUseGlobal)),this._soundMuted}set soundMuted(e){this._soundMuted=e,Gr.localStorage.setBoolean("sound_soundMuted",e,this.localUseGlobal),Wi.soundMuted=e}get musicMuted(){return void 0===this._musicMuted&&(this._musicMuted=!!Gr.localStorage.hasItem("sound_musicMuted",this.localUseGlobal)&&Gr.localStorage.getBoolean("sound_musicMuted",this.localUseGlobal)),this._musicMuted}set musicMuted(e){this._musicMuted=e,Gr.localStorage.setBoolean("sound_musicMuted",e,this.localUseGlobal),Wi.musicMuted=e,e?Wi.stopMusic():this.replayMusic()}get musicVolume(){return void 0===this._musicVolume&&(this._musicVolume=Gr.localStorage.hasItem("sound_musicVolume",this.localUseGlobal)?Gr.localStorage.getFloat("sound_musicVolume",this.localUseGlobal):1),this._musicVolume}set musicVolume(e){this._musicVolume=e,Gr.localStorage.setFloat("sound_musicVolume",e,this.localUseGlobal),Wi.musicVolume=e}get soundVolume(){return void 0===this._soundVolume&&(this._soundVolume=Gr.localStorage.hasItem("sound_soundVolume",this.localUseGlobal)?Gr.localStorage.getFloat("sound_soundVolume",this.localUseGlobal):1),this._soundVolume}set soundVolume(e){this._soundVolume=e,Gr.localStorage.setFloat("sound_soundVolume",e,this.localUseGlobal),Wi.soundVolume=e}get autoStopMusic(){return this._autoStopMusic}set autoStopMusic(e){Wi.autoStopMusic=e,this._autoStopMusic=e}}class Xi{CopyValue(e){e.year=this.year,e.month=this.month,e.date=this.date,e.week=this.week,e.hour=this.hour,e.minute=this.minute,e.second=this.second,e.timezone=this.timezone,e.timestamp=this.timezone}}class qi{constructor(){this.sServerDateChange=new Typed2Signal,this._localDateTime=new Xi,this._serverDateTime=new Xi,this._server2LocalDateTime=new Xi,this._preServer2LocalDateTime=new Xi,this._preFrame=-1,this._settingTimestampServer=(new Date).getTime(),this._settingTimestampLocal=(new Date).getTime(),this._preServerFrame=0,this.___testTimeDifference=0,this._localSubServerTime=0,this._localSubServerTimeZone=0}get localDateTime(){return this.refresh(),this._localDateTime}IsExcelArrived(e){let t=this.localDateTime;return t.hour>=e.H&&t.minute>=e.Mm&&t.second>=e.S}IsExcelIn(e,t){return this.IsExcelArrived(e)&&!this.IsExcelArrived(t)}get serverDateTime(){return this.refresh(),this._serverDateTime}get server2LocalDateTime(){return this.refresh(),this._server2LocalDateTime}start(){this.stop(),Laya.timer.loop(1e3,this,this.refresh)}stop(){Laya.timer.clearAll(this)}refresh(){if(Laya.timer.currFrame!=this._preFrame){this._preFrame=Laya.timer.currFrame;let e=new Date;this._localDateTime.timestamp=e.getTime(),this._localDateTime.year=e.getFullYear(),this._localDateTime.month=e.getMonth(),this._localDateTime.date=e.getDate(),this._localDateTime.week=e.getDay(),this._localDateTime.hour=e.getHours(),this._localDateTime.minute=e.getMinutes(),this._localDateTime.second=e.getSeconds(),this._serverDateTime.timestamp=this.settingServerTimestamp+this.settingTimeLength,e=new Date(this._serverDateTime.timestamp),this._serverDateTime.year=e.getFullYear(),this._serverDateTime.month=e.getMonth(),this._serverDateTime.date=e.getDate(),this._serverDateTime.week=e.getDay(),this._serverDateTime.hour=e.getHours(),this._serverDateTime.minute=e.getMinutes(),this._serverDateTime.second=e.getSeconds(),this._server2LocalDateTime.timestamp=this._serverDateTime.timestamp,e=new Date(this._serverDateTime.timestamp-this.localSubServerTimeZone),this._server2LocalDateTime.year=e.getFullYear(),this._server2LocalDateTime.month=e.getMonth(),this._server2LocalDateTime.date=e.getDate(),this._server2LocalDateTime.week=e.getDay(),this._server2LocalDateTime.hour=e.getHours(),this._server2LocalDateTime.minute=e.getMinutes(),this._server2LocalDateTime.second=e.getSeconds(),this._server2LocalDateTime.timezone=this._serverDateTime.timezone,this._preServer2LocalDateTime.date&&this._preServer2LocalDateTime.date!=this._server2LocalDateTime.date&&this.sServerDateChange.dispatch(this._preServer2LocalDateTime.date,this._server2LocalDateTime.date),this._server2LocalDateTime.CopyValue(this._preServer2LocalDateTime)}}get serverTimezoneMilliseconds(){return 60*this._serverDateTime.timezone*60*1e3}get localTimeMS(){return this.refresh(),this._localDateTime.timestamp}get localTimeS(){return this.refresh(),Math.floor(this._localDateTime.timestamp/1e3)}settingServerTime(e,t){null!=t&&(this._serverDateTime.timezone=t,this._localSubServerTimeZone=60*(new Date).getTimezoneOffset()*1e3*-1-60*t*60*1e3),null!=e&&(this.settingServerTimestamp=1e3*e)}get settingServerTimestamp(){return this._settingTimestampServer}set settingServerTimestamp(e){this._settingTimestampServer=e,this._settingTimestampLocal=this.localTimeMS,this._localSubServerTime=this._settingTimestampLocal-this._settingTimestampServer}get settingTimeLength(){return this.localTimeMS-this._settingTimestampLocal}get serverSeconds(){return Math.floor(this.serverMilliseconds/1e3)}get serverMilliseconds(){return this.refresh(),this.serverDateTime.timestamp}get localSubServerTime(){return this._localSubServerTime+this.___testTimeDifference}get localSubServerTimeZone(){return this._localSubServerTimeZone+this.___testTimeDifference}getSubSecondsPre(e){let t=this.serverSeconds-e;return t<0&&(t=0),t}getSubSecondsAfter(e){return e-this.serverSeconds}getSubMillisecondsPre(e){return this.serverMilliseconds-e}getSubMillisecondsAfter(e){return e-this.serverMilliseconds}}class Ki extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameLaunch","SystemToastMessage")}constructFromXML(e){super.constructFromXML(e),this.m_title=this.getChild("title")}}Ki.URL="ui://47qsdr42nk8t3",Ki.DependPackages=["GameLaunch"];class ji extends Ki{play(e,t){this._onCompleteHandler&&this._onCompleteHandler.recover(),this._onCompleteHandler=t,this.m_title.text=e,Tween.clearAll(this),re.floatMsg.addChild(this),ge.centerScreen(this),this.alpha=0,Tween.to(this,{y:this.y-100,alpha:1},500,Ease.quadInOut),Tween.to(this,{y:this.y-200,alpha:0},500,Ease.quadInOut,Handler.create(this,this.onComplete),1e3)}onComplete(){this.removeFromParent(),this._onCompleteHandler&&(this._onCompleteHandler.runWith(this),this._onCompleteHandler.recover(),this._onCompleteHandler=null)}}var zi,Yi,$i,Ji,Qi=Laya.Handler;class Zi{constructor(){this.list=[],this.pools=[],this.timeSpacing=1}play(e){e!=this.lastTxt?this.show(e):getTime()-this.lastTime>=this.timeSpacing&&this.show(e)}show(e){let t;this.lastTxt=e,this.lastTime=getTime(),this.pools.length>0?t=this.pools.pop():(t=ji.createInstance(),this.list.push(t)),t.play(e,Qi.create(this,this.onItemComplete))}onItemComplete(e){this.pools.push(e)}}class es extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameLaunch","SystemAlertMessage")}constructFromXML(e){super.constructFromXML(e),this.m_content=this.getChild("content"),this.m_title=this.getChild("title"),this.m_dialog=this.getChild("dialog"),this.m_okBtn=this.getChild("okBtn")}}es.URL="ui://47qsdr42nk8t1",es.DependPackages=["GameLaunch"];class ts extends es{get closeButton(){return this.m_dialog.m_closeButton}open(e,t="",i=null,s=null,a=null,n=!0,r=!0,o=!0){isNullOrEmpty(t)&&(t=""),this.yesFun=s,this.yesObj=i,this.isClickButtonAutoClose=o,this.m_content.text=e,this.m_title.text=t,this.m_okBtn.title=a,this.m_okBtn.enabled=r,this.closeButton.enabled=r,this.closeButton.visible=n,this.m_okBtn.onClick(this,this.onClickYes),this.closeButton.onClick(this,this.close),re.showDialogModel(),ge.centerScreen(this),this.scaleX=0,this.scaleY=0,this.x=Gr.screenSetting.screenWidth>>1,this.y=Gr.screenSetting.screenHeight>>1,this.alpha=0,Tween.to(this,{scaleX:1,scaleY:1,alpha:1},250,Ease.backInOut),re.floatMsg.addChild(this)}close(){re.hideDialogModel(),Tween.to(this,{scaleX:0,scaleY:0,alpha:0},250,Ease.quadInOut,Handler.create(this,this.onHide))}onHide(){this.removeFromParent()}onClickYes(){this.isClickButtonAutoClose&&this.close(),this.yesFun&&(this.yesObj?this.yesFun.apply(this.yesObj):this.yesFun())}}class is extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameLaunch","SystemConfirmMessage")}constructFromXML(e){super.constructFromXML(e),this.m_content=this.getChild("content"),this.m_title=this.getChild("title"),this.m_dialog=this.getChild("dialog"),this.m_okBtn=this.getChild("okBtn"),this.m_cancleBtn=this.getChild("cancleBtn")}}is.URL="ui://47qsdr42nk8t2",is.DependPackages=["GameLaunch"];class ss extends is{get closeButton(){return this.m_dialog.m_closeButton}open(e,t="",i=null,s=null,a=null,n=null,r=null,o=!0,l=!0){isNullOrEmpty(t)&&(t=""),this.caller=i,this.yesFun=s,this.noFun=a,this.isClickButtonAutoClose=l,this.m_content.text=e,this.m_title.text=t,this.m_okBtn.title=n,this.m_cancleBtn.title=r,this.closeButton.visible=o,this.m_okBtn.onClick(this,this.onClickYes),this.m_cancleBtn.onClick(this,this.onClickNo),this.closeButton.onClick(this,this.onClickClose),re.showDialogModel(),ge.centerScreen(this),Tween.clearAll(this),this.scaleX=0,this.scaleY=0,this.x=Gr.screenSetting.screenWidth>>1,this.y=Gr.screenSetting.screenHeight>>1,this.alpha=0,Tween.to(this,{scaleX:1,scaleY:1,alpha:1},250,Ease.backInOut),re.floatMsg.addChild(this)}close(){re.hideDialogModel(),Tween.to(this,{scaleX:0,scaleY:0,alpha:0},250,Ease.quadInOut,Handler.create(this,this.onHide))}onHide(){this.removeFromParent()}onClickYes(){this.isClickButtonAutoClose&&this.close(),this.yesFun&&(this.caller?this.yesFun.apply(this.caller):this.yesFun())}onClickNo(){this.isClickButtonAutoClose&&this.close(),this.noFun&&(this.caller?this.noFun.apply(this.caller):this.noFun())}onClickClose(){this.close()}}class as{constructor(){this.toastMessage=new Zi}playOpenSound(){window.Game&&window.Game._isInstall&&Gr.sound.playSound(Si.MM02_Popup)}get alertMessage(){return this._alertMessage||(this._alertMessage=ts.createInstance()),this._alertMessage}get confirmMessage(){return this._confirmMessage||(this._confirmMessage=ss.createInstance()),this._confirmMessage}toastText(e){this.toastMessage.play(e)}toastMsg(e,...t){let i=Gr.config.msg.getTxtFormat(e,...t);this.toastMessage.play(i)}toastFormatText(e,...t){this.toastText(format(e,t))}toastItemNotEnough(e){let t=Gr.config.item.getConfig(e),i="";i=t?t.name:e.toString(),this.toastText(format(te.ToastTextItemNotEnough,i))}alertText(e,t,i){this.alrtTextFull(e,"",t,i)}alertMsg(e,t,i){let s=Gr.config.msg.getTxt(e);this.alrtTextFull(s,"",t,i)}alertMsgFormat(e,t,i,s){let a=Gr.config.msg.getTxtFormat(e,...t);this.alrtTextFull(a,"",i,s)}alrtTMsgFull(e,t,i="",s=null,a=null,n=null,r=!0,o=!0){let l=Gr.config.msg.getTxtFormat(e,...t);this.alrtTextFull(l,"",s,a,n,r,o)}alrtTextFull(e,t="",i=null,s=null,a=null,n=!0,r=!0,o=!0){isNullOrEmpty(a)&&(a=Gr.launchText.btnYes),this.alertMessage.open(e,t,i,s,a,n,r,o),this.playOpenSound()}closeAlert(){this.alertMessage.close()}confirmMsg(e,t,i="",s=null,a=null,n=null,r=null,o=null,l=!0,c=!0){let h=Gr.config.msg.getTxtFormat(e,...t);this.confirmText(h,i,s,a,n,r,o,l,c)}confirmText(e,t="",i=null,s=null,a=null,n=null,r=null,o=!0,l=!0){isNullOrEmpty(n)&&(n=te.ButtonYes),isNullOrEmpty(r)&&(r=te.ButtonNo),this.confirmMessage.open(e,t,i,s,a,n,r,o,l),this.playOpenSound()}alertMessageHide(){this._alertMessage&&this._alertMessage.close(),this._confirmMessage&&this._confirmMessage.close()}}class ns extends as{}class rs{constructor(){this.tips=[],this.btnYes="确定",this.LoadedConfig="加载配置文件",this.LoadedUI="加载UI",this.LoadedWar="加载战斗资源",this.LoadedWarConfig="加载战斗配置",this.LoadedEnd="加载完成"}setLangForEn(){this.tips=[],this.btnYes="Ok",this.LoadedConfig="Loading Config...",this.LoadedUI="Loading UI...",this.LoadedEnd="Loading Complete"}}class os{constructor(){this.percent=0,this.showPercent=0}setBegin(){this.percent=0,this.showPercent=0,this.setPercent(0)}loading(e){e<=0?e=.001:e>100&&(e=100),this.percent=e}setTip(e){let t=Gr.loader.current;t&&t.setTip(e)}setPercent(e){let t=Gr.loader.current;t&&(t.setMax(100),t.setProgress(Math.ceil(e)))}starTweenPrecent(){this.stopTweenPrecent(),this._tweenHandler=setInterval(()=>{this.showPercent=Math.min(100,Math.ceil(Mathf.Lerp(this.showPercent,this.percent,.5))),this.setPercent(this.showPercent),this.showPercent>=100&&this.stopTweenPrecent()},100)}stopTweenPrecent(){this._tweenHandler&&(clearInterval(this._tweenHandler),this._tweenHandler=null)}onBegin(){this.setBegin(),this.starTweenPrecent()}onLoadedConfig(e,t,i){this.setTip(Gr.launchText.LoadedConfig),this.loading(0+Math.ceil(40*i))}onLoadedLangConfig(e,t,i){this.setTip(Gr.launchText.LoadedConfig),this.loading(40+Math.ceil(20*i))}onLoadedFgui(e,t){this.setTip(Gr.launchText.LoadedUI),this.loading(60+Math.ceil(e/t*40))}onEnd(){this.setTip(Gr.launchText.LoadedEnd),this.loading(100)}Reset(){this.loading(0)}}class ls{constructor(){this.isOpened=!1,this.delayShowPanelHandler=-1}get isDelayShowPanel(){return this.loaderId==C.EnterModule}open(){this.isOpened=!0,this.loaderPanel&&(this.loaderPanel.showOn(re.loader),this.loaderPanel.setContentVisiable(!0),this.isDelayShowPanel&&(this.loaderPanel.setContentVisiable(!1),clearTimeout(this.delayShowPanelHandler),this.delayShowPanelHandler=setTimeout(()=>{this.loaderPanel.setContentVisiable(!0)},100)))}close(){-1!=this.delayShowPanelHandler&&(clearTimeout(this.delayShowPanelHandler),this.delayShowPanelHandler=-1),this.isOpened=!1,this.loaderPanel&&(this.loaderPanel.hide(),this.isDelayShowPanel&&this.loaderPanel.setContentVisiable(!1))}setProgress(e){e<=0&&(e=1),this.loaderPanel&&this.loaderPanel.setValue(e)}setMax(e){this.loaderPanel&&this.loaderPanel.setMax(e)}setTip(e){this.loaderPanel&&this.loaderPanel.setTip(e)}setTips(e){this.loaderPanel&&this.loaderPanel.setTips(e)}setVersion(){this.loaderPanel&&this.loaderPanel.setVersion()}}class cs extends oe{constructor(){super(),this.sShowComplete=new Signal,this.sHideComplete=new Signal}onInit(){super.onInit()}getContentVisiable(){return!!this.contentPane&&this.contentPane.visible}setContentVisiable(e){this.contentPane&&(this.contentPane.visible=e)}doShowAnimation(){this.onWindowWillShow(),super.doShowAnimation()}doHideAnimation(){this.onWindowWillHide(),super.doHideAnimation()}onShown(){this.sShowComplete.dispatch()}onHide(){this.sHideComplete.dispatch()}setMax(e){}setValue(e){}setTip(e){}setTips(e){}setVersion(){}}class hs extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameLaunch","EnterModuleLoader")}constructFromXML(e){super.constructFromXML(e),this.m_Reconnection=this.getController("Reconnection"),this.m_title=this.getChild("title"),this.m_help=this.getChild("help"),this.m_txt_resVer=this.getChild("txt_resVer"),this.m_txt_gamever=this.getChild("txt_gamever"),this.m_screenBG=this.getChild("screenBG"),this.m_progressBar=this.getChild("progressBar")}}hs.URL="ui://47qsdr42f84s0",hs.DependPackages=["GameLaunch"];class us extends hs{}class ms extends cs{constructor(){super(),this.tips=[],this.__setTipHandlerTimer=-1}onInit(){this.loader=us.createInstance(),this.contentPane=this.loader,super.onInit(),this.tips=Gr.launchText.tips,this.setVersion()}onShown(){super.onShown(),this.beginTips(),this.setVersion(),Gr.version.sLocalVersionChange.add(this.setVersion,this)}onHide(){super.onHide(),this.stopTips(),Gr.version.sLocalVersionChange.remove(this.setVersion,this)}beginTips(){this.stopTips(),this.tips&&this.tips.length>0&&this.__setTipHandler()}stopTips(){this.__setTipHandlerTimer>0&&(clearTimeout(this.__setTipHandlerTimer),this.__setTipHandlerTimer=-1)}__setTipHandler(){this.loader.m_help.text=this.tips[Random.range(0,this.tips.length)],this.__setTipHandlerTimer=setTimeout(()=>{this.__setTipHandler()},Random.range(100,400))}setMax(e){this.loader.m_progressBar.max=e}setValue(e){this.loader.m_progressBar.value=e}setTip(e){this.loader.m_title.text=e}setTips(e){}setVersion(){this.loader.m_txt_gamever.text="GameVersion:"+Gr.version.localAppVersionData.toString(),this.loader.m_txt_resVer.text="ResVersion:"+Gr.version.localResVersionData.toString()}}class gs extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameLaunch","EnterLoginLoader")}constructFromXML(e){super.constructFromXML(e),this.m_title=this.getChild("title"),this.m_help=this.getChild("help"),this.m_txt_resVer=this.getChild("txt_resVer"),this.m_txt_gamever=this.getChild("txt_gamever"),this.m_progressBar=this.getChild("progressBar"),this.m_imgLogo=this.getChild("imgLogo")}}gs.URL="ui://47qsdr42mrzrw2o",gs.DependPackages=["GameLaunch"];class ds extends gs{}class ps extends cs{constructor(){super(),this.tips=[],this.__setTipHandlerTimer=-1}onInit(){this.loader=ds.createInstance(),this.contentPane=this.loader,super.onInit(),this.tips=Gr.launchText.tips,this.setVersion()}onShown(){super.onShown(),this.beginTips(),this.setVersion(),Gr.version.sLocalVersionChange.add(this.setVersion,this)}onHide(){super.onHide(),this.stopTips(),Gr.version.sLocalVersionChange.remove(this.setVersion,this)}beginTips(){this.stopTips(),this.tips&&this.tips.length>0&&this.__setTipHandler()}stopTips(){this.__setTipHandlerTimer>0&&(clearTimeout(this.__setTipHandlerTimer),this.__setTipHandlerTimer=-1)}__setTipHandler(){this.loader.m_help.text=this.tips[Random.range(0,this.tips.length)],this.__setTipHandlerTimer=setTimeout(()=>{this.__setTipHandler()},Random.range(100,400))}setMax(e){this.loader.m_progressBar.max=e}setValue(e){this.loader.m_progressBar.value=e}setTip(e){this.loader.m_title.text=e}setTips(e){}setVersion(){this.loader.m_txt_gamever.text="GameVersion:"+Gr.version.localAppVersionData.toString(),this.loader.m_txt_resVer.text="ResVersion:"+Gr.version.localResVersionData.toString()}}class Ss{constructor(){this.dict=new Dictionary,this.isInited=!1}static get Instance(){return Ss._Instance||(Ss._Instance=new Ss),Ss._Instance}install(){if(this.isInited)return;this.isInited=!0;let e=new ls;e.loaderId=C.None,this.dict.add(e.loaderId,e);let t=new ms;(e=new ls).loaderId=C.Circle,e.loaderPanel=t,this.dict.add(e.loaderId,e);let i=new ps;(e=new ls).loaderId=C.Launch,e.loaderPanel=i,this.dict.add(e.loaderId,e);let s=new ms;(e=new ls).loaderId=C.EnterModule,e.loaderPanel=s,this.dict.add(e.loaderId,e)}getLoaderCtl(e){return this.dict.getValue(e)}open(e){let t=this.getLoaderCtl(e);return t||console.error("没有找到加载控制器 LoaderManager open loaderId=",e),t.open(),this.current=t,t}close(e){let t=this.getLoaderCtl(e);t&&(this.current==t&&(this.current=null),t.close())}closeAll(){let e=this.dict.getValues();for(let t=0;t<e.length;t++)e[t].close();this.current=null}setProgress(e){this.current&&this.current.setProgress(e)}setMax(e){this.current&&this.current.setMax(e)}}class Cs{static get onError(){return net.logic.onError}static get onConnect(){return net.logic.onConnect}static get onClose(){return net.logic.onClose}static get onReconnect(){return net.logic.onReconnect}static get logicPing(){return net.logic.ping}static GamerLoginC2S(e,t){net.logic.gamerLoginC2S(e,t)}static get gamerLoginS2C(){return net.logic.gamerLoginS2C}static async AsyncGamerLoginC2S(e,t){return new Promise(i=>{let s={error:200},a=setTimeout(()=>{i(s)},5e3),n=function(e){clearTimeout(a),Cs.gamerLoginS2C.off(n),i(e)};Cs.gamerLoginS2C.on(n),Cs.GamerLoginC2S(e,t)})}static GamerLoginGetDataC2S(){net.logic.gamerLoginGetDataC2S()}static get gamerLoginGetDataS2C(){return net.logic.gamerLoginGetDataS2C}static async AsyncGamerLoginGetDataC2S(){return new Promise(e=>{let t={error:200},i=setTimeout(()=>{e(t)},5e3),s=function(t){clearTimeout(i),Cs.gamerLoginGetDataS2C.off(s),e(t)};Cs.gamerLoginGetDataS2C.on(s),Cs.GamerLoginGetDataC2S()})}static ServerTimeC2S(){net.logic.serverTimeC2S()}static get serverTimeS2C(){return net.logic.serverTimeS2C}static async AsyncServerTimeC2S(){return new Promise(e=>{let t={error:200},i=setTimeout(()=>{e(t)},5e3),s=function(t){clearTimeout(i),Cs.serverTimeS2C.off(s),e(t)};Cs.serverTimeS2C.on(s),Cs.ServerTimeC2S()})}static GamerSubChatChannelC2S(e,t){net.logic.gamerSubChatChannelC2S(e,t)}static get gamerSubChatChannelS2C(){return net.logic.gamerSubChatChannelS2C}static async AsyncGamerSubChatChannelC2S(e,t){return new Promise(i=>{let s={error:200},a=setTimeout(()=>{i(s)},5e3),n=function(e){clearTimeout(a),Cs.gamerSubChatChannelS2C.off(n),i(e)};Cs.gamerSubChatChannelS2C.on(n),Cs.GamerSubChatChannelC2S(e,t)})}static GamerChangeNameC2S(e){net.logic.gamerChangeNameC2S(e)}static get gamerChangeNameS2C(){return net.logic.gamerChangeNameS2C}static async AsyncGamerChangeNameC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),Cs.gamerChangeNameS2C.off(a),t(e)};Cs.gamerChangeNameS2C.on(a),Cs.GamerChangeNameC2S(e)})}static GamerChangeAvatarC2S(e){net.logic.gamerChangeAvatarC2S(e)}static get gamerChangeAvatarS2C(){return net.logic.gamerChangeAvatarS2C}static async AsyncGamerChangeAvatarC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),Cs.gamerChangeAvatarS2C.off(a),t(e)};Cs.gamerChangeAvatarS2C.on(a),Cs.GamerChangeAvatarC2S(e)})}static GamerGetBackpackC2S(){net.logic.gamerGetBackpackC2S()}static get gamerGetBackpackS2C(){return net.logic.gamerGetBackpackS2C}static async AsyncGamerGetBackpackC2S(){return new Promise(e=>{let t={error:200},i=setTimeout(()=>{e(t)},5e3),s=function(t){clearTimeout(i),Cs.gamerGetBackpackS2C.off(s),e(t)};Cs.gamerGetBackpackS2C.on(s),Cs.GamerGetBackpackC2S()})}static GamerSellItemC2S(e,t,i){net.logic.gamerSellItemC2S(e,t,i)}static get gamerSellItemS2C(){return net.logic.gamerSellItemS2C}static async AsyncGamerSellItemC2S(e,t,i){return new Promise(s=>{let a={error:200},n=setTimeout(()=>{s(a)},5e3),r=function(e){clearTimeout(n),Cs.gamerSellItemS2C.off(r),s(e)};Cs.gamerSellItemS2C.on(r),Cs.GamerSellItemC2S(e,t,i)})}static GamerUseItemC2S(e,t,i){net.logic.gamerUseItemC2S(e,t,i)}static get gamerUseItemS2C(){return net.logic.gamerUseItemS2C}static async AsyncGamerUseItemC2S(e,t,i){return new Promise(s=>{let a={error:200},n=setTimeout(()=>{s(a)},5e3),r=function(e){clearTimeout(n),Cs.gamerUseItemS2C.off(r),s(e)};Cs.gamerUseItemS2C.on(r),Cs.GamerUseItemC2S(e,t,i)})}static GamerFriendChatC2S(e,t){net.logic.gamerFriendChatC2S(e,t)}static get gamerFriendChatS2C(){return net.logic.gamerFriendChatS2C}static async AsyncGamerFriendChatC2S(e,t){return new Promise(i=>{let s={error:200},a=setTimeout(()=>{i(s)},5e3),n=function(e){clearTimeout(a),Cs.gamerFriendChatS2C.off(n),i(e)};Cs.gamerFriendChatS2C.on(n),Cs.GamerFriendChatC2S(e,t)})}static GamerWorldChatC2S(e,t){net.logic.gamerWorldChatC2S(e,t)}static get gamerWorldChatS2C(){return net.logic.gamerWorldChatS2C}static async AsyncGamerWorldChatC2S(e,t){return new Promise(i=>{let s={error:200},a=setTimeout(()=>{i(s)},5e3),n=function(e){clearTimeout(a),Cs.gamerWorldChatS2C.off(n),i(e)};Cs.gamerWorldChatS2C.on(n),Cs.GamerWorldChatC2S(e,t)})}static GamerTestChatC2S(e,t){net.logic.gamerTestChatC2S(e,t)}static get gamerTestChatS2C(){return net.logic.gamerTestChatS2C}static async AsyncGamerTestChatC2S(e,t){return new Promise(i=>{let s={error:200},a=setTimeout(()=>{i(s)},5e3),n=function(e){clearTimeout(a),Cs.gamerTestChatS2C.off(n),i(e)};Cs.gamerTestChatS2C.on(n),Cs.GamerTestChatC2S(e,t)})}static GamerClubRequestC2S(e,t){net.logic.gamerClubRequestC2S(e,t)}static get gamerClubRequestS2C(){return net.logic.gamerClubRequestS2C}static async AsyncGamerClubRequestC2S(e,t){return new Promise(i=>{let s={error:200},a=setTimeout(()=>{i(s)},5e3),n=function(e){clearTimeout(a),Cs.gamerClubRequestS2C.off(n),i(e)};Cs.gamerClubRequestS2C.on(n),Cs.GamerClubRequestC2S(e,t)})}static GamerNewFriendReqC2S(e,t){net.logic.gamerNewFriendReqC2S(e,t)}static get gamerNewFriendReqS2C(){return net.logic.gamerNewFriendReqS2C}static async AsyncGamerNewFriendReqC2S(e,t){return new Promise(i=>{let s={error:200},a=setTimeout(()=>{i(s)},5e3),n=function(e){clearTimeout(a),Cs.gamerNewFriendReqS2C.off(n),i(e)};Cs.gamerNewFriendReqS2C.on(n),Cs.GamerNewFriendReqC2S(e,t)})}static GamerDelFriendC2S(e){net.logic.gamerDelFriendC2S(e)}static get gamerDelFriendS2C(){return net.logic.gamerDelFriendS2C}static async AsyncGamerDelFriendC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),Cs.gamerDelFriendS2C.off(a),t(e)};Cs.gamerDelFriendS2C.on(a),Cs.GamerDelFriendC2S(e)})}static GamerProcessFriendReqC2S(e,t){net.logic.gamerProcessFriendReqC2S(e,t)}static get gamerProcessFriendReqS2C(){return net.logic.gamerProcessFriendReqS2C}static async AsyncGamerProcessFriendReqC2S(e,t){return new Promise(i=>{let s={error:200},a=setTimeout(()=>{i(s)},5e3),n=function(e){clearTimeout(a),Cs.gamerProcessFriendReqS2C.off(n),i(e)};Cs.gamerProcessFriendReqS2C.on(n),Cs.GamerProcessFriendReqC2S(e,t)})}static GamerGetMailC2S(){net.logic.gamerGetMailC2S()}static get gamerGetMailS2C(){return net.logic.gamerGetMailS2C}static async AsyncGamerGetMailC2S(){return new Promise(e=>{let t={error:200},i=setTimeout(()=>{e(t)},5e3),s=function(t){clearTimeout(i),Cs.gamerGetMailS2C.off(s),e(t)};Cs.gamerGetMailS2C.on(s),Cs.GamerGetMailC2S()})}static GamerDelMailC2S(e){net.logic.gamerDelMailC2S(e)}static get gamerDelMailS2C(){return net.logic.gamerDelMailS2C}static async AsyncGamerDelMailC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),Cs.gamerDelMailS2C.off(a),t(e)};Cs.gamerDelMailS2C.on(a),Cs.GamerDelMailC2S(e)})}static GamerDelHaveReadMailC2S(){net.logic.gamerDelHaveReadMailC2S()}static get gamerDelHaveReadMailS2C(){return net.logic.gamerDelHaveReadMailS2C}static async AsyncGamerDelHaveReadMailC2S(){return new Promise(e=>{let t={error:200},i=setTimeout(()=>{e(t)},5e3),s=function(t){clearTimeout(i),Cs.gamerDelHaveReadMailS2C.off(s),e(t)};Cs.gamerDelHaveReadMailS2C.on(s),Cs.GamerDelHaveReadMailC2S()})}static GamerOneKeyRcvMailRewardC2S(){net.logic.gamerOneKeyRcvMailRewardC2S()}static get gamerOneKeyRcvMailRewardS2C(){return net.logic.gamerOneKeyRcvMailRewardS2C}static async AsyncGamerOneKeyRcvMailRewardC2S(){return new Promise(e=>{let t={error:200},i=setTimeout(()=>{e(t)},5e3),s=function(t){clearTimeout(i),Cs.gamerOneKeyRcvMailRewardS2C.off(s),e(t)};Cs.gamerOneKeyRcvMailRewardS2C.on(s),Cs.GamerOneKeyRcvMailRewardC2S()})}static GamerChangeMailStateC2S(e,t){net.logic.gamerChangeMailStateC2S(e,t)}static get gamerChangeMailStateS2C(){return net.logic.gamerChangeMailStateS2C}static async AsyncGamerChangeMailStateC2S(e,t){return new Promise(i=>{let s={error:200},a=setTimeout(()=>{i(s)},5e3),n=function(e){clearTimeout(a),Cs.gamerChangeMailStateS2C.off(n),i(e)};Cs.gamerChangeMailStateS2C.on(n),Cs.GamerChangeMailStateC2S(e,t)})}static GamerNewHeroC2S(e){net.logic.gamerNewHeroC2S(e)}static get gamerNewHeroS2C(){return net.logic.gamerNewHeroS2C}static async AsyncGamerNewHeroC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),Cs.gamerNewHeroS2C.off(a),t(e)};Cs.gamerNewHeroS2C.on(a),Cs.GamerNewHeroC2S(e)})}static GamerUpgradeHeroC2S(e,t){net.logic.gamerUpgradeHeroC2S(e,t)}static get gamerUpgradeHeroS2C(){return net.logic.gamerUpgradeHeroS2C}static async AsyncGamerUpgradeHeroC2S(e,t){return new Promise(i=>{let s={error:200},a=setTimeout(()=>{i(s)},5e3),n=function(e){clearTimeout(a),Cs.gamerUpgradeHeroS2C.off(n),i(e)};Cs.gamerUpgradeHeroS2C.on(n),Cs.GamerUpgradeHeroC2S(e,t)})}static GamerUseHeroMedicineC2S(e,t,i){net.logic.gamerUseHeroMedicineC2S(e,t,i)}static get gamerUseHeroMedicineS2C(){return net.logic.gamerUseHeroMedicineS2C}static async AsyncGamerUseHeroMedicineC2S(e,t,i){return new Promise(s=>{let a={error:200},n=setTimeout(()=>{s(a)},5e3),r=function(e){clearTimeout(n),Cs.gamerUseHeroMedicineS2C.off(r),s(e)};Cs.gamerUseHeroMedicineS2C.on(r),Cs.GamerUseHeroMedicineC2S(e,t,i)})}static GamerUpStarHeroC2S(e){net.logic.gamerUpStarHeroC2S(e)}static get gamerUpStarHeroS2C(){return net.logic.gamerUpStarHeroS2C}static async AsyncGamerUpStarHeroC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),Cs.gamerUpStarHeroS2C.off(a),t(e)};Cs.gamerUpStarHeroS2C.on(a),Cs.GamerUpStarHeroC2S(e)})}static GamerUpHeroSkillC2S(e,t){net.logic.gamerUpHeroSkillC2S(e,t)}static get gamerUpHeroSkillS2C(){return net.logic.gamerUpHeroSkillS2C}static async AsyncGamerUpHeroSkillC2S(e,t){return new Promise(i=>{let s={error:200},a=setTimeout(()=>{i(s)},5e3),n=function(e){clearTimeout(a),Cs.gamerUpHeroSkillS2C.off(n),i(e)};Cs.gamerUpHeroSkillS2C.on(n),Cs.GamerUpHeroSkillC2S(e,t)})}static GamerGetHeroC2S(){net.logic.gamerGetHeroC2S()}static get gamerGetHeroS2C(){return net.logic.gamerGetHeroS2C}static async AsyncGamerGetHeroC2S(){return new Promise(e=>{let t={error:200},i=setTimeout(()=>{e(t)},5e3),s=function(t){clearTimeout(i),Cs.gamerGetHeroS2C.off(s),e(t)};Cs.gamerGetHeroS2C.on(s),Cs.GamerGetHeroC2S()})}static GamerPVPLoadingC2S(e,t){net.logic.gamerPVPLoadingC2S(e,t)}static get gamerPVPLoadingS2C(){return net.logic.gamerPVPLoadingS2C}static async AsyncGamerPVPLoadingC2S(e,t){return new Promise(i=>{let s={error:200},a=setTimeout(()=>{i(s)},5e3),n=function(e){clearTimeout(a),Cs.gamerPVPLoadingS2C.off(n),i(e)};Cs.gamerPVPLoadingS2C.on(n),Cs.GamerPVPLoadingC2S(e,t)})}static GamerPVPSyncC2S(e,t,i,s,a,n,r,o,l,c,h,u){net.logic.gamerPVPSyncC2S(e,t,i,s,a,n,r,o,l,c,h,u)}static get gamerPVPSyncS2C(){return net.logic.gamerPVPSyncS2C}static async AsyncGamerPVPSyncC2S(e,t,i,s,a,n,r,o,l,c,h,u){return new Promise(m=>{let g={error:200},d=setTimeout(()=>{m(g)},5e3),p=function(e){clearTimeout(d),Cs.gamerPVPSyncS2C.off(p),m(e)};Cs.gamerPVPSyncS2C.on(p),Cs.GamerPVPSyncC2S(e,t,i,s,a,n,r,o,l,c,h,u)})}static GamerReliveC2S(e,t){net.logic.gamerReliveC2S(e,t)}static get gamerReliveS2C(){return net.logic.gamerReliveS2C}static async AsyncGamerReliveC2S(e,t){return new Promise(i=>{let s={error:200},a=setTimeout(()=>{i(s)},5e3),n=function(e){clearTimeout(a),Cs.gamerReliveS2C.off(n),i(e)};Cs.gamerReliveS2C.on(n),Cs.GamerReliveC2S(e,t)})}static GamerGetRealTimeRankC2S(){net.logic.gamerGetRealTimeRankC2S()}static get gamerGetRealTimeRankS2C(){return net.logic.gamerGetRealTimeRankS2C}static async AsyncGamerGetRealTimeRankC2S(){return new Promise(e=>{let t={error:200},i=setTimeout(()=>{e(t)},5e3),s=function(t){clearTimeout(i),Cs.gamerGetRealTimeRankS2C.off(s),e(t)};Cs.gamerGetRealTimeRankS2C.on(s),Cs.GamerGetRealTimeRankC2S()})}static GamerCheckPVPBattleC2S(e){net.logic.gamerCheckPVPBattleC2S(e)}static get gamerCheckPVPBattleS2C(){return net.logic.gamerCheckPVPBattleS2C}static async AsyncGamerCheckPVPBattleC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),Cs.gamerCheckPVPBattleS2C.off(a),t(e)};Cs.gamerCheckPVPBattleS2C.on(a),Cs.GamerCheckPVPBattleC2S(e)})}static GamerUploadWXInfoC2S(e){net.logic.gamerUploadWXInfoC2S(e)}static get gamerUploadWXInfoS2C(){return net.logic.gamerUploadWXInfoS2C}static async AsyncGamerUploadWXInfoC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),Cs.gamerUploadWXInfoS2C.off(a),t(e)};Cs.gamerUploadWXInfoS2C.on(a),Cs.GamerUploadWXInfoC2S(e)})}static GamerGetNoviceGuideC2S(){net.logic.gamerGetNoviceGuideC2S()}static get gamerGetNoviceGuideS2C(){return net.logic.gamerGetNoviceGuideS2C}static async AsyncGamerGetNoviceGuideC2S(){return new Promise(e=>{let t={error:200},i=setTimeout(()=>{e(t)},5e3),s=function(t){clearTimeout(i),Cs.gamerGetNoviceGuideS2C.off(s),e(t)};Cs.gamerGetNoviceGuideS2C.on(s),Cs.GamerGetNoviceGuideC2S()})}static GamerNoviceGuideChangeC2S(e){net.logic.gamerNoviceGuideChangeC2S(e)}static get gamerNoviceGuideChangeS2C(){return net.logic.gamerNoviceGuideChangeS2C}static async AsyncGamerNoviceGuideChangeC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),Cs.gamerNoviceGuideChangeS2C.off(a),t(e)};Cs.gamerNoviceGuideChangeS2C.on(a),Cs.GamerNoviceGuideChangeC2S(e)})}static GamerMatchC2S(e,t,i,s,a,n,r,o){net.logic.gamerMatchC2S(e,t,i,s,a,n,r,o)}static get gamerMatchS2C(){return net.logic.gamerMatchS2C}static async AsyncGamerMatchC2S(e,t,i,s,a,n,r,o){return new Promise(l=>{let c={error:200},h=setTimeout(()=>{l(c)},5e3),u=function(e){clearTimeout(h),Cs.gamerMatchS2C.off(u),l(e)};Cs.gamerMatchS2C.on(u),Cs.GamerMatchC2S(e,t,i,s,a,n,r,o)})}static GamerCancelMatchC2S(){net.logic.gamerCancelMatchC2S()}static get gamerCancelMatchS2C(){return net.logic.gamerCancelMatchS2C}static async AsyncGamerCancelMatchC2S(){return new Promise(e=>{let t={error:200},i=setTimeout(()=>{e(t)},5e3),s=function(t){clearTimeout(i),Cs.gamerCancelMatchS2C.off(s),e(t)};Cs.gamerCancelMatchS2C.on(s),Cs.GamerCancelMatchC2S()})}static GamerGetRewardC2S(e){net.logic.gamerGetRewardC2S(e)}static get gamerGetRewardS2C(){return net.logic.gamerGetRewardS2C}static async AsyncGamerGetRewardC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),Cs.gamerGetRewardS2C.off(a),t(e)};Cs.gamerGetRewardS2C.on(a),Cs.GamerGetRewardC2S(e)})}static GamerUseIconC2S(e,t,i){net.logic.gamerUseIconC2S(e,t,i)}static get gamerUseIconS2C(){return net.logic.gamerUseIconS2C}static async AsyncGamerUseIconC2S(e,t,i){return new Promise(s=>{let a={error:200},n=setTimeout(()=>{s(a)},5e3),r=function(e){clearTimeout(n),Cs.gamerUseIconS2C.off(r),s(e)};Cs.gamerUseIconS2C.on(r),Cs.GamerUseIconC2S(e,t,i)})}static GamerExtractGashaponC2S(e){net.logic.gamerExtractGashaponC2S(e)}static get gamerExtractGashaponS2C(){return net.logic.gamerExtractGashaponS2C}static async AsyncGamerExtractGashaponC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),Cs.gamerExtractGashaponS2C.off(a),t(e)};Cs.gamerExtractGashaponS2C.on(a),Cs.GamerExtractGashaponC2S(e)})}static GamerGetGashaponPreviewC2S(e){net.logic.gamerGetGashaponPreviewC2S(e)}static get gamerGetGashaponPreviewS2C(){return net.logic.gamerGetGashaponPreviewS2C}static async AsyncGamerGetGashaponPreviewC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),Cs.gamerGetGashaponPreviewS2C.off(a),t(e)};Cs.gamerGetGashaponPreviewS2C.on(a),Cs.GamerGetGashaponPreviewC2S(e)})}static GetActivityRewardC2S(e){net.logic.getActivityRewardC2S(e)}static get getActivityRewardS2C(){return net.logic.getActivityRewardS2C}static async AsyncGetActivityRewardC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),Cs.getActivityRewardS2C.off(a),t(e)};Cs.getActivityRewardS2C.on(a),Cs.GetActivityRewardC2S(e)})}static CreateGuildC2S(e){net.logic.createGuildC2S(e)}static get createGuildS2C(){return net.logic.createGuildS2C}static async AsyncCreateGuildC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),Cs.createGuildS2C.off(a),t(e)};Cs.createGuildS2C.on(a),Cs.CreateGuildC2S(e)})}static GuildGamerLoginC2S(e){net.logic.guildGamerLoginC2S(e)}static get guildGamerLoginS2C(){return net.logic.guildGamerLoginS2C}static async AsyncGuildGamerLoginC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),Cs.guildGamerLoginS2C.off(a),t(e)};Cs.guildGamerLoginS2C.on(a),Cs.GuildGamerLoginC2S(e)})}static GuildGamerLoginoutC2S(e){net.logic.guildGamerLoginoutC2S(e)}static get guildGamerLoginoutS2C(){return net.logic.guildGamerLoginoutS2C}static async AsyncGuildGamerLoginoutC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),Cs.guildGamerLoginoutS2C.off(a),t(e)};Cs.guildGamerLoginoutS2C.on(a),Cs.GuildGamerLoginoutC2S(e)})}static DissolutionGuildC2S(e){net.logic.dissolutionGuildC2S(e)}static get dissolutionGuildS2C(){return net.logic.dissolutionGuildS2C}static async AsyncDissolutionGuildC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),Cs.dissolutionGuildS2C.off(a),t(e)};Cs.dissolutionGuildS2C.on(a),Cs.DissolutionGuildC2S(e)})}static GetGuildC2S(e){net.logic.getGuildC2S(e)}static get getGuildS2C(){return net.logic.getGuildS2C}static async AsyncGetGuildC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),Cs.getGuildS2C.off(a),t(e)};Cs.getGuildS2C.on(a),Cs.GetGuildC2S(e)})}static GetGuildListC2S(e,t){net.logic.getGuildListC2S(e,t)}static get getGuildListS2C(){return net.logic.getGuildListS2C}static async AsyncGetGuildListC2S(e,t){return new Promise(i=>{let s={error:200},a=setTimeout(()=>{i(s)},5e3),n=function(e){clearTimeout(a),Cs.getGuildListS2C.off(n),i(e)};Cs.getGuildListS2C.on(n),Cs.GetGuildListC2S(e,t)})}static ApplyJoinGuildC2S(e){net.logic.applyJoinGuildC2S(e)}static get applyJoinGuildS2C(){return net.logic.applyJoinGuildS2C}static async AsyncApplyJoinGuildC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),Cs.applyJoinGuildS2C.off(a),t(e)};Cs.applyJoinGuildS2C.on(a),Cs.ApplyJoinGuildC2S(e)})}static ApprovalJoinGuildC2S(e,t,i){net.logic.approvalJoinGuildC2S(e,t,i)}static get approvalJoinGuildS2C(){return net.logic.approvalJoinGuildS2C}static async AsyncApprovalJoinGuildC2S(e,t,i){return new Promise(s=>{let a={error:200},n=setTimeout(()=>{s(a)},5e3),r=function(e){clearTimeout(n),Cs.approvalJoinGuildS2C.off(r),s(e)};Cs.approvalJoinGuildS2C.on(r),Cs.ApprovalJoinGuildC2S(e,t,i)})}static InviteJoinGuildC2S(e,t){net.logic.inviteJoinGuildC2S(e,t)}static get inviteJoinGuildS2C(){return net.logic.inviteJoinGuildS2C}static async AsyncInviteJoinGuildC2S(e,t){return new Promise(i=>{let s={error:200},a=setTimeout(()=>{i(s)},5e3),n=function(e){clearTimeout(a),Cs.inviteJoinGuildS2C.off(n),i(e)};Cs.inviteJoinGuildS2C.on(n),Cs.InviteJoinGuildC2S(e,t)})}static AgreeJoinGuildC2S(e,t){net.logic.agreeJoinGuildC2S(e,t)}static get agreeJoinGuildS2C(){return net.logic.agreeJoinGuildS2C}static async AsyncAgreeJoinGuildC2S(e,t){return new Promise(i=>{let s={error:200},a=setTimeout(()=>{i(s)},5e3),n=function(e){clearTimeout(a),Cs.agreeJoinGuildS2C.off(n),i(e)};Cs.agreeJoinGuildS2C.on(n),Cs.AgreeJoinGuildC2S(e,t)})}static QuitGuildC2S(e){net.logic.quitGuildC2S(e)}static get quitGuildS2C(){return net.logic.quitGuildS2C}static async AsyncQuitGuildC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),Cs.quitGuildS2C.off(a),t(e)};Cs.quitGuildS2C.on(a),Cs.QuitGuildC2S(e)})}static KickOutGuildC2S(e,t){net.logic.kickOutGuildC2S(e,t)}static get kickOutGuildS2C(){return net.logic.kickOutGuildS2C}static async AsyncKickOutGuildC2S(e,t){return new Promise(i=>{let s={error:200},a=setTimeout(()=>{i(s)},5e3),n=function(e){clearTimeout(a),Cs.kickOutGuildS2C.off(n),i(e)};Cs.kickOutGuildS2C.on(n),Cs.KickOutGuildC2S(e,t)})}static GuildChatC2S(e,t){net.logic.guildChatC2S(e,t)}static get guildChatS2C(){return net.logic.guildChatS2C}static async AsyncGuildChatC2S(e,t){return new Promise(i=>{let s={error:200},a=setTimeout(()=>{i(s)},5e3),n=function(e){clearTimeout(a),Cs.guildChatS2C.off(n),i(e)};Cs.guildChatS2C.on(n),Cs.GuildChatC2S(e,t)})}static GMC2S(e){net.logic.gMC2S(e)}static get gMS2C(){return net.logic.gMS2C}static async AsyncGMC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),Cs.gMS2C.off(a),t(e)};Cs.gMS2C.on(a),Cs.GMC2S(e)})}static CheckPointListC2S(){net.logic.checkPointListC2S()}static get checkPointListS2C(){return net.logic.checkPointListS2C}static async AsyncCheckPointListC2S(){return new Promise(e=>{let t={error:200},i=setTimeout(()=>{e(t)},5e3),s=function(t){clearTimeout(i),Cs.checkPointListS2C.off(s),e(t)};Cs.checkPointListS2C.on(s),Cs.CheckPointListC2S()})}static GetPlotStarRewardC2S(e,t){net.logic.getPlotStarRewardC2S(e,t)}static get getPlotStarRewardS2C(){return net.logic.getPlotStarRewardS2C}static async AsyncGetPlotStarRewardC2S(e,t){return new Promise(i=>{let s={error:200},a=setTimeout(()=>{i(s)},5e3),n=function(e){clearTimeout(a),Cs.getPlotStarRewardS2C.off(n),i(e)};Cs.getPlotStarRewardS2C.on(n),Cs.GetPlotStarRewardC2S(e,t)})}static BuyTimesCheckPointC2S(e,t){net.logic.buyTimesCheckPointC2S(e,t)}static get buyTimesCheckPointS2C(){return net.logic.buyTimesCheckPointS2C}static async AsyncBuyTimesCheckPointC2S(e,t){return new Promise(i=>{let s={error:200},a=setTimeout(()=>{i(s)},5e3),n=function(e){clearTimeout(a),Cs.buyTimesCheckPointS2C.off(n),i(e)};Cs.buyTimesCheckPointS2C.on(n),Cs.BuyTimesCheckPointC2S(e,t)})}static SweepCheckPointC2S(e,t){net.logic.sweepCheckPointC2S(e,t)}static get sweepCheckPointS2C(){return net.logic.sweepCheckPointS2C}static async AsyncSweepCheckPointC2S(e,t){return new Promise(i=>{let s={error:200},a=setTimeout(()=>{i(s)},5e3),n=function(e){clearTimeout(a),Cs.sweepCheckPointS2C.off(n),i(e)};Cs.sweepCheckPointS2C.on(n),Cs.SweepCheckPointC2S(e,t)})}static GamerSettlePVEC2S(e,t,i,s){net.logic.gamerSettlePVEC2S(e,t,i,s)}static get gamerSettlePVES2C(){return net.logic.gamerSettlePVES2C}static async AsyncGamerSettlePVEC2S(e,t,i,s){return new Promise(a=>{let n={error:200},r=setTimeout(()=>{a(n)},5e3),o=function(e){clearTimeout(r),Cs.gamerSettlePVES2C.off(o),a(e)};Cs.gamerSettlePVES2C.on(o),Cs.GamerSettlePVEC2S(e,t,i,s)})}static DraugListC2S(){net.logic.draugListC2S()}static get draugListS2C(){return net.logic.draugListS2C}static async AsyncDraugListC2S(){return new Promise(e=>{let t={error:200},i=setTimeout(()=>{e(t)},5e3),s=function(t){clearTimeout(i),Cs.draugListS2C.off(s),e(t)};Cs.draugListS2C.on(s),Cs.DraugListC2S()})}static AwakenDraugC2S(e){net.logic.awakenDraugC2S(e)}static get awakenDraugS2C(){return net.logic.awakenDraugS2C}static async AsyncAwakenDraugC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),Cs.awakenDraugS2C.off(a),t(e)};Cs.awakenDraugS2C.on(a),Cs.AwakenDraugC2S(e)})}static PutDraugIntoPackC2S(){net.logic.putDraugIntoPackC2S()}static get putDraugIntoPackS2C(){return net.logic.putDraugIntoPackS2C}static async AsyncPutDraugIntoPackC2S(){return new Promise(e=>{let t={error:200},i=setTimeout(()=>{e(t)},5e3),s=function(t){clearTimeout(i),Cs.putDraugIntoPackS2C.off(s),e(t)};Cs.putDraugIntoPackS2C.on(s),Cs.PutDraugIntoPackC2S()})}static SwallowDraugC2S(e,t,i){net.logic.swallowDraugC2S(e,t,i)}static get swallowDraugS2C(){return net.logic.swallowDraugS2C}static async AsyncSwallowDraugC2S(e,t,i){return new Promise(s=>{let a={error:200},n=setTimeout(()=>{s(a)},5e3),r=function(e){clearTimeout(n),Cs.swallowDraugS2C.off(r),s(e)};Cs.swallowDraugS2C.on(r),Cs.SwallowDraugC2S(e,t,i)})}static DecomposeDraugC2S(e){net.logic.decomposeDraugC2S(e)}static get decomposeDraugS2C(){return net.logic.decomposeDraugS2C}static async AsyncDecomposeDraugC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),Cs.decomposeDraugS2C.off(a),t(e)};Cs.decomposeDraugS2C.on(a),Cs.DecomposeDraugC2S(e)})}static LockDraugC2S(e){net.logic.lockDraugC2S(e)}static get lockDraugS2C(){return net.logic.lockDraugS2C}static async AsyncLockDraugC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),Cs.lockDraugS2C.off(a),t(e)};Cs.lockDraugS2C.on(a),Cs.LockDraugC2S(e)})}static WearDraugC2S(e,t){net.logic.wearDraugC2S(e,t)}static get wearDraugS2C(){return net.logic.wearDraugS2C}static async AsyncWearDraugC2S(e,t){return new Promise(i=>{let s={error:200},a=setTimeout(()=>{i(s)},5e3),n=function(e){clearTimeout(a),Cs.wearDraugS2C.off(n),i(e)};Cs.wearDraugS2C.on(n),Cs.WearDraugC2S(e,t)})}static UnwearDraugC2S(e,t){net.logic.unwearDraugC2S(e,t)}static get unwearDraugS2C(){return net.logic.unwearDraugS2C}static async AsyncUnwearDraugC2S(e,t){return new Promise(i=>{let s={error:200},a=setTimeout(()=>{i(s)},5e3),n=function(e){clearTimeout(a),Cs.unwearDraugS2C.off(n),i(e)};Cs.unwearDraugS2C.on(n),Cs.UnwearDraugC2S(e,t)})}static DraugSelectHeroC2S(e){net.logic.draugSelectHeroC2S(e)}static get draugSelectHeroS2C(){return net.logic.draugSelectHeroS2C}static async AsyncDraugSelectHeroC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),Cs.draugSelectHeroS2C.off(a),t(e)};Cs.draugSelectHeroS2C.on(a),Cs.DraugSelectHeroC2S(e)})}static HeroGroupListC2S(){net.logic.heroGroupListC2S()}static get heroGroupListS2C(){return net.logic.heroGroupListS2C}static async AsyncHeroGroupListC2S(){return new Promise(e=>{let t={error:200},i=setTimeout(()=>{e(t)},5e3),s=function(t){clearTimeout(i),Cs.heroGroupListS2C.off(s),e(t)};Cs.heroGroupListS2C.on(s),Cs.HeroGroupListC2S()})}static UnlockHeroGroupC2S(e){net.logic.unlockHeroGroupC2S(e)}static get unlockHeroGroupS2C(){return net.logic.unlockHeroGroupS2C}static async AsyncUnlockHeroGroupC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),Cs.unlockHeroGroupS2C.off(a),t(e)};Cs.unlockHeroGroupS2C.on(a),Cs.UnlockHeroGroupC2S(e)})}static ChangeNameHeroGroupC2S(e,t){net.logic.changeNameHeroGroupC2S(e,t)}static get changeNameHeroGroupS2C(){return net.logic.changeNameHeroGroupS2C}static async AsyncChangeNameHeroGroupC2S(e,t){return new Promise(i=>{let s={error:200},a=setTimeout(()=>{i(s)},5e3),n=function(e){clearTimeout(a),Cs.changeNameHeroGroupS2C.off(n),i(e)};Cs.changeNameHeroGroupS2C.on(n),Cs.ChangeNameHeroGroupC2S(e,t)})}static HeroGroupChangeHeroC2S(e,t,i){net.logic.heroGroupChangeHeroC2S(e,t,i)}static get heroGroupChangeHeroS2C(){return net.logic.heroGroupChangeHeroS2C}static async AsyncHeroGroupChangeHeroC2S(e,t,i){return new Promise(s=>{let a={error:200},n=setTimeout(()=>{s(a)},5e3),r=function(e){clearTimeout(n),Cs.heroGroupChangeHeroS2C.off(r),s(e)};Cs.heroGroupChangeHeroS2C.on(r),Cs.HeroGroupChangeHeroC2S(e,t,i)})}static HeroGroupChangeSkillC2S(e,t,i){net.logic.heroGroupChangeSkillC2S(e,t,i)}static get heroGroupChangeSkillS2C(){return net.logic.heroGroupChangeSkillS2C}static async AsyncHeroGroupChangeSkillC2S(e,t,i){return new Promise(s=>{let a={error:200},n=setTimeout(()=>{s(a)},5e3),r=function(e){clearTimeout(n),Cs.heroGroupChangeSkillS2C.off(r),s(e)};Cs.heroGroupChangeSkillS2C.on(r),Cs.HeroGroupChangeSkillC2S(e,t,i)})}static BuyFatigueC2S(e){net.logic.buyFatigueC2S(e)}static get buyFatigueS2C(){return net.logic.buyFatigueS2C}static async AsyncBuyFatigueC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),Cs.buyFatigueS2C.off(a),t(e)};Cs.buyFatigueS2C.on(a),Cs.BuyFatigueC2S(e)})}static GetFatigueWelfareC2S(e){net.logic.getFatigueWelfareC2S(e)}static get getFatigueWelfareS2C(){return net.logic.getFatigueWelfareS2C}static async AsyncGetFatigueWelfareC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),Cs.getFatigueWelfareS2C.off(a),t(e)};Cs.getFatigueWelfareS2C.on(a),Cs.GetFatigueWelfareC2S(e)})}static UpStarEquipC2S(e,t,i,s){net.logic.upStarEquipC2S(e,t,i,s)}static get upStarEquipS2C(){return net.logic.upStarEquipS2C}static async AsyncUpStarEquipC2S(e,t,i,s){return new Promise(a=>{let n={error:200},r=setTimeout(()=>{a(n)},5e3),o=function(e){clearTimeout(r),Cs.upStarEquipS2C.off(o),a(e)};Cs.upStarEquipS2C.on(o),Cs.UpStarEquipC2S(e,t,i,s)})}static EatEquipsC2S(e,t,i){net.logic.eatEquipsC2S(e,t,i)}static get eatEquipsS2C(){return net.logic.eatEquipsS2C}static async AsyncEatEquipsC2S(e,t,i){return new Promise(s=>{let a={error:200},n=setTimeout(()=>{s(a)},5e3),r=function(e){clearTimeout(n),Cs.eatEquipsS2C.off(r),s(e)};Cs.eatEquipsS2C.on(r),Cs.EatEquipsC2S(e,t,i)})}static DesEquipC2S(e){net.logic.desEquipC2S(e)}static get desEquipS2C(){return net.logic.desEquipS2C}static async AsyncDesEquipC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),Cs.desEquipS2C.off(a),t(e)};Cs.desEquipS2C.on(a),Cs.DesEquipC2S(e)})}static TakeOnEquipC2S(e,t,i){net.logic.takeOnEquipC2S(e,t,i)}static get takeOnEquipS2C(){return net.logic.takeOnEquipS2C}static async AsyncTakeOnEquipC2S(e,t,i){return new Promise(s=>{let a={error:200},n=setTimeout(()=>{s(a)},5e3),r=function(e){clearTimeout(n),Cs.takeOnEquipS2C.off(r),s(e)};Cs.takeOnEquipS2C.on(r),Cs.TakeOnEquipC2S(e,t,i)})}static TakeOffEquipC2S(e,t){net.logic.takeOffEquipC2S(e,t)}static get takeOffEquipS2C(){return net.logic.takeOffEquipS2C}static async AsyncTakeOffEquipC2S(e,t){return new Promise(i=>{let s={error:200},a=setTimeout(()=>{i(s)},5e3),n=function(e){clearTimeout(a),Cs.takeOffEquipS2C.off(n),i(e)};Cs.takeOffEquipS2C.on(n),Cs.TakeOffEquipC2S(e,t)})}static RedSpotC2S(){net.logic.redSpotC2S()}static get redSpotS2C(){return net.logic.redSpotS2C}static async AsyncRedSpotC2S(){return new Promise(e=>{let t={error:200},i=setTimeout(()=>{e(t)},5e3),s=function(t){clearTimeout(i),Cs.redSpotS2C.off(s),e(t)};Cs.redSpotS2C.on(s),Cs.RedSpotC2S()})}static MakeTeamC2S(e,t,i,s){net.logic.makeTeamC2S(e,t,i,s)}static get makeTeamS2C(){return net.logic.makeTeamS2C}static async AsyncMakeTeamC2S(e,t,i,s){return new Promise(a=>{let n={error:200},r=setTimeout(()=>{a(n)},5e3),o=function(e){clearTimeout(r),Cs.makeTeamS2C.off(o),a(e)};Cs.makeTeamS2C.on(o),Cs.MakeTeamC2S(e,t,i,s)})}static SetTeamAimC2S(e){net.logic.setTeamAimC2S(e)}static get setTeamAimS2C(){return net.logic.setTeamAimS2C}static async AsyncSetTeamAimC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),Cs.setTeamAimS2C.off(a),t(e)};Cs.setTeamAimS2C.on(a),Cs.SetTeamAimC2S(e)})}static JoinTeamC2S(e,t,i,s){net.logic.joinTeamC2S(e,t,i,s)}static get joinTeamS2C(){return net.logic.joinTeamS2C}static async AsyncJoinTeamC2S(e,t,i,s){return new Promise(a=>{let n={error:200},r=setTimeout(()=>{a(n)},5e3),o=function(e){clearTimeout(r),Cs.joinTeamS2C.off(o),a(e)};Cs.joinTeamS2C.on(o),Cs.JoinTeamC2S(e,t,i,s)})}static ExitTeamC2S(){net.logic.exitTeamC2S()}static get exitTeamS2C(){return net.logic.exitTeamS2C}static async AsyncExitTeamC2S(){return new Promise(e=>{let t={error:200},i=setTimeout(()=>{e(t)},5e3),s=function(t){clearTimeout(i),Cs.exitTeamS2C.off(s),e(t)};Cs.exitTeamS2C.on(s),Cs.ExitTeamC2S()})}static TurnOverTeamLeaderC2S(e){net.logic.turnOverTeamLeaderC2S(e)}static get turnOverTeamLeaderS2C(){return net.logic.turnOverTeamLeaderS2C}static async AsyncTurnOverTeamLeaderC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),Cs.turnOverTeamLeaderS2C.off(a),t(e)};Cs.turnOverTeamLeaderS2C.on(a),Cs.TurnOverTeamLeaderC2S(e)})}static InviteTeamC2S(e){net.logic.inviteTeamC2S(e)}static get inviteTeamS2C(){return net.logic.inviteTeamS2C}static async AsyncInviteTeamC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),Cs.inviteTeamS2C.off(a),t(e)};Cs.inviteTeamS2C.on(a),Cs.InviteTeamC2S(e)})}static RejectTeamC2S(e,t,i){net.logic.rejectTeamC2S(e,t,i)}static get rejectTeamS2C(){return net.logic.rejectTeamS2C}static async AsyncRejectTeamC2S(e,t,i){return new Promise(s=>{let a={error:200},n=setTimeout(()=>{s(a)},5e3),r=function(e){clearTimeout(n),Cs.rejectTeamS2C.off(r),s(e)};Cs.rejectTeamS2C.on(r),Cs.RejectTeamC2S(e,t,i)})}static KickTeamC2S(e){net.logic.kickTeamC2S(e)}static get kickTeamS2C(){return net.logic.kickTeamS2C}static async AsyncKickTeamC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),Cs.kickTeamS2C.off(a),t(e)};Cs.kickTeamS2C.on(a),Cs.KickTeamC2S(e)})}static SetTeamHelpC2S(e){net.logic.setTeamHelpC2S(e)}static get setTeamHelpS2C(){return net.logic.setTeamHelpS2C}static async AsyncSetTeamHelpC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),Cs.setTeamHelpS2C.off(a),t(e)};Cs.setTeamHelpS2C.on(a),Cs.SetTeamHelpC2S(e)})}static SetTeamHeroC2S(e,t,i){net.logic.setTeamHeroC2S(e,t,i)}static get setTeamHeroS2C(){return net.logic.setTeamHeroS2C}static async AsyncSetTeamHeroC2S(e,t,i){return new Promise(s=>{let a={error:200},n=setTimeout(()=>{s(a)},5e3),r=function(e){clearTimeout(n),Cs.setTeamHeroS2C.off(r),s(e)};Cs.setTeamHeroS2C.on(r),Cs.SetTeamHeroC2S(e,t,i)})}static SwitchTeamReadyC2S(){net.logic.switchTeamReadyC2S()}static get switchTeamReadyS2C(){return net.logic.switchTeamReadyS2C}static async AsyncSwitchTeamReadyC2S(){return new Promise(e=>{let t={error:200},i=setTimeout(()=>{e(t)},5e3),s=function(t){clearTimeout(i),Cs.switchTeamReadyS2C.off(s),e(t)};Cs.switchTeamReadyS2C.on(s),Cs.SwitchTeamReadyC2S()})}static TeamBattleC2S(){net.logic.teamBattleC2S()}static get teamBattleS2C(){return net.logic.teamBattleS2C}static async AsyncTeamBattleC2S(){return new Promise(e=>{let t={error:200},i=setTimeout(()=>{e(t)},5e3),s=function(t){clearTimeout(i),Cs.teamBattleS2C.off(s),e(t)};Cs.teamBattleS2C.on(s),Cs.TeamBattleC2S()})}static GetDanInfoC2S(){net.logic.getDanInfoC2S()}static get getDanInfoS2C(){return net.logic.getDanInfoS2C}static async AsyncGetDanInfoC2S(){return new Promise(e=>{let t={error:200},i=setTimeout(()=>{e(t)},5e3),s=function(t){clearTimeout(i),Cs.getDanInfoS2C.off(s),e(t)};Cs.getDanInfoS2C.on(s),Cs.GetDanInfoC2S()})}static GetDuelRankC2S(e,t,i,s){net.logic.getDuelRankC2S(e,t,i,s)}static get getDuelRankS2C(){return net.logic.getDuelRankS2C}static async AsyncGetDuelRankC2S(e,t,i,s){return new Promise(a=>{let n={error:200},r=setTimeout(()=>{a(n)},5e3),o=function(e){clearTimeout(r),Cs.getDuelRankS2C.off(o),a(e)};Cs.getDuelRankS2C.on(o),Cs.GetDuelRankC2S(e,t,i,s)})}static SysListC2S(){net.logic.sysListC2S()}static get sysListS2C(){return net.logic.sysListS2C}static async AsyncSysListC2S(){return new Promise(e=>{let t={error:200},i=setTimeout(()=>{e(t)},5e3),s=function(t){clearTimeout(i),Cs.sysListS2C.off(s),e(t)};Cs.sysListS2C.on(s),Cs.SysListC2S()})}static SysOpenShowC2S(e){net.logic.sysOpenShowC2S(e)}static get sysOpenShowS2C(){return net.logic.sysOpenShowS2C}static async AsyncSysOpenShowC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),Cs.sysOpenShowS2C.off(a),t(e)};Cs.sysOpenShowS2C.on(a),Cs.SysOpenShowC2S(e)})}static GetQuestsC2S(){net.logic.getQuestsC2S()}static get getQuestsS2C(){return net.logic.getQuestsS2C}static async AsyncGetQuestsC2S(){return new Promise(e=>{let t={error:200},i=setTimeout(()=>{e(t)},5e3),s=function(t){clearTimeout(i),Cs.getQuestsS2C.off(s),e(t)};Cs.getQuestsS2C.on(s),Cs.GetQuestsC2S()})}static GetQuestRewardC2S(e){net.logic.getQuestRewardC2S(e)}static get getQuestRewardS2C(){return net.logic.getQuestRewardS2C}static async AsyncGetQuestRewardC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),Cs.getQuestRewardS2C.off(a),t(e)};Cs.getQuestRewardS2C.on(a),Cs.GetQuestRewardC2S(e)})}static GetDailyQuestRewardC2S(e){net.logic.getDailyQuestRewardC2S(e)}static get getDailyQuestRewardS2C(){return net.logic.getDailyQuestRewardS2C}static async AsyncGetDailyQuestRewardC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),Cs.getDailyQuestRewardS2C.off(a),t(e)};Cs.getDailyQuestRewardS2C.on(a),Cs.GetDailyQuestRewardC2S(e)})}static GamerHeroImageChooseC2S(){net.logic.gamerHeroImageChooseC2S()}static get gamerHeroImageChooseS2C(){return net.logic.gamerHeroImageChooseS2C}static async AsyncGamerHeroImageChooseC2S(){return new Promise(e=>{let t={error:200},i=setTimeout(()=>{e(t)},5e3),s=function(t){clearTimeout(i),Cs.gamerHeroImageChooseS2C.off(s),e(t)};Cs.gamerHeroImageChooseS2C.on(s),Cs.GamerHeroImageChooseC2S()})}static GamerHeroImageChangeC2S(e){net.logic.gamerHeroImageChangeC2S(e)}static get gamerHeroImageChangeS2C(){return net.logic.gamerHeroImageChangeS2C}static async AsyncGamerHeroImageChangeC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),Cs.gamerHeroImageChangeS2C.off(a),t(e)};Cs.gamerHeroImageChangeS2C.on(a),Cs.GamerHeroImageChangeC2S(e)})}static GamerBuyRollC2S(e){net.logic.gamerBuyRollC2S(e)}static get gamerBuyRollS2C(){return net.logic.gamerBuyRollS2C}static async AsyncGamerBuyRollC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),Cs.gamerBuyRollS2C.off(a),t(e)};Cs.gamerBuyRollS2C.on(a),Cs.GamerBuyRollC2S(e)})}static GetGamerSecretLandC2S(){net.logic.getGamerSecretLandC2S()}static get getGamerSecretLandS2C(){return net.logic.getGamerSecretLandS2C}static async AsyncGetGamerSecretLandC2S(){return new Promise(e=>{let t={error:200},i=setTimeout(()=>{e(t)},5e3),s=function(t){clearTimeout(i),Cs.getGamerSecretLandS2C.off(s),e(t)};Cs.getGamerSecretLandS2C.on(s),Cs.GetGamerSecretLandC2S()})}static GamerSecretLandBattleRewardC2S(e){net.logic.gamerSecretLandBattleRewardC2S(e)}static get gamerSecretLandBattleRewardS2C(){return net.logic.gamerSecretLandBattleRewardS2C}static async AsyncGamerSecretLandBattleRewardC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),Cs.gamerSecretLandBattleRewardS2C.off(a),t(e)};Cs.gamerSecretLandBattleRewardS2C.on(a),Cs.GamerSecretLandBattleRewardC2S(e)})}static GamerSecretLandWeekRewardC2S(){net.logic.gamerSecretLandWeekRewardC2S()}static get gamerSecretLandWeekRewardS2C(){return net.logic.gamerSecretLandWeekRewardS2C}static async AsyncGamerSecretLandWeekRewardC2S(){return new Promise(e=>{let t={error:200},i=setTimeout(()=>{e(t)},5e3),s=function(t){clearTimeout(i),Cs.gamerSecretLandWeekRewardS2C.off(s),e(t)};Cs.gamerSecretLandWeekRewardS2C.on(s),Cs.GamerSecretLandWeekRewardC2S()})}static GamerSecretLandRankC2S(e){net.logic.gamerSecretLandRankC2S(e)}static get gamerSecretLandRankS2C(){return net.logic.gamerSecretLandRankS2C}static async AsyncGamerSecretLandRankC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),Cs.gamerSecretLandRankS2C.off(a),t(e)};Cs.gamerSecretLandRankS2C.on(a),Cs.GamerSecretLandRankC2S(e)})}static GetGamerSecretLandInfoC2S(){net.logic.getGamerSecretLandInfoC2S()}static get getGamerSecretLandInfoS2C(){return net.logic.getGamerSecretLandInfoS2C}static async AsyncGetGamerSecretLandInfoC2S(){return new Promise(e=>{let t={error:200},i=setTimeout(()=>{e(t)},5e3),s=function(t){clearTimeout(i),Cs.getGamerSecretLandInfoS2C.off(s),e(t)};Cs.getGamerSecretLandInfoS2C.on(s),Cs.GetGamerSecretLandInfoC2S()})}static GamerChangeItemIsSawC2S(e,t){net.logic.gamerChangeItemIsSawC2S(e,t)}static get gamerChangeItemIsSawS2C(){return net.logic.gamerChangeItemIsSawS2C}static async AsyncGamerChangeItemIsSawC2S(e,t){return new Promise(i=>{let s={error:200},a=setTimeout(()=>{i(s)},5e3),n=function(e){clearTimeout(a),Cs.gamerChangeItemIsSawS2C.off(n),i(e)};Cs.gamerChangeItemIsSawS2C.on(n),Cs.GamerChangeItemIsSawC2S(e,t)})}static get gamerNotifyLoginOtherS2C(){return net.logic.gamerNotifyLoginOtherS2C}static get gamerNotifyExpLevelS2C(){return net.logic.gamerNotifyExpLevelS2C}static get gamerNotifyItemChangeS2C(){return net.logic.gamerNotifyItemChangeS2C}static get gamerNotifyNewChatS2C(){return net.logic.gamerNotifyNewChatS2C}static get gamerNotifyNewFriendReqS2C(){return net.logic.gamerNotifyNewFriendReqS2C}static get gamerNotifyNewFriendS2C(){return net.logic.gamerNotifyNewFriendS2C}static get gamerNotifyDelFriendS2C(){return net.logic.gamerNotifyDelFriendS2C}static get gamerNotifyNoticeS2C(){return net.logic.gamerNotifyNoticeS2C}static get gamerNotifyMailS2C(){return net.logic.gamerNotifyMailS2C}static get gamerNotifyNewMailS2C(){return net.logic.gamerNotifyNewMailS2C}static get gamerNotifyHerosChangeS2C(){return net.logic.gamerNotifyHerosChangeS2C}static get gamerNotifyHeroPropUpdateS2C(){return net.logic.gamerNotifyHeroPropUpdateS2C}static get gamerNotifyPVPLoadingS2C(){return net.logic.gamerNotifyPVPLoadingS2C}static get gamerNotifyGamerMiniS2C(){return net.logic.gamerNotifyGamerMiniS2C}static get gamerNotifyPVPSyncS2C(){return net.logic.gamerNotifyPVPSyncS2C}static get gamerNotifyNewPVPResultS2C(){return net.logic.gamerNotifyNewPVPResultS2C}static get gamerNotifyIconChangeS2C(){return net.logic.gamerNotifyIconChangeS2C}static get gamerNotifyDiamonChangeS2C(){return net.logic.gamerNotifyDiamonChangeS2C}static get gamerNotifyEnergyChangeS2C(){return net.logic.gamerNotifyEnergyChangeS2C}static get gamerNotifyExpChangeS2C(){return net.logic.gamerNotifyExpChangeS2C}static get gamerNotifyMatchInfoS2C(){return net.logic.gamerNotifyMatchInfoS2C}static get gamerNotifyGashaponInfoS2C(){return net.logic.gamerNotifyGashaponInfoS2C}static get gamerNotifyActivitiesS2C(){return net.logic.gamerNotifyActivitiesS2C}static get gamerNotifyApplyJoinGuildS2C(){return net.logic.gamerNotifyApplyJoinGuildS2C}static get gamerNotifyInviteJoinGuildS2C(){return net.logic.gamerNotifyInviteJoinGuildS2C}static get gamerNotifyGuildMemUpdateS2C(){return net.logic.gamerNotifyGuildMemUpdateS2C}static get gamerNotifyGuildChatS2C(){return net.logic.gamerNotifyGuildChatS2C}static get gamerNotifyCheckPointListS2C(){return net.logic.gamerNotifyCheckPointListS2C}static get gamerNotifyNewCheckPointListS2C(){return net.logic.gamerNotifyNewCheckPointListS2C}static get gamerNotifyRewardS2C(){return net.logic.gamerNotifyRewardS2C}static get gamerNotifyUnlockPosHeroGroupS2C(){return net.logic.gamerNotifyUnlockPosHeroGroupS2C}static get gamerNotifyFatigueS2C(){return net.logic.gamerNotifyFatigueS2C}static get gamerNotifyTeamS2C(){return net.logic.gamerNotifyTeamS2C}static get gamerNotifyTeamInfoS2C(){return net.logic.gamerNotifyTeamInfoS2C}static get gamerNotifyTeamChangeS2C(){return net.logic.gamerNotifyTeamChangeS2C}static get gamerNotifyTeamMemberChangeS2C(){return net.logic.gamerNotifyTeamMemberChangeS2C}static get gamerNotifyLeaveTeamS2C(){return net.logic.gamerNotifyLeaveTeamS2C}static get gamerNotifyTeamReadyS2C(){return net.logic.gamerNotifyTeamReadyS2C}static get gamerNotifyDanInfoS2C(){return net.logic.gamerNotifyDanInfoS2C}static get gamerNotifyNewSeasonS2C(){return net.logic.gamerNotifyNewSeasonS2C}static get gamerNotifyQuestsS2C(){return net.logic.gamerNotifyQuestsS2C}static get gamerNotifyGamerSecretLandInfoS2C(){return net.logic.gamerNotifyGamerSecretLandInfoS2C}static get gamerNotifySecretLandInfoS2C(){return net.logic.gamerNotifySecretLandInfoS2C}static get gamerNotifySLTreasureBoxS2C(){return net.logic.gamerNotifySLTreasureBoxS2C}static get gamerNotifyNewSecretLandResultS2C(){return net.logic.gamerNotifyNewSecretLandResultS2C}}class fs{constructor(){this.id=0,this.name="TestName",this.vipLevel=1}setGamerMain(e){for(var t in e)this[t]=e[t]}set setGamerMini(e){for(var t in e)this[t]=e[t]}}class ys{}class ws extends fs{constructor(){super(),this.maxLevel=80,this.changeNameNum=0,this.isLoginAndGetUserData=!1,this.isShowLevelUp=!1,this.levelSnapshotData=new ys,this.InitTestData()}InitTestData(){this.exp=0}setGamerMain(e){super.setGamerMain(e)}levelSnapshot(){this.levelSnapshotData.exp=this.exp,this.levelSnapshotData.level=this.level}}class _s extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","PanelMainMenu")}constructFromXML(e){super.constructFromXML(e),this.m_state=this.getController("state"),this.m_menuLogo=this.getChild("menuLogo"),this.m_btnBar=this.getChild("btnBar"),this.m_getUserInfoBtn=this.getChild("getUserInfoBtn")}}_s.URL="ui://moe42ygrsqzy7q",_s.DependPackages=["GameHome"];class Ls extends _s{onWindowInited(){this.m_btnBar.m_bigPlayBtn.onClick(this,this.OnClickPlayBtn),this.m_btnBar.m_soundBtn.onClick(this,this.OnClickSoundBtn),this.m_btnBar.m_groupBtn.onClick(this,this.OnClickGroupBtn),this.onTabShow()}onWindowShow(){this.m_btnBar.m_soundBtn.SetSoundBtnState()}onTabShow(){He.sGetUserInfoBtnVisiable.add(this.OnGetUserInfoBtnVisiable,this),Ae.platform.userInfo.isAuthed||this.getAuth()}onTabHide(){He.sGetUserInfoBtnVisiable.remove(this.OnGetUserInfoBtnVisiable,this)}OnClickPlayBtn(){Gr.menu.openTab(S.Home,Ce.ChooseHero)}OnClickSoundBtn(){v.instance.changeSoundState(),this.m_btnBar.m_soundBtn.SetSoundBtnState()}OnClickGroupBtn(){}async getAuth(){if(Ae.platform instanceof Be){let e=Ae.platform,t=await e.WXAuth();t&&(console.log("userInfo:",t),this.OnGetUserInfoBtnVisiable(!1))}}OnGetUserInfoBtnVisiable(e){this.m_state.setSelectedIndex(e?1:0)}}class vs extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","BigSoundBtn")}constructFromXML(e){super.constructFromXML(e),this.m_button=this.getController("button"),this.m_off=this.getChild("off"),this.m_on=this.getChild("on")}}vs.URL="ui://moe42ygrsqzy87",vs.DependPackages=["GameHome"];class Ts extends vs{SetSoundBtnState(){this.m_button.setSelectedIndex(v.instance.soundBtnIndex)}}class Gs extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","MainMenuBtnBar")}constructFromXML(e){super.constructFromXML(e),this.m_groupBtn=this.getChild("groupBtn"),this.m_soundBtn=this.getChild("soundBtn"),this.m_bigPlayBtn=this.getChild("bigPlayBtn")}}Gs.URL="ui://moe42ygrsqzy88",Gs.DependPackages=["GameHome"];class Is extends Gs{}class Ps extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","PanelChooseHero")}constructFromXML(e){super.constructFromXML(e),this.m_btnGroup=this.getChild("btnGroup"),this.m_heroGroup=this.getChild("heroGroup"),this.m_playBtn=this.getChild("playBtn"),this.m_plusBtn=this.getChild("plusBtn"),this.m_nextHeroBtn=this.getChild("nextHeroBtn"),this.m_prevHeroBtn=this.getChild("prevHeroBtn"),this.m_choiceHero=this.getChild("choiceHero")}}Ps.URL="ui://moe42ygrsqzy89",Ps.DependPackages=["GameHome"];class ks extends Ps{constructor(){super(...arguments),this.heroDataList=[]}onWindowInited(){this.m_playBtn.onClick(this,this.OnClickPlayBtn),this.m_plusBtn.onClick(this,this.OnClickPlusBtn),this.m_nextHeroBtn.onClick(this,this.OnClickNextHeroBtn),this.m_prevHeroBtn.onClick(this,this.OnClickPrevHeroBtn),this.heroDataList=Gr.moduleModel.hero.list,this.currentHeroData=Gr.moduleModel.hero.selectHero}onWindowShow(){}onTabShow(){this.SetData()}onTabHide(){}SetBtnState(e=!0){e?(this.m_plusBtn.visible=!1,this.m_playBtn.visible=!0):(this.m_playBtn.visible=!1,this.m_plusBtn.visible=Gr.moduleModel.hero.enableBuy())}SetData(){this.m_choiceHero.SetData(this.currentHeroData),this.SetBtnState(this.currentHeroData.isGeted),this.m_prevHeroBtn.visible=Gr.moduleModel.hero.hasPrev(),this.m_nextHeroBtn.visible=Gr.moduleModel.hero.hasNext()}OnClickNextHeroBtn(){this.currentHeroData=Gr.moduleModel.hero.getNextItem(),this.SetData(),this.m_choiceHero.SetFront()}OnClickPrevHeroBtn(){this.currentHeroData=Gr.moduleModel.hero.getPrevItem(),this.SetData(),this.m_choiceHero.SetFront()}OnClickPlayBtn(){Gr.moduleModel.hero.selectHero=this.currentHeroData,Gr.menu.openTab(S.Home,Ce.Shop)}OnClickPlusBtn(){Gr.moduleModel.hero.buy(),this.SetData()}}class Ms extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","MenuTopPanel")}constructFromXML(e){super.constructFromXML(e),this.m_coinText=this.getChild("coinText"),this.m_coinBar=this.getChild("coinBar"),this.m_prevBtn=this.getChild("prevBtn"),this.m_homeBtn=this.getChild("homeBtn")}}Ms.URL="ui://moe42ygrsqzy8b",Ms.DependPackages=["GameHome"];class bs extends Ms{get tabIndex(){var e=Ce.MenuMenu;return this.moduleWindow&&this.moduleWindow.menuParameter&&void 0!==this.moduleWindow.menuParameter.openIndex&&(e=this.moduleWindow.menuParameter.openIndex),e}onWindowInited(){Ke.sGold.add(this.OnGoldChange,this),this.m_homeBtn.onClick(this,this.OnClickHomeBtn),this.m_prevBtn.onClick(this,this.OnClickPrevBtn),this.moduleWindow.sOpenTab.add(this.OnOpenTab,this),this.OnOpenTab(Ce.MenuMenu)}onWindowDestory(){return Ke.sGold.remove(this.OnGoldChange,this),!1}onWindowShow(){this.OnGoldChange()}onTabShow(){this.OnGoldChange()}OnOpenTab(e){this.visible=e>Ce.MenuMenu,this.m_prevBtn.visible=e>Ce.ChooseHero&&e<Ce.Result,this.m_homeBtn.visible=e>Ce.MenuMenu&&e<Ce.Result}OnGoldChange(){this.m_coinText.text=Ke.gold+""}OnClickHomeBtn(){Gr.menu.openTab(S.Home,Ce.MenuMenu)}OnClickPrevBtn(){var e=Ce.MenuMenu;this.moduleWindow&&this.moduleWindow.menuParameter&&void 0!==this.moduleWindow.menuParameter.openIndex&&(e=this.moduleWindow.menuParameter.openIndex),e>0&&(e-=1),Gr.menu.openTab(S.Home,e)}}class Ds extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","ChoiceHero")}constructFromXML(e){super.constructFromXML(e),this.m_info=this.getChild("info"),this.m_card=this.getChild("card")}}Ds.URL="ui://moe42ygrsqzy8l",Ds.DependPackages=["GameHome"];class Fs extends Ds{onWindowInited(){this.m_card.m_infoBtn.onClick(this,this.ShowBack),this.m_info.m_backBtn.onClick(this,this.ShowFront)}SetData(e){this.heroData=e,this.m_card.SetData(e),this.m_info.SetData(e)}ShowBack(){G.TurnCard(this.m_card,this.m_info)}ShowFront(){G.TurnCard(this.m_info,this.m_card)}SetFront(){this.m_card.visible=!0,this.m_info.visible=!1,this.m_card.setScale(1,1)}}class Hs extends fgui.GLabel{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","HeroSprite")}constructFromXML(e){super.constructFromXML(e),this.m_sprite=this.getController("sprite"),this.m_icon=this.getChild("icon"),this.m_t0=this.getTransition("t0")}}Hs.URL="ui://moe42ygrsqzy8m",Hs.DependPackages=["GameHome"];class xs extends Hs{}class Bs extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","ChoiceHeroInfo")}constructFromXML(e){super.constructFromXML(e),this.m_hero=this.getController("hero"),this.m_bg=this.getChild("bg"),this.m_heroKey=this.getChild("heroKey"),this.m_heroBase=this.getChild("heroBase"),this.m_heroBomb=this.getChild("heroBomb"),this.m_gunHero=this.getChild("gunHero"),this.m_backBtn=this.getChild("backBtn")}}Bs.URL="ui://moe42ygrsqzy8p",Bs.DependPackages=["GameHome"];class As extends Bs{SetData(e){this.heroData=e,this.m_hero.setSelectedIndex(e.cardConfig.id%100-1)}}class Rs extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","HeroInfoKey")}constructFromXML(e){super.constructFromXML(e)}}Rs.URL="ui://moe42ygrsqzy8q",Rs.DependPackages=["GameHome"];class Us extends Rs{}class Os extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","HeroInfoBomb")}constructFromXML(e){super.constructFromXML(e)}}Os.URL="ui://moe42ygrsqzy8s",Os.DependPackages=["GameHome"];class Ns extends Os{}class Es extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","HeroInfoGun")}constructFromXML(e){super.constructFromXML(e)}}Es.URL="ui://moe42ygrsqzy8t",Es.DependPackages=["GameHome"];class Ws extends Es{}class Vs extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","ChoiceHeroCard")}constructFromXML(e){super.constructFromXML(e),this.m_bg=this.getChild("bg"),this.m_coinIcon=this.getChild("coinIcon"),this.m_coinText=this.getChild("coinText"),this.m_coinGroup=this.getChild("coinGroup"),this.m_heroSprite=this.getChild("heroSprite"),this.m_infoBtn=this.getChild("infoBtn"),this.m_lock=this.getChild("lock")}}Vs.URL="ui://moe42ygrsqzy8u",Vs.DependPackages=["GameHome"];class Xs extends Vs{SetData(e){this.heroData=e,this.m_heroSprite.m_sprite.setSelectedIndex(e.cardConfig.spriteIndex),this.m_coinText.text=e.cardConfig.coin+"",this.m_coinGroup.visible=this.m_lock.visible=!e.isGeted}}class qs extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","ShopCard")}constructFromXML(e){super.constructFromXML(e),this.m_back=this.getChild("back"),this.m_front=this.getChild("front")}}qs.URL="ui://moe42ygrsqzy8v",qs.DependPackages=["GameHome"];class Ks extends qs{constructFromXML(e){super.constructFromXML(e),this.m_front.m_infoBtn.onClick(this,this.ShowBack),this.m_back.m_backBtn.onClick(this,this.ShowFront)}setItemData(e){this.itemData=e,this.m_front.m_ShopType.setSelectedIndex(e.itemConfig.spriteIndex),this.m_back.m_ShopType.setSelectedIndex(e.itemConfig.spriteIndex),this.m_front.SetData(e),this.SetFront()}ShowBack(){G.TurnCard(this.m_front,this.m_back)}ShowFront(){G.TurnCard(this.m_back,this.m_front)}SetFront(){this.m_front.visible=!0,this.m_back.visible=!1,this.m_front.setScale(1,1)}}class js extends fgui.GLabel{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","ShopIcon")}constructFromXML(e){super.constructFromXML(e),this.m_icon=this.getChild("icon"),this.m_anim=this.getTransition("anim")}}js.URL="ui://moe42ygrsqzy8x",js.DependPackages=["GameHome"];class zs extends js{}class Ys extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","PanelShop")}constructFromXML(e){super.constructFromXML(e),this.m_list=this.getChild("list"),this.m_playBtn=this.getChild("playBtn")}}Ys.URL="ui://moe42ygrsqzy8y",Ys.DependPackages=["GameHome"];class $s extends Ys{constructor(){super(...arguments),this.itemDataList=[]}onWindowInited(){this.m_playBtn.onClick(this,this.OnClickPlayBtn),this.itemDataList=Gr.moduleModel.item.list;let e=this.m_list;e.setVirtual(),e.setVirtualAndLoop(),e.setItemRenderer(this.renderListItem,this)}renderListItem(e,t){let i=this.itemDataList[e];t.setItemData(i)}refreshList(){this.m_list.numItems=this.itemDataList.length,this.m_list.refreshVirtualList()}onWindowShow(){}onTabShow(){this.refreshList()}onTabHide(){}OnClickPlayBtn(){Gr.menu.openTab(S.Home,Ce.ChooseGameFormat)}}class Js extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","PanelChooseGameFormat")}constructFromXML(e){super.constructFromXML(e),this.m_formatGroup=this.getChild("formatGroup"),this.m_format3x3=this.getChild("format3x3"),this.m_format4x4=this.getChild("format4x4")}}Js.URL="ui://moe42ygrsqzy8z",Js.DependPackages=["GameHome"];class Qs extends Js{onWindowInited(){this.m_format4x4.isFourXFour=!0,this.m_format4x4.ColumnCount=4,this.m_format4x4.RowCount=4,this.m_format4x4.coin=700}onWindowShow(){}onTabShow(){}onTabHide(){}OnClickPlayBtn(){Gr.menu.open(S.War)}}class Zs extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","GameFormatCard")}constructFromXML(e){super.constructFromXML(e),this.m_format=this.getController("format"),this.m_bg=this.getChild("bg"),this.m_coinIcon=this.getChild("coinIcon"),this.m_coinText=this.getChild("coinText"),this.m_coinGroup=this.getChild("coinGroup"),this.m_lock=this.getChild("lock"),this.m_plusBtn=this.getChild("plusBtn"),this.m_playBtn=this.getChild("playBtn"),this.m_fxSmallRing=this.getChild("fxSmallRing"),this.m_icon=this.getChild("icon")}}Zs.URL="ui://moe42ygrsqzy91",Zs.DependPackages=["GameHome"];class ea extends Zs{constructor(){super(...arguments),this.isFourXFour=!1,this.ColumnCount=3,this.RowCount=3,this.coin=0}onWindowInited(){this.m_playBtn.onClick(this,this.OnClickPlayBtn),this.m_plusBtn.onClick(this,this.OnClickPlusBtn)}onWindowShow(){}onTabShow(){this.SetData()}onTabHide(){}SetData(){var e=!1;this.isFourXFour&&(e=!Ke.isFourXFour),this.SetBtnState(!e),this.m_lock.visible=e,this.m_coinText.text=this.coin+"",this.m_coinGroup.visible=e}SetBtnState(e=!0){e?(this.m_plusBtn.visible=!1,this.m_playBtn.visible=!0):(this.m_playBtn.visible=!1,this.m_plusBtn.visible=this.coin<=Ke.gold)}OnClickPlayBtn(){Ke.ColumnCount=this.ColumnCount,Ke.RowCount=this.RowCount,Gr.menu.open(S.War)}OnClickPlusBtn(){Ke.gold-=this.coin,Ke.isFourXFour=!0,this.SetData()}}class ta extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","FxShadow")}constructFromXML(e){super.constructFromXML(e),this.m_shadow=this.getChild("shadow"),this.m_anim=this.getTransition("anim")}}ta.URL="ui://moe42ygrsqzy93",ta.DependPackages=["GameHome"];class ia extends ta{}class sa extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","ShopCardFront")}constructFromXML(e){super.constructFromXML(e),this.m_ShopType=this.getController("ShopType"),this.m_bg=this.getChild("bg"),this.m_coinIcon=this.getChild("coinIcon"),this.m_coinText=this.getChild("coinText"),this.m_coinGroup=this.getChild("coinGroup"),this.m_hasFlag=this.getChild("hasFlag"),this.m_infoBtn=this.getChild("infoBtn"),this.m_fxSmallRing=this.getChild("fxSmallRing"),this.m_shopIcon=this.getChild("shopIcon"),this.m_plusBtn=this.getChild("plusBtn")}}sa.URL="ui://moe42ygrsqzy94",sa.DependPackages=["GameHome"];class aa extends sa{constructFromXML(e){super.constructFromXML(e),this.m_plusBtn.onClick(this,this.OnClosePlusBtn)}SetData(e){this.itemData=e,this.m_coinText.text=e.itemConfig.coin+"";var t=e.isGeted;this.m_hasFlag.visible=t,this.m_plusBtn.visible=!t&&e.enabelBuy}OnClosePlusBtn(){this.itemData.buy(),this.SetData(this.itemData)}}class na extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","ShopCardBack")}constructFromXML(e){super.constructFromXML(e),this.m_ShopType=this.getController("ShopType"),this.m_bg=this.getChild("bg"),this.m_backBtn=this.getChild("backBtn"),this.m_heart=this.getChild("heart"),this.m_luck=this.getChild("luck"),this.m_key=this.getChild("key"),this.m_horseshoe=this.getChild("horseshoe")}}na.URL="ui://moe42ygrsqzy95",na.DependPackages=["GameHome"];class ra extends na{}class oa extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","PanelPause")}constructFromXML(e){super.constructFromXML(e),this.m_btnGroup=this.getChild("btnGroup"),this.m_bg=this.getChild("bg"),this.m_logo=this.getChild("logo"),this.m_homeBtn=this.getChild("homeBtn"),this.m_soundBtn=this.getChild("soundBtn"),this.m_resumeBtn=this.getChild("resumeBtn")}}oa.URL="ui://moe42ygrsqzy9a",oa.DependPackages=["GameHome","GameLaunch"];class la extends oa{onWindowInited(){this.m_homeBtn.onClick(this,this.OnClickHomeBtn),this.m_soundBtn.onClick(this,this.OnClickSoundBtn),this.m_resumeBtn.onClick(this,this.OnClickResumeBtn)}Open(){this.visible=!0,kt.game.isPause=!0,this.m_soundBtn.SetSoundBtnState()}Close(){this.visible=!1,kt.game.isPause=!1}OnClickHomeBtn(){kt.setGameOver(),this.Close()}OnClickSoundBtn(){v.instance.changeSoundState(),this.m_soundBtn.SetSoundBtnState()}OnClickResumeBtn(){this.Close()}}class ca extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","PanelResult")}constructFromXML(e){super.constructFromXML(e),this.m_btnGroup=this.getChild("btnGroup"),this.m_resultBg=this.getChild("resultBg"),this.m_coinCurrent=this.getChild("coinCurrent"),this.m_coinMax=this.getChild("coinMax"),this.m_resultGroup=this.getChild("resultGroup"),this.m_homeBtn=this.getChild("homeBtn"),this.m_playBtn=this.getChild("playBtn"),this.m_shareBtn=this.getChild("shareBtn")}}ca.URL="ui://moe42ygrsqzy9d",ca.DependPackages=["GameHome"];class ha extends ca{constructor(){super(...arguments),this.shareCount=0}onWindowInited(){this.m_homeBtn.onClick(this,this.OnClickHome),this.m_playBtn.onClick(this,this.OnClickPlayBtn),this.m_shareBtn.onClick(this,this.OnClickShareBtn)}onTabShow(){this.SetData()}onTabHide(){}SetData(){this.m_coinCurrent.text=Ke.goldPerGame+"",this.m_coinMax.text=Ke.bestGoldPerGame+""}OnClickPlayBtn(){Gr.menu.openTab(S.Home,Ce.ChooseHero)}OnClickHome(){Gr.menu.openTab(S.Home,Ce.MenuMenu)}OnClickShareBtn(){if(console.log("PanelResult OnClickShareBtn"),!Engine.borwer.isWXGame)return;wx.setMessageToFriendQuery({shareMessageToFriendScene:2});var e="nickName="+Ae.platform.userInfo.nickName,t=this.m_resultGroup.localToGlobal(0,0);t.x=Math.floor(t.x),t.y=Math.floor(t.y);var i=Math.floor(this.m_resultGroup.width),s=Math.floor(this.m_resultGroup.height);console.log("x=",t.x,", y=",t.y,", w=",i,", h=,",s);let a=canvas.toTempFilePathSync({x:t.x,y:t.y,width:i,height:s,destWidth:i,destHeight:s});rt.OnShareResult(this.shareCount++),wx.aldShareAppMessage({title:`${Ae.platform.userInfo.nickName} 战绩`,imageUrl:a,query:e})}}class ua extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","MenuTopPanelWar")}constructFromXML(e){super.constructFromXML(e),this.m_iconCoin=this.getChild("iconCoin"),this.m_coinText=this.getChild("coinText"),this.m_countText=this.getChild("countText"),this.m_levelTex=this.getChild("levelTex"),this.m_levelKey=this.getChild("levelKey"),this.m_fxCoin=this.getChild("fxCoin"),this.m_puaseBtn=this.getChild("puaseBtn")}}ua.URL="ui://moe42ygrsqzy9e",ua.DependPackages=["GameHome"];class ma extends ua{PlayFxCoin(){Laya.timer.clear(this,this.SetCoinIconState),this.m_iconCoin.visible=!1,this.m_fxCoin.visible=!0,this.m_fxCoin.frame=0,this.m_fxCoin.playing=!0,Laya.timer.frameOnce(Math.ceil(25),this,this.SetCoinIconState)}SetCoinIconState(){this.m_iconCoin.visible=!0,this.m_fxCoin.visible=!1,this.m_fxCoin.playing=!1}}class ga extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","FxBarrel")}constructFromXML(e){super.constructFromXML(e)}}ga.URL="ui://moe42ygrsqzy9g",ga.DependPackages=["GameHome"];class da extends ga{}class pa extends fgui.GLabel{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","CardLifeHero")}constructFromXML(e){super.constructFromXML(e),this.m_title=this.getChild("title")}}pa.URL="ui://moe42ygrsqzy9u",pa.DependPackages=["GameHome"];class Sa extends pa{}class Ca extends fgui.GLabel{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","CardLifeWarriow")}constructFromXML(e){super.constructFromXML(e),this.m_title=this.getChild("title")}}Ca.URL="ui://moe42ygrsqzy9x",Ca.DependPackages=["GameHome"];class fa extends Ca{}class ya extends fgui.GLabel{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","CardLifePowerUp")}constructFromXML(e){super.constructFromXML(e),this.m_title=this.getChild("title")}}ya.URL="ui://moe42ygrsqzy9z",ya.DependPackages=["GameHome"];class wa extends ya{}class _a extends fgui.GLabel{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","CardShield")}constructFromXML(e){super.constructFromXML(e),this.m_level=this.getController("level"),this.m_icon=this.getChild("icon"),this.m_title=this.getChild("title")}}_a.URL="ui://moe42ygrsqzya0",_a.DependPackages=["GameHome"];class La extends _a{}class va extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","CardShopBar")}constructFromXML(e){super.constructFromXML(e),this.m_shopHeart=this.getChild("shopHeart"),this.m_shopHorseshoe=this.getChild("shopHorseshoe"),this.m_shopLock=this.getChild("shopLock"),this.m_shopKey=this.getChild("shopKey"),this.m_fxHeart=this.getChild("fxHeart")}}va.URL="ui://moe42ygrsqzya1",va.DependPackages=["GameHome"];class Ta extends va{constructor(){super(...arguments),this.shopList=[]}constructFromXML(e){super.constructFromXML(e),this.shopList.push(this.m_shopHeart),this.shopList.push(this.m_shopKey),this.shopList.push(this.m_shopLock),this.shopList.push(this.m_shopHorseshoe)}useLuck(){G.spriteHide(this.m_shopLock),this.m_shopHeart.visible=!1,Laya.timer.once(800,this,this.refresh)}useHeart(){this.m_fxHeart.x=this.m_shopHeart.x,this.m_fxHeart.y=this.m_shopHeart.y,this.m_fxHeart.visible=!0,this.m_fxHeart.frame=1,this.m_fxHeart.playing=!0,Laya.timer.once(2e3,this,this.refresh)}refresh(){this.m_shopHeart.visible=Ke.isHeart,this.m_shopKey.visible=Ke.isKey,this.m_shopLock.visible=Ke.isLuck,this.m_shopHorseshoe.visible=!1,this.m_fxHeart.visible=!1,this.m_fxHeart.frame=1,this.m_fxHeart.playing=!1;for(var e=0,t=0,i=this.shopList.length;t<i;t++){var s=this.shopList[t];s.visible&&(s.x=e+.5*s.width,e+=s.width+3)}}}class Ga extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","CardViewBack")}constructFromXML(e){super.constructFromXML(e),this.m_cardBack=this.getChild("cardBack")}}Ga.URL="ui://moe42ygrsqzya2",Ga.DependPackages=["GameHome"];class Ia extends Ga{}class Pa extends fgui.GLabel{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","SpriteEnemy")}constructFromXML(e){super.constructFromXML(e),this.m_sprite=this.getController("sprite"),this.m_icon=this.getChild("icon"),this.m_t0=this.getTransition("t0")}}Pa.URL="ui://moe42ygrsqzya4",Pa.DependPackages=["GameHome"];class ka extends Pa{}class Ma extends fgui.GLabel{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","SpriteBoss")}constructFromXML(e){super.constructFromXML(e),this.m_sprite=this.getController("sprite"),this.m_icon=this.getChild("icon"),this.m_t0=this.getTransition("t0")}}Ma.URL="ui://moe42ygrsqzya5",Ma.DependPackages=["GameHome"];class ba extends Ma{}class Da extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","Container")}constructFromXML(e){super.constructFromXML(e)}}Da.URL="ui://moe42ygrsqzya7",Da.DependPackages=["GameHome"];class Fa extends Da{}class Ha extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","PanelPopupChest")}constructFromXML(e){super.constructFromXML(e),this.m_bg=this.getChild("bg"),this.m_lock=this.getChild("lock")}}Ha.URL="ui://moe42ygrjak7ao",Ha.DependPackages=["GameHome","GameLaunch"],function(e){e[e.LoadBig=0]="LoadBig",e[e.LoadSmall=1]="LoadSmall",e[e.FixedBig=2]="FixedBig",e[e.FiexedSmall=3]="FiexedSmall"}(zi||(zi={}));class xa{constructor(){var e;this.configs=[{type:zi.LoadBig,angle:40,count:1},{type:zi.LoadSmall,angle:20,count:3},{type:zi.FixedBig,angle:50,count:2},{type:zi.FiexedSmall,angle:24,count:4}],this.beginAngle=-60,this.endAngle=240,this.items=[],this.loadItems=[],this.clickMaxCount=10,this.leftClickCount=10,this.isEnd=!1,this.initItems=[];var t=2,i=-45;for(var s of this.configs)for(var a=0;a<s.count;a++)e={id:t,index:t,groundIndex:a,config:s,angle:i,isOpen:!1},i+=s.angle,this.initItems.push(e),t++}init(){this.isEnd=!1,this.leftClickCount=this.clickMaxCount,this.items.length=0,this.loadItems.length=0,this.initItems=L.shuffle(this.initItems);for(var e=this.beginAngle,t=0,i=this.initItems.length;t<i;t++){var s=this.initItems[t];switch(e+=.5*s.config.angle,s.angle=this.angle360(e),s.isOpen=!1,e+=.5*s.config.angle,this.items.push(s),s.config.type){case zi.LoadBig:case zi.LoadSmall:this.loadItems.push(s)}}}getItemByAngle(e){for(var t of(e=this.angle360(e),this.items)){var i=t.angle-.5*t.config.angle,s=t.angle+.5*t.config.angle;if(i=this.angle360(i),s=this.angle360(s),console.log("angle=",e,"min=",i,"max=",s),e>=i&&e<=s)return t}}isOpendAll(){for(var e of this.loadItems)if(!e.isOpen)return!1;return!0}angle360(e){return 360==e?e:((e%=360)<0&&(e+=360),e)}static Angle360(e){return 360==e?e:((e%=360)<0&&(e+=360),e)}static AngleSub360(e,t){return e=this.Angle360(e),t=this.Angle360(t),Math.abs(e-t)}}class Ba extends Ha{constructor(){super(...arguments),this.lockData=new xa,this.sResult=new TypedSignal}constructFromXML(e){super.constructFromXML(e),window.panelPopupChest=this}Open(){this.lockData.init(),this.m_lock.Init(this),this.visible=!0,this.alpha=0,Laya.Tween.clearAll(this),Laya.Tween.to(this,{alpha:1},200)}Close(){this.m_lock.OnClose(),Laya.Tween.to(this,{alpha:0},200,null,Laya.Handler.create(this,()=>{this.visible=!1}))}}class Aa extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","CPLockLamp")}constructFromXML(e){super.constructFromXML(e),this.m_state=this.getController("state"),this.m_bg=this.getChild("bg"),this.m_lighting=this.getChild("lighting")}}Aa.URL="ui://moe42ygrjak7ar",Aa.DependPackages=["GameHome"];class Ra extends Aa{}class Ua extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","CPLockBridge")}constructFromXML(e){super.constructFromXML(e),this.m_state=this.getController("state")}}Ua.URL="ui://moe42ygrjak7as",Ua.DependPackages=["GameHome"];class Oa extends Ua{}class Na extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","CPLockSwitch")}constructFromXML(e){super.constructFromXML(e),this.m_button=this.getController("button"),this.m_arrow=this.getChild("arrow")}}Na.URL="ui://moe42ygrjak7at",Na.DependPackages=["GameHome"];class Ea extends Na{constructor(){super(...arguments),this.speed=.05,this.elasticList=[Laya.Ease.linearInOut],this.isRuning=!1}Init(e){this.lockData=e,this.m_arrow.rotation=e.beginAngle}Run(){this.isRuning||(this.isRuning=!0,Laya.Tween.clearAll(this.m_arrow),this.ArrowTweenToMax())}Stop(){console.log("Stop"),this.isRuning=!1,Laya.Tween.clearAll(this.m_arrow)}ArrowTweenToMax(){console.log("ArrowTweenToMax",this.lockData.endAngle),Laya.Tween.clearAll(this.m_arrow);var e=this.getDuration(this.lockData.endAngle);console.log(xa.AngleSub360(this.m_arrow.rotation,this.lockData.endAngle),e);Laya.Tween.to(this.m_arrow,{rotation:this.lockData.endAngle},e,Laya.Ease.linearInOut,Laya.Handler.create(this,this.ArrowTweenToMin),0,!0,!0)}ArrowTweenToMin(){console.log("ArrowTweenToMin",this.lockData.beginAngle),Laya.Tween.clearAll(this.m_arrow);var e=this.getDuration(this.lockData.beginAngle);console.log(xa.AngleSub360(this.m_arrow.rotation,this.lockData.beginAngle),e);Laya.Tween.to(this.m_arrow,{rotation:this.lockData.beginAngle},e,Laya.Ease.linearInOut,Laya.Handler.create(this,this.ArrowTweenToMax),0,!0,!0)}getDuration(e){var t=Math.ceil(xa.AngleSub360(this.m_arrow.rotation,e)/this.speed);return t?t>3e3&&(t=3e3):t=200,t}}class Wa extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","CPLockArrow")}constructFromXML(e){super.constructFromXML(e),this.m_clickSuccess=this.getTransition("clickSuccess"),this.m_clickFail=this.getTransition("clickFail")}}Wa.URL="ui://moe42ygrjak7au",Wa.DependPackages=["GameHome"];class Va extends Wa{}class Xa extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","CPLockLampGroup")}constructFromXML(e){super.constructFromXML(e),this.m_lamp_1=this.getChild("lamp_1"),this.m_lamp_2=this.getChild("lamp_2"),this.m_lamp_3=this.getChild("lamp_3"),this.m_lamp_4=this.getChild("lamp_4")}}Xa.URL="ui://moe42ygrjak7av",Xa.DependPackages=["GameHome"];class qa extends Xa{Init(e){this.lockData=e;for(var t=e.loadItems,i=0,s=t.length;i<s;i++){var a=t[i],n=this[`m_lamp_${i+1}`];a.itemViewLighting=n,n&&n.m_state.setSelectedIndex(a.isOpen?1:0)}}setItemState(e){e.itemViewLighting&&e.itemViewLighting.m_state.setSelectedIndex(e.isOpen?1:0)}}class Ka extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","CPLockDialLoadBig")}constructFromXML(e){super.constructFromXML(e),this.m_state=this.getController("state")}}Ka.URL="ui://moe42ygrjak7aw",Ka.DependPackages=["GameHome"];class ja extends Ka{}class za extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","CPLockDialLoadSmall")}constructFromXML(e){super.constructFromXML(e),this.m_state=this.getController("state")}}za.URL="ui://moe42ygrjak7ax",za.DependPackages=["GameHome"];class Ya extends za{}class $a extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","CPLockDialFixedSmall")}constructFromXML(e){super.constructFromXML(e)}}$a.URL="ui://moe42ygrjak7ay",$a.DependPackages=["GameHome"];class Ja extends $a{}class Qa extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","CPLockDialFixedBig")}constructFromXML(e){super.constructFromXML(e)}}Qa.URL="ui://moe42ygrjak7az",Qa.DependPackages=["GameHome"];class Za extends Qa{}class en extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","CPLockDial")}constructFromXML(e){super.constructFromXML(e),this.m_fixedBig0=this.getChild("fixedBig0"),this.m_fixedBig1=this.getChild("fixedBig1"),this.m_fixedSmall0=this.getChild("fixedSmall0"),this.m_fixedSmall1=this.getChild("fixedSmall1"),this.m_fixedSmall2=this.getChild("fixedSmall2"),this.m_fixedSmall3=this.getChild("fixedSmall3"),this.m_loadBig0=this.getChild("loadBig0"),this.m_loadSmall0=this.getChild("loadSmall0"),this.m_loadSmall1=this.getChild("loadSmall1"),this.m_loadSmall2=this.getChild("loadSmall2")}}en.URL="ui://moe42ygrjak7b0",en.DependPackages=["GameHome"];class tn extends en{Init(e){this.lockData=e;var t=e.items;for(var i of t){var s=this.getItemView(i);if(s)switch(s.rotation=i.angle,s.itemData=i,i.itemView=s,i.config.type){case zi.LoadBig:case zi.LoadSmall:var a=s;a.m_state?a.m_state.setSelectedIndex(i.isOpen?1:0):console.error(i.config.type,a)}else console.error("CPLockDial Init itemView = null",i)}}getItemView(e){switch(e.config.type){case zi.LoadBig:return this[`m_loadBig${e.groundIndex}`];case zi.LoadSmall:return this[`m_loadSmall${e.groundIndex}`];case zi.FixedBig:return this[`m_fixedBig${e.groundIndex}`];case zi.FiexedSmall:return this[`m_fixedSmall${e.groundIndex}`]}}setItemState(e){if(e.itemView)switch(e.config.type){case zi.LoadBig:case zi.LoadSmall:e.itemView.m_state.setSelectedIndex(e.isOpen?1:0)}}}class sn extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","CPLock")}constructFromXML(e){super.constructFromXML(e),this.m_bg=this.getChild("bg"),this.m_dial=this.getChild("dial"),this.m_switch=this.getChild("switch"),this.m_bridge=this.getChild("bridge"),this.m_lampGroup=this.getChild("lampGroup")}}sn.URL="ui://moe42ygrjak7b1",sn.DependPackages=["GameHome"];class an extends sn{Init(e){this.panel=e;var t=this.lockData=e.lockData;this.m_dial.Init(t),this.m_switch.Init(t),this.m_lampGroup.Init(t),this.m_bridge.m_state.setSelectedIndex(0),this.Run()}Run(){this.panel.on(Laya.Event.MOUSE_DOWN,this,this.onClickHandler),this.m_switch.Run()}onClickHandler(){this.panel.off(Laya.Event.MOUSE_DOWN,this,this.onClickHandler),this.m_switch.Stop();var e=this.m_switch.m_arrow.rotation,t=this.lockData.getItemByAngle(e);if(console.log(e,t),t)if(t.isOpen||this.lockData.isEnd)this.lockData.leftClickCount--,this.m_switch.m_arrow.m_clickFail.play();else switch(t.config.type){case zi.LoadBig:case zi.LoadSmall:t.isOpen=!0,this.m_dial.setItemState(t),this.m_lampGroup.setItemState(t),this.m_switch.m_arrow.m_clickSuccess.play();break;default:this.lockData.leftClickCount--,this.m_switch.m_arrow.m_clickFail.play()}else this.lockData.leftClickCount--,this.m_switch.m_arrow.m_clickSuccess.play();(v.instance.playSound(T.PickLockNeutral),this.lockData.isEnd)||(this.lockData.isOpendAll()?(this.lockData.isEnd=!0,this.OnSuccess()):this.lockData.leftClickCount<=0&&(this.lockData.isEnd=!0,this.OnFail()));Laya.timer.once(500,this,this.Run)}OnSuccess(){this.m_bridge.m_state.setSelectedIndex(1),v.instance.playSound(T.PickLockSuccess),Laya.timer.once(500,this,this.SetResult,[!0])}OnFail(){v.instance.playSound(T.PickLockFail);for(var e=0;e<4;e++){var t=mt.PoolGet();t.setXY(L.getRandomIntInclusive(-120,120),L.getRandomIntInclusive(-280,120)),t.DelayPalay(L.getRandomIntInclusive(0,200),this)}Laya.timer.once(500,this,this.SetResult,[!0])}SetResult(e=!0){this.panel.sResult.dispatch(e),this.panel.Close()}OnClose(){Laya.timer.clearAll(this),this.m_switch.Stop()}}class nn extends fgui.GButton{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","GetUserInfoBtn")}constructFromXML(e){super.constructFromXML(e),this.m_title=this.getChild("title"),this.m_icon=this.getChild("icon")}}nn.URL="ui://moe42ygrgvpab9",nn.DependPackages=["GameHome"];class rn extends nn{}class on extends fgui.GButton{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","ShareBtn")}constructFromXML(e){super.constructFromXML(e),this.m_icon=this.getController("icon"),this.m_icon=this.getChild("icon")}}on.URL="ui://moe42ygrp1whbd",on.DependPackages=["GameHome"];class ln extends on{}class cn extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","ShareBtnBar")}constructFromXML(e){super.constructFromXML(e),this.m_wxBtn=this.getChild("wxBtn")}}cn.URL="ui://moe42ygrp1whbe",cn.DependPackages=["GameHome"];class hn extends cn{constructor(){super(...arguments),this._shareCount=0}constructFromXML(e){super.constructFromXML(e),this.m_wxBtn.onClick(this,this.OnClickWxBtn),this.InitWXShare()}async OnClickWxBtn(){console.log("ShareBtnBar OnClickWxBtn"),this.getShareImage(),Engine.borwer.isWXGame&&(rt.OnShareBtn(this.ShareCount),wx.aldShareAppMessage(this.getShareObj()),this.DelayShareGet())}getShareObj(){return{title:VersionConfig.Title,query:this.getShareQuery(),imageUrl:this.getShareImage()}}getShareQuery(){var e=Gr.menu.getLastOpenMenuId(),t=Gr.menu.getMenuCtl(e);return"nickName="+Ae.platform.userInfo.nickName+"&menuId="+e+"&tabIndex="+(t&&t.openParametar?t.openParametar.openIndex:0)}getShareImage(){if(Engine.borwer.isWXGame&&Gr.menu.isOpened(S.War)&&kt.game&&kt.game.container){rt.OnShareWar(this.ShareCount);var e=kt.game.container,t=e.localToGlobal(-.5*e.width,-.5*e.height);t.x=Math.floor(t.x),t.y=Math.floor(t.y);var i=Math.floor(.5*e.width),s=Math.floor(.5*e.height),a=e.localToGlobal(i,s);return i=a.x-t.x,s=a.y-t.y,canvas.toTempFilePathSync({x:t.x,y:t.y,width:i,height:s,destWidth:i,destHeight:s})}return VersionConfig.ShareImgUrl}InitWXShare(){hn.isInited||(hn.isInited=!0,window.wx&&(wx.showShareMenu(),wx.aldOnShareAppMessage(()=>(rt.OnShare(this.ShareCount),this.DelayShareGet(),this.getShareObj()))))}get ShareCount(){var e=Gr.localStorage.getInt("ShareDate",!1),t=(new Date).getDate();return this._shareCount=t!=e?0:Gr.localStorage.getInt("ShareCount2",!1),this._shareCount}set ShareCount(e){var t=Gr.localStorage.getInt("ShareDate",!1),i=(new Date).getDate();i!=t&&(e=1,Gr.localStorage.setInt("ShareDate",i)),this._shareCount=e,Gr.localStorage.setInt("ShareCount2",e,!1)}DelayShareGet(){Laya.timer.once(1e3,this,this.OnShareGet)}OnShareGet(){this.ShareCount++,this.ShareCount<=10&&(Ke.gold+=100,Gr.system.toastText(`今日分享 ${this.ShareCount}/10, 获得奖励金币+100`))}}hn.isInited=!1;class un extends fgui.GButton{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","ShareIconBtn")}constructFromXML(e){super.constructFromXML(e),this.m_title=this.getChild("title"),this.m_icon=this.getChild("icon")}}un.URL="ui://moe42ygrp1whbg",un.DependPackages=["GameHome"];class mn extends un{}class gn{static bindAll(){let e=fgui.UIObjectFactory.setPackageItemExtension;e(Ls.URL,Ls),e(Ts.URL,Ts),e(Is.URL,Is),e(ks.URL,ks),e(Ne.URL,Ne),e(bs.URL,bs),e(Fs.URL,Fs),e(xs.URL,xs),e(As.URL,As),e(Us.URL,Us),e(Ns.URL,Ns),e(Ws.URL,Ws),e(Xs.URL,Xs),e(Ks.URL,Ks),e(M.URL,M),e(zs.URL,zs),e($s.URL,$s),e(Qs.URL,Qs),e(ea.URL,ea),e(ia.URL,ia),e(aa.URL,aa),e(ra.URL,ra),e(la.URL,la),e(Mt.URL,Mt),e(ha.URL,ha),e(ma.URL,ma),e(da.URL,da),e(Y.URL,Y),e(Sa.URL,Sa),e(I.URL,I),e(z.URL,z),e(fa.URL,fa),e(x.URL,x),e(wa.URL,wa),e(La.URL,La),e(Ta.URL,Ta),e(Ia.URL,Ia),e(X.URL,X),e(ka.URL,ka),e(ba.URL,ba),e(W.URL,W),e(Fa.URL,Fa),e(u.URL,u),e(K.URL,K),e(b.URL,b),e(F.URL,F),e(U.URL,U),e(A.URL,A),e(N.URL,N),e(gt.URL,gt),e(ht.URL,ht),e(mt.URL,mt),e($e.URL,$e),e(Ye.URL,Ye),e(pt.URL,pt),e(Ba.URL,Ba),e(Ra.URL,Ra),e(Oa.URL,Oa),e(Ea.URL,Ea),e(Va.URL,Va),e(qa.URL,qa),e(ja.URL,ja),e(Ya.URL,Ya),e(Ja.URL,Ja),e(Za.URL,Za),e(tn.URL,tn),e(an.URL,an),e(rn.URL,rn),e(ln.URL,ln),e(hn.URL,hn),e(mn.URL,mn)}}class dn extends fgui.GLabel{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameLaunch","ScreenBG")}constructFromXML(e){super.constructFromXML(e),this.m_icon=this.getChild("icon")}}dn.URL="ui://47qsdr42f84s1",dn.DependPackages=["GameLaunch"];class pn extends dn{onWindowShow(){this.setScreenSize(),window.screenBG=this,Engine.stage.sResize.add(this.setScreenSize,this)}onWindowHide(){Engine.stage.sResize.remove(this.setScreenSize,this)}setScreenSize(){let e=Gr.screenSetting.screenScaleShrinkMax;this.m_icon.scaleX=e,this.m_icon.scaleY=e}}class Sn extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameLaunch","DialogCloseWindow")}constructFromXML(e){super.constructFromXML(e),this.m_closeButton=this.getChild("closeButton")}}Sn.URL="ui://47qsdr42f84sg",Sn.DependPackages=["GameLaunch"];class Cn extends Sn{}class fn extends fgui.GButton{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameLaunch","GMButton")}constructFromXML(e){super.constructFromXML(e)}}fn.URL="ui://47qsdr42uohx13",fn.DependPackages=["GameLaunch"];class yn extends fn{}class wn extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameLaunch","BGModel")}constructFromXML(e){super.constructFromXML(e)}}wn.URL="ui://47qsdr42ae8aw2h",wn.DependPackages=["GameLaunch"];class _n extends wn{}class Ln extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameLaunch","GlobalModalWaiting")}constructFromXML(e){super.constructFromXML(e),this.m_circle=this.getChild("circle"),this.m_rotation=this.getTransition("rotation")}}Ln.URL="ui://47qsdr42x6asw2i",Ln.DependPackages=["GameLaunch"];class vn extends Ln{}class Tn extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameLaunch","WindowModalWaiting")}constructFromXML(e){super.constructFromXML(e),this.m_circle=this.getChild("circle"),this.m_rotation=this.getTransition("rotation")}}Tn.URL="ui://47qsdr42x6asw2j",Tn.DependPackages=["GameLaunch"];class Gn extends Tn{}class In extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameLaunch","LogoView")}constructFromXML(e){super.constructFromXML(e),this.m_t0=this.getTransition("t0")}}In.URL="ui://47qsdr42tnlhw2t",In.DependPackages=["GameLaunch"];class Pn extends In{}class kn{static bindAll(){let e=fgui.UIObjectFactory.setPackageItemExtension;e(us.URL,us),e(pn.URL,pn),e(Cn.URL,Cn),e(ts.URL,ts),e(ss.URL,ss),e(ji.URL,ji),e(yn.URL,yn),e(_n.URL,_n),e(vn.URL,vn),e(Gn.URL,Gn),e(ds.URL,ds),e(Pn.URL,Pn)}}class Mn extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("ModuleLogin","LoginPanel")}constructFromXML(e){super.constructFromXML(e),this.m_type=this.getController("type"),this.m_accountInput=this.getChild("accountInput"),this.m_passwordInput=this.getChild("passwordInput"),this.m_btn_login=this.getChild("btn_login"),this.m_btn_offLine=this.getChild("btn_offLine"),this.m_btn_randomLogin=this.getChild("btn_randomLogin"),this.m_btn_testWar=this.getChild("btn_testWar")}}Mn.URL="ui://4698ugpknz0c1g",Mn.DependPackages=["ModuleLogin"];class bn extends Mn{onWindowInited(){console.log("LoginPanel onWindowInited"),this.m_type.selectedIndex=1,this.m_btn_randomLogin.visible=VersionConfig.IsDebugVer,this.m_btn_testWar.visible=VersionConfig.IsDebugVer,window.userAccount=this.m_accountInput.m_txt_account,window.userPassWorld=this.m_passwordInput.m_txt_password,window.loginPanel=this}createDebugButton(e,t,i,s){var a=fgui.UIPackage.createObjectFromURL(this.m_btn_login.resourceURL);a.text=e,a.width=150,a.height=80,a.x=200+200*i,a.y=100+100*s,a.onClick(this,t),fgui.GRoot.inst.addChild(a)}get account(){return this.m_accountInput.m_txt_account.text.trim()}set account(e){this.m_accountInput.m_txt_account.text=e}get password(){return this.m_passwordInput.m_txt_password.text.trim()}set password(e){this.m_passwordInput.m_txt_password.text=e}onWindowShow(){if(console.log("LoginPanel onWindowShow"),isNullOrEmpty(this.account)&&(this.account=Gr.localStorage.username,Engine.borwer.isBrowser&&VersionConfig.IsDebugVer)){let e=sessionStorage.getItem("username");this.account=e||""}if(isNullOrEmpty(this.account)&&(this.account=Ae.RandName(2,7)),isNullOrEmpty(this.password)&&(this.password=Gr.localStorage.password,Engine.borwer.isBrowser&&VersionConfig.IsDebugVer)){let e=sessionStorage.getItem("password");this.password=e||""}Engine.borwer.isWXGame}async getAuth(){if(Ae.platform instanceof Be){let e=Ae.platform;if(await e.WXGetSdkAuthSetting())this.setModel(!1);else{this.setModel(!0),await e.WXAuth()&&this.setModel(!1)}}}setModel(e){this.m_btn_login.title=e?te.Auth:te.Login}}class Dn extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("ModuleLogin","AccountInput")}constructFromXML(e){super.constructFromXML(e),this.m_txt_account=this.getChild("txt_account"),this.m_accountComboBox=this.getChild("accountComboBox")}}Dn.URL="ui://4698ugpknz0c1h",Dn.DependPackages=["ModuleLogin"];class Fn extends Dn{}class Hn extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("ModuleLogin","AccountComboBox")}constructFromXML(e){super.constructFromXML(e),this.m_c1=this.getController("c1")}}Hn.URL="ui://4698ugpknz0c1i",Hn.DependPackages=["ModuleLogin"];class xn extends Hn{}class Bn extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("ModuleLogin","passwordInput")}constructFromXML(e){super.constructFromXML(e),this.m_txt_password=this.getChild("txt_password")}}Bn.URL="ui://4698ugpknz0c1n",Bn.DependPackages=["ModuleLogin"];class An extends Bn{}class Rn extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("ModuleLogin","BulletinPanel")}constructFromXML(e){super.constructFromXML(e),this.m_Type=this.getController("Type"),this.m_listTest=this.getChild("listTest"),this.m_listUpdate=this.getChild("listUpdate"),this.m_bg=this.getChild("bg")}}Rn.URL="ui://4698ugpkrlfx2m",Rn.DependPackages=["ModuleLogin"];class Un extends Rn{}class On extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("ModuleLogin","WxPanel")}constructFromXML(e){super.constructFromXML(e),this.m_btn_login=this.getChild("btn_login")}}On.URL="ui://4698ugpkneo62p",On.DependPackages=["ModuleLogin"];class Nn extends On{}class En extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("ModuleLogin","AccountShow")}constructFromXML(e){super.constructFromXML(e),this.m_txt_account=this.getChild("txt_account")}}En.URL="ui://4698ugpkneo62q",En.DependPackages=["ModuleLogin"];class Wn extends En{}class Vn extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("ModuleLogin","ServerPanel")}constructFromXML(e){super.constructFromXML(e),this.m_Server=this.getController("Server"),this.m_listMenu=this.getChild("listMenu"),this.m_listServer=this.getChild("listServer"),this.m_btnChange=this.getChild("btnChange"),this.m_btnStart=this.getChild("btnStart"),this.m_bg=this.getChild("bg")}}Vn.URL="ui://4698ugpklm612r",Vn.DependPackages=["ModuleLogin"];class Xn extends Vn{constructor(){super(...arguments),this.serverList=[],this.openServer=[],this.roles=new Dictionary}onWindowInited(){}onWindowShow(){this.m_listMenu.setItemRenderer(this.MenuRender,this),this.m_listMenu.on(fgui.Events.CLICK_ITEM,this,this.MenuSelect),this.m_listServer.setItemRenderer(this.ServerRender,this),this.m_listServer.on(fgui.Events.CLICK_ITEM,this,this.ServerSelect)}onWindowHide(){this.m_listMenu.itemRenderer.clear(),this.m_listMenu.off(fgui.Events.CLICK_ITEM,this,this.MenuSelect),this.m_listServer.itemRenderer.clear(),this.m_listServer.off(fgui.Events.CLICK_ITEM,this,this.ServerSelect),this.Reset()}MenuRender(e,t){}MenuSelect(e){}ServerRender(e,t){t.RenderItem(this.serverList[e])}ServerSelect(e){let t=e.DataSource;this.lastServer=t,this.m_btnChange.RenderItem(t),this.m_Server.selectedIndex=0}Reset(){this.serverList=[],this.openServer=[],this.roles.clear()}UpdateServer(){let e=this.serverList;this.m_listServer.numItems=e.length,this.m_listMenu.selectedIndex=0;let t=this.openServer;if(!e.length)return;let i,s=Gr.localStorage.server;(i=s?this.GetServer(s,!0):t.length?t[t.length-1]:e[e.length-1])&&(this.lastServer=i,this.m_btnChange.RenderItem(i))}Open(e){if(this.serverList=e,this.roles.count)for(let t=0,i=e.length;t<i;t++){let i=e[t];this.roles.hasKey(i.id)&&this.openServer.push(i)}this.UpdateServer()}SetRoles(e){if(e&&e.length)for(let t=0,i=e.length;t<i;t++){let i=e[t];this.roles.add(i.server,i)}}GetRole(e){return this.roles.getValue(e)}GetServer(e,t){let i=t?this.openServer:this.serverList;for(let t=0,s=i.length;t<s;t++)if(i[t].id=e)return i[t];return this.GetServer(e)}}class qn extends fgui.GButton{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("ModuleLogin","ServerItem")}constructFromXML(e){super.constructFromXML(e),this.m_button=this.getController("button"),this.m_State=this.getController("State"),this.m_Type=this.getController("Type"),this.m_View=this.getController("View"),this.m_labServer=this.getChild("labServer"),this.m_labLevel=this.getChild("labLevel")}}qn.URL="ui://4698ugpklm612v",qn.DependPackages=["ModuleLogin"];class Kn extends qn{RenderItem(e){this.DataSource=e,this.m_labServer.text=e.name,this.m_labLevel.text=""}}class jn extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("ModuleLogin","CdkPanel")}constructFromXML(e){super.constructFromXML(e),this.m_cdkInput=this.getChild("cdkInput"),this.m_btn_cdk=this.getChild("btn_cdk")}}jn.URL="ui://4698ugpkipa82w",jn.DependPackages=["ModuleLogin"];class zn extends jn{get cdk(){return this.m_cdkInput.m_txt_cdk.text.trim()}set cdk(e){this.m_cdkInput.m_txt_cdk.text=e}}class Yn extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("ModuleLogin","CdkInput")}constructFromXML(e){super.constructFromXML(e),this.m_txt_cdk=this.getChild("txt_cdk"),this.m_accountComboBox=this.getChild("accountComboBox")}}Yn.URL="ui://4698ugpkipa82x",Yn.DependPackages=["ModuleLogin"];class $n extends Yn{}class Jn extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("ModuleLogin","CheckIDPanel")}constructFromXML(e){super.constructFromXML(e),this.m_Type=this.getController("Type"),this.m_labName=this.getChild("labName"),this.m_labID=this.getChild("labID"),this.m_btnClose=this.getChild("btnClose"),this.m_btnMake=this.getChild("btnMake")}}Jn.URL="ui://4698ugpkqdfe1c",Jn.DependPackages=["ModuleLogin"];class Qn extends Jn{}class Zn extends fgui.GButton{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("ModuleLogin","CommonDialogBg")}constructFromXML(e){super.constructFromXML(e),this.m_icon=this.getChild("icon"),this.m_btn_Close=this.getChild("btn_Close")}}Zn.URL="ui://4698ugpkje283k",Zn.DependPackages=["ModuleLogin"];class er extends Zn{}class tr extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("ModuleLogin","BulletinItem")}constructFromXML(e){super.constructFromXML(e),this.m_labtitle=this.getChild("labtitle"),this.m_labItem=this.getChild("labItem")}}tr.URL="ui://4698ugpkje283x",tr.DependPackages=["ModuleLogin"];class ir extends tr{}class sr{static bindAll(){let e=fgui.UIObjectFactory.setPackageItemExtension;e(Re.URL,Re),e(bn.URL,bn),e(Fn.URL,Fn),e(xn.URL,xn),e(An.URL,An),e(Un.URL,Un),e(Nn.URL,Nn),e(Wn.URL,Wn),e(Xn.URL,Xn),e(Kn.URL,Kn),e(zn.URL,zn),e($n.URL,$n),e(Qn.URL,Qn),e(er.URL,er),e(ir.URL,ir)}}class ar{static bindAll(){fgui.UIObjectFactory.setPackageItemExtension}}class nr{static fguiBinderAll(){gn.bindAll(),kn.bindAll(),sr.bindAll(),ar.bindAll()}}class rr{static get json(){return this._netConfig}static async GetNetConfig(){return rr._netConfig&&0==rr._netConfig.error?new Promise(e=>{e(rr._netConfig)}):new Promise(e=>{net.auth.config((t,i)=>{rr._netConfig=i,e(rr._netConfig)})})}static async GetErrorStr(e){return rr._netConfig?new Promise(t=>{t(rr._netConfig.ErrStr[e.toString()])}):(await rr.GetNetConfig(),new Promise(t=>{t(rr._netConfig.ErrStr[e.toString()])}))}}rr.FIRST_SCENE="test",rr.GAME_WIDTH=1334,rr.GAME_HEIGHT=750,rr.GROUP_ID=0,rr.WXAppID="wxedab64fed19eb5b4",rr.SHARE_IMG_URL="https://thkdev.123u.com/game/makemore/",rr.GO_URL="http://192.168.2.80:5000",rr.shouldShowGuide=!0;class or{static async Time(e){return new Promise(t=>{Engine.timer.once(e,this,()=>{t()})})}static async Frame(e){return new Promise(t=>{Engine.timer.frameOnce(e,this,()=>{t()})})}}class lr{constructor(){}install(e){this.installAsync(e)}async installAsync(e){VersionConfig&&VersionConfig.Init(),Gr.init(),re.install(),Dt.install(),Gr.version.init(),Engine.borwer.isWXGame?(await this.initFguiSetting(),Gr.loader.install(),await this.loadVersionAsync(),Gr.localStorage.setString("__basePath__",Laya.URL.basePath,!0)):(await this.loadVersionAsync(),Gr.localStorage.setString("__basePath__",Laya.URL.basePath,!0),await this.initFguiSetting(),Gr.loader.install()),Gr.loader.open(C.Launch),Gr.loaderSettingHandler.onBegin(),await this.clearWXFileCache(),await this.initConfig(),await this.initLangConfig(),Gr.moduleModel.install(),Gr.loaderSettingHandler.onEnd(),Gr.sound.install(),window.launcherInitBG&&window.launcherInitBG.removeSelf(),Ke.load(),e?e():Gr.menu.openTab(S.Home,Ce.MenuMenu)}loadVersion(){Laya.ResourceVersion.enable("version.json",Laya.Handler.create(this,this.onVersionLoaded),Laya.ResourceVersion.FILENAME_VERSION)}onVersionLoaded(){}async loadVersionAsync(){return new Promise(e=>{Laya.ResourceVersion.enable("version.json?t="+Laya.timer.currTimer,Laya.Handler.create(this,()=>{if(Laya.ResourceVersion.manifest){if(Laya.ResourceVersion.manifest.__ResVersion__){let e=Laya.ResourceVersion.manifest.__ResVersion__;Gr.version.localResVersionData.setVersionTxt(e),Gr.version.localResVersion=e}if(!VersionConfig.IsUseZip){let e=Laya.ResourceVersion.manifest,s=[];for(var t in e)s.push(t);for(var i of s)e[i.toLowerCase()]=e[i]}Laya.MiniAdpter&&(Laya.MiniAdpter.AutoCacheDownFile=!1)}this.checkWXFileCache(),e()}),Laya.ResourceVersion.FILENAME_VERSION)})}async checkWXFileCache(){if(Engine.borwer.isWXGame){let e=Gr.localStorage.getString("__basePath__",!0);e!=Laya.URL.basePath&&(console.log(`资源根目录不一样: preBasePath=${e}, Laya.URL.basePath=${Laya.URL.basePath}`),Laya.MiniFileMgr.onSetVersion(e,Laya.URL.basePath))}}async clearWXFileCache(){let e=VersionConfig.VersionCacheCode;if(Engine.borwer.isWXGame){let t=Gr.localStorage.getInt("__verIsNeedClear__",!0);t!=e&&(console.log("清理缓存 v=",t,"vv=",e),Gr.loaderSettingHandler.setTip("清理缓存中..."),await or.Frame(5),Laya.MiniFileManager.RemoveAll())}Gr.localStorage.setInt("__verIsNeedClear__",e,!0)}async initFguiSetting(){Gr.guiRes.install(),fgui.UIConfig.packageFileExtension=ri.packageFileExtension,fgui.UIObjectFactory.setLoaderExtension(fi),nr.fguiBinderAll(),fgui.UIConfig.buttonSound="ui://moe42ygrsqzy7p",fgui.UIConfig.defaultFont="_sans";let e=await Gr.asset.loadFguiByPackagenameAsync(ue.GameLaunch);ri.addPackage(e.packagePath),fgui.UIConfig.globalModalWaiting=fgui.UIPackage.getItemURL(e.packageName,"GlobalModalWaiting"),fgui.UIConfig.windowModalWaiting=fgui.UIPackage.getItemURL(e.packageName,"WindowModalWaiting")}async initConfig(){Gr.config.configLoader=Gr.asset,Gr.config.initList(),Gr.config.sLoadProgress.add(Gr.loaderSettingHandler.onLoadedConfig,Gr.loaderSettingHandler),await Gr.config.loadAllAsync(),Gr.config.sLoadProgress.remove(Gr.loaderSettingHandler.onLoadedConfig,Gr.loaderSettingHandler)}async initLangConfig(){Gr.lang.current.configLoader=Gr.asset,Gr.lang.current.initList(),Gr.lang.isUseLang&&(Gr.lang.current.sLoadProgress.add(Gr.loaderSettingHandler.onLoadedLangConfig,Gr.loaderSettingHandler),await Gr.lang.current.loadAllAsync(),Gr.lang.current.sLoadProgress.remove(Gr.loaderSettingHandler.onLoadedLangConfig,Gr.loaderSettingHandler))}async installServerList(){VersionConfig.IsDebugVer?(await Gr.channel.requestServerListAsync(),net.config.url=Gr.channel.serverItem.main):(await Gr.channel.requestChannelServerAsync(),net.config.url=Gr.channel.serverItem.main),net.logic.onError.on(this.onNetError,this)}async onNetError(e){console.log("onNetError "+e);let t=await rr.GetErrorStr(e);console.log(`OnNetError no=${e}  txt=${t}`),t||(t="服务器反馈错误: "+e),Gr.system.toastText(t)}}class cr{}class hr{constructor(){this.packageConfigs=[],this.assets=[],this.isRuning=!1,this.isComplete=!1,this.completeCallbackList=[]}addAssetForFguiPackagename(e){this.assets.push({url:e,type:y.FguiPackage})}addAssetForFguiComponent(e){let t=e.DependPackages;for(let e=0;e<t.length;e++)this.addAssetForFguiPackagename(t[e])}addDynmicAssetForAvatarAll(e){e.getAllAssset(this.assets)}generate(){if(this.list)return;let e=new Dictionary,t=new Dictionary;for(let i=0;i<this.assets.length;i++){let s=this.assets[i],a=null;switch(s.type){case y.FguiPackage:a=Gr.guiRes.getconfig(s.url);break;case y.FspritePackage:a=Gr.spriteRes.getconfig(s.url)}if(a){t.hasKey(a.packagePath)||t.add(a.packagePath,a);let i=a.loadList;for(let t of i)if(!e.hasKey(t.url)){let i={url:t.url,type:he.layaLoaderType2AssetItemType(t.type)};e.add(i.url,i)}}else e.hasKey(s.url)||e.add(s.url,s)}this.list=e.getValues(),this.packageConfigs=t.getValues()}async start(){return new Promise(e=>{if(this.isComplete)e(!0);else{let t=()=>{e(!0)};this.completeCallbackList.push(t),this.isRuning||(this.generate(),this.list&&0!=this.list.length?Gr.asset.loadList(this.list,this,this.onComplete,this.onProgress):this.onComplete())}})}onProgress(e,t,i,s){Gr.loaderSettingHandler.onLoadedFgui(t,i)}onComplete(){for(let e of this.packageConfigs)ri.addPackage(e.packagePath);for(let e of this.completeCallbackList)e.apply(this);this.isComplete=!0}}!function(e){e.SimulationBehaviours="SimulationBehaviours",e.EComponents="EComponents",e.ESystems="ESystems",e.EEvents="EEvents",e.ECSSystems="ECSSystems",e.UnitCmds="UnitCmds",e.UnitCmdActions="UnitCmdActions",e.TookHandlers="TookHandlers",e.RenderComponents="RenderComponents",e.RenderSystems="RenderSystems",e.RenderSimulationBehaviours="RenderSimulationBehaviours"}(Yi||(Yi={})),window.AssemblyNamespace=Yi;class ur{constructor(){this.menuId=0}init(){}validate(e){return!0}exe(){}__onExe(){}}ur.__namespace=Yi.TookHandlers;class mr extends ie{constructor(){super(...arguments),this.closeDict=new Dictionary}install(){}addClose(e,t){this.closeDict.add(e,t)}validate(e){let t=!1;if(this.closeDict.hasKey(e)&&(t=this.closeDict.getValue(e).apply(this)),1==t)return!1;Gr.config.unlock.getUnlockConfig(e);return this.dict.hasKey(e)?this.dict.getValue(e).apply(this):super.validate(e)}}class gr extends ie{install(){}validate(e){return mr.getInstance().validate(e)}}class dr extends ur{constructor(){super(...arguments),this.fixedTimeList=[],this.endedTimeList=[]}validate(e){let t=!1,i=this.fixedTimeList.length;for(let s=0;s<i;s++){let i=this.fixedTimeList[s],a=this.endedTimeList[s];if(e>=i.timestamp){a?(t=e<=a.timestamp)&&a.reseTimestamp():(t=!0)&&i.reseTimestamp();break}}return t}}!function(e){e[e.Day=0]="Day",e[e.Week=1]="Week",e[e.Month=2]="Month"}($i||($i={})),function(e){e[e.UnArrival=0]="UnArrival",e[e.Arrival=1]="Arrival",e[e.Overdue=2]="Overdue"}(Ji||(Ji={}));class pr{constructor(){this.timeType=$i.Day,this.monthDate=0,this.weekDay=0,this.hour=0,this.minute=0,this.second=0,this._timestamp=-1}static CreateHMS(e,t=0,i=0){let s=new pr;return s.timeType=$i.Day,s.hour=e,s.minute=t,s.second=i,s}static CreateWeek(e,t,i=0,s=0){let a=new pr;return a.timeType=$i.Week,a.weekDay=e,a.hour=t,a.minute=i,a.second=s,a}static CreateMonthDate(e,t,i=0,s=0){let a=new pr;return a.timeType=$i.Month,a.monthDate=e,a.hour=t,a.minute=i,a.second=s,a}get timestamp(){return this._timestamp<=0&&this.reseTimestamp(),this._timestamp}reseTimestamp(){let e;switch(this.timeType){case $i.Day:e=Mi.getServerNextDate(this.hour,this.minute,this.second);break;case $i.Week:e=Mi.getServerNextWeekDate(this.weekDay,this.hour,this.minute,this.second);break;case $i.Month:e=Mi.getServerNextMonthDate(this.monthDate,this.hour,this.minute,this.second)}console.log(Mi.ToStr(e)),this._timestamp=e.getTime()}}class Sr extends dr{init(){let e=Global.updataDayTime;this.fixedTimeList.push(pr.CreateHMS(e.H,e.Mm,e.S)),super.init()}exe(){super.exe(),console.log("FixedTimeHookHandler_hms exe"),Gr.moduleModel.section.sectionData.resetData(),Gr.moduleModel.gashapon.resetGashaponData(),Gr.event.dispatch(me.GameFrame_Everyday_Update)}}class Cr{static register(e,t){e.tag=t,this._namespace.addItem(e.__namespace,e)}static get(e){return this._namespace.get(e)}}Cr._namespace=new UnOrderMultiMap,window.Assembly=Cr;class fr{static install(){this.isInstalled||Cr.register(Sr,"FixedTimeHookHandler_hms")}}fr.isInstalled=!1;class yr{constructor(){this.dict=new Dictionary,this.list=[],this.count=0,this.isInsalled=!1,this.serverMilliseconds=0}install(){if(this.isInsalled)return;this.isInsalled=!0,fr.install();let e=Cr.get(Yi.TookHandlers);if(e)for(let t of e)this.registerSystem(t)}registerSystem(e){let t=e.tag||e.name||e.__tookClassUid;t&&this.dict.hasKey(t)||(t=e.__tookClassUid=yr.TookClassUid++);let i=new e;i instanceof ur&&(i.init(),this.dict.add(t,i),this.list.push(i),this.count=this.list.length)}fixedReseTimestamp(){for(let e of this.list)if(e instanceof dr)for(let t of e.fixedTimeList)t.reseTimestamp()}start(){}stop(){Laya.timer.clear(this,this.onTick)}onTick(){this.serverMilliseconds=Gr.time.serverMilliseconds;for(let e=0;e<this.count;e++){let t=this.list[e];this.validate(t)&&(t.exe(),t.__onExe())}}validate(e){if(!Gr.user.isLoginAndGetUserData)return!1;let t=!0;if(t&&e.menuId>0&&(t=mr.getInstance().validate(e.menuId)),t&&e.menuId>0&&(t=gr.getInstance().validate(e.menuId)),t&&e.preconditionMenuIds&&e.preconditionMenuIds.length>0){t=!1;for(let i of e.preconditionMenuIds)if(Gr.menu.isOpened(i)){t=!0;break}}return t&&(t=e.validate(this.serverMilliseconds)),t}}yr.TookClassUid=1;class wr{async reLogin(){}async login(e,t,i){if(!i&&Gr.user.isLoginAndGetUserData)return;fgui.GRoot.inst.showModalWait();let s=await Ae.platform.Login2(e,t);if(fgui.GRoot.inst.closeModalWait(),s.error)return 45!=s.error&&304!=s.error||Gr.launch.onNetError(s.error),void(1018==s.error&&Gr.event.dispatch("LOGIN_CDK",s.session));Gr.localStorage.username=e,Gr.localStorage.password=t,Engine.borwer.isBrowser&&VersionConfig.IsDebugVer&&(sessionStorage.setItem("username",e),sessionStorage.setItem("password",t)),Gr.event.dispatch("SUCCESS_LOGIN",s.session,s.roles)}async check(e,t,i,s){let a=await Ae.platform.CheckCdk(e,t);a.error?Gr.event.dispatch("ERROR_CDK",a.error):this.login(i,s,!0)}async CheckIDCard(e,t,i){let s=await Ae.platform.CheckIDCard(e,t,i);if(console.log("当前验证身份状态：",s.error,s.timelong),0!=s.error&&1023!=s.error){let t=Gr.moduleModel.login;t.session=e,t.error=s.error,t.timeLong=s.timelong}Gr.event.dispatch("ERROR_IDCARD",s.error)}async newAndUseRole(e,t,i){(await Ae.platform.newAndUseRole(e,t,i)).error||this.enter()}async useRole(e,t){(await Ae.platform.useRole(e,t)).error||this.enter()}async areas(){let e=await Ae.platform.Areas();e.error?Gr.event.dispatch("ERROR_AREAS"):Gr.event.dispatch("SUCCESS_AREAS",e.areas)}async enter(){fgui.GRoot.inst.showModalWait(),await Gr.net.AsyncGamerLoginGetDataC2S(),Gr.user.isLoginAndGetUserData=!0,Gr.netStat.isLogined=!0,fgui.GRoot.inst.closeModalWait()}}class _r{async changeName(e){return await Gr.net.AsyncGamerChangeNameC2S(e)}async changeHeadIcon(e){await Gr.net.AsyncGamerChangeAvatarC2S(e)}async uploadWXInfo(){}async sawHeadIcon(e){await Gr.net.GamerChangeItemIsSawC2S(6,e)}}class Lr{constructor(){this.login=new wr,this.user=new _r}}class vr{init(){}}class Tr{constructor(){this.isConnnected=!1,this.isTryConnecting=!1,this.isLogined=!1,this.lastSendFrame=0,this.lastResponseFrame=0,this.lastMsgSuccess=!0,this.lastShowErrorFrame=0,this.timeOutShowModelWait=!0}Init(){window.net&&(net.logic.onConnect.on(this.onConnect,this),net.logic.onReconnect.on(this.onReconnect,this),net.logic.onClose.on(this.onClose,this),net.logic.onConnectError.on(this.onConnectError,this),net.logic.onSendTime.on(this.onSendTime,this),net.logic.onResponseTime.on(this.onResponseTime,this),Laya.timer.frameLoop(20,this,this.onLoop))}onConnect(){this.isConnnected=!0,this.isTryConnecting=!1,this.isLogined&&fgui.GRoot.inst.closeModalWait()}onConnectError(){this.isConnnected=!1,this.isTryConnecting=!1,this.isLogined&&Gr.system.toastText(te.NET_ERROR)}onClose(){this.isConnnected=!1,this.isTryConnecting=!1,this.isLogined}onReconnect(){this.isConnnected=!1,this.isTryConnecting=!0,this.isLogined&&fgui.GRoot.inst.showModalWait()}onClickConnect(){}onSendTime(){this.lastMsgSuccess&&(this.lastSendFrame=Laya.timer.currFrame),this.lastMsgSuccess=!1}onResponseTime(){this.lastResponseFrame=Laya.timer.currFrame,this.lastMsgSuccess=!0,this.timeOutShowModelWait&&(fgui.GRoot.inst.closeModalWait(),this.timeOutShowModelWait=!1)}onLoop(){this.lastMsgSuccess||this.isTryConnecting||Laya.timer.currFrame-this.lastShowErrorFrame>300&&Laya.timer.currFrame-this.lastSendFrame>300&&(this.lastShowErrorFrame=Laya.timer.currFrame,this.timeOutShowModelWait||fgui.GRoot.inst.showModalWait(),this.timeOutShowModelWait=!0,this.onConnectError())}}class Gr{static init(){this.isInited||(this.isInited=!0,this.screenSetting=new Kt,this.deviceSetting=new Yt,this.launchText=new rs,this.launch=new lr,this.asset=new ci,this.config=new qt,this.lang=ni.Instance,this.configExp=new cr,this.sound=new Vi,this.time=new qi,this.localStorage=zt.Instance,this.loader=Ss.Instance,this.loaderSettingHandler=new os,this.menu=new Pi,this.system=new ns,this.channel=bi.Instance,this.version=Ei.Instance,this.preload=new hr,this.moduleModel=new Ui,this.user=new ws,this.guiRes=new di,this.spriteRes=new pi,this.event=new Emitter,this.net=Cs,this.netStat=new Tr,this.netStat.Init(),this.protoHandler=new vr,this.protoHandler.init(),this.sender=new Lr,this.took=new yr)}}Gr.net=Cs,Gr.isInited=!1,window.Game=Gr;new class{constructor(){LayaExtendClass(),Laya.stage||this.InitLaya(),e.stat&&Laya.Stat.show(),LayaExtendLogic(),FguiExtend(),Engine.init(),Gr.init(),rt.OnOpen(),Gr.launch.install(),Laya.stage.on(Laya.Event.KEY_DOWN,this,this.OnKeyDownHandler)}OnKeyDownHandler(e){Laya.Keyboard.P==e.keyCode&&(console.error("当前对象池信息:"),console.error(Pool._poolDic))}initLoader(){wx.getSystemInfoSync();var e=new Laya.Sprite;let t=Laya.stage.width,i=Laya.stage.height;e.graphics.drawRect(0,0,t,i,"#FFFFFF"),e.graphics.loadImage("res/fgui/GameLaunch_atlas_upoiw2g.jpg",0,0,t,i),Laya.stage.addChild(e),window.launcherInitBG=e}InitLaya(){window.Laya3D?Laya3D.init(e.width,e.height):Laya.init(e.width,e.height,Laya.WebGL),Laya.Physics&&Laya.Physics.enable(),Laya.DebugPanel&&Laya.DebugPanel.enable(),Laya.stage.scaleMode=e.scaleMode,Laya.stage.screenMode=e.screenMode,Laya.stage.alignV=e.alignV,Laya.stage.alignH=e.alignH,Laya.URL.exportSceneToJson=e.exportSceneToJson,window.Laya3D&&(Laya.Shader3D.debugMode=!1),e.physicsDebug&&Laya.PhysicsDebugDraw&&Laya.PhysicsDebugDraw.enable(),Laya.alertGlobalError=!0}}}();