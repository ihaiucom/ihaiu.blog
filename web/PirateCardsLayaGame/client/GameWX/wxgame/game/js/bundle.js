!function(){"use strict";class e{constructor(){}static get isMobile(){return window.navigator.userAgent.indexOf("Mobile")>-1}static get scaleMode(){return Laya.Stage.SCALE_FIXED_AUTO}static get scaleX(){return Laya.stage.width/this.width}static get scaleY(){return Laya.stage.height/this.height}static init(){Laya.ClassUtils.regClass}}e.width=750,e.height=1334,e.screenMode="none",e.alignV=Laya.Stage.ALIGN_TOP,e.alignH=Laya.Stage.ALIGN_CENTER,e.startScene="test/TestScene.scene",e.sceneRoot="",e.debug=!1,e.stat=!1,e.physicsDebug=!1,e.exportSceneToJson=!0,e.isAntialias=!0,e.init();class i extends excelconfigSources.Card{get name(){if(!On.lang.isUseLang)return this.zhCnName;let e=On.lang.getValue("Card",this.id,"zhCnName");return isNullOrEmpty(e)?this.zhCnName:e}}class s extends excelconfigSources.CardScoreType{get name(){if(!On.lang.isUseLang)return this.zhCnName;let e=On.lang.getValue("CardScoreType",this.id,"zhCnName");return isNullOrEmpty(e)?this.zhCnName:e}}class a extends excelconfigSources.Loader{}class n extends excelconfigSources.Menu{get name(){if(!On.lang.isUseLang)return this.zhCnName;let e=On.lang.getValue("Menu",this.id,"zhCnName");return isNullOrEmpty(e)?this.zhCnName:e}}class r extends excelconfigSources.Msg{get notice(){if(!On.lang.isUseLang)return this.zhCnNotice;let e=On.lang.getValue("Msg",this.id,"zhCnNotice");return isNullOrEmpty(e)?this.zhCnNotice:e}}class o extends excelconfigSources.Unlock{get name(){if(!On.lang.isUseLang)return this.zhCnName;let e=On.lang.getValue("Unlock",this.id,"zhCnName");return isNullOrEmpty(e)?this.zhCnName:e}}class l extends fgui.GButton{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","CardView")}constructFromXML(e){super.constructFromXML(e)}}l.URL="ui://moe42ygrsqzy9s",l.DependPackages=["GameHome"];class c extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","CardViewFrontBg")}constructFromXML(e){super.constructFromXML(e),this.m_state=this.getController("state"),this.m_icon=this.getChild("icon")}}c.URL="ui://moe42ygrsqzya8",c.DependPackages=["GameHome"];class h extends c{}var u;!function(e){e[e.Default=0]="Default",e[e.Warrior=1]="Warrior",e[e.Hero=2]="Hero",e[e.PowerUp=3]="PowerUp"}(u||(u={}));class m extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","CardViewFrontHero")}constructFromXML(e){super.constructFromXML(e),this.m_icon=this.getChild("icon"),this.m_life=this.getChild("life"),this.m_shield=this.getChild("shield"),this.m_shopBar=this.getChild("shopBar")}}m.URL="ui://moe42ygrsqzy9v",m.DependPackages=["GameHome"];class g{}g.Width=640,g.Height=960,g.HeroStartRow=2,g.HeroStartColumn=2,g.CardWidth=198,g.CardHeight=226,g.CardSpaceBetweenWidth=10,g.CardSpaceBetweenHeight=10,g.AnimationTime=185,g.AnimationMultiplier=.5,g.ScaleZoom=1.2,g.ScaleSpeed=50,g.FlipSpeed=200,g.FlipZoom=1.3,g.SmashDelay=200,g.HeroCurrentLife1="HeroCurrentLife1",g.HeroCurrentLife2="HeroCurrentLife2",g.HeroTotalLife1="HeroTotalLife1",g.HeroTotalLife2="HeroTotalLife2",g.CardLife="CardLife",g.CardLife1="CardLife1",g.CardLife2="CardLife2",g.PowerUpCircle="PowerUpCircle",g.PowerUp="PowerUp",g.CardManAnimation="CardManAnimation",g.WaveSize=7,g.ScaleSize=30,g.textFontWeight=22,g.numbersFontWeight=28,g.resultNumbersFontWeight=35,g.creditsColor="#ffffff",g.creditsFontWeight=24,g.BackgroundImageName="BackgroundImageName",g.BackgroundName="BackgroundName",g.LightningDuration=50,g.ShakeIntensity=20,g.ContainerName="container",g.CoinMaxValue=5,g.Shadow="shadow",g.Hero="hero",g.CardWithArm="cardWithArm",g.CardWithMovingArm="cardWithMovingArm",g.ShowTime=300,g.StorageName="pirated-cards-adventure",g.IsDev=!1,g.IsAndroid=!1,g.HighResolutionScale=!1,g.MaxPixelRatio=3,g.WarriorAnimationDuration=500;class d{constructor(){this.onStart=new Signal,this.onComplete=new Signal,this.tweens=[],this.duration=null,this._delay=0}static PoolGet(){return Pool.createByClass(d)}recover(){Laya.timer.clearAll(this),this.recoverArray(this.tweens),this.tweens.length=0,this.onStart.removeAll(),this.onComplete.removeAll(),this.duration=null,this._delay=0,Pool.recoverByClass(this)}recoverArray(e){if(null!=e)if(e instanceof Array)for(var t of e)null!=t&&(t instanceof Array?this.recoverArray(t):t.recover());else e.recover()}get animationDuration(){if(null===this.duration){for(var e=0,t=0,i=this.tweens.length;t<i;t++){var s=this.tweens[t];if(s)if(s instanceof d)e=Math.max(s.animationDuration,e);else if(s instanceof Array)if(s.length>0){var a=s[0];if(a)if(a instanceof d)e=Math.max(a.animationDuration,e);else{var n=a._duration+a._delay;e=Math.max(n,e)}else this.duration=100}else this.duration=100;else{n=s._duration+s._delay;e=Math.max(n,e)}}this.duration=e}return this.duration}set animationDuration(e){this.duration=e}setAnimationDuration(e){return this.duration=e,this}setFirstDelay(e){this._delay=e}restart(){setTimeout(this.onEnd.bind(this),this.animationDuration),this.onStart.dispatch(),this._delay>0?Laya.timer.once(this._delay,this,this.playTweens):this.playTweens()}playTweens(){this.playArray(this.tweens)}playArray(e){if(null!=e)if(e instanceof Array){for(var t of e)if(null!=t)if(t instanceof Array)this.playArray(t);else{if(t instanceof Laya.Tween&&(!t._props||0==t._props.length)){console.error("没设置属性");continue}t.restart()}}else e.restart()}onEnd(){this.onComplete.dispatch(),Laya.timer.once(3e3,this,this.recover)}}var p,S,C,f,y=Laya.Tween;class w{static to(e,t,i,s=null,a=null,n=0,r=!1,o=!0){return Pool.getItemByClass("tween",y)._create(e,t,i,s,a,n,r,!0,o,!1)}static from(e,t,i,s=null,a=null,n=0,r=!1,o=!0){return Pool.getItemByClass("tween",y)._create(e,t,i,s,a,n,r,!1,o,!1)}}class L{static spriteHide(e){Laya.Tween.clearAll(e),Laya.Tween.to(e,{scaleX:0,scaleY:0,rotation:360,alpha:0},700,null,Laya.Handler.create(this,()=>{e.visible=!1,e.rotation=0,e.alpha=1,e.scaleX=1,e.scaleY=1}))}static spriteShow(e){e.visible=!0,e.alpha=1,Laya.Tween.clearAll(e),Laya.Tween.to(e,{scaleX:0,scaleY:0,alpha:1},100),Laya.Tween.to(e,{scaleX:1.5,scaleY:1.5},250,null,null,100),Laya.Tween.to(e,{scaleX:1,scaleY:1},100,null,null,350)}static turnAnimationStart(e,t){e||(e=new d);var i=w.to(t,{scaleX:g.ScaleZoom,scaleY:g.ScaleZoom},g.ScaleSpeed);e.tweens.push(i);var s=w.to(t,{scaleX:.1,scaleY:g.FlipZoom},g.FlipSpeed/2,null,null,g.ScaleSpeed,!1);return e.tweens.push(s),e}static turnAnimationEnd(e,t){e||(e=new d);var i=w.to(t,{scaleX:g.ScaleZoom,scaleY:g.ScaleZoom},g.FlipSpeed/2);e.tweens.push(i);var s=w.to(t,{scaleX:1,scaleY:1},g.FlipSpeed);return e.tweens.push(s),e}static scaleIn(e,t,i=!0){e||(e=new d),t.enabled=!1;var s=w.to(t,{scaleX:0,scaleY:0},.25*g.ShowTime,null,Laya.Handler.create(this,()=>{t.setScale(1,1),t.visible=!1,t.enabled=!0}));return e.tweens.push(s),e}static scaleOut(e,t,i=1){t.setScale(0,0),t.visible=!0,t.enabled=!0,e||(e=new d);var s=w.to(t,{scaleX:i,scaleY:i},.25*g.ShowTime);return e.tweens.push(s),e}}class _ extends m{constructFromXML(e){super.constructFromXML(e),this.m_shield.alpha=1,this.m_shield.visible=!1}SetConfig(e){this.cardConfig=e,this.m_icon.m_sprite.setSelectedIndex(e.id%100-1)}SetCard(e){this.card=e}OnRecover(){this.cardView=null,this.cardConfig=null,this.card=null}setArmorHide(){this.m_shield.visible&&L.spriteHide(this.m_shield)}setArmorShowOrChange(){L.spriteShow(this.m_shield)}}class T extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","CardViewFrontPowerUp")}constructFromXML(e){super.constructFromXML(e),this.m_icon=this.getChild("icon"),this.m_life=this.getChild("life")}}T.URL="ui://moe42ygrsqzyaa",T.DependPackages=["GameHome"];class v extends T{SetConfig(e){this.cardConfig=e,this.m_icon.url=e.spriteUrl}SetCard(e){this.card=e}OnRecover(){this.cardView=null,this.cardConfig=null,this.card=null}}class G extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","CardViewFrontPowerUpBarrel")}constructFromXML(e){super.constructFromXML(e),this.m_icon=this.getChild("icon"),this.m_openFx=this.getChild("openFx"),this.m_life=this.getChild("life")}}G.URL="ui://moe42ygrsqzyab",G.DependPackages=["GameHome"];class P extends G{SetConfig(e){this.cardConfig=e}SetCard(e){this.card=e}OnRecover(){this.cardView=null,this.cardConfig=null,this.card=null}}class k extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","CardViewFrontPowerUpCannon")}constructFromXML(e){super.constructFromXML(e),this.m_icon=this.getChild("icon"),this.m_fx=this.getChild("fx"),this.m_life=this.getChild("life")}}k.URL="ui://moe42ygrsqzy9y",k.DependPackages=["GameHome"];class I extends k{SetConfig(e){this.cardConfig=e}SetCard(e){this.card=e}OnRecover(){this.cardView=null,this.cardConfig=null,this.card=null}}class M extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","CardViewFrontPowerUpBomb")}constructFromXML(e){super.constructFromXML(e),this.m_icon=this.getChild("icon"),this.m_fx=this.getChild("fx"),this.m_life=this.getChild("life")}}M.URL="ui://moe42ygrsqzyad",M.DependPackages=["GameHome"];class b extends M{SetConfig(e){this.cardConfig=e}SetCard(e){this.card=e}OnRecover(){this.cardView=null,this.cardConfig=null,this.card=null}}class D extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","CardViewFrontPowerUpChest")}constructFromXML(e){super.constructFromXML(e),this.m_state=this.getController("state"),this.m_icon=this.getChild("icon"),this.m_life=this.getChild("life")}}D.URL="ui://moe42ygrsqzyac",D.DependPackages=["GameHome"];class B extends D{SetConfig(e){this.cardConfig=e}SetCard(e){this.card=e}OnRecover(){this.cardView=null,this.cardConfig=null,this.card=null}}class F extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","CardViewFrontPowerUpSkull")}constructFromXML(e){super.constructFromXML(e),this.m_fx=this.getChild("fx"),this.m_life=this.getChild("life")}}F.URL="ui://moe42ygrsqzyae",F.DependPackages=["GameHome"];class A extends F{SetConfig(e){this.cardConfig=e}SetCard(e){this.card=e}OnRecover(){this.cardView=null,this.cardConfig=null,this.card=null}}class H extends fgui.GButton{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","CardViewFrontWarriowBoss")}constructFromXML(e){super.constructFromXML(e),this.m_icon=this.getChild("icon"),this.m_life=this.getChild("life")}}H.URL="ui://moe42ygrsqzya6",H.DependPackages=["GameHome"];class x extends H{SetConfig(e){this.cardConfig=e,this.m_icon.m_sprite.setSelectedIndex(e.id%100-1)}SetCard(e){this.card=e}OnRecover(){this.cardView=null,this.cardConfig=null,this.card=null}}class R extends fgui.GButton{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","CardViewFrontWarriowEnemy")}constructFromXML(e){super.constructFromXML(e),this.m_icon=this.getChild("icon"),this.m_life=this.getChild("life")}}R.URL="ui://moe42ygrsqzya3",R.DependPackages=["GameHome"];class U extends R{SetConfig(e){this.cardConfig=e,this.m_icon.m_sprite.setSelectedIndex(e.id%100-1)}SetCard(e){this.card=e}OnRecover(){this.cardView=null,this.cardConfig=null,this.card=null}}class N extends fgui.GButton{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","CardViewFrontWarriowTrap")}constructFromXML(e){super.constructFromXML(e),this.m_icon=this.getChild("icon"),this.m_life=this.getChild("life"),this.m_DoClose=this.getTransition("DoClose"),this.m_DoOpen=this.getTransition("DoOpen")}}N.URL="ui://moe42ygrsqzya9",N.DependPackages=["GameHome"];class O extends N{SetConfig(e){this.cardConfig=e}SetCard(e){this.card=e}OnRecover(){this.cardView=null,this.cardConfig=null,this.card=null}SetOpen(){this.m_DoOpen.play()}SetClose(){this.m_DoClose.play()}}class E extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","CardViewFrontWarriow")}constructFromXML(e){super.constructFromXML(e),this.m_icon=this.getChild("icon"),this.m_life=this.getChild("life")}}E.URL="ui://moe42ygrsqzy9w",E.DependPackages=["GameHome"];class W extends E{SetConfig(e){this.cardConfig=e,this.m_icon.url=e.spriteUrl}SetCard(e){this.card=e}OnRecover(){this.cardView=null,this.cardConfig=null,this.card=null}}class V extends l{constructor(){super(),this.preArmor=-1}static get FrontClassMap(){if(!this._FrontClassMap){var e=new Map;this._FrontClassMap=e,e.set("CardViewFrontHero",_),e.set("CardViewFrontPowerUp",v),e.set("CardViewFrontPowerUpBarrel",P),e.set("CardViewFrontPowerUpBomb",b),e.set("CardViewFrontPowerUpCannon",I),e.set("CardViewFrontPowerUpChest",B),e.set("CardViewFrontPowerUpSkull",A),e.set("CardViewFrontWarriow",W),e.set("CardViewFrontWarriowBoss",x),e.set("CardViewFrontWarriowEnemy",U),e.set("CardViewFrontWarriowTrap",O)}return this._FrontClassMap}static GetFrontClass(e){return this.FrontClassMap.has(e)?this.FrontClassMap.get(e):(console.error("没有找到卡牌视图组件",e),v)}static GetFrontView(e){var t=V.GetFrontClass(e),i=Pool.getItem(t.URL);return i||(i=t.createInstance()),i}static GetSpriteUrl(e){return"ui://GameHome/"+e}static PoolGet(){var e=Pool.getItem(this.URL);return e||(e=V.createInstance()),e}PoolRecover(){this.RecoverFront(),this.cardConfig=null,this.cardScoreConfig=null,Pool.recover(V.URL,this)}constructFromXML(e){super.constructFromXML(e),this.InitBg()}InitBg(){this.bg=h.createInstance(),this.addChild(this.bg),this.bg.setXY(.5*this.width,.5*this.height)}SetBg(e){this.bg.m_state.setSelectedIndex(e)}SetFront(e){var t=V.GetFrontView(e);t.displayListContainer.mouseThrough=!0,t.displayListContainer.mouseEnabled=!1,t.cardView=this,this.addChild(t),t.setXY(.5*this.width,.5*this.height),this.front=t;var i=this.front.SetConfig;i&&i.call(this.front,this.cardConfig),this.onClick(this,this.OnClickHandler)}RecoverFront(){if(this.front){this.front.removeFromParent();var e=this.front.OnRecover;e&&e.call(this.front);var t=this.front.constructor.URL;Pool.recover(t,this.front),this.front=null}this.offClick(this,this.OnClickHandler)}SetConfig(e){if(this.RecoverFront(),this.cardConfig=e,e){var t=this.cardScoreConfig=e.cardScoreConfig;t&&null!=t.backgroundType||console.error("!cardScoreConfig || cardScoreConfig.backgroundType == undefined",t,e),this.SetBg(t.backgroundType),this.SetFront(t.frontView)}else this.cardScoreConfig=null,this.SetBg(u.Default)}SetCard(e){if(this.card=e,this.front){var t=this.front.SetCard;t&&t.call(this.front,this.card)}}OnClickHandler(){this.card&&this.game.keyboardManager.OnClickCard(this.card)}setHealthText(){if(this.card.isHero){var e=this.card;this.front.m_life.title=e.currentLife+"/"+e.totalLife}else this.setPowerUpText()}setPowerUpText(){var e=this.card;e.isDisplayLife()?this.front.m_life.title=e.lifeAmount.toString():this.front.m_life.title=e.powerUpAmount.toString()}setArmor(){if(this.card.isHero){var e=this.card,t=this.front;e.armor>0?0!=t.m_shield.visible&&this.preArmor==e.armor||(t.setArmorShowOrChange(),this.preArmor=e.armor):t.setArmorHide(),t.m_shield.title=e.armor.toString()}}tweenLife(){var e=this.front.m_life,t=this.card.getScaleTween(e);return t.onComplete.addOnce(this.setHealthText,this),t}tweenPowerUp(){var e=this.front.m_life,t=this.card.getScaleTween(e);return t.onComplete.addOnce(this.setHealthText,this),t}useLuck(){if(this.card.isHero){this.card;this.front.m_shopBar.useLuck()}}increaseLifeByOneTween(){}setOpen(){this.card.isTrap&&this.front.SetOpen()}setClose(){this.card.isTrap&&this.front.SetClose()}}class X extends i{get cardScoreConfig(){return On.config.cardScoreType.getConfig(this.scoreTypeKey)}get spriteUrl(){return this._spriteUrl||(this._spriteUrl=V.GetSpriteUrl(this.sprite)),this._spriteUrl}}class q extends s{}class K extends a{}!function(e){e[e.Notice=0]="Notice",e[e.Home=100]="Home",e[e.War=601]="War",e[e.Login=101]="Login",e[e.Plot=102]="Plot",e[e.Gashapon=200]="Gashapon",e[e.Hero=201]="Hero",e[e.Bag=202]="Bag",e[e.Equip=203]="Equip",e[e.Draug=204]="Draug",e[e.Sections=207]="Sections",e[e.Quest=300]="Quest",e[e.Team=303]="Team",e[e.BattlePlan=304]="BattlePlan",e[e.PVPHall=401]="PVPHall",e[e.PVEHall=402]="PVEHall",e[e.SystemSetting=500]="SystemSetting",e[e.Mail=501]="Mail",e[e.Rank=502]="Rank",e[e.PlayerInfo=503]="PlayerInfo"}(p||(p={})),window.MenuId=p,function(e){e[e.None=0]="None",e[e.Circle=1]="Circle",e[e.Launch=2]="Launch",e[e.EnterWar=3]="EnterWar",e[e.EnterModule=4]="EnterModule"}(S||(S={}));class j{static get res3dzip_manifest(){return this.res3dzip+"manifest.json"}static get res3dzip_manifest_pve01(){return this.res3dzip+"pve_01_manifest.json"}static get res3dzip_zip_pve01(){return this.res3dzip+"pve_01.zip"}static get config(){return j.root+"config/"}static get PathConfig(){return j.root+"config/path/"}static get GmConfig(){return j.root+"config/gm/"}static get shader(){return j.root+"shader/"}static get particles(){return j.root+"particles/"}static get spine(){return j.root+"spine/"}static get spineUI(){return j.root+"spineUI/"}static getConfigIcon(e){return j.fspriteassets+e+".png"}static get fspriteassets(){return j.root+"fspriteassets/"}static get actorBodyIcon(){return j.root+"fspriteassets/ActorBodyIcon/"}static get draugHeroIcon(){return j.root+"fspriteassets/icon/draugHeroIcon/"}static get draugIcon(){return j.root+"fspriteassets/icon/draugIcon/"}static get menuIcon(){return j.root+"fspriteassets/MenuItemIcon/"}static get HeroIcon(){return j.root+"fspriteassets/icon/heroIcon/"}static getActorBodyIcon(e){return j.actorBodyIcon+`${e}.png`}static getDraugHeroIcon(e){return-1!=On.channel.serverItem.shieldHero.indexOf(e)&&(e=1001),j.draugHeroIcon+`${e}.png`}static getDraugIcon(e){return j.draugIcon+`${e}.png`}static getMenuIcon(e){return j.menuIcon+`${e}.png`}static getSpineSKPathF(e,t){return j.spine+`${e}_F/${t}_F/${t}_F.sk`}static getSpineSKPathB(e,t){return j.spine+`${e}_B/${t}_B/${t}_B.sk`}static getSpinePngPathF(e,t){return j.spine+`${e}_F/${t}_F/${t}_F.png`}static getSpinePngPathB(e,t){return j.spine+`${e}_B/${t}_B/${t}_B.png`}static getSpineUIPngPath(e){return j.spineUI+`${e}.png`}static getSpineUISkPath(e){return j.spineUI+`${e}.sk`}static getSpineSoltPartPath(e){return j.spine+"SlotTexture/"+e+".png"}static getMenuIconUrl(e){return j.fspriteassets+"MenuIcon/"+e+".png"}static getMenuNameIconUrl(e){return j.fspriteassets+"MenuNameIcon/"+e+".png"}static getBgUrl(e){return j.fspriteassets+"Background/"+e+".png"}static getSpritePath(e){return j.root+"sprite/"+e+".png"}static getSpritePathHasExt(e){return j.root+"sprite/"+e}static getShaderVS(e){return j.shader+e+".vs"}static getShaderPS(e){return j.shader+e+".fs"}static getParticles(e){return j.particles+e+".part"}static GetBattleRoleIcon(e){return j.fspriteassets+e+".png"}static GetAvatarSource(e){let t=On.config.avatar.getConfig(e);return j.fspriteassets+t.icon+".png"}}j.res3dsrc="",j.res3dzip="res3dzip/",j.root="res/";class z{}z.NET_ERROR="网络连接失败！请检查网络设备!加油哦！！",z.Login="登录",z.Auth="授权",z.LangSelectMsg="语言需要重启游戏才有效!",z.FunNoOpen="此功能暂未开放，敬请期待！",z.ButtonSelect="选择",z.ButtonOk="确定",z.ButtonCannel="取消",z.ButtonYes="是",z.ButtonNo="否",z.Disable="内容优化",z.Lock="无解锁配置！",z.LvUpMax="等级达到最大",z.LvUpTo="玩家升级 {0} → {1}",z.Lv="{0}级",z.LVDot="等级：{0}",z.PlayerExp="主公经验：{0}",z.FatigueNotEnough="体力不足，无法进行挑战",z.cannotRecharge="游客不能充值",z.cannotRechargeNoIos="只支持ios内购",z.rechargeError="充值失败，请稍候重试",z.systemTip="系统提示",z.TitleTip="提示",z.ErorNoInitProto="没有初始化网络",z.ErorRequestServerList="请求服务器列表失败",z.ErorAccountFrozen="账号被冻结",z.ErorAccountDropped="账号被停用",z.TipEnterRoleName="输入你的名称",z.ErrorNameEmpty="名字不能是空的",z.ErrorContentEmpty="内容不能是空的",z.ErrorNameUsed="名称已经被使用",z.ErrorFormatName="存在非法字符串，请修改后重试",z.ErrorHttpSendFail="[Error] 发送请求失败",z.HttpTimeOut="网络超时! 当前设置的超时时间是{0}",z.AlertTextBuyActor="是否花费{0}{1}增加艺人数量",z.AlertTextScountActor="是否花费{0}{1} 探查艺人？",z.ToastTextItemNotEnough="{0}数量不足",z.ToastTextItemNotEnough2="数量不足，需要{0} {1}",z.ChangeNameCost="本次改名需要 {0}",z.DuelTempLevel="当前决斗神殿段位：{0}",z.DuelTempMaxLevel="历史最高决斗神殿段位：{0}",z.DuelTempCurrentPvpLevel="当前竞技排名：{0}",z.DuelTempMaxPvpLevel="历史最高竞技排名：{0}",z.BattlePlanTeamHeroNameAndLevel="{0}  {1}级",z.BagCapacity="{0}/{1}",z.BagItemCount="拥有：{0}",z.BagExpiredLimitTip="{0}后过期",z.BagExpiredPeriodTip="将在{0}过期",z.BagItemSell="出售",z.BagItemUse="使用",z.BagItemSplit="分解",z.BagItemForge="锻造",z.BagItemChangeEquip="穿戴",z.BagItemLevelUp="使用可增加{0}英雄经验",z.EquipPropDes="{0}+{1}",z.EquipExclusiveTxtMsg="{0}专属！只有{1}才可穿戴次装备",z.EquipExclusiveTxt="{0}专属",z.EquipEatExp="该装备可提供{0}的强化经验",z.EquipTypeWeapon="武器",z.EquipTypeHelmet="头盔",z.EquipTypeArmor="战甲",z.EquipTypeBoots="战靴",z.EquipTypePendant="玉佩",z.EquipTypeGem="宝物",z.EquipNotEnough="道具不足，无法选择",z.EquipLevelUpStr1="下一级属性",z.EquipLevelUpStr2="强化到{0}级时属性增加",z.EquipAtkRange="系数",z.MailTitle="邮件",z.DeleteRead="删除已读",z.ToReader="致玩家：",z.ReawrdMsg="奖励内容：",z.Progress="{0}/{1}",z.N0="零",z.N1="一",z.N2="二",z.N3="三",z.N4="四",z.N5="五",z.N6="六",z.N7="七",z.N8="八",z.N9="九",z.N10="十",z.N100="百",z.N1000="千",z.N10000="万",z.RewardItemCount="x{0}",z.DATE_MonthBefore="{0}个月前",z.DATE_WeekBefore="{0}周前",z.DATE_DayBefore="{0}天前",z.DATE_HourBefore="{0}小时前",z.DATE_MinuteBefore="{0}分钟前",z.DATE_SecondeBefore="{0}秒前",z.Hour="小时",z.Minute="分",z.Second="秒",z.MissionNotOpen="该关卡尚未开启",z.Chapter="第{0}章",z.ChapterStarTipTitle="本章累计{0}星可领取",z.ChapterStarNotEnough="星星数量不足",z.ChapterRewardAlreadyGet="奖励已经领取过",z.ChapterSpecialTimes="今日精英剩余次数：{0}",z.ChapterMonsterTimes="今日剩余次数：{0}",z.SecretBookTimes="今日剩余次数：{0}",z.SecretBookTimesNotEnough="该副本今日挑战次数不足",z.SectionSpecialTotalTimes="每日一共可购买{0}次精英奖励次数",z.SectionMonsterTotalTimes="每日一共可购买{0}次魔王奖励次数",z.SecretBookTotalTimes="每日一共可购买{0}次秘闻奖励次数",z.SectionBuyTimesToast="奖励次数提升",z.SectionCurrentTimes="今日第{0}次购买",z.SectionTimesNotEnough="今日次数已用完",z.MissionUnlockCondition="{0}级开启",z.ChapterCurrentStarNum="{0}/{1}",z.SecretTimesRemain="今日剩余次数: {0}",z.MissionMaxTime="通关时间低于{0}秒",z.MissionKillBoss="打败首领",z.MissionHPState="剩余生命超过{0}%",z.MissionStamina="x{0}",z.SecretMissionTimesRemain="今日剩余次数：{0}",z.SecretLand_BestScore="最佳成绩：大秘境{0}",z.SecretLand_CurrentKeyStone="当前钥石：{0}级",z.SecretLand_Buy_Roll_Tips="是否消耗{0}点体力兑换Roll币",z.SecretLand_Roll_tips="当日可兑换次数为{0}，Roll积攒数量上限为{1}",z.SecretLand_Fatigue_Not_Enough="您没有足够的体力值，需要{0}体力兑换Roll币",z.Keystone_LevelUp_Time_Limit="{0}分钟",z.SecretLand_Level_Limit="等级达到{0}后开启{1}层大秘境",z.SecretLand_Time_Cost="通关时间: {0}",z.SecretLand_New_Keystone="获取新钥匙：{0}{1}级",z.Gashapon_NextFreeTime="{0}后免费",z.Gashapon_Rate="概率 {0}%",z.Gashapon_PropDisplay="{0} +{1}",z.Gashapon_Times_Remain="每日可招募{0}次，今日剩余{1}次",z.Gashapon_Times_Not_Enough="今日剩余次数不足",z.DuelSeasonDuration="{0} - {1}",z.DuelSeasonRemainDays="距离赛季结束还有{0}",z.DuelCurrentWinTimes="本赛季胜场：{0}",z.DuelSelectHeroGroupFirst="请先选择队伍",z.DuelTempOldSeason="恭喜您，在上赛季结算时的段位达到了{0}，赛季奖励已经发送 到您的邮箱",z.DuelTempNewSeason="由于您上赛季的出色表现，您在本赛季的起始段位为{0}",z.DuelTempWinTimes="胜场：{0}",z.HeroSkillOpenLevel="英雄等级达到{0}级别后解锁",z.HeroMaxLevel="已满级",z.HeroInBattle="当前英雄已在队伍中！！！",z.HeroStarProStr="成长",z.HeroLevelUpNotEnough="当前无法升级，请提升战队等级",z.HeroLevelUpItemNotEnough="物品不足，无法升级",z.HeroLevelUpMax="已提升当前最高级",z.RankMyAllRank="我的全区排行：{0}",z.RankNotOnRank="未上榜",z.RankDanStar="{0} {1}星",z.HeroSkillLevelNotLevel="升级条件不足，需英雄{0}级",z.SecretBookHeroLevelNotEnough="英雄{0}级开启",z.GuideFinish="现在引导结束了，你可以自由体验了",z.GuideGoToBattle="guide_go_section",z.GuideBackHome="guide_go_back_home",z.GuideBack="guide_go_back";class Y{constructor(){this.dict=new Dictionary}static getInstance(){return null==this.__instance&&(this.__instance=new this,this.__instance.install()),this.__instance}validate(e){return!this.dict.hasKey(e)||this.dict.getValue(e).apply(this)}validateTab(e,t){return!0}openMenu(e,t){}openTab(e,t,i){}openItem(e,t,i){}closeRed(e){}add(e,t){this.dict.add(e,t)}install(){}}class $ extends Y{install(){}validate(e){return super.validate(e)}warEnableOpen(){return!0}}class J extends Y{install(){}validate(e){return!!this.dict.hasKey(e)&&this.dict.getValue(e).apply(this)}}class Q{constructor(e,t){this.menuId=e,this.windowClass=t}}!function(e){e[e.Home=1]="Home",e[e.HomeTop=2]="HomeTop",e[e.WarUI=3]="WarUI",e[e.Module=4]="Module",e[e.ModuleTop=5]="ModuleTop",e[e.MainUI=6]="MainUI",e[e.Dialog=7]="Dialog",e[e.Guide=8]="Guide",e[e.Loader=9]="Loader",e[e.GM=10]="GM",e[e.FloatMsg=11]="FloatMsg"}(C||(C={}));class Z{static get dialogModel(){return Z._dialogModel||(Z._dialogModel=new fgui.GComponent),Z._dialogModel}static showDialogModel(){Z.dialog.width=On.screenSetting.screenWidth,Z.dialog.height=On.screenSetting.screenHeight,Z.dialogModel.alpha=.8,Z.dialogModel.width=On.screenSetting.screenWidth,Z.dialogModel.height=On.screenSetting.screenHeight,Z.dialogModel&&Z.dialog.addChildAt(Z.dialogModel,0)}static resetDialogModelSize(){Z.dialog.width=On.screenSetting.screenWidth,Z.dialog.height=On.screenSetting.screenHeight,Z.dialogModel.width=On.screenSetting.screenWidth,Z.dialogModel.height=On.screenSetting.screenHeight}static hideDialogModel(){Z.dialogModel&&Z.dialogModel.removeFromParent()}static install(){Laya.stage.addChild(fgui.GRoot.inst.displayObject),Z.root=fgui.GRoot.inst,Z.home=Z.createLayer(C.Home,"MenuLayer-home"),Z.warUI=Z.createLayer(C.WarUI,"MenuLayer-warUI"),Z.module=Z.createLayer(C.Module,"MenuLayer-module"),Z.mainUI=Z.createLayer(C.MainUI,"MenuLayer-mainUI"),Z.dialog=Z.createLayer(C.Dialog,"MenuLayer-dialog"),Z.guide=Z.createLayer(C.Guide,"MenuLayer-guide"),Z.loader=Z.createLayer(C.Loader,"MenuLayer-loader"),Z.gm=Z.createLayer(C.GM,"MenuLayer-gm"),Z.floatMsg=Z.createLayer(C.FloatMsg,"MenuLayer-floatMsg"),Z.dict.add(C.Home,Z.home),Z.dict.add(C.WarUI,Z.warUI),Z.dict.add(C.Module,Z.module),Z.dict.add(C.MainUI,Z.mainUI),Z.dict.add(C.Dialog,Z.dialog),Z.dict.add(C.Guide,Z.guide),Z.dict.add(C.Loader,Z.loader),Z.dict.add(C.GM,Z.gm),Z.dict.add(C.FloatMsg,Z.floatMsg)}static getLayer(e){return Z.dict.getValue(e)}static createLayer(e,t){let i=Z.root,s=new fgui.GRoot;if(s.menuLayer=e,t&&(s.name=t),Engine.borwer.isLiuHai)switch(e){case C.Loader:s.x=0,s.y=0,s.setSize(i.width,i.height);break;default:On.screenSetting.isLandsape?(s.x=On.screenSetting.liuHaiHeightTop,s.setSize(On.screenSetting.screenWidthLiuHai,i.height)):(s.y=On.screenSetting.liuHaiHeightTop,s.setSize(i.width,i.height-On.screenSetting.screenHeightLiuHai))}else s.setSize(i.width,i.height);return i.addChild(s),s}static getLayerHeight(e){if(Engine.borwer.isLiuHai)switch(e){case Z.loader:return On.screenSetting.screenHeight;default:return On.screenSetting.screenHeightLiuHai}return On.screenSetting.screenHeight}static getLayerWidth(e){if(Engine.borwer.isLiuHai)switch(e){case Z.loader:return On.screenSetting.screenWidth;default:return On.screenSetting.screenWidthLiuHai}return On.screenSetting.screenWidth}}Z.dict=new Dictionary,window.MenuLayer=Z;class ee extends fgui.Window{constructor(){super(...arguments),this.isAddedStage=!1}get isShowed(){return!!this.contentPane&&null!=this.parent}onWindowWillShow(){this.contentPane&&this.callChildOnWindowWillShow(this.contentPane),this.setScreenSize(),this.isAddedStage||(this.isAddedStage=!0,Laya.stage.on(Laya.Event.RESIZE,this,this.setScreenSize))}onWindowWillHide(){this.contentPane&&this.callChildOnWindowWillHide(this.contentPane),this.isAddedStage=!1,Laya.stage.off(Laya.Event.RESIZE,this,this.setScreenSize)}setScreenSize(){this.contentPane&&(this.windowContainer&&void 0!==this.windowContainer.menuLayer?On.screenSetting.isLandsape?(this.width=Z.getLayerWidth(this.windowContainer.menuLayer),this.height=this.windowContainer.height,this.contentPane.width=this.width,this.contentPane.height=this.height):(this.width=this.windowContainer.width,this.height=Z.getLayerHeight(this.windowContainer.menuLayer),this.contentPane.width=this.width,this.contentPane.height=this.height):(this.width=On.screenSetting.screenWidth,this.height=On.screenSetting.screenHeight,this.contentPane.width=On.screenSetting.screenWidth,this.contentPane.height=On.screenSetting.screenHeight),this.callChildOnWindowResize(this.contentPane))}callChildOnWindowWillShow(e){if(e){let t=e.onWindowWillShow;if(t&&t.apply(e),e._children)for(let t=0;t<e._children.length;t++)this.callChildOnWindowWillShow(e._children[t])}}callChildOnWindowWillHide(e){if(e){let t=e.onWindowWillHide;if(t&&t.apply(e),e._children)for(let t=0;t<e._children.length;t++)this.callChildOnWindowWillHide(e._children[t])}}callChildOnWindowResize(e){if(e){let t=e.onWindowResize;if(t&&t.apply(e),e._children)for(let t=0;t<e._children.length;t++)this.callChildOnWindowResize(e._children[t])}}}!function(e){e[e.FguiPackage=0]="FguiPackage",e[e.FspritePackage=1]="FspritePackage",e[e.Image=2]="Image",e[e.TEXTURE2D=3]="TEXTURE2D",e[e.Buffer=4]="Buffer",e[e.Sound=5]="Sound",e[e.Text=6]="Text",e[e.Json=7]="Json",e[e.Xml=8]="Xml",e[e.Font=9]="Font",e[e.TTF=10]="TTF",e[e.PKM=11]="PKM"}(f||(f={}));var te,ie=Laya.Loader;class se{static get layaLoaderType2AssetItemTypeDict(){if(!se._layaLoaderType2AssetItemTypeDict){let e=new Dictionary;e.add(ie.IMAGE,f.Image),e.add(ie.TEXTURE2D,f.TEXTURE2D),e.add(ie.BUFFER,f.Buffer),e.add(ie.SOUND,f.Sound),e.add(ie.TEXT,f.Text),e.add(ie.JSON,f.Json),e.add(ie.XML,f.Xml),e.add(ie.FONT,f.Font),e.add(ie.TTF,f.TTF),se._layaLoaderType2AssetItemTypeDict=e}return se._layaLoaderType2AssetItemTypeDict}static get assetItemType2LayaLoaderTypeDict(){if(!se._assetItemType2LayaLoaderTypeDict){let e=this.layaLoaderType2AssetItemTypeDict.__getDict(),t=new Dictionary;for(let i in e)t[e[i]]=e;se._assetItemType2LayaLoaderTypeDict=t}return se._assetItemType2LayaLoaderTypeDict}static layaLoaderType2AssetItemType(e){return se.layaLoaderType2AssetItemTypeDict.getValue(e)}static assetItemType2LayaLoaderType(e){return se.assetItemType2LayaLoaderTypeDict.getValue(e)}static getAssetItemKey(e){return e.type+" "+e.url}}class ae{}ae.GameHome="GameHome",ae.GameLaunch="GameLaunch",ae.ModuleLogin="ModuleLogin",ae.Sound="Sound",function(e){e[e.None=0]="None",e[e.Tab=2]="Tab",e[e.Subwindow=3]="Subwindow"}(te||(te={}));class ne{}ne.Test="Test",ne.GameBattle_onSyncNormal="GameFrame_onSyncNormal",ne.GameBattle_onSyncChasingFrame="GameBattle_onSyncChasingFrame",ne.GameBattle_onEntityCreate="GameBattle_onEntityCreate",ne.GameBattle_onEntityRemove="GameFrame_onEntityRemove",ne.GameBattle_onEntityRollbackBegin="GameFrame_onEntityRollbackBegin",ne.GameBattle_onEntityRollbackEnd="GameBattle_onEntityRollbackEnd",ne.GameBattle_onShowDamageUI="GameBattle_onShowDamageUI",ne.GameBattle_onShowHitUI="GameFrame_onShowHitUI",ne.GameBattle_onShakeScreen="GameFrame_onShakeScreen",ne.GameBattle_onScreenScale="GameBattle_onScreenScale",ne.GameBattle_onScreenMove="GameBattle_onScreenMove",ne.GameBattle_onAnimNotify="GameFrame_onAnimNotify",ne.GameBattle_onChangeNotify="GameFrame_onChangeNotify",ne.GameBattle_onCharacterBorn="GameBattle_onCharacterBorn",ne.GameBattle_OnViewAlphaChange="GameBattle_OnViewAlphaChange",ne.GameBattle_onPlaySound="GameFrame_onPlaySound",ne.GameBattle_onPlaySoundBehit="GameFrame_onPlaySoundBehit",ne.GameBattle_onTiggerEffectScreenShow="GameBattle_onTiggerEffectScreenShow",ne.GameBattle_onTiggerEffectScreenHide="GameBattle_onTiggerEffectScreenHide",ne.GameBattle_onSceneFadeOut="GameFrame_onSceneFadeOut",ne.GameBattle_onTiggerUIScreenShow="GameBattle_onTiggerUIScreenShow",ne.GameBattle_onTiggerUIScreenHide="GameBattle_onTiggerUIScreenHide",ne.GameBattle_onTriggerChangeSceneBg="GameBattle_onTriggerChangeSceneBg",ne.GameBattle_onBossAppear="GameBattle_onBossAppear",ne.GameBttle_showBossSpecialView="GameBttle_showBossSpecialView",ne.GameBattle_onShowGameStart="GameBattle_onShowGameStart",ne.GameBattle_onServerError2300="GameBattle_onServerError2300",ne.GameBattle_MonsterCreater="GameBattle_nextAirWallMonster",ne.GameBattle_WaveChange="GameBattle_WaveChange",ne.GameBattle_MonsterHpChange="GameBattle_MonsterHpChange",ne.GameBattle_EntityTeleport="GameBattle_EntityTeleport",ne.GameBattle_PlayerRevive="GameBattle_PlayerRevive",ne.GameBattle_EntityDead="GameBattle_EntityDead",ne.GameFrame_OpenMenu="GameFrame_OpenMenu",ne.GameFrame_CloseMenu="GameFrame_CloseMenu",ne.GameFrame_ReLoginData_Begin="GameFrame_ReLoginData_Begin",ne.GameFrame_ReLoginData_End="GameFrame_ReLoginData_End",ne.GameFrame_Everyday_Update="GameFrame_Everyday_Update",ne.GameFrame_HideOpenDialog="GameFrame_HideOpenDialog",ne.GameFrame_ShowOpenDialog="GameFrame_ShowOpenDialog",ne.GameFrame_TeamMemberNetStateChange="GameFrame_TeamMemberStateChange",ne.GameFrame_TeamMemberLeave="GameFrame_TeamMemberLeave",ne.GameFrame_UseItem="GameFrame_UseItem",ne.GameFrame_ConsumeItem="GameFrame_ConsumeItem",ne.GameFrame_HeroLevelUp="GameFrame_HeroLevelUp",ne.GameFrame_HeroStarUp="GameFrame_HeroStarUp",ne.GameFrame_AddHero="GameFrame_AddHero",ne.GameFrame_HeroSkillLevel="GameFrame_HeroSkillLevel",ne.GameFrame_HeroLeveling="GameFrame_HeroLeveling",ne.GameFrame_UpdateEXP="GameFrame_UpdateEXP",ne.GameFrame_UpdateProp="GameFrame_UpdateProp",ne.GameFrame_BackUpData="GameFrame_BackUpData",ne.GameFrame_RestoreData="GameFrame_RestoreData",ne.GameFrame_ItemExceedBound="GameFrame_ItemExceedBound",ne.GameFrame_LevelExceedBound="GameFrame_LevelExceedBound",ne.GameFrame_LevelExceedMaxLevelInLoop="GameFrame_LevelExceedMaxLevelInLoop",ne.GameFrame_EquipStarUp="GameFrame_EquipStarUp",ne.GameFrame_EquipLevelUp="GameFrame_EquipLevelUp",ne.GameFrame_EquipQualitySelect="GameFrame_EquipQualitySelect",ne.GameFrame_EquipQualitySort="GameFrame_EquipQualitySort",ne.GameFrame_EquipItemSelect="GameFrame_EquipItemSelect",ne.GameFrame_HeroSelectEquip="GameFrame_HeroSelectEquip",ne.GameFrame_BattlePlanDataUpdate="GameFrame_BattlePlanDataUpdate",ne.GameFrame_BattlePlanUnlockNewTeam="GameFrame_BattlePlanUnlockNewTeam",ne.GameFrame_BattlePlanChangeTeamName="GameFrame_BattlePlanChangeTeamName",ne.GameFrame_BattlePlanChangeHero="GameFrame_BattlePlanChangeHero",ne.GameFrame_BattlePlanTeamCentern="GameFrame_BattlePlanTeamCentern",ne.GameFrame_BattlePlanUnlockNewHeroChair="GameFrame_BattlePlanUnlockNewHeroChair",ne.GameFrame_BattlePlanSelectedTeam="GameFrame_BattlePlanSelectedTeam",ne.GameFrame_BattlePlanSecondHero="GameFrame_BattlePlanSecondHero",ne.GameFrame_BattlePlanRefreshCommonSkill="GameFrame_BattlePlanRefreshCommonSkill",ne.GameFrame_HomeWindowBattleStartBtn="GameFrame_HomeWindowBattleStartBtn",ne.GameFrame_HeroWindowEquipPanel="GameFrame_HeroWindowEquipPanel",ne.GameFrame_HeroPanelBack="GameFrame_HeroPanelBack",ne.Gameframe_HeroEquipClose="Gameframe_HeroEquipClose",ne.GameFrame_BattleEnterOnClick="GameFrame_BattleEnterOnClick",ne.GameFrame_SectionEnterOnClick="GameFrame_SectionEnterOnClick",ne.GameFrame_SectionDeltaEnterOnClick="GameFrame_SectionDeltaEnterOnClick",ne.GameFrame_BattlePlanEnter="GameFrame_BattlePlanEnter",ne.GameFrame_GuideJoystickFinish="GameFrame_GuideJoystickFinish",ne.GameFrame_BattleOneWave="GameFrame_GuideAttackStart",ne.GameFrame_GuideAttackFinish="GameFrame_GuideAttackFinish",ne.GameFrame_GuideFirSkillStart="GameFrame_GuideFirSkillStart",ne.GameFrame_GuideFirSkillEnd="GameFrame_GuideFirSkillEnd",ne.GameFrame_GuideBattleEndRemove="GameFrame_GuideBattleEndRemove",ne.GameFrame_SectionBackBtnOnClick="GameFrame_SectionBackBtnOnClick",ne.GameFrame_HomeHeroBtnOnClick="GameFrame_HomeHeroBtnOnClick",ne.GameFrame_HeroPanelChooseHero="GameFrame_HeroPanelChooseHero",ne.GameFrame_HeroBattleChooseHero="GameFrame_HeroBattleChooseHero",ne.GameFrame_HeroBattleHero="GameFrame_HeroBattleHero",ne.GameFrame_HeroInfoShowAddExpPanel="GameFrame_HeroInfoShowAddExpPanel",ne.GameFrame_HeroExpIncreaseByItem="GameFrame_HeroExpIncreaseByItem",ne.GameFrame_HeroChooseFinish="GameFrame_HeroChooseFinish",ne.gameFrame_GuideOpenLevelUpPanel="gameFrame_GuideOpenLevelUpPanel",ne.gameFrame_GuideEquipUIFinish="gameFrame_GuideEquipUIFinish",ne.gameFrame_GuideEquipList="gameFrame_GuideEquipUIFinish",ne.gameFrame_HeroEquip="gameFrame_HeroEquip",ne.GameFrame_FinishGuideOpenHeroEquip="GameFrame_FinishOpenHeroEquip",ne.GameFrame_OpenHeroEquipList="GameFrame_OpenHeroEquipList",ne.GameFrame_gameStart="GameFrame_onShowGameStart",ne.GameFrame_SectionFinishSuccess="GameFrame_SectionFinishSuccess",ne.GameFrame_HomeEquipBtnOnClick="GameFrame_HomeEquipBtnOnClick",ne.GameFrame_EquipSelectFirst="GameFrame_EquipSelectFirst",ne.GameFrame_EquipStrengthenBtn="GameFrame_EquipStrengthenBtn",ne.GameFrame_EquipStrengthenBtn2="GameFrame_EquipStrengthenBtn2",ne.GameFrame_EquipStrengthenEnterBtn="GameFrame_EquipStrengthenEnterBtn",ne.GameFrame_BattleNormalBtn="GameFrame_BattleNormal",ne.GameFrame_BattleSpecialBtn="GameFrame_BattleSpecialBtn",ne.GameFrame_BattleSpecialList="GameFrame_BattleSpecialList",ne.GameFrame_GuideChangeHero="GameFrame_GuideChangeHero",ne.GameFrame_BtnBackOnClick="GameFrame_BtnBackOnClick",ne.GameFrame_HeroLevelGuideUpClose="GameFrame_HeroLevelUpClose";class re{static setChildWindow(e,t){if(e&&(e.moduleWindow=t,e._children))for(let i=0;i<e._children.length;i++)this.setChildWindow(e._children[i],t)}static callChildOnWindowInited(e){if(e){let t=e.onWindowInited;if(t&&t.apply(e),e._children)for(let t=0;t<e._children.length;t++)this.callChildOnWindowInited(e._children[t])}}static callChildOnWindowDestory(e){let t;if(e instanceof fgui.GObject&&(t=e.displayObject),e){let i=e.onWindowDestory;if(i&&i.apply(e))return;for(let e=t.numChildren-1;e>=0;e--){let i=t.getChildAt(e);i.$owner&&this.callChildOnWindowDestory(i.$owner)}}}static callChildOnWindowShow(e){if(e){let t=!0,i=e.onWindowShow;if(i){if(void 0!==e.whenSelfVisiableCallWindowShowAndHide){e.whenSelfVisiableCallWindowShowAndHide&&0==e.visible&&(t=!1)}t&&i.apply(e)}if(t&&e._children)for(let t=e._children.length-1;t>=0;t--)this.callChildOnWindowShow(e._children[t])}}static callChildOnWindowHide(e){if(e){let t=!0,i=e.onWindowHide;if(i){if(void 0!==e.whenSelfVisiableCallWindowShowAndHide){e.whenSelfVisiableCallWindowShowAndHide&&0==e.visible&&(t=!1)}t&&i.apply(e)}if(t&&e._children)for(let t=0;t<e._children.length;t++)this.callChildOnWindowHide(e._children[t])}}static callChildOnTabShow(e){if(e){let t=e.onTabShow;if(t&&t.apply(e),e._children)for(let t=0;t<e._children.length;t++)this.callChildOnTabShow(e._children[t])}}static callChildOnTabHide(e){if(e){let t=e.onTabHide;if(t&&t.apply(e),e._children)for(let t=0;t<e._children.length;t++)this.callChildOnTabHide(e._children[t])}}static autoScreenScaleShrink(e,t,i){let s=On.screenSetting.screenScaleShrink;if(e.scaleX=s,e.scaleY=s,t){let a=fgui.GRoot.inst;switch(t){case Laya.Stage.ALIGN_LEFT:e.x=0;break;case Laya.Stage.ALIGN_CENTER:e.x=.5*(a.width-e.width*s);break;case Laya.Stage.ALIGN_RIGHT:e.x=a.width-e.width*s}switch(i){case Laya.Stage.ALIGN_TOP:e.y=0;break;case Laya.Stage.ALIGN_MIDDLE:e.y=.5*(a.height-e.height*s);break;case Laya.Stage.ALIGN_BOTTOM:e.y=a.height-e.height*s}}}static autoScreenScaleShrink2(e,t=1){let i=On.screenSetting.screenScaleShrinkMax;e.scaleX=i*t,e.scaleY=i*t,e.parent&&(e.x=.5*e.parent.width,e.y=.5*e.parent.height)}static autoScreenScale(e,t,i){let s=On.screenSetting.screenScaleExpand;if(e.scaleX=s,e.scaleY=s,t){let a=fgui.GRoot.inst;switch(t){case Laya.Stage.ALIGN_LEFT:e.x=0;break;case Laya.Stage.ALIGN_CENTER:e.x=.5*(a.width-e.width*s);break;case Laya.Stage.ALIGN_RIGHT:e.x=a.width-e.width*s}switch(i){case Laya.Stage.ALIGN_TOP:e.y=0;break;case Laya.Stage.ALIGN_MIDDLE:e.parent?(this.helpPoint.y=.5*(a.height-e.height*s),this.helpPoint=e.parent.globalToLocal(0,this.helpPoint.y,this.helpPoint),e.y=this.helpPoint.y):e.y=.5*(a.height-e.height*s);break;case Laya.Stage.ALIGN_BOTTOM:e.y=a.height-e.height*s}}}static autoScreenScale2(e){let t=On.screenSetting.screenScaleExpand;e.scaleX=t,e.scaleY=t,e.parent&&(e.x=.5*e.parent.width,e.y=.5*e.parent.height)}static autoScreenScale3(e){let t=On.screenSetting.screenScaleExpand;e.scaleX=t,e.scaleY=t}static autoScreenSize(e,t,i){let s=On.screenSetting.screenScaleExpand;if(e.width=e.sourceWidth*s,e.height=e.sourceHeight*s,t){let s=fgui.GRoot.inst;switch(t){case Laya.Stage.ALIGN_LEFT:e.x=0;break;case Laya.Stage.ALIGN_CENTER:e.x=.5*(s.width-e.width);break;case Laya.Stage.ALIGN_RIGHT:e.x=s.width-e.width}switch(i){case Laya.Stage.ALIGN_TOP:e.y=0;break;case Laya.Stage.ALIGN_MIDDLE:e.parent?(this.helpPoint.y=.5*(s.height-e.height),this.helpPoint=e.parent.globalToLocal(0,this.helpPoint.y,this.helpPoint),e.y=this.helpPoint.y):e.y=.5*(s.height-e.height);break;case Laya.Stage.ALIGN_BOTTOM:e.y=s.height-e.height}}}static autoParentSize(e,t,i){let s=On.screenSetting.screenScaleExpand;if(e.width=e.sourceWidth*s,e.height=e.sourceHeight*s,t){let s=fgui.GRoot.inst;switch(t){case Laya.Stage.ALIGN_LEFT:e.x=0;break;case Laya.Stage.ALIGN_CENTER:e.x=.5*(s.width-e.width);break;case Laya.Stage.ALIGN_RIGHT:e.x=s.width-e.width}switch(i){case Laya.Stage.ALIGN_TOP:e.y=0;break;case Laya.Stage.ALIGN_MIDDLE:e.y=.5*(s.height-e.height);break;case Laya.Stage.ALIGN_BOTTOM:e.y=s.height-e.height}}}static centerScreen(e){e.x=.5*(On.screenSetting.screenWidth-e.width),e.y=.5*(On.screenSetting.screenHeight-e.height)}static centerScreenForCenter(e){e.x=.5*On.screenSetting.screenWidth,e.y=.5*On.screenSetting.screenHeight}static setScreenSize(e){e.width=On.screenSetting.screenWidth,e.height=On.screenSetting.screenHeight}static getValueForPath(e,t,...i){return e.endsWith("()")?re.getFunResultForPath(e,t,...i):re.getFieldValueForPath(e,t)}static getFunResultForPath(e,t,...i){if(!e.endsWith("()"))return re.getFieldValueForPath(e,t);{e=e.replace("()","");let s=re.getFieldValueForPath(e,t);if(s){let a=e.split(/[\.\/]/);if(1==a.length)return 1==i.length?s.apply(t,i[0]):s.apply(t,i);{let e="",n="";for(let t=0;t<a.length-1;t++)e+=n+a[t],n=".";let r=re.getFieldValueForPath(e,t);return 1==i.length?s.apply(r,i[0]):s.apply(r,i)}}}}static getFieldValueForPath(e,t){t||(t=window)||(t=this);let i=e.split(/[\.\/]/),s=t;for(let e=0;e<i.length;e++){if(!s[i[e]])return null;s=s[i[e]]}return s}static setStringsSource(e){let t=fgui.TranslationHelper.strings={},i=e.getConfigList();for(let e=0;e<i.length;e++){let r=i[e],o=r.dict.getValue("name"),l=r.dict.getValue("value"),c=o.indexOf("-");if(null!=l&&-1!=c){var s=o.substr(0,c),a=o.substr(c+1),n=t[s];n||(n={},t[s]=n),n[a]=l}}}static setGray(e){if(e){if(!re.grayscaleFilters){var t=new Laya.ColorFilter(re.grayscaleMat);re.grayscaleFilters=[t]}e.displayObject.filters=re.grayscaleFilters}}static clearFilters(e){e&&(e.displayObject.filters=null)}static get saturationFilters(){return re._saturationFilters||(re._saturationFilters=[new Laya.ColorFilter(re.saturation)]),re._saturationFilters}static get saturationFilters2(){return re._saturationFilters2||(re._saturationFilters2=[new Laya.ColorFilter(re.saturation2)]),re._saturationFilters2}static get saturationFilters3(){return re._saturationFilters3||(re._saturationFilters3=[(new Laya.ColorFilter).adjustColor(0,-50,-100,0)]),re._saturationFilters3}static halfStaturation(e){e&&(e.displayObject.filters=re.saturationFilters)}static half2Staturation(e){e&&(e.displayObject.filters=re.saturationFilters2)}static half3Staturation(e){e&&(e.displayObject.filters=re.saturationFilters3)}static boundEffect(e,t=1e3){e.setPivot(.5,.5),e.setScale(.5,.5),Laya.Tween.to(e,{scaleX:1,scaleY:1},t,Laya.Ease.backOut,Laya.Handler.create(null,()=>{}),0,!0,!0)}}re.helpPoint=new Laya.Point,re.grayscaleMat=[.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,0,0,0,1,0],re.grayscaleFilters=null,re.normalFilters=null,re.saturation=[.5,0,0,0,0,0,.5,0,0,0,0,0,.5,0,0,0,0,0,1,0],re.saturation2=[.25,0,0,0,0,0,.25,0,0,0,0,0,.25,0,0,0,0,0,1,0];var oe,le,ce,he,ue,me,ge,de,pe,Se,Ce,fe=Laya.Point,ye=Laya.Handler;class we extends ee{constructor(){super(...arguments),this.sShowComplete=new Signal,this.sHideComplete=new Signal,this.menuIsCreated=!1,this.isDestoryed=!1,this.enableShowAnimation=!0,this.enableShowSignal=!0,this.enableHideSignal=!0,this._loadAssets=[],this._dynamicAssetsList=[],this.toPoint=new fe,this.srcPoint=new fe,this.sShowSubwindowComplete=new Signal,this.sHideSubwindowComplete=new Signal,this.subwindowDict=new Dictionary,this.subwindowStack=[],this.tabDict=new Dictionary,this.tabHistorys=[],this.tabCtrlViewsMap=new Map,this.sOpenTab=new Typed2Signal}static async AsyncEnableOpen(){return Promise.resolve(!0)}isOpenSubOrTab(e){return this.menuParameter.openIndex==e}addAssetForFguiPackagename(e){this._loadAssets.push({url:e,type:f.FguiPackage})}addAssetForFguiComponent(e){let t=e.DependPackages;for(let e=0;e<t.length;e++)this.addAssetForFguiPackagename(t[e])}getLoadAssets(e,t){let i=this._loadAssets;for(let s=0;s<i.length;s++){let a=se.getAssetItemKey(i[s]);t.hasKey(a)||(e.push(i[s]),t.add(a,i[s]))}return e}unloadAssetForFguiPackagename(e){switch(e){case ae._ResImageUIV1:case ae.__ResFont:case ae.CommonBase:case ae.CommonGame:case ae.CommonFx:case ae.SystemModuleDialog:return}On.asset.unloadFgui(e)}unloadAssetForFguiComponent(e){let t=e.DependPackages;for(let e=0;e<t.length;e++)this.unloadAssetForFguiPackagename(t[e])}unloadAssetFroAssetList(){for(let e=0;e<this._loadAssets.length;e++)this.unloadAssetForFguiPackagename(this._loadAssets[e].url)}addDynamicAsset(e){e&&this._dynamicAssetsList.push(e)}addDynmicAssetForAvatarAll(e){e.getAllAssset(this._dynamicAssetsList)}generateAssetsForDynmic(){this._dynamicAssetsList=[]}getLoadAssetsForDynamic(e,t){let i=this._dynamicAssetsList;for(let s=0;s<i.length;s++){let a=se.getAssetItemKey(i[s]);t.hasKey(a)||(e.push(i[s]),t.add(a,i[s]))}let s=this.subwindowDict.getValues();for(let i=0;i<s.length;i++)s[i].getLoadAssetsForDynamic(e,t);return e}onInit(){this.onMenuCreate(),super.onInit()}onMenuCreate(){this.setChildWindow(this.contentPane),this.callChildOnWindowInited(this.contentPane),this.menuIsCreated=!0,this.onMenuOpen(this.menuParameter)}setCloseBtnEvent(){this.contentPane&&this.contentPane.m_frame&&this.contentPane.m_frame.getChild("closeBtn")&&this.contentPane.m_frame.getChild("closeBtn").onClick(this,this.menuClose)}setBackBtnEvent(){this.contentPane&&this.contentPane.m_frame&&this.contentPane.m_frame.getChild("closeBtn")&&this.contentPane.m_frame.getChild("closeBtn").onClick(this,this.menuBack)}onMenuOpen(e){switch(this.enableShowSignal=!0,this.enableShowAnimation=!0,this.menuParameter=e,e.openType){case te.Subwindow:this.enableShowSignal=!1,this.enableShowAnimation=!1,this.openSubwindowByIndex(e.openIndex,!1,...e.args);break;case te.Tab:this.openTab(e.openIndex);break;default:On.event.dispatch(ne.GameFrame_OpenMenu,this.menuId,e.openType)}}windowShow(){this.windowContainer?this.showOn(this.windowContainer):this.show()}menuShow(e){switch(this.menuParameter.openType){case te.Subwindow:this.contentPane||this.onInit();break;default:this.showOn(e)}}menuClose(){On.menu.close(this.menuId)}menuBack(){On.menu.back(this.menuId)}destory(){this.callChildOnWindowDestory(this.contentPane),this.onMenuDestory(),this.sShowComplete.removeAll(),this.sHideComplete.removeAll(),this.sShowSubwindowComplete.removeAll(),this.sHideSubwindowComplete.removeAll(),this.tabDict.clear();let e=this.subwindowDict.getValues();for(let t=0;t<e.length;t++){e[t].destory()}this.subwindowDict.clear(),this.contentPane&&(this.contentPane.dispose(),this.contentPane=null),this.unloadAssetFroAssetList(),super.dispose(),this.isDestoryed=!0}onMenuDestory(){}doShowAnimation(){this.onWindowWillShow(),1==this.openAnimation?(this.srcPoint.x=this.panel.x,this.srcPoint.y=this.panel.y,this.panel.setScale(.1,.1),this.calBuutonPos(),this.panel.setXY(this.toPoint.x,this.toPoint.y),Laya.Tween.to(this.panel,{scaleX:1,scaleY:1,x:this.srcPoint.x,y:this.srcPoint.y},300,Laya.Ease.quadOut,ye.create(this,()=>{this.onShown()}))):super.doShowAnimation()}get panel(){return this.contentPane.m_panel?this.contentPane.m_panel:this.contentPane}doHideAnimation(){this.onWindowWillHide(),1==this.closeAnimation?(this.panel.setScale(1,1),this.calBuutonPos(),Laya.Tween.to(this.panel,{scaleX:.1,scaleY:.1,x:this.toPoint.x,y:this.toPoint.y},300,Laya.Ease.quadOut,ye.create(this,()=>{this.panel.x=this.srcPoint.x,this.panel.y=this.srcPoint.y,this.hideImmediately()}))):super.doHideAnimation()}get openAnimation(){return null==this.menuConfig?0:this.menuConfig.openAnimation}get closeAnimation(){return null==this.menuConfig?0:this.menuConfig.closeAnimation}get menuConfig(){return this.menuId>0?On.config.menu.getConfig(this.menuId):null}calBuutonPos(){}onShown(){this.enableHideSignal=!0,this.onShowComplete(),this.contentPane&&this.callChildOnWindowShow(this.contentPane)}onMenuClose(){this.hide();let e=this.subwindowDict.getValues();for(let t=0;t<e.length;t++){e[t].hide()}}onHide(){this.enableShowSignal=!0,this.onHideComplete(),this.clearTabHistorys(),this.contentPane&&this.callChildOnWindowHide(this.contentPane)}onShowComplete(){this.enableShowSignal&&this.sShowComplete.dispatch()}onHideComplete(){this.enableHideSignal&&this.sHideComplete.dispatch()}getSubwindow(e){return this.subwindowDict.getValue(e)}registerSubwindow(e){this.subwindowDict.add(e.subwindowIndex,e)}__onSubWindowClose(e){for(let t=this.subwindowStack.length-1;t>=0;t--)this.subwindowStack[t]==e&&this.subwindowStack.splice(t,1)}__getLastOpenSubWindow(e){for(let t=this.subwindowStack.length-1;t>=0;t--){let i=this.subwindowStack[t];if(!e||-1==e.indexOf(i))return i}return null}closeAllSubwindowSelf(e){let t=[];for(let e=this.subwindowStack.length-1;e>=0;e--)t.push(this.subwindowStack[e]);for(let i=0;i<t.length;i++){let s=t[i];e&&-1!=e.indexOf(s)||s.closeSelf()}}closeLastSubwindowSelf(){let e=this.__getLastOpenSubWindow();e&&e.closeSelf()}getLastMenuParameter(){let e=this.__getLastOpenSubWindow();return e?e.menuParameter:this.menuParameter}openSubwindow(e,t=!1,...i){e.__backSubWindow=this.__getLastOpenSubWindow([e]),this.menuParameter.openType=te.Subwindow,this.menuParameter.openIndex=e.subwindowIndex,this.menuParameter.args=i;let s={openType:this.menuParameter.openType,openIndex:this.menuParameter.openIndex,args:i,dontCloseOther:t};if(!t){let t={on:()=>{if(e.whenOpenCloseMainwindow&&(this.enableHideSignal=!1,this.hideImmediately()),e.whenOpenCloseOthersubwindow){let t=this.subwindowDict.getValues;for(let i=0;i<t.length;i++){let s=t[i];s!=e&&(s.hideImmediately(),this.__onSubWindowClose(s))}}this.sShowSubwindowComplete.dispatch()}};e.sShowComplete.addOnce(t.on,t)}let a=this.subwindowStack.indexOf(e);-1!=a&&this.subwindowStack.splice(a,1),this.subwindowStack.push(e),e.menuIsCreated?e.onMenuOpen(s):e.menuParameter=s,e.showOn(this.windowContainer),On.event.dispatch(ne.GameFrame_OpenMenu,this.menuId,s.openType,s.openIndex)}openSubwindowByIndex(e,t=!1,...i){let s=this.getSubwindow(e);this.openSubwindow(s,t,...i)}onSubwindowBack(e){this.menuParameter.openType=te.None,this.menuParameter.openIndex=0,this.sShowComplete.addOnce(()=>{e.hide()},e),this.windowContainer.parent&&e.hide(),this.showOn(this.windowContainer),this.subwindowStack=[]}getTabDispyaObjects(e){if(this.tabDict.hasKey(e))return this.tabDict.getValue(e);let t=[];return this.tabDict.add(e,t),t}registerControllerTabViews(e,t=null){t||(t=this.contentPane);let i=t.numChildren;for(let a=0;a<i;a++){let i=t.getChildAt(a);if(i._gears&&i._gears.length>0)for(let t of i._gears)if(t&&t.controller==e&&t instanceof fgui.GearDisplay&&t.pages&&t.pages.length>0)for(let e of t.pages){let t=toInt(e);var s;this.registerTab(t,i),this.tabCtrlViewsMap.has(t)?s=this.tabCtrlViewsMap.get(t):(s=[],this.tabCtrlViewsMap.set(t,s)),console.log(t,i.name),s.push(i)}}}registerControllerTab(e,t=null){t||(t=this.contentPane);let i=t.numChildren;for(let s=0;s<i;s++){let i=t.getChildAt(s);if(i._gears&&i._gears.length>0)for(let t of i._gears)if(t&&t.controller==e&&t instanceof fgui.GearDisplay&&t.pages&&t.pages.length>0)for(let e of t.pages){let t=toInt(e);this.registerTab(t,i)}}}registerTab(e,t){this.getTabDispyaObjects(e).push(t)}setTabVisiable(e,t){let i;i=e instanceof Array?e:this.getTabDispyaObjects(e);for(let e=0;e<i.length;e++)t?this.callChildOnTabShow(i[e]):i[e].visible&&this.callChildOnTabHide(i[e]),i[e].visible=t}setOpenTab(e){this.menuParameter.openIndex=e;let t=this.tabDict.getKeys();for(let i=0;i<t.length;i++)t[i]!=e&&this.setTabVisiable(t[i],!1);this.tabCtrlViewsMap.forEach((t,i)=>{i!=e&&this.setTabVisiable(t,!1)});var i=this.tabCtrlViewsMap.get(e);i&&this.setTabVisiable(i,!0),this.setTabVisiable(e,!0),this.onOpenTab(e)}openTab(e){this.tabHistorys.push(e),this.setOpenTab(e),this.sOpenTab.dispatch(e,this),On.event.dispatch(ne.GameFrame_OpenMenu,this.menuId,te.Tab,e)}onOpenTab(e){}backTab(){if(this.tabHistorys.length>0){let e;for(let t=this.tabHistorys.length-1;t>=0;t--)this.tabHistorys[t]==this.menuParameter.openIndex&&t>0&&this.tabHistorys[t-1]!=this.menuParameter.openIndex&&(e=this.tabHistorys[t-1]);void 0===e?this.menuBack():this.openTab(e)}}clearTabHistorys(){this.tabHistorys=[]}setChildWindow(e){re.setChildWindow(e,this)}callChildOnWindowInited(e){re.callChildOnWindowInited(e)}callChildOnWindowDestory(e){re.callChildOnWindowDestory(e)}callChildOnWindowShow(e){re.callChildOnWindowShow(e)}callChildOnWindowHide(e){re.callChildOnWindowHide(e)}callChildOnTabShow(e){re.callChildOnTabShow(e)}callChildOnTabHide(e){re.callChildOnTabHide(e)}}class Le extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("ModuleLogin","LoginWindowUI")}constructFromXML(e){super.constructFromXML(e),this.m_Show=this.getController("Show"),this.m_txt_resVer=this.getChild("txt_resVer"),this.m_txt_gamever=this.getChild("txt_gamever"),this.m_screenBG=this.getChild("screenBG"),this.m_loginPanel=this.getChild("loginPanel"),this.m_wxPanel=this.getChild("wxPanel"),this.m_cdkPanel=this.getChild("cdkPanel"),this.m_panelCheckID=this.getChild("panelCheckID"),this.m_btnBulletin=this.getChild("btnBulletin"),this.m_panelBulletin=this.getChild("panelBulletin"),this.m_panelServer=this.getChild("panelServer")}}Le.URL="ui://4698ugpknz0c0",Le.DependPackages=["ModuleLogin","GameLaunch"],function(e){e[e.None=0]="None",e[e.Man=1]="Man",e[e.Woman=2]="Woman"}(oe||(oe={}));class _e{constructor(){this.language="",this.nickName="",this.avatarUrl="",this.gender=oe.None,this.country="",this.province="",this.city="",this.unionId="",this.openId="",this.sessionId="",this.sign=""}ToString(){return" UserInfo::<br/>NickName:"+this.nickName+",<br/>AvatarUrl:"+this.avatarUrl+",<br/>OpenID:"+this.openId+",<br/>City:"+this.city+",<br/>SessionID:"+this.sessionId}}class Te{constructor(){this.code=""}}class ve{}!function(e){e[e.RemoveRankList=0]="RemoveRankList",e[e.FetchFriendRankList=1]="FetchFriendRankList",e[e.SubmitScore=3]="SubmitScore",e[e.GameOverRank=4]="GameOverRank",e[e.FetchGroupFriendRankList=5]="FetchGroupFriendRankList",e[e.NotifyTime=6]="NotifyTime"}(le||(le={}));class Ge{constructor(){this.m_stSystemInfo=null,this.m_stSdkUserInfo=null,this.m_stSdkLoginInfo=null,this.m_stSystemInfo=new ve,this.m_stSdkUserInfo=new _e,this.m_stSdkLoginInfo=new Te}static get platformWX(){return On.browserSetting.isWeixinMinigame}get userInfo(){return this.m_stSdkUserInfo}get systemInfo(){return this.m_stSystemInfo}async Login(e=null,t="",i=1,s=1){return null}async Login2(e=null,t=""){return null}async CheckCdk(e,t){return null}async CheckIDCard(e,t,i){return null}async Areas(){return null}async newAndUseRole(e,t,i){return null}async useRole(e,t){return null}async FastLogin(e,t,i){return null}async GameDoSdkAuthAsync(){return null}async GameDoSdkLoginAsync(){return new Promise(e=>{e(this.m_stSdkLoginInfo)})}GetLaunchOptions(){return{}}async UserCheck(){return new Promise(e=>{e(!0)})}Share(e,t,i){return null}}class Pe extends Ge{constructor(){super()}async Login(e=null,t="",i=1,s=1){net.config.channel="mine";let a=e;return isNullOrEmpty(a)&&(a=Ie.LocationUrlParam("name")||Ie.RandName(2,7)),new Promise(e=>{net.auth.mineLogin(a,t,a,s,i,function(t,i){if(t){net.logic.connect();let t=function(i){net.logic.gamerLoginS2C.off(t),e(i)};net.logic.gamerLoginS2C.on(t)}else e(i)})})}async Login2(e=null,t=""){net.config.channel="mine";let i=e;return isNullOrEmpty(i)&&(i=Ie.LocationUrlParam("name")||Ie.RandName(2,7)),new Promise(e=>{net.auth.mineLogin2(i,t,function(t,i){e(i)})})}async CheckCdk(e,t){return new Promise(i=>{net.auth.checkcdk(e,t,function(e,t){i(e?{}:t)})})}async CheckIDCard(e,t,i){return new Promise(s=>{net.auth.checkIDCard(e,t,i,function(e,t){s(e?{}:t)})})}async Areas(){return new Promise(e=>{net.auth.areas(function(t,i){t?e(i):this.Areas()})})}async newAndUseRole(e,t,i){return new Promise(s=>{net.auth.newAndUseRole(e,t,1,i,"",function(e,t){if(e){net.logic.connect();let e=function(t){net.logic.gamerLoginS2C.off(e),s(t)};net.logic.gamerLoginS2C.on(e)}else s(t)})})}async useRole(e,t){return new Promise(i=>{net.auth.useRole(e,t,function(e,t){if(e){net.logic.connect();let e=function(t){net.logic.gamerLoginS2C.off(e),i(t)};net.logic.gamerLoginS2C.on(e)}else i(t)})})}async FastLogin(e,t,i){return net.config.channel=t,new Promise(s=>{net.auth.fastLogin(e,t,i,function(e,t){if(e){net.logic.connect();let e=function(t){net.logic.gamerLoginS2C.off(e),s(t)};net.logic.gamerLoginS2C.on(e)}else s(t)})})}async GameDoSdkAuthAsync(){return this.m_stSdkUserInfo.nickName="ANTMINE-NICKNAME",this.m_stSdkUserInfo.avatarUrl="https://wx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKpmpnxfYeeUqFOlwK9x260xibs866I7NpmuHjgerLXgUk1B77HpIo2oZP0wAbnib4Lkc30N7yibYoww/132",this.m_stSdkUserInfo.gender=oe.Man,this.m_stSdkUserInfo.city="上海",this.m_stSdkUserInfo.country="中国",this.m_stSdkUserInfo.language="zh_CN",this.m_stSdkUserInfo.province="上海",new Promise(e=>{e(this.m_stSdkUserInfo)})}GetLaunchOptions(){return{key1:Ie.LocationUrlParam("key1"),key2:Ie.LocationUrlParam("key2")}}}class ke extends Ge{constructor(){super(),this.GetSystemInfo(),wx.setKeepScreenOn&&wx.setKeepScreenOn({keepScreenOn:!0,success:function(){console.log("常亮设置成功！")}})}async WXGetSdkAuthSetting(){return new Promise(e=>{wx.getSetting({success:function(t){console.info("success: wx.getSetting",t),e(t.authSetting["scope.userInfo"])},fail:function(t){console.log("fail: wx.getSetting",t.errMsg),e(!1)}})})}async UserCheck(){return await this.WXGetSdkAuthSetting()}async WXGetSdkUserInfo(){return new Promise(e=>{console.log("发起向微信获取用户信息"),wx.getUserInfo({success:t=>{console.info("success: wx.getUserInfo",t),e(t.userInfo)},fail:t=>{console.log("fail: wx.getUserInfo",t.errMsg),e(null)}})})}async WXAuth(){let e=await this.GameDoSdkAuthAsync();for(;!e;)e=await this.GameDoSdkAuthAsync();return e}async Login(e=null,t="",i=1,s=1){let a=await this.GameDoSdkLoginAsync();for(;!a;)a=await this.GameDoSdkLoginAsync();let n=this.m_stSdkLoginInfo.code;return net.config.channel="wechat",new Promise(e=>{net.auth.sdkLogin(n,"",this.m_stSdkUserInfo.nickName,s,i,null,function(t,i){if(t){net.logic.connect();let t=function(i){net.logic.gamerLoginS2C.off(t),e(i)};net.logic.gamerLoginS2C.on(t)}else e(i)})})}async Login2(e=null,t=""){let i=await this.GameDoSdkLoginAsync();for(;!i;)i=await this.GameDoSdkLoginAsync();let s=this.m_stSdkLoginInfo.code;return net.config.channel="wechat",new Promise(e=>{net.auth.sdkLogin2(s,"",function(t,i){e(i)})})}async CheckCdk(e,t){return new Promise(i=>{net.auth.checkcdk(e,t,function(e,t){i(e?{}:t)})})}async CheckIDCard(e,t,i){return new Promise(s=>{net.auth.checkIDCard(e,t,i,function(e,t){s(e?{}:t)})})}async Areas(){return new Promise(e=>{net.auth.areas(function(t,i){t?e(i):this.Areas()})})}async newAndUseRole(e,t,i){return t=this.m_stSdkLoginInfo.code,new Promise(s=>{net.auth.newAndUseRole(e,t,1,i,"",function(e,t){if(e){net.logic.connect();let e=function(t){net.logic.gamerLoginS2C.off(e),s(t)};net.logic.gamerLoginS2C.on(e)}else s(t)})})}async useRole(e,t){return new Promise(i=>{net.auth.useRole(e,t,function(e,t){if(e){net.logic.connect();let e=function(t){net.logic.gamerLoginS2C.off(e),i(t)};net.logic.gamerLoginS2C.on(e)}else i(t)})})}async GameDoSdkAuthAsync(){let e=await this.WXGetSdkAuthSetting()?await this.WXGetSdkUserInfo():await this.WXCreateWXUserButton();return e?(this.SetUserInfo(e),new Promise(e=>{e(this.m_stSdkUserInfo)})):new Promise(e=>{e(null)})}async GameDoSdkLoginAsync(){return console.log("发起登录微信 wx.login"),new Promise(e=>{wx.login({success:t=>{console.info("success: wx.login",t),this.m_stSdkLoginInfo.code=t.code,e(this.m_stSdkLoginInfo)},fail:t=>{console.info("fail: wx.login",t),e(null)}})})}async WXCreateWXUserButton(){let e=wx.createUserInfoButton({type:"text",lang:"zh_CN",text:"",style:{left:0,top:0,width:2e3,height:2e3,lineHeight:40,textAlign:"center",fontSize:16,borderRadius:4}});return e.show(),new Promise(t=>{e.onTap(function(i){i.userInfo?(console.log("按钮获取用户信息成功","wxLogin auth success"),e.hide(),t(i.userInfo)):(console.error("按钮获取用户信息失败"),t(null))})})}SetUserInfo(e){console.info("用户信息",e),this.m_stSdkUserInfo.language=e.language,this.m_stSdkUserInfo.nickName=e.nickName,this.m_stSdkUserInfo.avatarUrl=e.avatarUrl,this.m_stSdkUserInfo.gender=e.gender,this.m_stSdkUserInfo.country=e.country,this.m_stSdkUserInfo.province=e.province,this.m_stSdkUserInfo.city=e.city}GetSystemInfo(){let e=wx.getSystemInfoSync();return console.info("wx.getSystemInfoSync:",e),this.m_stSystemInfo.benchmarkLevel=e.benchmarkLevel,this.m_stSystemInfo.model=e.model,this.m_stSystemInfo.pixelRatio=e.pixelRatio,this.m_stSystemInfo.platform=e.platform,this.m_stSystemInfo.screenHeight=e.screenHeight,this.m_stSystemInfo.screenWidth=e.screenWidth,this.m_stSystemInfo.system=e.system,this.m_stSystemInfo.version=e.version,this.m_stSystemInfo.windowHeight=e.windowHeight,this.m_stSystemInfo.windowWidth=e.windowWidth,this.m_stSystemInfo.SDKVersion=e.SDKVersion,this.m_stSystemInfo}Share(e,t,i){return new Promise(s=>{wx.shareAppMessage({title:e,imageUrl:t,query:i,success:function(){console.error("share success!"),s(!0)},fail:function(){console.error("share fail!"),s(!1)}})})}GetLaunchOptions(){return wx.getLaunchOptionsSync().query}}class Ie{static LocationUrlParam(e){if(Engine.borwer.isWXGame)return null;var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),i=window.location.search.substr(1).match(t);return null!=i?unescape(i[2]):null}static RandName(e,t,i=!0){let s="",a=e,n=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"];i&&(a=Math.round(Math.random()*(t-e))+e);for(var r=0;r<a;r++){s+=n[Math.round(Math.random()*(n.length-1))]}return s}static get platform(){return Ie._insPlatform||(Engine.borwer.isWXGame&&Ie.enableWXLogin?Ie._insPlatform=new ke:Ie._insPlatform=new Pe),Ie._insPlatform}}Ie.enableWXLogin=VersionConfig.IsEnableWx,Ie._insPlatform=null;class Me extends Le{onWindowShow(){this.m_panelBulletin.m_bg.m_btn_Close.onClick(this,this.onCloseBulletin),this.m_panelServer.m_btnChange.onClick(this,this.onChangeServer),this.m_panelServer.m_btnStart.onClick(this,this.onStartGame),this.m_panelServer.m_bg.m_btn_Close.onClick(this,this.onReturnServer),this.m_panelCheckID.m_btnClose.onClick(this,this.onCloseCheckID),this.m_panelCheckID.m_btnClose.visible=!1,this.m_panelCheckID.m_btnMake.onClick(this,this.onMakeCheckID),this.m_loginPanel.m_btn_login.onClick(this,this.onClickLogin),this.m_loginPanel.m_btn_randomLogin.onClick(this,this.onClickRandomLogin),this.m_cdkPanel.m_btn_cdk.onClick(this,this.onClickCdk),On.net.gamerLoginS2C.on(this.GamerLoginS2C,this),On.event.add("SUCCESS_LOGIN",this.LoginSuccess,this),On.event.add("LOGIN_CDK",this.LoginCdk,this),On.event.add("ERROR_CDK",this.ErrorCdk,this),On.event.add("ERROR_IDCARD",this.ErrorIdCard,this),On.event.add("ERROR_AREAS",this.ErrorAreas,this),On.event.add("SUCCESS_AREAS",this.SucessAreas,this),On.event.add("INDULGE_END",this.IndulgeEnd,this),this.Init()}onWindowHide(){this.m_panelBulletin.m_bg.m_btn_Close.offClick(this,this.onCloseBulletin),this.m_panelServer.m_btnChange.offClick(this,this.onChangeServer),this.m_panelServer.m_btnStart.offClick(this,this.onStartGame),this.m_panelServer.m_bg.m_btn_Close.offClick(this,this.onReturnServer),this.m_panelCheckID.m_btnClose.onClick(this,this.onCloseCheckID),this.m_panelCheckID.m_btnMake.onClick(this,this.onMakeCheckID),this.m_loginPanel.m_btn_login.offClick(this,this.onClickLogin),this.m_loginPanel.m_btn_randomLogin.offClick(this,this.onClickRandomLogin),this.m_cdkPanel.m_btn_cdk.offClick(this,this.onClickCdk),On.net.gamerLoginS2C.off(this.GamerLoginS2C,this),On.event.remove("SUCCESS_LOGIN",this.LoginSuccess,this),On.event.remove("LOGIN_CDK",this.LoginCdk,this),On.event.remove("ERROR_CDK",this.ErrorCdk,this),On.event.remove("ERROR_IDCARD",this.ErrorIdCard,this),On.event.remove("ERROR_AREAS",this.ErrorAreas,this),On.event.remove("SUCCESS_AREAS",this.SucessAreas,this),On.event.remove("INDULGE_END",this.IndulgeEnd,this),this.Reset()}onCloseBulletin(){this.m_Show.selectedIndex=3}onChangeServer(){this.m_panelServer.m_Server.selectedIndex=1}onReturnServer(){this.m_panelServer.m_Server.selectedIndex=0}onCloseCheckID(){this.GetServer()}onMakeCheckID(){switch(this.m_panelCheckID.m_Type.selectedIndex){case 3:On.moduleModel.login.isIndulge?this.m_Show.selectedIndex=0:this.GetServer();break;case 1:this.SendIDCard()}}onStartGame(){let e=this.m_panelServer.lastServer;if(!e)return void On.system.toastText("尚未获取服务器列表！");On.localStorage.server=e.id;let t=this.m_panelServer.GetRole(e.id);t?On.sender.login.useRole(this.login_session,t.id):On.sender.login.newAndUseRole(this.login_session,this.m_loginPanel.account,e.id)}onClickLogin(){this.m_loginPanel.password="123",Boolean(this.m_loginPanel.account)&&Boolean(this.m_loginPanel.password)?On.sender.login.login(this.m_loginPanel.account,this.m_loginPanel.password,!0):On.system.toastText("请输入账号和密码！")}onClickRandomLogin(){this.m_loginPanel.account=Ie.RandName(2,7),On.sender.login.login(this.m_loginPanel.account,"123",!0)}onClickCancel(){this.m_Show.selectedIndex=0}onClickCdk(){let e=this.login_session,t=this.m_cdkPanel.cdk,i=this.m_loginPanel.account,s=this.m_loginPanel.password;On.sender.login.check(e,t,i,s)}GamerLoginS2C(e){e.error}LoginSuccess(e,t){this.login_session=e,this.m_panelServer.SetRoles(t);let i=this.m_loginPanel.account;VersionConfig.IsOpenIDCard&&-1==["jjsg1","jjsg2","jjsg3","jjsg4","jjsg5","jjsg6"].indexOf(i)?this.SendIDCard():this.GetServer(),this.m_Show.selectedIndex=1}LoginCdk(e){this.login_session=e,this.m_Show.selectedIndex=4}ErrorCdk(e){switch(e){case 1017:On.system.toastText("验证码错误！");break;case 1001:On.system.toastText("验证时间超时！"),this.onStartGame()}}ErrorIdCard(e){switch(e){case 0:case 1023:""!=this.m_panelCheckID.m_labName.text&&""!=this.m_panelCheckID.m_labID.text&&On.system.toastText("实名制验证成功！"),this.GetServer();break;case 1021:case 1022:case 1026:On.system.toastText("实名制验证失败！");case 1025:this.m_Show.selectedIndex=5,this.m_panelCheckID.m_Type.selectedIndex=1;break;case 1024:this.m_Show.selectedIndex=5,this.m_panelCheckID.m_Type.selectedIndex=3}}ErrorAreas(){On.system.toastText("拉取服务器错误！")}SucessAreas(e){e.sort((e,t)=>e.id-t.id),this.m_panelServer.Open(e)}IndulgeEnd(){if(5!=this.m_Show.selectedIndex){switch(On.moduleModel.login.error){case 1024:this.m_panelCheckID.m_Type.selectedIndex=0;break;default:this.m_panelCheckID.m_Type.selectedIndex=3}}}Init(){this.m_txt_gamever.text="GameVersion:"+On.version.localAppVersionData.toString(),this.m_txt_resVer.text="ResVersion:"+On.version.localResVersionData.toString(),this.StartGame()}Reset(){this.m_txt_gamever.text="",this.m_txt_resVer.text="",this.m_Show.selectedIndex=0}GetServer(){On.sender.login.areas()}StartGame(){Ie.platform instanceof ke&&VersionConfig.IsEnableWx?(On.sender.login.login("",""),this.m_Show.selectedIndex=3):this.m_Show.selectedIndex=0}SendIDCard(){let e=this.login_session,t=this.m_panelCheckID.m_labName.text,i=this.m_panelCheckID.m_labID.text;On.sender.login.CheckIDCard(e,t,i)}}!function(e){e[e.Login=0]="Login",e[e.LoginGuest=1]="LoginGuest",e[e.Register=2]="Register",e[e.Agreement=3]="Agreement"}(ce||(ce={}));class be extends we{constructor(){super(),this.addAssetForFguiComponent(Me)}generateAssetsForDynmic(){super.generateAssetsForDynmic()}onMenuCreate(){let e=Me.createInstance();this.conent=e,this.contentPane=e,super.onMenuCreate()}onShowComplete(){super.onShowComplete()}onHideComplete(){super.onHideComplete()}}class De extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","WindowHomeUI")}constructFromXML(e){super.constructFromXML(e),this.m_Tab=this.getController("Tab"),this.m_bg=this.getChild("bg"),this.m_mainMenu=this.getChild("mainMenu"),this.m_chooseHero=this.getChild("chooseHero"),this.m_shop=this.getChild("shop"),this.m_chooseGameFormat=this.getChild("chooseGameFormat"),this.m_result=this.getChild("result"),this.m_menuTopPanel=this.getChild("menuTopPanel")}}De.URL="ui://moe42ygrsqzy8a",De.DependPackages=["GameHome","GameLaunch"];class Be extends De{}!function(e){e[e.MenuMenu=0]="MenuMenu",e[e.ChooseHero=1]="ChooseHero",e[e.Shop=2]="Shop",e[e.ChooseGameFormat=3]="ChooseGameFormat",e[e.Result=4]="Result"}(he||(he={}));class Fe extends we{constructor(){super(),this.addAssetForFguiComponent(Be)}generateAssetsForDynmic(){super.generateAssetsForDynmic()}onMenuCreate(){let e=Be.createInstance();this.conent=e,this.contentPane=e,this.registerControllerTabViews(this.conent.m_Tab),super.onMenuCreate()}openTab(e){this.conent&&this.conent.m_Tab.setSelectedIndex(e),super.openTab(e)}onShowComplete(){super.onShowComplete()}onHideComplete(){super.onHideComplete()}}class Ae extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","WindowWarUI")}constructFromXML(e){super.constructFromXML(e),this.m_bg=this.getChild("bg"),this.m_menuTopPanel=this.getChild("menuTopPanel"),this.m_container=this.getChild("container"),this.m_chectPopupPanel=this.getChild("chectPopupPanel"),this.m_pausePanel=this.getChild("pausePanel")}}Ae.URL="ui://moe42ygrsqzy9c",Ae.DependPackages=["GameHome","GameLaunch"],function(e){e[e.None=0]="None",e[e.Hero=1]="Hero",e[e.Trap=2]="Trap",e[e.Enemy=3]="Enemy",e[e.Boss=4]="Boss",e[e.Warrior=18]="Warrior",e[e.Health=5]="Health",e[e.Gold=6]="Gold",e[e.Armor=7]="Armor",e[e.Cannon=8]="Cannon",e[e.Barrel=9]="Barrel",e[e.Chest=10]="Chest",e[e.Bomb=11]="Bomb",e[e.Poison=12]="Poison",e[e.Horseshoe=13]="Horseshoe",e[e.Lightning=14]="Lightning",e[e.Multiplier=15]="Multiplier",e[e.Skull=16]="Skull"}(ue||(ue={})),function(e){e[e.Base=1]="Base",e[e.Bomb=2]="Bomb",e[e.Gun=3]="Gun",e[e.Key=4]="Key"}(me||(me={}));class He{static degToRad(e){return e*He.DEG_TO_RAD}static radToDeg(e){return e*He.RAD_TO_DEG}static getNextPowerOfTwo(e){if(e>0&&0==(e&e-1))return e;for(var t=1;t<e;)t<<=1;return t}static isPowerOfTwo(e,t){return e>0&&0==(e&e-1)&&t>0&&0==(t&t-1)}static random(e,t){if(void 0===e&&(e=0),void 0===t&&(t=1),e===t)return e;if(e>t){var i=e;e=t,t=i}return Math.random()*(t-e)+e}static between(e,t){if(void 0===e&&(e=0),void 0===t&&(t=1),e===t)return e;if(e>t){var i=e;e=t,t=i}return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e}static fuzzyEqual(e,t,i){return void 0===i&&(i=1e-4),Math.abs(e-t)<i}static fuzzyLessThan(e,t,i){return void 0===i&&(i=1e-4),e<t+i}static fuzzyGreaterThan(e,t,i){return void 0===i&&(i=1e-4),e>t-i}static fuzzyCeil(e,t){return void 0===t&&(t=1e-4),Math.ceil(e-t)}static fuzzyFloor(e,t){return void 0===t&&(t=1e-4),Math.floor(e+t)}static average(){for(var e=0,t=arguments.length,i=0;i<t;i++)e+=+arguments[i];return e/t}static shear(e){return e%1}static snapTo(e,t,i){return void 0===i&&(i=0),0===t?e:(e-=i,i+(e=t*Math.round(e/t)))}static snapToFloor(e,t,i){return void 0===i&&(i=0),0===t?e:(e-=i,i+(e=t*Math.floor(e/t)))}static snapToCeil(e,t,i){return void 0===i&&(i=0),0===t?e:(e-=i,i+(e=t*Math.ceil(e/t)))}static roundTo(e,t,i){void 0===t&&(t=0),void 0===i&&(i=10);var s=Math.pow(i,-t);return Math.round(e*s)/s}static floorTo(e,t,i){void 0===t&&(t=0),void 0===i&&(i=10);var s=Math.pow(i,-t);return Math.floor(e*s)/s}static ceilTo(e,t,i){void 0===t&&(t=0),void 0===i&&(i=10);var s=Math.pow(i,-t);return Math.ceil(e*s)/s}static trunc(e){return isFinite(e)?e-e%1||(e<0?-0:0===e?e:0):e}static rotateToAngle(e,t,i){return void 0===i&&(i=.05),e===t?e:(Math.abs(t-e)<=i||Math.abs(t-e)>=He.PI2-i?e=t:(Math.abs(t-e)>Math.PI&&(t<e?t+=He.PI2:t-=He.PI2),t>e?e+=i:t<e&&(e-=i)),e)}static getShortestAngle(e,t){var i=t-e;return 0===i?0:i-360*Math.floor((i- -180)/360)}static angleBetween(e,t,i,s){return Math.atan2(s-t,i-e)}static angleBetweenY(e,t,i,s){return Math.atan2(i-e,s-t)}static angleBetweenPoints(e,t){return Math.atan2(t.y-e.y,t.x-e.x)}static angleBetweenPointsY(e,t){return Math.atan2(t.x-e.x,t.y-e.y)}static reverseAngle(e){return this.normalizeAngle(e+Math.PI)}static normalizeAngle(e){return(e%=2*Math.PI)>=0?e:e+2*Math.PI}static maxAdd(e,t,i){return Math.min(e+t,i)}static minSub(e,t,i){return Math.max(e-t,i)}static wrap(e,t,i){var s=i-t;if(s<=0)return 0;var a=(e-t)%s;return a<0&&(a+=s),a+t}static wrapValue(e,t,i){return((e=Math.abs(e))+(t=Math.abs(t)))%Math.abs(i)}static isOdd(e){return!!(1&e)}static isEven(e){return!(1&e)}static min(){if(1===arguments.length&&"object"==typeof arguments[0])e=arguments[0];else var e=arguments;for(var t=1,i=0,s=e.length;t<s;t++)e[t]<e[i]&&(i=t);return e[i]}static max(){if(1===arguments.length&&"object"==typeof arguments[0])e=arguments[0];else var e=arguments;for(var t=1,i=0,s=e.length;t<s;t++)e[t]>e[i]&&(i=t);return e[i]}static minProperty(e){if(2===arguments.length&&"object"==typeof arguments[1])t=arguments[1];else var t=arguments.slice(1);for(var i=1,s=0,a=t.length;i<a;i++)t[i][e]<t[s][e]&&(s=i);return t[s][e]}static maxProperty(e){if(2===arguments.length&&"object"==typeof arguments[1])t=arguments[1];else var t=arguments.slice(1);for(var i=1,s=0,a=t.length;i<a;i++)t[i][e]>t[s][e]&&(s=i);return t[s][e]}static wrapAngle(e,t){return t?this.wrap(e,-Math.PI,Math.PI):this.wrap(e,-180,180)}static linearInterpolation(e,t){var i=e.length-1,s=i*t,a=Math.floor(s);return t<0?this.linear(e[0],e[1],s):t>1?this.linear(e[i],e[i-1],i-s):this.linear(e[a],e[a+1>i?i:a+1],s-a)}static bezierInterpolation(e,t){for(var i=0,s=e.length-1,a=0;a<=s;a++)i+=Math.pow(1-t,s-a)*Math.pow(t,a)*e[a]*this.bernstein(s,a);return i}static catmullRomInterpolation(e,t){var i=e.length-1,s=i*t,a=Math.floor(s);return e[0]===e[i]?(t<0&&(a=Math.floor(s=i*(1+t))),this.catmullRom(e[(a-1+i)%i],e[a],e[(a+1)%i],e[(a+2)%i],s-a)):t<0?e[0]-(this.catmullRom(e[0],e[0],e[1],e[1],-s)-e[0]):t>1?e[i]-(this.catmullRom(e[i],e[i],e[i-1],e[i-1],s-i)-e[i]):this.catmullRom(e[a?a-1:0],e[a],e[i<a+1?i:a+1],e[i<a+2?i:a+2],s-a)}static linear(e,t,i){return(t-e)*i+e}static bernstein(e,t){return this.factorial(e)/this.factorial(t)/this.factorial(e-t)}static factorial(e){if(0===e)return 1;for(var t=e;--e;)t*=e;return t}static catmullRom(e,t,i,s,a){var n=.5*(i-e),r=.5*(s-t),o=a*a;return(2*t-2*i+n+r)*(a*o)+(-3*t+3*i-2*n-r)*o+n*a+t}static difference(e,t){return Math.abs(e-t)}static roundAwayFromZero(e){return e>0?Math.ceil(e):Math.floor(e)}static sinCosGenerator(e,t,i,s){void 0===t&&(t=1),void 0===i&&(i=1),void 0===s&&(s=1);for(var a=t,n=i,r=s*Math.PI/e,o=[],l=[],c=0;c<e;c++)a+=(n-=a*r)*r,o[c]=n,l[c]=a;return{sin:l,cos:o,length:e}}static hypot(e,t){return Math.sqrt(e*e+t*t)}static distance(e,t,i,s){var a=e-i,n=t-s;return Math.sqrt(a*a+n*n)}static distanceSq(e,t,i,s){var a=e-i,n=t-s;return a*a+n*n}static distancePow(e,t,i,s,a){return void 0===a&&(a=2),Math.sqrt(Math.pow(i-e,a)+Math.pow(s-t,a))}static clamp(e,t,i){return e<t?t:i<e?i:e}static clampBottom(e,t){return e<t?t:e}static within(e,t,i){return Math.abs(e-t)<=i}static mapLinear(e,t,i,s,a){return s+(e-t)*(a-s)/(i-t)}static smoothstep(e,t,i){return(e=Math.max(0,Math.min(1,(e-t)/(i-t))))*e*(3-2*e)}static smootherstep(e,t,i){return(e=Math.max(0,Math.min(1,(e-t)/(i-t))))*e*e*(e*(6*e-15)+10)}static sign(e){return e<0?-1:e>0?1:0}static percent(e,t,i){return void 0===i&&(i=0),e>t||i>t?1:e<i||i>e?0:(e-i)/t}}He.PI2=2*Math.PI,He.HALF_PI=.5*Math.PI,He.DEG_TO_RAD=Math.PI/180,He.RAD_TO_DEG=180/Math.PI;class xe{static getRandomItem(e,t,i){if(null===e)return null;void 0===t&&(t=0),void 0===i&&(i=e.length);var s=t+Math.floor(Math.random()*i);return void 0===e[s]?null:e[s]}static removeRandomItem(e,t,i){if(null==e)return null;void 0===t&&(t=0),void 0===i&&(i=e.length);var s=t+Math.floor(Math.random()*i);if(s<e.length){var a=e.splice(s,1);return void 0===a[0]?null:a[0]}return null}static remove(e,t,i){var s=e.length;if(!(t>=s||0===i)){null==i&&(i=1);for(var a=s-i,n=t;n<a;++n)e[n]=e[n+i];e.length=a}}static shuffle(e){for(var t=e.length-1;t>0;t--){var i=Math.floor(Math.random()*(t+1)),s=e[t];e[t]=e[i],e[i]=s}return e}static transposeMatrix(e){for(var t=e.length,i=e[0].length,s=new Array(i),a=0;a<i;a++){s[a]=new Array(t);for(var n=t-1;n>-1;n--)s[a][n]=e[n][a]}return s}static rotateMatrix(e,t){if("string"!=typeof t&&(t=(t%360+360)%360),90===t||-270===t||"rotateLeft"===t)e=(e=xe.transposeMatrix(e)).reverse();else if(-90===t||270===t||"rotateRight"===t)e=e.reverse(),e=xe.transposeMatrix(e);else if(180===Math.abs(t)||"rotate180"===t){for(var i=0;i<e.length;i++)e[i].reverse();e=e.reverse()}return e}static findClosest(e,t){if(!t.length)return NaN;if(1===t.length||e<t[0])return t[0];for(var i=1;t[i]<e;)i++;var s=t[i-1],a=i<t.length?t[i]:Number.POSITIVE_INFINITY;return a-e<=e-s?a:s}static rotateRight(e){var t=e.pop();return e.unshift(t),t}static rotateLeft(e){var t=e.shift();return e.push(t),t}static numberArray(e,t){null!=t||(t=e,e=0);for(var i=[],s=e;s<=t;s++)i.push(s);return i}static numberArrayStep(e,t,i){null!=e||(e=0),null!=t||(t=e,e=0),void 0===i&&(i=1);for(var s=[],a=Math.max(He.roundAwayFromZero((t-e)/(i||1)),0),n=0;n<a;n++)s.push(e),e+=i;return s}}class Re{static isCardScoreTypeNegative(e){return e==ue.Trap||e==ue.Boss||e==ue.Enemy||e==ue.Poison}static isCardScoreTypePositive(e){return e==ue.Health||e==ue.Armor||e==ue.Cannon||e==ue.Horseshoe||e==ue.Lightning||e==ue.Skull}static getRandomFromChest(){return xe.getRandomItem(Re.itemsFromChest)}static getRandomPowerUpFromBarrel(){return xe.getRandomItem(Re.itemsFromBarrel)}static getRandomPowerUp(){return xe.getRandomItem(Re.powerUps)}}Re.itemsFromChest=[ue.Bomb,ue.Poison,ue.Horseshoe,ue.Lightning,ue.Multiplier,ue.Skull],Re.itemsFromBarrel=[ue.Health,ue.Gold,ue.Armor,ue.Cannon],Re.powerUps=[ue.Health,ue.Armor,ue.Cannon,ue.Barrel,ue.Gold];class Ue{static init(){this.currentHero==me.Key&&(this.isKey=!0),this.isHeroAlive=!0,this.gameLevel=1,this.levelStep=10,this.turnsToBoss=this.levelStep,this.goldPerGame=0,this.movesAfterLastSpecialCard=0,this.cardCounter=0,this.isNeedCreateBoss=!1}static load(){On.localStorage.hasItem(this.DATE_KEY,!1)&&(this.data=On.localStorage.getJSON(this.DATE_KEY))}static save(){On.localStorage.setJSON(this.DATE_KEY,this.data,!1)}static get gold(){return this.data.gold}static set gold(e){this.data.gold=e,this.save(),this.sGold.dispatch()}static get bestGoldPerGame(){return this.data.bestGoldPerGame}static set bestGoldPerGame(e){this.data.bestGoldPerGame=e,this.save()}static get isTutorialSeen(){return this.data.isTutorialSeen}static set isTutorialSeen(e){this.data.isTutorialSeen=e,this.save()}static get isTutorialStep1Done(){return this.data.isTutorialSeen}static set isTutorialStep1Done(e){this.data.isTutorialStep1Done=e,this.save()}static get isTutorialStep2Done(){return this.data.isTutorialStep2Done}static set isTutorialStep2Done(e){this.data.isTutorialStep2Done=e,this.save()}static get isTutorialChestSeen(){return this.data.isTutorialChestSeen}static set isTutorialChestSeen(e){this.data.isTutorialChestSeen=e,this.save()}static get isBombHero(){return this.data.isBombHero}static set isBombHero(e){this.data.isBombHero=e,this.save()}static get isKeyHero(){return this.data.isKeyHero}static set isKeyHero(e){this.data.isKeyHero=e,this.save()}static get isGunHero(){return this.data.isGunHero}static set isGunHero(e){this.data.isGunHero=e,this.save()}static get isFourXFour(){return this.data.isFourXFour}static set isFourXFour(e){this.data.isFourXFour=e,this.save()}static get isHorseshoe(){return this.data.isHorseshoe}static set isHorseshoe(e){this.data.isHorseshoe=e,this.save()}static get isHeart(){return this.data.isHeart}static set isHeart(e){this.data.isHeart=e,this.save()}static get isLuck(){return this.data.isLuck}static set isLuck(e){this.data.isLuck=e,this.save()}static get isKey(){return this.data.isKey}static set isKey(e){this.data.isKey=e,this.save()}static get lastAdvCoolDown(){return this.data.lastAdvCoolDown}static set lastAdvCoolDown(e){this.data.lastAdvCoolDown=e,this.save()}static get lastResultAdvCoolDown(){return this.data.lastResultAdvCoolDown}static set lastResultAdvCoolDown(e){this.data.lastResultAdvCoolDown=e,this.save()}static get lastItemWithAdv(){return this.data.lastItemWithAdv}static set lastItemWithAdv(e){this.data.lastItemWithAdv=e,this.save()}static addGold(e){this.goldPerGame+=e,this.bestGoldPerGame<this.goldPerGame&&(this.bestGoldPerGame=this.goldPerGame)}static resetShop(){this.isHeart=!1,this.isHorseshoe=!1,this.isLuck=!1,this.isKey=!1}static updateMovesAfterSpecialCard(e){e==ue.Health||e==ue.Armor?this.movesAfterLastSpecialCard=0:this.movesAfterLastSpecialCard++}static updateCardCounter(e){Re.isCardScoreTypeNegative(e)&&this.cardCounter--,Re.isCardScoreTypePositive(e)&&this.cardCounter++}static stepUpdate(){this.isBossShouldBeCreated()&&(this.isNeedCreateBoss=!0,this.levelStep++,this.turnsToBoss=this.levelStep+1)}static isBossShouldBeCreated(){return!this.isNeedCreateBoss&&1==this.turnsToBoss}static decreaseTurnsToBoss(){return this.turnsToBoss&&this.turnsToBoss--}}Ue.sGold=new Signal,Ue.DATE_KEY="GameStatus",Ue.data={gold:0,bestGoldPerGame:0,isTutorialSeen:!1,isTutorialStep1Done:!1,isTutorialStep2Done:!1,isTutorialChestSeen:!1,isBombHero:!1,isKeyHero:!1,isGunHero:!1,isFourXFour:!1,isHorseshoe:!1,isHeart:!1,isLuck:!1,isKey:!1,lastAdvCoolDown:0,lastItemWithAdv:0,lastResultAdvCoolDown:0},Ue.gameLevel=1,Ue.levelStep=10,Ue.turnsToBoss=10,Ue.goldPerGame=0,Ue.cardCounter=0,Ue.isNeedCreateBoss=!1,Ue.isNeedCreateChest=!1,Ue.currentHero=me.Base,Ue.RowCount=3,Ue.ColumnCount=3,Ue.isHeroAlive=!1,Ue.isGameEnd=!1,Ue.isNeedCreateChestOnNextStep=!1,Ue.movesAfterLastSpecialCard=0,window.GameStatus=Ue;class Ne extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","FxShootLightningBig")}constructFromXML(e){super.constructFromXML(e),this.m_fx=this.getChild("fx")}}Ne.URL="ui://moe42ygrsqzyai",Ne.DependPackages=["GameHome"];class Oe extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","FxShootLightningSmall")}constructFromXML(e){super.constructFromXML(e),this.m_fx=this.getChild("fx")}}Oe.URL="ui://moe42ygrsqzyal",Oe.DependPackages=["GameHome"];class Ee extends Oe{static PoolGet(){var e=Pool.getItem(this.URL);return e||(e=Ee.createInstance()),e}PoolRecover(){Laya.timer.clearAll(this),Laya.Tween.clearAll(this.m_fx),this.removeFromParent(),this.m_fx.playing=!1,Pool.recover(Ee.URL,this)}Play(){this.m_fx.frame=0,this.m_fx.playing=!0,this.alpha=0;var e=d.PoolGet(),t=w.to(this.m_fx,{alpha:1},1);e.tweens.push(t);t=w.to(this,{alpha:0},1,null,null,102);return e.tweens.push(t),Laya.timer.once(103,this,this.PoolRecover),e.restart(),e}}class We{static getRandomIntInclusive(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e}static getRandomBool(){return Math.random()>.5}static shuffle(e){for(var t,i,s=e.length;0!==s;)i=Math.floor(Math.random()*s),t=e[s-=1],e[s]=e[i],e[i]=t;return e}}class Ve extends Ne{static PoolGet(){var e=Pool.getItem(this.URL);return e||(e=Ve.createInstance()),e}PoolRecover(){Laya.timer.clearAll(this),Laya.Tween.clearAll(this.m_fx),this.removeFromParent(),this.m_fx.playing=!1,Pool.recover(Ve.URL,this)}Play(){this.m_fx.frame=0,this.m_fx.playing=!0,this.m_fx.alpha=0,this.m_fx.y=20;var e=d.PoolGet(),t=w.to(this.m_fx,{alpha:1},50);e.tweens.push(t);t=w.to(this.m_fx,{y:-20},200,null,null,50);e.tweens.push(t);t=w.to(this.m_fx,{alpha:0},50,null,null,250);return e.tweens.push(t),e.onStart.addOnce(this.onStart,this),Laya.timer.once(300,this,this.PoolRecover),e}onStart(){if(this.parent){var e=Ee.PoolGet(),t=g.CardWidth/2-20,i=g.CardHeight/2-20;We.getRandomBool()&&(t=-t),We.getRandomBool()&&(i=-i),this.parent.addChild(e),e.setXY(this.x,this.y),e.m_fx.setXY(t,i),e.Play()}}}class Xe{static get instance(){return this._instance||(this._instance=new Xe),this._instance}get soundBtnIndex(){return Laya.SoundManager.soundMuted?0:1}changeSoundState(){Laya.SoundManager.musicMuted=Laya.SoundManager.soundMuted=!Laya.SoundManager.soundMuted}playSound(e){if(!Laya.SoundManager.soundMuted){var t=`res/sounds/mp3/${e}.mp3`;Laya.SoundManager.playSound(t,1)}}}class qe{}qe.Click="click",qe.Barrel1="barrel1",qe.Barrel2="barrel2",qe.Bomb="bomb",qe.BossAppearance="bossAppearance",qe.Buy="buy",qe.Cannon="cannon",qe.Card="card",qe.ChestOpening="chestOpening",qe.Coin="coin",qe.CoinsBag="coinsBag",qe.CoinsCounting="coinsCounting",qe.Health1="health1",qe.Health2="health2",qe.HeroDies="heroDies",qe.Hit1="hit1",qe.Hit2="hit2",qe.Horseshoe="horseshoe",qe.Idol="idol",qe.IncorrectClick="incorrectClick",qe.Lighting="lighting",qe.Melody="melody",qe.PickLockFail="picklockFail",qe.PickLockNeutral="picklockNeutral",qe.PickLockSuccess="picklockSuccess",qe.Poison="poison",qe.Revive="revive",qe.ShieldMetal="shieldMetal",qe.ShieldWood="shieldWood",qe.Skull="skull",qe.Move01="move01",qe.Move02="move02",qe.Trap="trap";class Ke{constructor(){this.type=ue.None,this.view=V.PoolGet(),this.reset()}poolRecover(){this.reset(),Pool.recoverByClass(this)}reset(){this.view.setXY(-300,-400),this.view.setScale(1,1)}SetEmpty(){this.SetConfig(null)}SetConfig(e){this.config=e,this.view.game=this.game,this.view.SetConfig(e),this.view.SetCard(this)}get isEmpty(){return this.type==ue.None}get isHero(){return this.type==ue.Hero}get isBoss(){return this.type==ue.Boss}get isTrap(){return this.type==ue.Trap}get isCannon(){return this.type==ue.Cannon}get level(){return this.config.level}setCoordinate(e){this.game.container.addChild(this.view),this.view.setXY(e.x,e.y)}moveTo(e,t){return this.game.container.addChild(this.view),w.to(this.view,e,t)}getCenterX(){return this.view.x}getCenterY(){return this.view.y}endTurnAnimationStart(){this.view.setScale(0,g.FlipZoom)}startTurnAnimation(e,t){var i=L.turnAnimationStart(null,this.view);return i.onStart.add(this.playCardSoundInSeconds,this),i.onComplete.add(this.removeShapeFromStage,this),i.onComplete.add(e,t),i}endTurnAnimationEnd(){this.isBoss&&Xe.instance.playSound(qe.BossAppearance),this.view.scaleX=.1,L.turnAnimationEnd(null,this.view).restart()}playCardSoundInSeconds(){setTimeout(this.playCardSound.bind(this),50)}playCardSound(){Xe.instance.playSound(qe.Card)}removeChild(){var e=d.PoolGet(),t=w.to(this.view,{scaleX:1.1,scaleY:1.1},50);return e.tweens.push(t),t=w.to(this.view,{scaleX:1,scaleY:1},50,null,null,50),e.tweens.push(t),t=w.to(this.view,{scaleX:1.1,scaleY:1.1},50,null,null,100),e.tweens.push(t),t=w.to(this.view,{scaleX:0,scaleY:0},80,null,Laya.Handler.create(this,this.removeShapeFromStage),150),e.tweens.push(t),e}removeShapeFromStage(){this.view.parent&&(this.view.removeFromParent(),this.delayPoolRecover())}delayPoolRecover(){Laya.timer.frameOnce(10,this,this.poolRecover)}runLightning(){var e=Ve.PoolGet();return e.setXY(this.getCenterX(),this.getCenterY()),this.game.container.addChild(e),e.Play()}getScaleTween(e,t){t||(t=d.PoolGet());var i=w.to(e,{scaleX:2.5,scaleY:2.5},200);return t.tweens.push(i),i=w.to(e,{scaleX:1,scaleY:1},200,null,null,200),t.tweens.push(i),t}}class je extends Ke{stepUpdate(){}isNegative(){return!1}getScore(){return 0}getGoldValue(){return 0}reduceScoreInNSeconds(e,t){}increaseScoreInNSeconds(e,t){}}class ze extends Ke{constructor(){super(...arguments),this.initialLife=0,this.lifeAmount=0,this.powerUpAmount=0,this.isOpen=!1,this.canLightningStrike=!1}static GetDefault(e){var t=Pool.createByClass(je);return t.game=e,t.type=ue.None,t.SetEmpty(),t}static GetNew(e,t,i,s){var a=On.config.card.getTypeLevelConfig(t,i);null==a&&console.error("没有找到卡牌配置",t,i,s);var n=Pool.createByClass(ze);return n.game=e,n.type=t,n.SetConfig(a),n.setScore(s),Ue.updateCardCounter(t),Ue.updateMovesAfterSpecialCard(t),n}reset(){super.reset(),this.initialLife=0,this.lifeAmount=0,this.powerUpAmount=0,this.isOpen=!1,this.canLightningStrike=!1}multiplyScore(e){var t;return this.lifeAmount>0?((t=this.view.tweenLife()).onComplete.addOnce(()=>{this.increaseLife(e)},this),t):this.powerUpAmount>0?((t=this.view.tweenLife()).onComplete.addOnce(()=>{this.increasePowerUp(e)},this),t):null}setScore(e){switch(this.type){case ue.Boss:case ue.Enemy:this.initialLife=e,this.setLife(e);break;case ue.Gold:case ue.Health:case ue.Armor:case ue.Poison:case ue.Cannon:case ue.Lightning:case ue.Multiplier:case ue.Skull:case ue.Barrel:this.setPowerUp(e);break;case ue.Bomb:this.setLife(e),this.setPowerUp(10);break;case ue.Trap:this.setPowerUp(e),this.setLife(e),this.changeStatus();break;case ue.Chest:break;case ue.Horseshoe:this.setPowerUp(1)}}getLife(){return this.lifeAmount}getPowerUp(){return this.powerUpAmount}setPowerUp(e){this.powerUpAmount=e,this.setPowerUpText()}setLife(e){null!=e&&(this.lifeAmount=e),this.setHealthText()}setHealthText(){this.isDisplayLife()&&this.view.setHealthText()}setPowerUpText(){this.isDisplayLife()||this.view.setPowerUpText()}increasePowerUpTween(){this.view.tweenPowerUp().restart()}increaseLifeTween(){this.view.tweenLife().restart()}increaseLife(e){this.setLife(this.lifeAmount*e),this.type===ue.Trap&&this.setPowerUp(this.powerUpAmount*e)}increasePowerUp(e){this.setPowerUp(this.powerUpAmount*e)}isNegative(){switch(this.type){case ue.Boss:case ue.Enemy:case ue.Trap:case ue.Bomb:case ue.Poison:return!0;case ue.Health:case ue.Gold:case ue.Armor:case ue.Cannon:case ue.Chest:case ue.Barrel:case ue.Horseshoe:case ue.Lightning:case ue.Multiplier:case ue.Skull:case ue.Hero:case ue.None:return!1}}isDisplayLife(){switch(this.type){case ue.Boss:case ue.Enemy:case ue.Trap:case ue.Poison:return!0}return!1}getScore(){return this.type==ue.Trap?this.lifeAmount:this.lifeAmount+this.powerUpAmount}getGoldValue(){return this.initialLife}reduceScoreInNSeconds(e,t){this.powerUpAmount>0&&(this.powerUpAmount=this.powerUpAmount-e,setTimeout(this.setPowerUpText.bind(this),t)),this.lifeAmount>0&&(this.lifeAmount=this.lifeAmount-e,setTimeout(this.setHealthText.bind(this),t))}increaseScoreInNSeconds(e,t){this.powerUpAmount>0&&(this.powerUpAmount=this.powerUpAmount+e,this.isDisplayLife()||setTimeout(this.increasePowerUpTween.bind(this),t)),this.lifeAmount>0&&(this.lifeAmount=this.lifeAmount+e,this.isDisplayLife()&&setTimeout(this.increaseLifeTween.bind(this),t))}stepUpdate(){if(this.isTrap){var e=this.changeStatus(),t=Ue.currentHero==me.Gun;this.lifeAmount=t?0:e?this.powerUpAmount:0,this.setHealthText()}this.type==ue.Poison&&this.setPowerUp(this.powerUpAmount+1),this.type==ue.Bomb&&this.setPowerUp(this.powerUpAmount-1),this.type==ue.Barrel&&this.powerUpAmount>2&&this.setPowerUp(this.powerUpAmount-1)}changeStatus(){return this.isOpen?(this.view.setClose(),this.isOpen=!1):(this.view.setOpen(),this.isOpen=!0),this.isOpen}open(){return null}}!function(e){e[e.Right=1]="Right",e[e.Down=2]="Down",e[e.Left=3]="Left",e[e.Up=4]="Up"}(ge||(ge={}));class Ye{constructor(e,t){this.x=0,this.y=0,this.x=e,this.y=t}}class $e{constructor(e,t){this.column=0,this.row=0,this.column=e,this.row=t}getNewPosition(e){var t=new $e(this.column,this.row);switch(e){case ge.Right:t.column++;break;case ge.Down:t.row++;break;case ge.Left:t.column--;break;case ge.Up:t.row--}return t}getPoint(){return new Ye(this.pointX,this.pointY)}get pointX(){return this.column*g.CardWidth+g.CardWidth/2+this.column*g.CardSpaceBetweenWidth}get pointY(){return this.row*g.CardHeight+g.CardHeight/2+this.row*g.CardSpaceBetweenHeight}}class Je{constructor(){this.columnCount=3,this.rowCount=3}clear(){if(this.items&&0!=this.items.length){for(var e=0;e<this.rowCount;e++)for(var t=0;t<this.columnCount;t++){this.items[t][e].removeShapeFromStage()}this.items.length=0}}init(e=3,t=3,i){this.columnCount=e,this.rowCount=t,this.game=i,this.initArray()}initArray(){this.items=[];for(var e=0;e<this.rowCount;e++){for(var t=[],i=0;i<this.columnCount;i++)t.push(ze.GetDefault(this.game));this.items.push(t)}}getColumnCount(){return this.columnCount}getRowCount(){return this.rowCount}getAll(){for(var e=[],t=0;t<this.rowCount;t++)for(var i=0;i<this.columnCount;i++)e.push(this.items[i][t]);return e}findHeroCard(){for(var e,t=0;t<this.rowCount;t++)for(var i=0;i<this.columnCount;i++)if((e=this.items[i][t]).isHero)return e;return null}findHeroPosition(){for(var e=0;e<this.rowCount;e++)for(var t=0;t<this.columnCount;t++)if(this.items[t][e].isHero)return new $e(t,e);return null}findPosition(e){for(var t=0;t<this.rowCount;t++)for(var i=0;i<this.columnCount;i++){if(this.items[i][t]==e)return new $e(i,t)}return null}getPosition(e){for(var t=0;t<this.rowCount;t++)for(var i=0;i<this.columnCount;i++){var s=new $e(i,t);if(e(this.get(s)))return s}return null}getPositions(e){for(var t=[],i=0;i<this.rowCount;i++)for(var s=0;s<this.columnCount;s++){var a=new $e(s,i);e(this.get(a))&&t.push(a)}return t}get(e){return this.items[e.column][e.row]}set(e,t){this.items[e.column][e.row]=t}any(e){for(var t=0;t<this.rowCount;t++)for(var i=0;i<this.columnCount;i++){var s=new $e(i,t);if(e(this.get(s)))return!0}return!1}isPositionValid(e){return e.column>=0&&e.column<this.columnCount&&e.row>=0&&e.row<this.rowCount}}!function(e){e[e.Random=1]="Random",e[e.AfterChest=2]="AfterChest",e[e.AfterBarrel=3]="AfterBarrel",e[e.Positive=4]="Positive"}(de||(de={})),function(e){e[e.Start=1]="Start",e[e.Center=2]="Center",e[e.End=3]="End"}(pe||(pe={}));class Qe{constructor(e,t,i){this.isHeroAlive=e,this.isChest=t,this.isMove=i}}class Ze{}Ze.Items1="Items1",Ze.Items2="Items2",Ze.Barrel="Barrel",Ze.Background="background",Ze.BackgroundMenu="backgroundMenu",Ze.BackgroundPause="backgroundPause",Ze.FamobiLogo="famobiLogo",Ze.PauseLogo="PauseLogo",Ze.Skull="skull",Ze.SkullLight="skull_light",Ze.MenuStar="menuStar",Ze.MenuLogo="menuLogo",Ze.Loading="loading",Ze.ChoiceBackground="choiceBackground",Ze.Lock="lock",Ze.CoinPanel="coinPanel",Ze.ThreeXThree="ThreeXThree",Ze.FourXFour="FourXFour",Ze.CardBackground="cardBackrounds",Ze.NoAccess="noAccess",Ze.Boss="boss",Ze.Enemy="enemy",Ze.Shield="shields",Ze.CardLifeCircle="cardLifeCircle",Ze.CardPowerUpCircle="cardPowerUpCircle",Ze.SmallRing="smallRing",Ze.BigRing="bigRing",Ze.Hero="hero",Ze.HeroBomb="heroBomb",Ze.HeroKey="heroKey",Ze.HeroGun="heroGun",Ze.Health="health",Ze.Coin="coin",Ze.CoinBag="coinBag",Ze.Cannon="cannon",Ze.BombFlame="bomb_flame",Ze.GameStatusPanel="menuPanel",Ze.SmallBtnBackground="smallBtnBackground",Ze.BigBtnBackground="bigBtnBackground",Ze.SoundBtn="soundBtn",Ze.PauseBtn="pauseBtn",Ze.HomeBtn="homeBtn",Ze.HomeSmallBtn="homeBtnSmall",Ze.GroupBtn="groupBtn",Ze.NextBtn="nextBtn",Ze.PrevBtn="prevBtn",Ze.PlayBtn="playBtn",Ze.PlusBtn="plusBtn",Ze.ResumeBtn="resumeBtn",Ze.SettingsBtn="settingsBtn",Ze.ControlBtn="controlBtn",Ze.AdvPlayBtn="advPlayBtn",Ze.IBtn="iBtn",Ze.Shadow="shadow",Ze.ShopItemBackground="shopItemBackground",Ze.BigHeart="heartBig",Ze.BigHorseshoe="horseshoeBig",Ze.BigLuck="luckBig",Ze.Key2="key2",Ze.Key3="key3",Ze.Key4="key4",Ze.SmallHeart="heartSmall",Ze.SmallHorseshoe="horseshoeSmall",Ze.SmallLuck="luckSmall",Ze.SmallKey="key_small",Ze.Medal="medal",Ze.Trap="trap",Ze.Chest="chest",Ze.LockBody="lockBody",Ze.LockBridge="lockBridge",Ze.LockSwitch="lockSwitch",Ze.LockArrow="lockArrow",Ze.LockRod="lockRod",Ze.LockDoubleRod="lockDoubleRod",Ze.LockBomb="lockBomb",Ze.LockBombLamp="lockBombLamp",Ze.LockFixedRod="lockFixedRod",Ze.LockDoubleFixedRod="lockDoubleFixedRod",Ze.MouseClick="mouse_click",Ze.Core="core",Ze.Smoke1="smoke_1",Ze.Smoke2="smoke_2",Ze.Smoke3="smoke_3",Ze.Smoke4="smoke_4",Ze.Smoke5="smoke_5",Ze.Bomb="bomb",Ze.Poison="poison",Ze.Boom="boom",Ze.Lightning="lightning",Ze.BigLightning="lightning_1",Ze.SmallLightning="lightning_2",Ze.Multiplier2="multiplier2",Ze.Multiplier3="multiplier3",Ze.Dust="dust",Ze.BarrelIronDot="barrelIronDot",Ze.BarrelIron="barrelIron",Ze.BarrelCircleDark="barrelCircleDark",Ze.BarrelCircleLight="barrelCircleLight",Ze.BarrelBoardRight1="barrelBoardRight1",Ze.BarrelBoardRight2="barrelBoardRight2",Ze.BarrelBoard1="barrelBoard1",Ze.BarrelBoard2="barrelBoard2",Ze.BarrelBoard3="barrelBoard3",Ze.BarrelBoard4="barrelBoard4",Ze.BarrelBoard5="barrelBoard5",Ze.BarrelBoard6="barrelBoard6",Ze.BarrelBoard7="barrelBoard7",Ze.BarrelBoard8="barrelBoard8",Ze.BarrelBoard9="barrelBoard9",Ze.BarrelBoard10="barrelBoard10",Ze.BarrelBoardStraight1="barrelBoardStraight1",Ze.BarrelBoardStraight2="barrelBoardStraight2",Ze.Enemy9Vane="enemy_9_vane",Ze.Enemy9Pipe="enemy_9_pipe",Ze.TurnsToBoss="turnsToBoss",Ze.CheckMark="check",Ze.Arm="arm",Ze.MoreGames="more_games",Ze.BigPlayBtn="bigPlayBtn",Ze.AdvPanel="advPanel",Ze.Smile="smile",Ze.NoIcon="noIcon";class et extends Ke{constructor(){super(...arguments),this.currentLife=0,this.totalLife=0,this.armor=0,this.needRunLightning=!1,this.lightningScore=0,this.needShoot=!1,this.shootScore=0,this.needShootMultiplier=!1,this.multiplierScore=0,this.needShootSkull=!1}reset(){super.reset(),this.currentLife=0,this.totalLife=0,this.armor=0,this.needRunLightning=!1,this.lightningScore=0,this.needShoot=!1,this.shootScore=0,this.needShootMultiplier=!1,this.multiplierScore=0,this.needShootSkull=!1}fight(e){var t=new Qe(!0,!1,!0);switch(e.type){case ue.Trap:e.getLife()>0&&Ue.currentHero!=me.Gun&&(Xe.instance.playSound(qe.Trap),this.currentLife>e.getScore()?(this.currentLife-=e.getScore(),Ue.addGold(e.getScore()),t.isHeroAlive=!0):t.isHeroAlive=!1);break;case ue.Boss:case ue.Enemy:Xe.instance.playSound(xe.getRandomItem([qe.Hit1,qe.Hit2])),t.isHeroAlive=this.fightWithEnemy(e),t.isHeroAlive&&e.isBoss&&(t.isNeedIncreaseLifeByOneAfterBoss=!0);break;case ue.Armor:Xe.instance.playSound(qe.ShieldWood),Ue.currentHero==me.Gun?this.needSmashLightning(e.getScore()):this.armor<e.getScore()?(this.armor=e.getScore(),this.setArmorFrame(e)):Ue.currentHero==me.Base&&this.armor++;break;case ue.Gold:1==e.level?Xe.instance.playSound(qe.Coin):Xe.instance.playSound(qe.CoinsBag),Ue.addGold(e.getScore());break;case ue.Health:Xe.instance.playSound(xe.getRandomItem([qe.Health1,qe.Health2])),this.currentLife+=e.getScore(),this.currentLife>this.totalLife&&(this.currentLife=this.totalLife);break;case ue.Cannon:this.needShoot=!0,this.shootScore=e.getScore();break;case ue.Chest:t.isChest=!0;break;case ue.Poison:if(Xe.instance.playSound(qe.Poison),Ue.isLuck)return t.isHeroAlive=!0,this.useLuck(),t;if(e.getScore()>=this.currentLife)return t.isHeroAlive=!1,t;this.currentLife-=e.getScore();break;case ue.Horseshoe:t.isNeedIncreaseLifeByOne=!0;break;case ue.Bomb:break;case ue.Lightning:this.needSmashLightning(e.getScore());break;case ue.Multiplier:this.needShootMultiplier=!0,this.multiplierScore=e.getScore();break;case ue.Skull:this.needShootSkull=!0;break;case ue.Barrel:Xe.instance.playSound(xe.getRandomItem([qe.Barrel1,qe.Barrel2])),t.isMove=!1}return this.setStatus(),t}needSmashLightning(e){this.needRunLightning=!0,this.lightningScore=e}setShopItemsStatus(){}addSpriteByName(e,i,s,a){void 0===s&&(s=0),void 0===a&&(a=1);var n=38*i-.5*g.CardWidth,r=t.ShapeFactoryHelper.getShape(this.game,n,80,Ze.Items1,e,0);r.name=e,r.angle=s,r.scale.set(a),this.view.add(r)}destroySpriteByName(e){var t=this.view.getByName(e);t&&t.destroy()}fightWithEnemy(e){if(e.getScore()>=this.armor+this.currentLife)return!1;if(e.getScore()<=this.armor)e.getScore()<this.armor&&Ue.currentHero==me.Base?this.armor-=1:this.armor-=e.getScore();else if(this.armor>0){var t=e.getScore()-this.armor;this.armor=0,this.currentLife-=t}else this.currentLife-=e.getScore();return Ue.addGold(e.getScore()),!0}useHeart(){var e=this.view.getByName(Ze.SmallHeart);this.view.bringToTop(e),Xe.instance.playSound(qe.Revive),e.animations.add("explode",Phaser.Animation.generateFrameNames(Ze.SmallHeart,0,16,"",4),30,!1,!1),this.game.add.tween(e.scale).to({x:1,y:1},100,null,!0).onComplete.add(function(){var t=e.animations.play("explode",60,!1,!1);t.onComplete.add(this.setStatus,this),t.onComplete.add(this.setShopItemsStatus,this)},this),this.currentLife=this.totalLife}increaseLifeByOneTween(){var e=this.view.tweenLife();return e.onStart.addOnce(this.playHorseshoe,this),e.onComplete.addOnce(this.increaseLifeByOne,this),e}playHorseshoe(){Xe.instance.playSound(qe.Horseshoe)}increaseLifeByOne(){this.currentLife++,this.totalLife++,this.setLife()}useLuck(){Ue.isLuck=!1,this.view.useLuck()}stepUpdate(){}isNegative(){return!1}getScore(){return this.currentLife+this.armor}getGoldValue(){return 0}reduceScoreInNSeconds(e,t){if(e<=this.armor)this.armor-=e;else{var i=e-this.armor;this.armor=0,this.currentLife-=i}setTimeout(this.setStatus.bind(this),t)}increaseScoreInNSeconds(e,t){this.totalLife-this.currentLife>e?this.currentLife=this.totalLife:this.currentLife+=e,setTimeout(this.setStatus.bind(this),t)}setStatus(){this.setLife(),this.setArmor()}setLife(){this.view.setHealthText()}setArmor(){this.view.setArmor()}setArmorFrame(e){this.view.setArmor()}}class tt extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","FxShootCannon")}constructFromXML(e){super.constructFromXML(e),this.m_core=this.getChild("core")}}tt.URL="ui://moe42ygrsqzyaf",tt.DependPackages=["GameHome"];class it extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","FxShootSmoke")}constructFromXML(e){super.constructFromXML(e),this.m_smoke=this.getChild("smoke")}}it.URL="ui://moe42ygrsqzyag",it.DependPackages=["GameHome"];class st extends it{static PoolGet(){var e=Pool.getItem(this.URL);return e||(e=st.createInstance()),e}PoolRecover(){Laya.timer.clearAll(this),this.removeFromParent(),this.m_smoke.playing=!1,Pool.recover(st.URL,this)}Play(){this.m_smoke.frame=0,this.m_smoke.playing=!0;var e=Math.floor(1e4/24);Laya.timer.once(e,this,this.PoolRecover)}}class at extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","FxShootBoom")}constructFromXML(e){super.constructFromXML(e),this.m_boom=this.getChild("boom")}}at.URL="ui://moe42ygrsqzyah",at.DependPackages=["GameHome"];class nt extends at{static PoolGet(){var e=Pool.getItem(this.URL);return e||(e=nt.createInstance()),e}PoolRecover(){Laya.timer.clearAll(this),this.removeFromParent(),this.m_boom.playing=!1,Pool.recover(nt.URL,this)}DelayPalay(e,t){Laya.timer.once(e,this,()=>{t.addChild(this),this.Play()})}Play(){this.m_boom.frame=0,this.m_boom.playing=!0;var e=Math.floor(750);Laya.timer.once(e,this,this.PoolRecover)}}class rt extends tt{constructor(){super(...arguments),this._tweenProgress=0}static PoolGet(){var e=Pool.getItem(this.URL);return e||(e=rt.createInstance()),e}PoolRecover(){Laya.timer.clearAll(this),Laya.Tween.clearAll(this),this.removeFromParent(),Pool.recover(rt.URL,this)}moveTo(e,t,i,s,a){this.setXY(e,t),this.tweenProgress=0;var n=d.PoolGet(),r=w.to(this,{x:i,y:s,tweenProgress:100},a,null,Laya.Handler.create(this,this.onMoveEnd));return n.tweens.push(r),n}get tweenProgress(){return this._tweenProgress}set tweenProgress(e){if(this._tweenProgress=e,Math.floor(e)%10&&this.parent){var t=st.PoolGet();this.parent.addChild(t),t.setXY(this.x,this.y),t.Play()}}onMoveEnd(){if(this.parent){var e=nt.PoolGet();this.parent.addChild(e),e.setXY(this.x,this.y),e.Play()}Laya.timer.frameOnce(2,this,this.PoolRecover)}}class ot extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","FxSkull")}constructFromXML(e){super.constructFromXML(e),this.m_fx=this.getChild("fx")}}ot.URL="ui://moe42ygrsqzyam",ot.DependPackages=["GameHome"];class lt extends ot{constructor(){super(...arguments),this._tweenProgress=0}static PoolGet(){var e=Pool.getItem(this.URL);return e||(e=lt.createInstance()),e}PoolRecover(){Laya.timer.clearAll(this),Laya.Tween.clearAll(this),this.removeFromParent(),Pool.recover(lt.URL,this)}moveTo(e,t,i,s,a){this.setXY(e,t),this.tweenProgress=0;var n=d.PoolGet(),r=w.to(this,{x:i,y:s,tweenProgress:100},a,null,Laya.Handler.create(this,this.onMoveEnd));return n.tweens.push(r),n}get tweenProgress(){return this._tweenProgress}set tweenProgress(e){if(this._tweenProgress=e,Math.floor(e)%10&&this.parent){var t=st.PoolGet();this.parent.addChild(t),t.setXY(this.x,this.y),t.Play()}}onMoveEnd(){if(this.parent){var e=nt.PoolGet();this.parent.addChild(e),e.setXY(this.x,this.y),e.Play()}Laya.timer.frameOnce(2,this,this.PoolRecover)}}class ct{constructor(e){this.step=1,this.field=new Je,this.game=e,this.cardFactory=e.cardFactory}uninstall(){this.field.clear()}initField(){var e=[],t=Ue.ColumnCount,i=Ue.RowCount,s=g.AnimationTime-(i*t==9?0:50);this.field.clear(),this.field.init(t,i,this.game);We.getRandomIntInclusive(1,5);for(var a=0;a<i;a++)for(var n=0;n<t;n++){var r=void 0,o=a===g.HeroStartRow-1,l=n===g.HeroStartColumn-1;o&&l?(r=this.cardFactory.getHero(),Ue.isHeroAlive=!0,Ue.isGameEnd=!1):r=this.getCardFromFactory();var c=new $e(n,a),h=this.cardFactory.getDefault();e.push(this.moveAndSetWithAnimation(c,h,s)),e.push(this.replaceCardByPosition(c,r).setAnimationDuration(1))}return e}addShadow(){var e=this.game.add.graphics(0,0);e.name=g.Shadow,e.alpha=.5,e.beginFill(0),e.drawRect(2*-this.game.width,2*-this.game.height,4*this.game.width,4*this.game.height),this.cardFactory.container.add(e),this.cardFactory.container.bringToTop(this.cardFactory.container.getByName(g.Hero)),this.cardFactory.container.bringToTop(this.cardFactory.container.getByName(g.CardWithArm))}runArmTween(){var e=this.cardFactory.container.getByName(g.Shadow);e&&this.cardFactory.container.bringToTop(e),this.cardFactory.container.bringToTop(this.cardFactory.container.getByName(g.Hero)),this.cardFactory.container.bringToTop(this.cardFactory.container.getByName(g.CardWithMovingArm)),this.movingArm.alpha=1,this.movingArm.y=this.movingArmY;var t=this.movingArmY+150,i=this.game.add.tween(this.movingArm).to({y:this.movingArmY},200).to({y:t},600),s=this.game.add.tween(this.movingArm).to({y:t},200);i.onStart.add(function(){this.movingArm.changeFrame(1)},this),s.onStart.add(function(){this.movingArm.changeFrame(0)},this),s.onComplete.add(this.runArmTween,this),i.chain(s),i.start()}getChestCardFromFactory(){return this.cardFactory.getChestCard()}getCardFromFactory(e=de.Random,t=0){return this.cardFactory.getCard(e,t,this.getCardTypesOnTheTable())}getEnemyCardFromFactory(e){return this.cardFactory.getEnemy(e)}getHealsCardFromFactory(e){return this.cardFactory.getHealth(e)}getCardTypesOnTheTable(){return this.field.getAll().map(function(e){return e.type})}getCoinCardFromFactory(e){return this.cardFactory.getCoinCard(e)}getHero(){return this.field.get(this.getHeroPosition())}getHeroPosition(){return this.field.findHeroPosition()}getCardToFight(e){var t=this.field.findHeroPosition();if(null!=t){var i=t.getNewPosition(e);if(this.field.isPositionValid(i))return this.field.get(i)}return null}replaceCard(e,t,i=0){var s=this.field.getPosition(function(e){return e instanceof et}),a=Array(),n=this.getCardFromFactory(t,i);return a.push(this.replaceCardByPosition(s.getNewPosition(e),n)),a}tutorialStep1(){var e=this;this.movingArm.animations.stop(),this.runArmTween(),Ue.isTutorialStep1Done=!0,this.field.getAll().forEach(function(t){t instanceof ze&&t.view.name===g.CardWithMovingArm&&t.setOnClickEvent(e.onCardDown,e.onCardUp,e)})}tutorialStep2(e){Ue.isTutorialStep2Done=!0,this.runAllCardsAroundHero(e)}tutorialStep3(e){this.runAllCardsAroundHero(e)}tutorialStep4(){var e=this.cardFactory.container.getByName(g.Shadow);this.game.add.tween(e).to({alpha:0},100).start().onComplete.add(function(){var i=this;e.destroy(),Ue.isTutorialSeen=!0,this.field.getAll().forEach(function(e){e instanceof t.Card&&e.setOnClickEvent(i.onCardDown,i.onCardUp,i)})}.bind(this))}runAllCardsAroundHero(e){for(var i=0,s=[e.getNewPosition(ge.Left),e.getNewPosition(ge.Up),e.getNewPosition(ge.Right),e.getNewPosition(ge.Down)];i<s.length;i++){var a=s[i];if(this.field.isPositionValid(a)){var n=this.field.get(a);this.cardFactory.container.bringToTop(n.view),n instanceof t.Card&&n.setOnClickEvent(this.onCardDown,this.onCardUp,this)}}}move(e){var t=[],i=this.getHeroPosition(),s=i.getNewPosition(e),a=this.field.get(s);if(a.isEmpty)return t;this.isPlayMove(a)&&setTimeout(this.playMoveSound.bind(this),115);var n=this.field.get(i);if(a.type===ue.Bomb)t.push(this.moveAndSetWithAnimation(i.getNewPosition(e),n,g.AnimationTime).setAnimationDuration(1)),t.push(this.moveAndSetWithAnimation(i,a,g.AnimationTime));else{a.isBoss&&Ue.gameLevel++;var r=this.getCardPositionType(e,i),o=this.getCardToReplace(a),l=d.PoolGet();switch(l.tweens.push(a.removeChild()),t.push(l),r){case pe.Center:switch(t.push(this.moveAndSetWithAnimation(i.getNewPosition(e),n,g.AnimationTime)),e){case ge.Left:if(0===i.row){var c=i.getNewPosition(ge.Down),h=this.moveAllLine(ge.Down,ge.Up,c,o);t.push(h)}else{c=i.getNewPosition(ge.Up),h=this.moveAllLine(ge.Up,ge.Down,c,o);t.push(h)}break;case ge.Right:if(i.row===this.field.getRowCount()-1){c=i.getNewPosition(ge.Up),h=this.moveAllLine(ge.Up,ge.Down,c,o);t.push(h)}else{c=i.getNewPosition(ge.Down),h=this.moveAllLine(ge.Down,ge.Up,c,o);t.push(h)}break;case ge.Up:if(i.column===this.field.getColumnCount()-1){c=i.getNewPosition(ge.Left),h=this.moveAllLine(ge.Left,ge.Right,c,o);t.push(h)}else{c=i.getNewPosition(ge.Right),h=this.moveAllLine(ge.Right,ge.Left,c,o);t.push(h)}break;case ge.Down:if(0===i.column){c=i.getNewPosition(ge.Right),h=this.moveAllLine(ge.Right,ge.Left,c,o);t.push(h)}else{c=i.getNewPosition(ge.Left),h=this.moveAllLine(ge.Left,ge.Right,c,o);t.push(h)}}break;case pe.End:t.push(this.moveAllLine(this.getOppositeMoveType(e),e,i,o))}}return Ue.isTutorialSeen||this.step++,t}isPlayMove(e){switch(e.type){case ue.Boss:case ue.Enemy:return!1;case ue.Trap:return!e.isOpen;case ue.Health:case ue.Gold:case ue.Armor:case ue.Cannon:case ue.Barrel:case ue.Chest:case ue.Bomb:case ue.Poison:case ue.Horseshoe:case ue.Lightning:case ue.Multiplier:case ue.Skull:return!0}}playMoveSound(){Xe.instance.playSound(xe.getRandomItem([qe.Move01,qe.Move02]))}getCardToReplace(e){return e.isBoss?this.getChestCardFromFactory():this.getCardFromFactory()}getCardToReplaceAfterSmash(e){var t;return e.isBoss&&(Ue.isNeedCreateChestOnNextStep=!0),t=e.getGoldValue()>0?e.getGoldValue():e.getScore(),this.getCoinCardFromFactory(t)}getCardPositionType(e,t){switch(e){case ge.Right:return t.column==this.field.getColumnCount()-1?pe.Start:0==t.column?pe.Center:pe.End;case ge.Down:return t.row==this.field.getRowCount()-1?pe.Start:0==t.row?pe.Center:pe.End;case ge.Left:return 0==t.column?pe.Start:t.column==this.field.getColumnCount()-1?pe.Center:pe.End;case ge.Up:return 0==t.row?pe.Start:t.row==this.field.getRowCount()-1?pe.Center:pe.End}}removeAllChild(){var e=[];Xe.instance.playSound(qe.HeroDies);for(var t=this.field.getAll(),i=0,s=t=We.shuffle(t);i<s.length;i++){var a=t[i],n=d.PoolGet();n.animationDuration=We.getRandomIntInclusive(50,150),n.tweens.push(a.removeChild()),e.push(n)}return e}isBossInTheField(){return this.field.any(function(e){return e.isBoss})}moveAllLine(e,t,i,s){for(var a=[],n=g.AnimationTime*g.AnimationMultiplier;this.field.isPositionValid(i);)a.push(this.moveAndSetWithAnimation(i.getNewPosition(t),this.field.get(i),g.AnimationTime).setAnimationDuration(n)),i=i.getNewPosition(e);var r=this.cardFactory.getDefault(),o=i.getNewPosition(t);return a.push(this.moveAndSetWithAnimation(o,r,g.AnimationTime)),a.push(this.replaceCardByPosition(o,s).setAnimationDuration(1)),a}stepUpdate(){for(var e=0,t=this.field.getAll();e<t.length;e++){t[e].stepUpdate()}}shootCannon(){Xe.instance.playSound(qe.Cannon);var e=this.getHeroPosition(),t=this.field.get(e),i=[];return i.push(this.shootCannonInDirection(ge.Right,t,e)),i.push(this.shootCannonInDirection(ge.Left,t,e)),i.push(this.shootCannonInDirection(ge.Up,t,e)),i.push(this.shootCannonInDirection(ge.Down,t,e)),i}shootCannonInDirection(e,t,i){var s=[],a=i.getNewPosition(e);if(!this.field.isPositionValid(a))return s;var n=this.field.get(a);if(ct.canShootCard(n)){var r=this.shootCard(t.getCenterX(),t.getCenterY(),n.getCenterX(),n.getCenterY(),200);if(s.push(r),n.type===ue.Cannon)n.increaseScoreInNSeconds(t.shootScore,400);else if(t.shootScore>=n.getScore()){var o=this.getCardToReplaceAfterSmash(n),l=this.replaceCardByPosition(a,o,!0).setAnimationDuration(1);l.setFirstDelay(400),s.push(l)}else n.reduceScoreInNSeconds(t.shootScore,400)}return s}shootCard(e,t,i,s,a){var n=rt.PoolGet();this.game.container.addChild(n);var r=n.moveTo(e,t,i,s,a);return r.animationDuration=1,r}static canShootCard(e){if(e.isEmpty)return!1;if(e.isHero)return!1;switch(e.type){case ue.Boss:case ue.Enemy:case ue.Trap:case ue.Armor:case ue.Health:case ue.Poison:case ue.Cannon:return!0;default:return!1}}smashBomb(){for(var e=this.field.getPositions(function(e){return e.type===ue.Bomb&&e.getPowerUp()<=0}),t=[],i=0;i<e.length;i++){var s=e[i];Xe.instance.playSound(qe.Bomb);var a=this.field.get(s);this.addBombExplosionAnimation(a.view.x,a.view.y,100);var n=this.getCardToReplaceAfterSmash(this.field.get(s)),r=this.replaceCardByPosition(s,n,!0);t.push(r);for(var o=a.getLife(),l=[ge.Up,ge.Down,ge.Left,ge.Right],c=0;c<l.length;c++){var h=l[c];if(t.push(this.smashBombInDirection(h,s,o)),!Ue.isHeroAlive)return t}}return t}smashBombInDirection(e,t,i){var s=[],a=g.SmashDelay;for(t=t.getNewPosition(e);this.field.isPositionValid(t);){if(s.push(this.smashBombInPosition(t,a,i)),!Ue.isHeroAlive)return s;a+=g.SmashDelay,t=t.getNewPosition(e)}return s}smashBombInPosition(e,t,i){var s=this.field.get(e),a=4==Ue.RowCount?1e3:500;if(this.game.shake(g.ShakeIntensity,a),this.addBombExplosionAnimation(s.view.x,s.view.y,t),s.type==ue.Chest)return[];if(s.isHero&&Ue.currentHero==me.Bomb)return[];if(i>=s.getScore()){if(!s.isHero){var n=this.getCardToReplaceAfterSmash(s);return[this.replaceCardByPosition(e,n,!0).setAnimationDuration(1)]}if(!Ue.isHeart)return Ue.isHeroAlive=!1,this.removeAllChild();var r=s;Ue.isHeart=!1,this.keyboardManager.reset(),r.useHeart()}else s.reduceScoreInNSeconds(i,1.2*t);return[]}addBombExplosionAnimation(e,t,i){setTimeout(this.playBombExplosionAnimation.bind(this,e,t),i)}playBombExplosionAnimation(e,t){var i=nt.PoolGet();i.setXY(e,t),this.game.container.addChild(i),i.Play()}replaceCardByPosition(e,t,i=!1){var s=d.PoolGet(),a=s.tweens,n=this.field.get(e);return i&&(n.type==ue.Chest?a.push(n.open()):n.type==ue.Barrel&&a.push(n.open())),n.isBoss&&Ue.gameLevel++,this.moveAndSet(e,t),t.endTurnAnimationStart(),s.tweens.push(n.startTurnAnimation(t.endTurnAnimationEnd,t)),s}moveAndSet(e,t){this.field.set(e,t),t.setCoordinate(e.getPoint())}moveAndSetWithAnimation(e,t,i){var s=e.getPoint();this.field.set(e,t);var a=d.PoolGet();return a.tweens.push(t.moveTo(s,i)),a}getOppositeMoveType(e){switch(e){case ge.Up:return ge.Down;case ge.Down:return ge.Up;case ge.Left:return ge.Right;case ge.Right:return ge.Left}}shootLightning(){var e=this.getHeroPosition(),t=this.field.get(e),i=[],s=this.shootLightningInAllDirections(t.lightningScore,e,g.LightningDuration);return i.push(s),this.clearLightning(),i.length>0&&Xe.instance.playSound(qe.Lighting),i}clearLightning(){this.field.getAll().forEach(function(e){e.canLightningStrike=!1})}shootLightningInAllDirections(e,t,i){var s=[];return s.push(this.shootLightningInDirection(ge.Right,e,t,i)),s.push(this.shootLightningInDirection(ge.Left,e,t,i)),s.push(this.shootLightningInDirection(ge.Up,e,t,i)),s.push(this.shootLightningInDirection(ge.Down,e,t,i)),s}shootLightningInDirection(e,t,i,s){var a=[],n=i.getNewPosition(e);if(!this.field.isPositionValid(n))return a;var r=this.field.get(n);if(r.isHero)return a;if(r.canLightningStrike)return a;if(ct.canShootLightning(r)){var o=s+g.LightningDuration,l=d.PoolGet();if(l.tweens.push(r.runLightning()),l.setAnimationDuration(g.LightningDuration),a.push(l),t>=r.getScore()){var c=this.getCardToReplaceAfterSmash(r);c.canLightningStrike=!0;var h=this.replaceCardByPosition(n,c,!0).setAnimationDuration(1);h.setFirstDelay(2*o),a.push(h)}else r.reduceScoreInNSeconds(t,2*o);r.canLightningStrike=!1,a.push(this.shootLightningInAllDirections(t,n,o))}return a}static canShootLightning(e){switch(e.type){case ue.Boss:case ue.Enemy:case ue.Trap:return!0;default:return!1}}shootMultiplier(){Xe.instance.playSound(qe.Idol);var e=this.getHeroPosition(),t=this.field.get(e),i=[];return i.push(this.shootMultiplierInDirection(ge.Right,t.multiplierScore,e)),i.push(this.shootMultiplierInDirection(ge.Left,t.multiplierScore,e)),i.push(this.shootMultiplierInDirection(ge.Up,t.multiplierScore,e)),i.push(this.shootMultiplierInDirection(ge.Down,t.multiplierScore,e)),i}shootSkull(){Xe.instance.playSound(qe.Skull);for(var e=this.getHeroPosition().getPoint(),t=this.field.getPositions(function(e){return!e.isHero}),i=[],s=0;s<t.length;s++){var a=t[s],n=a.getPoint();i.push(this.shootSkullInCoordinate(e.x,e.y,n.x,n.y,300));var r=this.getCardToReplaceAfterSmash(this.field.get(a)),o=this.replaceCardByPosition(a,r,!0).setAnimationDuration(1);o.setFirstDelay(350),i.push(o)}return i}shootSkullInCoordinate(e,t,i,s,a){var n=lt.PoolGet(),r=n.moveTo(e,t,i,s,a);return this.game.container.addChild(n),r.animationDuration=1,r}shootMultiplierInDirection(e,t,i){var s=[],a=i.getNewPosition(e);if(!this.field.isPositionValid(a))return s;var n=this.field.get(a);if(ct.canMultiply(n.type,n.getScore())){var r=n.multiplyScore(t);if(!r)return s;r.setAnimationDuration(1),s.push(r)}return s}static canMultiply(e,t){switch(e){case ue.Armor:case ue.Bomb:case ue.Cannon:case ue.Gold:case ue.Health:case ue.Lightning:case ue.Poison:case ue.Boss:case ue.Enemy:case ue.Barrel:return!0;case ue.Trap:return t>0;case ue.Multiplier:case ue.Horseshoe:case ue.Chest:case ue.Skull:return!1}}stopAllAnimations(){}playAllAnimations(){}replaceAllNegativeCards(){for(var e=[],i=0,s=this.field.getPositions(function(e){return!(e instanceof t.Hero)});i<s.length;i++){var a=s[i];if(this.field.get(a).isNegative()){var n=this.getCardFromFactory(t.CardGenerationType.Positive),r=this.replaceCardByPosition(a,n,!0).setAnimationDuration(1);r.tweens[0].delay(200),e.push(r)}}return e}smashHero(e){var t=this.getHero();this.addBombExplosionAnimation(t.getCenterX(),t.getCenterY(),e)}}class ht{}ht.MVMouseClick="MVMouseClick";class ut{constructor(){this._isInstalled=!1,this._lastTime=0,this.gap=100}install(){this._isInstalled||(this._isInstalled=!0,Laya.stage.on(Laya.Event.MOUSE_DOWN,this,this.onMouseDown))}uninstall(){Laya.stage.off(Laya.Event.MOUSE_DOWN,this,this.onMouseDown)}onMouseDown(e){if(mt.showCount<10&&Laya.timer.currTimer-this._lastTime>this.gap){let t=mt.poolGet();t.setXY(e.stageX,e.stageY),t.show(),this._lastTime=Laya.timer.currTimer}}}class mt{constructor(){this.halfWidth=100,this.halfHeight=100,this.fx=fgui.UIPackage.createObject(ae.GameHome,ht.MVMouseClick),this.fx.displayObject.blendMode=Laya.BlendMode.ADD,this.halfWidth=this.fx.width>>1,this.halfHeight=this.fx.height>>1}show(){mt.showCount++,this.fx.setPlaySettings(0,-1,1,-1,Laya.Handler.create(this,this.hide,null,!0)),Z.floatMsg.addChild(this.fx)}hide(){this.fx.removeFromParent(),this.poolRecover(),mt.showCount--}setXY(e,t){e-=this.halfWidth,t-=this.halfHeight,this.fx.setXY(e,t)}poolRecover(){mt._poolRecover(this)}static poolGet(){let e;return e=mt.pool.length>0?mt.pool.pop():new mt}static _poolRecover(e){-1==this.pool.indexOf(e)&&this.pool.push(e)}}mt.showCount=0,mt.pool=[];class gt{constructor(){this.items={},this.count=0}ContainsKey(e){return this.items.hasOwnProperty(e)}Count(){return this.count}Add(e,t){this.items.hasOwnProperty(e)||this.count++,this.items[e]=t}Remove(e){var t=this.items[e];return delete this.items[e],this.count--,t}Item(e){return this.items[e]}Keys(){var e=[];for(var t in this.items)this.items.hasOwnProperty(t)&&e.push(t);return e}Values(){var e=[];for(var t in this.items)this.items.hasOwnProperty(t)&&e.push(this.items[t]);return e}}class dt{constructor(e=.2,t=.2,i=!1){this.status=new gt,this.initialStatus=new gt,this.updateVal=.2,this.step=.2,this.resetToZero=!1,this.updateVal=e,this.step=t,this.resetToZero=i}fillBasket(e,t){for(var i=e;i<=t;i++){var s=3-(i-1)*this.step;this.initialStatus.ContainsKey(i.toString())||(this.initialStatus.Add(i.toString(),s),this.status.Add(i.toString(),s))}}fillBasketWithStep(e,t,i,s){this.fillBasket(e,He.clamp(t+Math.floor(Ue.gameLevel/i),e,s))}getFromBasket(){for(var e=this.status.Values().reduce(function(e,t){return e+t}),t=Math.random()*e,i=0,s=0,a=this.status.Keys();s<a.length;s++){var n=a[s],r=this.status.Item(n);if(t>i&&t<r+i)return this.removeFromBasket(n),n;i+=r}throw new Error("Item not found in the basked")}removeFromBasket(e){this.status.Keys().forEach(t=>{t===e?this.resetToZero?this.status.Add(e,0):this.status.Add(e,this.initialStatus.Item(e)):this.status.Add(t,this.status.Item(t)+this.updateVal)})}static AfterChestBasket(){var e=new dt(.5,.2,!0);return e.add(ue.Horseshoe.toString(),1),e.add(ue.Bomb.toString(),1),e.add(ue.Lightning.toString(),1),e.add(ue.Skull.toString(),1),e.add(ue.Multiplier.toString(),1),e}add(e,t){this.status.Add(e,t),this.initialStatus.Add(e,t)}print(e){this.status.Values().reduce(function(e,t){return e+t});for(var t=0,i=this.status.Keys();t<i.length;t++){var s=i[t];this.status.Item(s),this.initialStatus.Item(s)}console.groupEnd()}}class pt{static reset(){this.PositiveCardProbability=0,this.CurrentPositiveCardProbability=0,this.ChanceOfNegativeFromBox=0,this.ChanceOfPositiveFromBox=0}}pt.PositiveCardProbability=0,pt.CurrentPositiveCardProbability=0,pt.ChanceOfNegativeFromBox=0,pt.ChanceOfPositiveFromBox=0;class St{constructor(e){this.movesAfterLastSpecialCard=0,this.healthBasket=new dt,this.armorBasket=new dt,this.cannonBasket=new dt,this.enemyBasket=new dt,this.goldBasket=new dt,this.chestBasket=dt.AfterChestBasket(),this.game=e,this.container=e.container}getDefault(){return ze.GetDefault(this.game)}getHero(){var e=On.config.card.getTypeLevelConfig(ue.Hero,Ue.currentHero),t=new et;return t.game=this.game,t.type=ue.Hero,t.SetConfig(e),t.setShopItemsStatus(),t.totalLife=10,t.currentLife=10,t.armor=0,Ue.isHorseshoe&&(t.totalLife+=1,t.currentLife+=1),t.setStatus(),this.movesAfterLastSpecialCard++,t}getCard(e=de.Random,t,i){return Ue.isNeedCreateBoss&&e==de.Random?(Ue.isNeedCreateBoss=!1,this.getBoss()):Ue.isNeedCreateChest&&e==de.Random?(Ue.isNeedCreateChest=!1,this.getChestCard()):this.generateCardType(e,i)==u.Warrior?this.getEnemy(t):this.getPowerUp(e,t,i)}getHealth(e){var t=ue.Health,i=1;return e<=5&&(i=2),ze.GetNew(this.game,t,i,e)}generateCardType(e,t){if(e==de.AfterBarrel&&Ue.currentHero==me.Key)return u.PowerUp;if(e==de.AfterChest||e==de.Positive)return u.PowerUp;if(e==de.AfterBarrel&&Math.random()<.75)return u.PowerUp;if(pt.reset(),Ue.cardCounter>2){var i=Math.random();if(pt.ChanceOfNegativeFromBox=i,i<.8)return u.Warrior}if(Ue.cardCounter<-3){var s=Math.random();if(pt.ChanceOfPositiveFromBox=s,s<.8)return u.PowerUp}return St.isShouldBePositiveCard(t)?u.PowerUp:u.Warrior}static isShouldBePositiveCard(e){var t=e.filter(Re.isCardScoreTypePositive).length,i=e.filter(Re.isCardScoreTypeNegative).length;if(!Ue.isFourXFour&&Math.random()<.85&&t<=1)return Math.random()<.8;if(Ue.isFourXFour&&Math.random()<.85&&t<=2)return Math.random()<.8;var s=Math.min(.35,.4-.01*Ue.levelStep),a=i*(Ue.isFourXFour?.02:.03),n=He.clamp(s+a,.2,.75),r=Math.random();return pt.PositiveCardProbability=n,pt.CurrentPositiveCardProbability=r,r<n}getPowerUp(e,t,i){var s=this.generatePowerUpType(e,i);t=this.generateCardScore(s,t);return ze.GetNew(this.game,s,1,t)}generateCardScore(e,t=0){if(0==t)switch(e){case ue.Armor:this.armorBasket.fillBasketWithStep(1,4,3,10),t=Number(this.armorBasket.getFromBasket());break;case ue.Health:this.healthBasket.fillBasketWithStep(1,4,3,10),t=Number(this.healthBasket.getFromBasket());break;case ue.Cannon:this.cannonBasket.fillBasketWithStep(1,1,3,10),t=Number(this.cannonBasket.getFromBasket()),Ue.currentHero==me.Bomb&&(t+=2);break;case ue.Barrel:t=this.generateScore(2,4,3,10);break;case ue.Poison:var i=1+Math.ceil(Ue.gameLevel/2);t=i>10?10:i;break;case ue.Lightning:t=this.generateScore(1,4,3,10);break;case ue.Gold:this.goldBasket.fillBasketWithStep(1,4,2,1e3),t=Number(this.goldBasket.getFromBasket());break;default:t=this.game.rnd.integerInRange(1,5)}return e===ue.Bomb&&(t=this.game.rnd.integerInRange(1,4+Math.ceil(Ue.gameLevel/2)))>10&&(t=10),e===ue.Multiplier&&(t=2),t}generateScore(e,t,i,s){var a=t+Math.ceil(Ue.gameLevel/i),n=this.game.rnd.integerInRange(e,a);return He.clamp(n,e,s)}getEnemy(e){var t=this.generateEnemyPower(e);return g.IsDev&&this.enemyBasket.print("Enemy"),0==e&&(e=t,Ue.gameLevel>10&&(e+=Math.floor((Ue.gameLevel-10)/2))),0==t?this.getTrap(e+1):this.getWarrior(t,e)}getTrap(e){return ze.GetNew(this.game,ue.Trap,1,e)}getWarrior(e,t){return ze.GetNew(this.game,ue.Enemy,e,t)}static getTrapScore(){return Ue.currentHero==me.Gun?0:1+We.getRandomIntInclusive(0,Math.ceil(Ue.gameLevel/4))}getBoss(){var e=St.generateBossPower(),t=8+Ue.gameLevel;return ze.GetNew(this.game,ue.Boss,e,t)}getChestCard(){return ze.GetNew(this.game,ue.Chest,1,0)}getCoinCard(e){var t=ue.Gold;0===e&&(e=this.generateCardScore(t));var i=e<6?1:2;return ze.GetNew(this.game,t,i,e)}static generateBossPower(){return We.getRandomIntInclusive(1,3)}generatePowerUpType(e,t){return e==de.AfterChest?this.generatePowerUpTypeFromChest():e==de.AfterBarrel?St.generatePowerUpTypeFromBarrel(t):St.generatePowerUpCardScoreType(t)}generatePowerUpTypeFromChest(){return Number(this.chestBasket.getFromBasket())}static generatePowerUpTypeFromBarrel(e){return St.generateFromBasket(e,Re.getRandomPowerUpFromBarrel,this.maxPowerUpNumber())}static generatePowerUpCardScoreType(e){return St.generateFromBasket(e,Re.getRandomPowerUp,this.maxPowerUpNumber())}static generateFromBasket(e,t,i){for(var s,a=e=>e===s,n=0;n<10&&(s=t(),!(e.filter(a).length<i));n++);return s}static maxPowerUpNumber(){return We.getRandomIntInclusive(1,2)}generateEnemyPower(e){if(this.enemyBasket.fillBasketWithStep(0,4,2,9),0==e)return Number(this.enemyBasket.getFromBasket());var t=He.clamp(e,0,9);return this.enemyBasket.removeFromBasket(t.toString()),t}}class Ct{constructor(e=[]){this.c=1,this.s0=0,this.s1=0,this.s2=0,"string"==typeof e?this.state(e):this.sow(e)}rnd(){var e=2091639*this.s0+2.3283064365386963e-10*this.c;return this.c=0|e,this.s0=this.s1,this.s1=this.s2,this.s2=e-this.c,this.s2}sow(e){if(this.s0=this.hash(" "),this.s1=this.hash(this.s0),this.s2=this.hash(this.s1),this.c=1,e)for(var t=0;t<e.length&&null!=e[t];t++){var i=e[t];this.s0-=this.hash(i),this.s0+=~~(this.s0<0),this.s1-=this.hash(i),this.s1+=~~(this.s1<0),this.s2-=this.hash(i),this.s2+=~~(this.s2<0)}}hash(e){var t,i,s;for(s=4022871197,e=e.toString(),i=0;i<e.length;i++)t=.02519603282416938*(s+=e.charCodeAt(i)),t-=s=t>>>0,s=(t*=s)>>>0,s+=4294967296*(t-=s);return 2.3283064365386963e-10*(s>>>0)}integer(){return 4294967296*this.rnd.apply(this)}frac(){return this.rnd.apply(this)+1.1102230246251565e-16*(2097152*this.rnd.apply(this)|0)}real(){return this.integer()+this.frac()}integerInRange(e,t){return Math.floor(this.realInRange(0,t-e+1)+e)}between(e,t){return this.integerInRange(e,t)}realInRange(e,t){return this.frac()*(t-e)+e}normal(){return 1-2*this.frac()}uuid(){for(var e=0,t="";e++<36;t+=~e%5|3*e&4?(15^e?8^this.frac()*(20^e?16:4):4).toString(16):"-");return t}pick(e){return e[this.integerInRange(0,e.length-1)]}sign(){return this.pick([-1,1])}weightedPick(e){return e[~~(Math.pow(this.frac(),2)*(e.length-1)+.5)]}timestamp(e,t){return this.realInRange(e||9466848e5,t||1577862e6)}angle(){return this.integerInRange(-180,180)}state(e){return"string"==typeof e&&e.match(/^!rnd/)&&(e=e.split(","),this.c=parseFloat(e[1]),this.s0=parseFloat(e[2]),this.s1=parseFloat(e[3]),this.s2=parseFloat(e[4])),["!rnd",this.c,this.s0,this.s1,this.s2].join(",")}}class ft{constructor(){this.isUp=!1,this.isDown=!1,this.isLeft=!1,this.isRight=!1,this.isSpace=!1}init(e){this.game=e}reset(){this.isUp=!1,this.isDown=!1,this.isLeft=!1,this.isRight=!1,this.isSpace=!1}getMoveType(){return this.isDown?ge.Down:this.isLeft?ge.Left:this.isRight?ge.Right:this.isUp?ge.Up:void 0}isPressed(){return this.isUp||this.isDown||this.isLeft||this.isRight||this.isSpace}StartListenKeyboard(){Laya.stage.on(Laya.Event.KEY_UP,this,this.OnKeyboard)}StopListenKeyboard(){Laya.stage.off(Laya.Event.KEY_UP,this,this.OnKeyboard)}OnKeyboard(e){switch(e.keyCode){case Laya.Keyboard.LEFT:case Laya.Keyboard.A:this.reset(),this.isLeft=!0;break;case Laya.Keyboard.RIGHT:case Laya.Keyboard.D:this.reset(),this.isRight=!0;break;case Laya.Keyboard.UP:case Laya.Keyboard.W:this.reset(),this.isUp=!0;break;case Laya.Keyboard.DOWN:case Laya.Keyboard.S:this.reset(),this.isDown=!0}}OnClickCard(e){if(!e.isEmpty&&!e.isHero){var t=this.game.field.field.findHeroPosition(),i=this.game.field.field.findPosition(e);if(i){if(t.row==i.row)1==(s=i.column-t.column)?(this.reset(),this.isRight=!0):-1==s&&(this.reset(),this.isLeft=!0);else if(t.column==i.column){var s;1==(s=i.row-t.row)?(this.reset(),this.isDown=!0):-1==s&&(this.reset(),this.isUp=!0)}}else console.error("OnClickCard position=null",e.type)}}}class yt{constructor(){this._isShaking=!1,this._startTime=0,this._offsetPos=[0,0],this.shank_I=0,this._orgX=0,this._orgY=0}exe(e,t=30,i=300,s=6){this._isShaking||(this._isShaking=!0,this._startTime=Laya.timer.currTimer,this._offsetPos=[0,0],this.shank_I=0,this._target=e,this._orgX=e.x,this._orgY=e.y,Laya.timer.loop(t,this,this._pos,[i,s]))}_pos(e,t){this._offsetPos[this.shank_I%2]=this._offsetPos[this.shank_I%2]>0?-t:t,this.shank_I++,this._target.x+=this._offsetPos[0],this._target.y+=this._offsetPos[1],Laya.timer.currTimer-this._startTime>=e&&(Laya.timer.clear(this,this._pos),this.shank_I=0,this._isShaking=!1,this._target.x=this._orgX,this._target.y=this._orgY,this._target=null)}}class wt{constructor(){this.shakeHandler=new yt,this.animationQueue=[],this.keyboardManager=new ft,this.isAnimationing=!1,this.isPause=!1,this.isChest=!1}init(e){window.game=this,this.windowUI=e,this.container=e.m_container,this.stageClickFx=new ut,this.keyboardManager.init(this),this.rnd=new Ct([(Date.now()*Math.random()).toString()]),this.cardFactory=new St(this),this.field=new ct(this)}testCardViews(){for(var e=On.config.card.getConfigList(),t=0,i=e.length;t<i;t++){var s=e[t],a=V.PoolGet();a.SetConfig(s),this.container.addChild(a);var n=t%5*a.width+.5*a.width,r=Math.floor(t/5)*a.height;a.setXY(n,r),console.log(t,n,r,s.name,s.id)}this.container.setScale(.5,.5)}launch(){Ue.init(),this.stageClickFx.install(),this.keyboardManager.StartListenKeyboard(),this.animationQueue=this.field.initField(),Laya.timer.frameLoop(1,this,this.update)}uninstall(){Laya.timer.clear(this,this.update),this.stageClickFx.uninstall(),this.keyboardManager.StopListenKeyboard(),this.field.uninstall();for(var e=this.container.numChildren-1;e>=0;e--){var t=this.container.getChildAt(e),i=t.PoolRecover;i&&i.call(this),t.parent&&t.removeFromParent()}this.container}update(){this.isPause||this.isAnimationing||(this.animationQueue.length>0?this.runAnimationFromQueue():this.fillQueue())}playAllAnimations(){for(;this.animationQueue.length>0;)this.runAnimationFromQueue()}runAnimationFromQueue(){var e=this.animationQueue.shift();if(e instanceof d){var t=e.animationDuration;this.isAnimationing=!0,e.restart(),setTimeout(this.onAnimationComplete.bind(this),t)}else console.error(e),this.onAnimationComplete()}onAnimationComplete(){this.isAnimationing=!1,this.keyboardManager.reset()}fillQueue(){if(Ue.isHeroAlive){var e=this.field.getHero();if(e.needShoot)return this.addToAnimationQueue(this.field.shootCannon()),void(e.needShoot=!1);if(e.needRunLightning)return this.addToAnimationQueue(this.field.shootLightning()),void(e.needRunLightning=!1);if(e.needShootMultiplier)return this.addToAnimationQueue(this.field.shootMultiplier()),void(e.needShootMultiplier=!1);if(e.needShootSkull)return this.addToAnimationQueue(this.field.shootSkull()),void(e.needShootSkull=!1);this.addToAnimationQueue(this.field.smashBomb()),this.checkKeyHandler()}else Ue.isGameEnd||this.setGameEnd()}setGameOver(){Ue.isHeroAlive=!1,this.addToAnimationQueue(this.field.removeAllChild()),this.isPause=!1}setGameEnd(){Ue.isGameEnd=!0,Lt.exit()}addToAnimationQueue(e){if(null!=e)if(e instanceof Array)for(var t of e)null!=t&&(t instanceof Array?this.addToAnimationQueue(t):this.animationQueue.push(t));else this.animationQueue.push(e)}checkKeyHandler(){var e=this.keyboardManager.getMoveType();if(e){var t=this.move(e);t&&t.length>0?(this.field.stepUpdate(),this.addToAnimationQueue(t)):this.keyboardManager.reset()}}move(e){var t=this.field.getCardToFight(e);if(null==t)return[];var i,s=this.field.getHero(),a=s.fight(t);if(!a.isHeroAlive)return Ue.isHeart?(Ue.isHeart=!1,this.keyboardManager.reset(),s.useHeart(),this.field.move(e)):(Ue.isHeroAlive=!1,this.field.removeAllChild());if(a.isChest)return this.moveType=e,Ue.currentHero==me.Key?this.chestOpened():Ue.isKey?(this.field.getHero().setShopItemsStatus(),this.chestOpened()):this.openChestPopUp(),[];var n=[];if(Ue.stepUpdate(),a.isNeedIncreaseLifeByOne&&((i=d.PoolGet()).tweens.push(this.field.getHero().increaseLifeByOneTween()),n.push(i)),a.isMove)n.push(this.field.move(e));else{i=d.PoolGet();var r=this.field.replaceCard(e,de.AfterBarrel,t.getScore());i.tweens.push(r),n.push(i)}return a.isNeedIncreaseLifeByOneAfterBoss&&n.push(this.field.getHero().increaseLifeByOneTween()),this.isChangeTurnsToBoss()&&Ue.decreaseTurnsToBoss(),n}isChangeTurnsToBoss(){return!Ue.isNeedCreateBoss&&!this.field.isBossInTheField()}shake(e,t){this.shakeHandler.exe(this.windowUI,e,t)}openChestPopUp(){this.isPause||this.isChest||(this.isChest=!0,this.windowUI.m_chectPopupPanel.sResult.addOnce(e=>{e?this.chestOpened():this.chestClosed()},this),this.windowUI.m_chectPopupPanel.Open())}chestOpened(){Xe.instance.playSound(qe.ChestOpening),this.isChest=!1,this.playAllAnimations(),this.chestOpenedAction()}chestOpenedAction(){this.destroyChestDelayed(),this.addToAnimationQueue(this.field.replaceCard(this.moveType,de.AfterChest)),Ue.stepUpdate(),this.isChangeTurnsToBoss(),Ue.decreaseTurnsToBoss()}destroyChestDelayed(e=1){setTimeout(this.destroyChest.bind(this),e)}destroyChest(){}chestClosed(){this.isChest=!1;var e=4==Ue.RowCount?1e3:500;this.shake(g.ShakeIntensity,e),this.field.smashHero(600),this.playAllAnimations(),this.destroyChestDelayed(500);var t=this.field.getHero();Ue.currentHero!=me.Bomb&&t.reduceScoreInNSeconds(1,1),0==t.getScore()?(this.addToAnimationQueue(this.field.removeAllChild()),Ue.isHeroAlive=!1):this.addToAnimationQueue(this.field.move(this.moveType)),Ue.stepUpdate(),this.isChangeTurnsToBoss()&&Ue.decreaseTurnsToBoss()}}class Lt{static init(e){this.isInited||(this.game=new wt,this.game.init(e),this.isInited=!0)}static launch(){this.uninstall(),this.game.launch()}static setGameOver(){this.game.setGameOver()}static uninstall(){this.game.uninstall()}static exit(){Ue.gold+=Ue.goldPerGame,this.uninstall(),On.menu.openTab(p.Home,he.Result)}}Lt.isInited=!1,window.War=Lt;class _t extends Ae{constructor(){super(...arguments),this.preGold=0}onWindowInited(){Lt.init(this),this.m_menuTopPanel.m_puaseBtn.onClick(this,this.OnClickPauseBtn)}onWindowDestory(){return!1}onWindowWillShow(){this.m_pausePanel.Close()}onWindowWillHide(){}onWindowShow(){this.preGold=0,this.m_menuTopPanel.SetCoinIconState(),Lt.launch(),Laya.timer.frameLoop(1,this,this.OnUpdate)}onWindowHide(){Laya.timer.clearAll(this)}OnClickPauseBtn(){this.m_pausePanel.Open()}OnUpdate(){this.m_menuTopPanel.m_coinText.text=Ue.goldPerGame+"",this.m_menuTopPanel.m_countText.text=Ue.turnsToBoss+"",this.m_menuTopPanel.m_levelTex.text=Ue.gameLevel+"",this.preGold!=Ue.goldPerGame&&(this.preGold=Ue.goldPerGame,this.m_menuTopPanel.PlayFxCoin())}}class Tt extends we{constructor(){super(),this.addAssetForFguiComponent(_t)}generateAssetsForDynmic(){super.generateAssetsForDynmic()}onMenuCreate(){let e=_t.createInstance();this.conent=e,this.contentPane=e,super.onMenuCreate()}onShowComplete(){super.onShowComplete()}onHideComplete(){super.onHideComplete()}}class vt{static get dict(){return this._dict||(this._dict=new Dictionary),this._dict}static get(e){return vt.dict.getValue(e)}static add(e,t){vt.dict.add(e,new Q(e,t))}static install(){vt.add(p.Login,be),vt.add(p.Home,Fe),vt.add(p.War,Tt)}}class Gt extends n{get menuId(){return this.id}get menuLayer(){return this.layer}get menuCloseOtherType(){return this.closeOtherType}get menuLoaderId(){switch(this.menuId){case p.War:return S.Launch}return this.loaderId}get iconUrl(){return this._iconUrl||isNullOrEmpty(this.icon)||(this._iconUrl=j.getMenuIconUrl(this.icon)),this._iconUrl}get nameIconUrl(){return this._nameIcon||isNullOrEmpty(this.moduleNameIcon)||(this._nameIcon=j.getMenuNameIconUrl(this.moduleNameIcon)),this._nameIcon}get isSubbarMainButton(){return this.menuId>=p.SubMenuButtonBegin}get isUnlock(){let e=this.menuId;return!On.config.unlock.hasConfig(e)||On.moduleModel.home.IsOpen(e)}get lockText(){let e=On.config.unlock.getUnlockConfig(this.menuId);if(e){let t=e.openLevel<=On.user.level?"":`需要主公等级达到${e.openLevel}`;if(!e.checkPoint)return t+"后开启";let i=On.config.checkPoint.getConfig(e.checkPoint),s=On.moduleModel.section.getMissionDataById(e.checkPoint).isActive,a=`通过关卡${i.chapter}-${i.mapID}`;return Boolean(t)?t+(s?",且"+a:""):a+"后开启"}return z.Lock}get lockVisiable(){let e=On.config.unlock.getConfig(this.menuId);return!e||0==e.showType}get enableOpen(){return $.getInstance().validate(this.menuId)}get isNew(){return J.getInstance().validate(this.menuId)}async openMenu(){if(this.menuId<p.SubMenuButtonBegin){if(!this.isUnlock)return On.system.toastText(this.lockText),!1;let e=vt.get(this.menuId);if(!e)return On.system.toastText(z.Disable),!1;if(e.windowClass){if(!await e.windowClass.AsyncEnableOpen())return!1}if(this.enableOpen)return On.menu.open(this.menuId),!0}return!0}}class Pt extends r{}class kt extends o{get menuConfig(){return On.config.menu.getConfig(this.menuId)}get lockvisible(){return 1==this.showType}get isUnlock(){let e=this.menuConfig;return!!e&&e.isUnlock}get IsNew(){let e=this.menuConfig;return!!e&&e.isNew}get isOpenShow(){return!1}get isOpenShowMenu(){return!1}get iconUrl(){return""}}class It{constructor(e,t){this._configList=[],this.tableName=e,this.tabelConfigClass=t}onGameLoadedAll(){}get configDict(){return this._configDict||(this._configDict=Ht.pbconfig[this.tableName]),this._configDict}get configList(){if(0==this._configList.length)for(let e in this.configDict)this._configList.push(this.configDict[e]);return this._configList}getConfigList(){return this.configList}getConfig(e){return this.configDict[e]||console.log(`${this.tableName} 没有 id=${e} 的配置`),this.configDict[e]}hasConfig(e){return!!this.configDict[e]}shieldConfig(e){for(let t=0,i=e.length;t<i;t++){let i=e[t];if(this.hasConfig(i)){delete this._configDict[i];let e=this.configList;for(let t=0,s=e.length;t<s;t++)if(e[t].id==i){e.splice(t,1);break}}}}}class Mt extends It{static GetId(e,t=1){return 100*e+t}getTypeLevelConfig(e,t=1){var i=Mt.GetId(e,t);return this.getConfig(i)}}class bt extends It{constructor(){super(...arguments),this.configsByKey=new Map}onGameLoadedAll(){super.onGameLoadedAll();let e=this.configList;for(let t=0;t<e.length;t++){let i=e[t].key;isNullOrEmpty(i)&&(i=e[t].id),this.configsByKey.set(i,e[t])}}getConfig(e){if(!this.configsByKey.has(e)){if(this.hasConfig(e))return super.getConfig(e);console.log(`${this.tableName} 没有 key=${e} 的配置`)}return this.configsByKey.get(e)}}class Dt extends It{}class Bt extends It{constructor(){super(...arguments),this.barDict=new Dictionary}getBarMenus(e){let t=[],i=[];for(let s=0,a=(t=this.barDict.getValue(e)).length;s<a;s++){let e=t[s],a=On.config.unlock.getUnlockConfig(e.menuId);a&&2!=a.showType&&e.menuId!=p.Sections&&i.push(e)}return i.sort((e,t)=>e.barIndex-t.barIndex),i}getShowBarMenus(e){let t=[],i=[];for(let s=0,a=(t=this.barDict.getValue(e)).length;s<a;s++){let e=t[s],a=On.config.unlock.getUnlockConfig(e.menuId);a&&1==a.showType&&a.showLevel<=On.user.level&&i.push(e)}return i.sort((e,t)=>e.barIndex-t.barIndex),i}onGameLoadedAll(){let e=this.configList;for(let t=0;t<e.length;t++){let i=e[t],s=this.barDict.getValue(i.barType);s||(s=[],this.barDict.add(i.barType,s)),s.push(i)}}}class Ft extends It{constructor(){super(...arguments),this.configsByKey=new Map}onGameLoadedAll(){super.onGameLoadedAll();let e=this.configList;for(let t=0;t<e.length;t++){let i=e[t].key;isNullOrEmpty(i)&&(i=e[t].id),this.configsByKey.set(i,e[t])}}getConfig(e){if(!this.configsByKey.has(e)){if(this.hasConfig(e))return super.getConfig(e);console.log(`${this.tableName} 没有 key=${e} 的配置`)}return this.configsByKey.get(e)}getTxt(e){let t=this.getConfig(e);return t?t.notice:`[Error]${this.tableName} 没有 key=${e} 的配置`}getTxtFormat(e,...t){return this.getTxt(e).format(...t)}}class At extends It{constructor(){super(...arguments),this.menuConfigs=new Dictionary,this.menuGroups=new Dictionary,this.unlockGroups=new Dictionary,this.sortMenus=new Dictionary}setConfig(e){let t,i,s,a;e.menuIndexId?this.menuConfigs.add(e.menuIndexId,e):this.menuConfigs.add(e.menuId,e),i=e.group,this.menuGroups.hasKey(i)?t=this.menuGroups.getValue(i):(t=[],this.menuGroups.add(i,t)),t.push(e),a=e.openType,this.unlockGroups.hasKey(a)?s=this.unlockGroups.getValue(a):(s=[],this.unlockGroups.add(a,s)),s.push(e)}getUnlockConfig(e){return this.menuConfigs.getValue(e)}getBarMenus(e){let t=this.menuGroups.getValue(e);return 0==this.sortMenus.hasKey(e)&&(t.sort((e,t)=>e.groupId-t.groupId),this.sortMenus.add(e,!0)),t}getUnlocks(e){return this.unlockGroups.getValue(e)}onGameLoadedAll(){let e=this.configList;for(let t of e)this.setConfig(t)}}class Ht{constructor(){this.card=new Mt("Card",X),this.cardScoreType=new bt("CardScoreType",q),this.loader=new Dt("Loader",K),this.menu=new Bt("Menu",Gt),this.msg=new Ft("Msg",Pt),this.unlock=new At("Unlock",kt)}static Init(){excelconfig.Card=X,excelconfig.CardScoreType=q,excelconfig.Loader=K,excelconfig.Menu=Gt,excelconfig.Msg=Pt,excelconfig.Unlock=kt}}class xt extends Ht{}!function(e){e[e.pb=0]="pb",e[e.json=1]="json"}(Se||(Se={}));class Rt extends xt{constructor(){super(...arguments),this.sLoadProgress=new Typed3Signal,this.sLoaded=new Signal,this.loadProgress=0,this.readers=[],this.readerMap=new Map,this.configType=Se.json}initList(){Ht.Init(),this.readers.length=0;for(let e in this){let t=this[e];t instanceof It&&(this.readers.push(t),this.readerMap.set(t.tableName,t))}}shieldList(){let e=On.channel.serverItem.shieldHero;e&&e.length&&On.config.hero.shieldConfig(e)}async loadAllAsync(){this.loadProgress=0;this.readers.length;switch(this.configType){case Se.pb:await this.loadPB();break;default:await this.loadJson()}window.Global=Ht.pbconfig.Global,this.onGameLoadedAll()}async loadPB(){let e=await On.asset.loadResAsync("res/config/pb/excelconfig.bin",Laya.Loader.BUFFER),t=new Uint8Array(e);Ht.pbconfig=excelconfig.ConfigMng.decode(t)}async loadJson(){let e=await On.asset.loadResAsync("res/config/pb/excelconfig.json",Laya.Loader.JSON);this.InstallJson(e)}InstallJson(e){let t=Ht.pbconfig=new excelconfig.ConfigMng,i=e.Global,s=new excelconfig.Global;for(var a in i){this.keyToPbKey(a);s[a]=i[a]}t.Global=s;for(let i in e){let s=e[i];if(!this.readerMap.has(i))continue;let n=this.readerMap.get(i).tabelConfigClass;t[i]={};for(let e in s){let r=s[e],o=new n;for(var a in r){o[this.keyToPbKey(a)]=r[a]}t[i][e]=o}}}keyToPbKey(e){if(-1==e.indexOf("_"))return e;let t=e.split("_");for(let e=1;e<t.length;e++){let i=t[e];i.length>=1&&(t[e]=i.substr(0,1).toUpperCase()+i.substr(1,i.length-1))}return e=t.join("")}onGameLoadedAll(){for(let e=0;e<this.readers.length;e++)this.readers[e].onGameLoadedAll();this.sLoaded.dispatch()}}class Ut{constructor(){this.developWidth=750,this.developHeight=1334}get developAspect(){return this.developWidth/this.developHeight}get isLandsape(){return this.screenWidth>this.screenHeight}get screenWidth(){return Laya.stage.width}get screenHeight(){return Laya.stage.height}get isWX(){return!!window.wx}get safeArea(){if(this.isWX)return wx.getSystemInfoSync().safeArea}get liuHaiHeightTop(){return 44}get liuHaiHeightBottom(){return this.isWX?this.liuHaiHeightTop:44}get screenHeightLiuHai(){return fgui.GRoot.inst.height-this.liuHaiHeightTop-this.liuHaiHeightBottom}get screenWidthLiuHai(){return fgui.GRoot.inst.width-this.liuHaiHeightTop-this.liuHaiHeightBottom}get screenAspect(){return this.screenWidth/this.screenHeight}get screenScaleExpand(){let e=1;return e=this.screenAspect<=this.developAspect?this.screenHeight/this.developHeight/(this.screenWidth/this.developWidth):this.screenWidth/this.developWidth/(this.screenHeight/this.developHeight)}get screenScaleX(){return this.screenWidth/this.developWidth}get screenScaleY(){return this.screenHeight/this.developHeight}get screenScaleShrink(){return Math.min(this.screenScaleX,this.screenScaleY)}get screenScaleShrinkMax(){return Math.max(this.screenScaleX,this.screenScaleY)}}class Nt{get username(){return this._username||(this._username=this.getString("username",!0)),this._username}set username(e){this._username=e,this.setString("username",e,!0),On.sound.onLogin()}getKey(e,t=!1){return t?e:this.username+"_"+e}setItem(e,t,i=!1){Laya.LocalStorage.setItem(this.getKey(e,i),t)}getItem(e,t=!1){return Laya.LocalStorage.getItem(this.getKey(e,t))}setString(e,t,i=!1){Laya.LocalStorage.setItem(this.getKey(e,i),t)}getString(e,t=!1){let i=Laya.LocalStorage.getItem(this.getKey(e,t));return null==i&&(i=""),i}setBoolean(e,t,i=!1){Laya.LocalStorage.setItem(this.getKey(e,i),t?"true":"false")}getBoolean(e,t=!1){return"true"==Laya.LocalStorage.getItem(this.getKey(e,t))}setInt(e,t,i=!1){Laya.LocalStorage.setItem(this.getKey(e,i),t.toString())}getInt(e,t=!1){let i=Laya.LocalStorage.getItem(this.getKey(e,t));return i?parseInt(i):0}setFloat(e,t,i=!1){Laya.LocalStorage.setItem(this.getKey(e,i),t.toString())}getFloat(e,t=!1){let i=Laya.LocalStorage.getItem(this.getKey(e,t));return i?parseFloat(i):0}setJSON(e,t,i=!1){Laya.LocalStorage.setJSON(this.getKey(e,i),t)}getJSON(e,t=!1){return Laya.LocalStorage.getJSON(this.getKey(e,t))}removeItem(e,t=!1){return Laya.LocalStorage.removeItem(this.getKey(e,t))}hasItem(e,t=!1){return!isNullOrEmpty(Laya.LocalStorage.getItem(this.getKey(e,t)))}clear(){return Laya.LocalStorage.clear()}}class Ot extends Nt{static get Instance(){return Ot._Instance||(Ot._Instance=new Ot),Ot._Instance}get gmX(){return void 0===this._gmX&&(this._gmX=this.getFloat("gmX",!0)),this._gmX}set gmX(e){this._gmX=e,this.setFloat("gmX",e,!0)}get gmY(){return void 0===this._gmY&&(this.hasItem("gmY",!0)?this._gmY=this.getFloat("gmY",!0):this._gmY=100),this._gmY}set gmY(e){this._gmY=e,this.setFloat("gmY",e,!0)}get fontSetting(){return this._fontSetting||(this._fontSetting=this.getItem("fontSetting",!0)),this._fontSetting}set fontSetting(e){this._fontSetting=e,this.setItem("fontSetting",e,!0)}get serverName(){return this._serverName||(this._serverName=this.getItem("serverName",!0)),this._serverName}set serverName(e){this._serverName=e,this.setItem("serverName",e,!0)}get useraccountList(){return this._useraccountList||(this._useraccountList=this.getJSON("_useraccountList",!0)),this._useraccountList||(this._useraccountList=[]),this._useraccountList}set useraccountList(e){this._useraccountList=e,this.setJSON("_useraccountList",e,!0)}addUseraccount(e,t){let i=!1,s=this.useraccountList?this.useraccountList:[];for(let a=0;a<s.length;a++)s[a].username==e&&(s[a].password=t,s[a].lasttime=On.time.localTimeMS,i=!0);i||s.push({username:e,password:t,lasttime:On.time.localTimeMS}),s.sort((e,t)=>t.lasttime-e.lasttime),this.useraccountList=s}get password(){return this._password||(this._password=this.getItem("password"),null==this._password&&(this._password="")),this._password}set password(e){this._password=e,this.setItem("password",e)}get server(){return this._server||(this._server=this.getInt("server"),null==this._server&&(this._server=0)),this._server}set server(e){this._server=e,this.setInt("server",e)}get deviceId(){if(!this._deviceId&&!(this._deviceId&&"undefined"!=this._deviceId&&null!=this._deviceId||(this._deviceId=this.getString("_deviceId",!0),this._deviceId))){let e=(new Date).getTime(),t=Math.random();this._deviceId=e.toString()+"."+t.toString()}return this._deviceId}set deviceId(e){this._deviceId=e,this.setString("_deviceId",e,!0)}get guestusername(){return this._guestusername||(this._guestusername=this.getString("guest",!0)),this._guestusername}set guestusername(e){this._guestusername=e,this.setString("guest",e,!0),On.sound.onLogin()}get isGuest(){return void 0===this._isGuest&&(this._isGuest=this.getBoolean("isGuest",!0)),this._isGuest}set isGuest(e){this._isGuest=e,this.setBoolean("isGuest",e,!0)}get isGameGuest(){return void 0===this._isGameGuest&&(this._isGameGuest=this.getBoolean("isGameGuest",!0)),this._isGameGuest}set isGameGuest(e){this._isGameGuest=e,this.setBoolean("isGameGuest",e,!0)}get isNoticTodayNoOpen(){return void 0===this._isNoticTodayNoOpen&&(this._isNoticTodayNoOpen=this.getBoolean("isNoticTodayNoOpen",!0)),this._isNoticTodayNoOpen}set isNoticTodayNoOpen(e){this._isNoticTodayNoOpen=e,this.setBoolean("isNoticTodayNoOpen",e,!0)}get lastOpenShopSpecialTime(){return void 0===this._lastOpenShopSpecialTime&&(this._lastOpenShopSpecialTime=this.getFloat("lastOpenShopSpecialTime",!0)),this._lastOpenShopSpecialTime}set lastOpenShopSpecialTime(e){this._lastOpenShopSpecialTime=e,this.setFloat("lastOpenShopSpecialTime",e,!0)}get lastOpenShopSingleTime(){return void 0===this._lastOpenShopSingleTime&&(this._lastOpenShopSingleTime=this.getFloat("lastOpenShopSingleTime",!0)),this._lastOpenShopSingleTime}set lastOpenShopSingleTime(e){this._lastOpenShopSingleTime=e,this.setFloat("lastOpenShopSingleTime",e,!0)}}!function(e){e[e.VeryLower=0]="VeryLower",e[e.Lower=1]="Lower",e[e.Middle=2]="Middle",e[e.Hight=3]="Hight"}(Ce||(Ce={}));class Et{constructor(){this.skeletonCacheMaxNum=10,this.unitMaxNum=10,this.roomUnitMaxNum=2,this.menuCacheTime=1e4,this.fguiLoaderCacheNum=100,this.fguiLoaderCacheTime=100,this.trailNum=5,this._performanceType=Ce.Lower,this._networkType=-1}get performanceType(){return this._performanceType}set performanceType(e){switch(this._performanceType=e,e){case Ce.VeryLower:this.skeletonCacheMaxNum=5,this.unitMaxNum=18,this.roomUnitMaxNum=2,this.menuCacheTime=3e3,this.fguiLoaderCacheNum=50,this.fguiLoaderCacheTime=3e3,this.trailNum=1;break;case Ce.Lower:this.skeletonCacheMaxNum=10,this.unitMaxNum=20,this.roomUnitMaxNum=3,this.menuCacheTime=3e3,this.fguiLoaderCacheNum=30,this.fguiLoaderCacheTime=3e3,this.trailNum=2;break;case Ce.Middle:this.skeletonCacheMaxNum=25,this.unitMaxNum=30,this.roomUnitMaxNum=4,this.menuCacheTime=1e4,this.fguiLoaderCacheNum=60,this.fguiLoaderCacheTime=1e4,this.trailNum=4;break;case Ce.Hight:this.skeletonCacheMaxNum=50,this.unitMaxNum=50,this.roomUnitMaxNum=4,this.menuCacheTime=3e5,this.fguiLoaderCacheNum=100,this.fguiLoaderCacheTime=1e5,this.trailNum=5}}init(){let e=this.getTotalMem();this.performanceType=e<=0?Ce.Hight:e<=1048576?Ce.VeryLower:e<=2097152?Ce.Middle:Ce.Hight}get isApp(){return!!window.conch}getTotalMem(){return this.isApp?window.conch.config.getTotalMem():0}getUsedMem(){return this.isApp?window.conch.config.getUsedMem():0}getAvalidMem(){return this.isApp?window.conch.config.getAvalidMem():0}getNetworkType(){return-1!=this._networkType?this._networkType:this.isApp?(this._networkType=window.conch.config.getNetworkType(),this._networkType):NetworkType.NET_UNKNOWN}set networkType(e){this._networkType=e}printInfo(){let e=` TotalMem: ${kbToStr(this.getTotalMem())}\n UsedMem: ${kbToStr(this.getUsedMem())}\n AvalidMem: ${kbToStr(this.getAvalidMem())}\n NetworkType: ${this.getNetworkType()}`;console.log(e)}}class Wt{static toLang(e){-1!=(e=e.replace("-","_").toLowerCase()).indexOf("en")&&(e=Wt.en);{let t=!1;for(let i in Wt)if(i==e){t=!0;break}t||(e=Wt.en)}return e}}Wt.zh_cn="zh_cn",Wt.zh_tw="zh_tw",Wt.en="en";class Vt{constructor(){this.configs=new Dictionary}getConfigList(){return this.configs.getValues()}get configList(){return this.configs.getValues()}getConfig(e){return this.configs.hasKey(e)||console.log(`${this.tableName} 没有 id=${e} 的配置`),this.configs.getValue(e)}addConfig(e){this.configs.add(e.id,e)}getConfigPath(){return j.config+`csv/${this.tableName}.csv`}load(e,t){}reload(e,t){}onGameLoadedAll(){}clear(){this.configs.clear()}}class Xt extends Vt{constructor(){super(...arguments),this.csvDelimiter="\t",this.csvSeparatorReplace=null,this.csvLineSeparatorReplace="|n|",this.headTypes=new Dictionary,this.headKeyEns=new Dictionary,this.headKeyFields=new Dictionary,this.headKeyCns=new Dictionary}ReplaceSpearator(e){return"TextFgui"==this.tableName&&e.indexOf(this.csvLineSeparatorReplace),e=(e=e.replace(/\|n\|/g,"\n")).replace(/\r/g,"")}load(e,t){e.loadConfig(this.getConfigPath(),(i,s)=>{this.parse(i),t&&t(this),e.unloadConfig(this.getConfigPath())})}reload(e,t){this.clear(),this.load(e,t)}clear(){this.headTypes.clear(),this.headKeyEns.clear(),this.headKeyFields.clear(),this.headKeyCns.clear(),super.clear()}parse(e){if(null==e)return void console.error(`${this.tableName}: txt=${e}`);let t,i,s=e.split("\n");i=(t=s[0]).split(this.csvDelimiter),this.ParseHeadTypes(i),i=(t=s[1]).split(this.csvDelimiter),this.ParseHeadKeyCN(i),i=(t=s[2]).split(this.csvDelimiter),this.ParseHeadKeyEN(i);for(let e=3;e<s.length;e++)if(t=s[e],!isNullOrEmpty(t)){i=t.split(this.csvDelimiter);for(let e=0;e<i.length;e++)i[e]=this.ReplaceSpearator(i[e]);this.ParseCsv(i)}}ParseHeadTypes(e){let t;for(let i=0;i<e.length;i++)t=e[i],isNullOrEmpty(t)||(t=t.trim(),this.headTypes.add(i,t))}ParseHeadKeyCN(e){let t;for(let i=0;i<e.length;i++)t=this.ReplaceSpearator(e[i]),isNullOrEmpty(t)||(t=t.trim(),this.headKeyCns.add(i,t))}ParseHeadKeyEN(e){let t;for(let i=0;i<e.length;i++)t=e[i],isNullOrEmpty(t)||(t=t.trim(),this.headKeyEns.hasKey(t)&&console.error(`${this.tableName}: ParseHeadKeyEN 已经存在key= ${t},  i = ${i}`),this.headKeyEns.add(t,i),this.headKeyFields.add(i,t))}ParseCsv(e){}GetHeadType(e){return this.headTypes.getValue(e)}GetHeadField(e){return this.headKeyFields.getValue(e)}GetHeadIndex(e){return this.headKeyEns.hasKey(e)?this.headKeyEns.getValue(e):(console.error(`${this.tableName}: headKeyEns[${e}] = -1`),-1)}onGameLoadedAll(){}}class qt{}class Kt extends qt{constructor(){super(...arguments),this.dict=new Dictionary}}class jt{}jt.MString="string",jt.MStringArray="string[]";class zt extends Xt{constructor(e){super(),this.lang="zh_cn",this.tableName=e}getConfigPath(){return`config/lang/${this.lang}/${this.tableName}.csv`}get headKeyFieldList(){return this._headKeyFieldList||(this._headKeyFieldList=this.headKeyFields.getValues()),this._headKeyFieldList}ParseCsv(e){let t=new Kt;t.id=csvGetInt(e,this.GetHeadIndex("id"));let i=this.headKeyFieldList;for(let s=0;s<i.length;s++){let a=csvGetString(e,this.GetHeadIndex(i[s]));switch(this.GetHeadType(s)){case jt.MStringArray:t.dict.add(i[s],toStringArray(a));break;default:t.dict.add(i[s],a)}}this.addConfig(t)}}class Yt{constructor(){this.lang="zh_cn",this.renders=[],this.textCode=new zt("TextCode"),this.textFgui=new zt("TextFgui")}initList(){}}class $t extends Yt{constructor(){super(...arguments),this.sLoadProgress=new Typed3Signal,this.sLoaded=new Signal,this.loadProgress=0,this.isLoadCompleted=!1,this.textRenders=[],this.sTextLoaded=new Signal}async loadAllAsync(){return new Promise(e=>{this.loadAll(),this.sLoaded.addOnce(()=>{e()},this)})}loadAll(){this.loadProgress=0;let e=this.renders.length,t=0,i=()=>{t++,this.loadProgress=t/e,this.sLoadProgress.dispatch(t,e,this.loadProgress),t>=e&&this.onGameLoadedAll()};for(let e=0;e<this.renders.length;e++)this.renders[e].lang=this.lang,this.renders[e].load(this.configLoader,i)}onGameLoadedAll(){for(let e=0;e<this.renders.length;e++)this.renders[e].onGameLoadedAll();this.setCodeTEXT(),re.setStringsSource(this.textFgui),this.isLoadCompleted=!0,this.sLoaded.dispatch()}loadText(){let e=this.textRenders;0==e.length&&(e.push(this.textCode),e.push(this.textFgui)),this.loadProgress=0;let t=e.length,i=0,s=()=>{++i>=t&&this.onLoadTextComplte()};for(let t=0;t<e.length;t++)e[t].lang=this.lang,e[t].load(this.configLoader,s)}onLoadTextComplte(){let e=this.textRenders;for(let t=0;t<e.length;t++)e[t].onGameLoadedAll();this.setCodeTEXT(),re.setStringsSource(this.textFgui),this.sTextLoaded.dispatch()}setCodeTEXT(){if(!this._srcTEXT&&z){this._srcTEXT=new Dictionary;for(let e in z)this._srcTEXT.add(e,z[e])}let e=this.textCode.getConfigList();for(let t=0;t<e.length;t++){let i=e[t],s=i.dict.getValue("key"),a=i.dict.getValue("value");isNullOrEmpty(a)||(z[s]=a)}}}class Jt{constructor(){this.isUseLang=!1,this._lang=null,this.langListDict=new Dictionary}static get Instance(){return Jt._Instance||(Jt._Instance=new Jt),Jt._Instance}get httpLang(){return this._httpLang||(this.httpLang=this.lang),this._httpLang}set httpLang(e){if((e=e.replace("_","-")).indexOf("-")){let t=e.split("-");for(let e=1;e<t.length;e++)t[e]=t[e].toUpperCase();e=t.join("-")}this._httpLang=e}get lang(){return this._lang||(On.localStorage.hasItem("_lang",!0)?this._lang=On.localStorage.getString("_lang",!0):this._lang=Wt.zh_cn,this.httpLang=this._lang),this._lang}set lang(e){this._lang=e,this.httpLang=e,On.localStorage.setString("_lang",e,!0)}get current(){if(this._current)return this._current;if(!this.langListDict.hasKey(this.lang)){let e=new $t;e.lang=this.lang,this.langListDict.add(e.lang,e),this._current=e}return this.langListDict.getValue(this.lang)}getValue(e,t,i){let s=this.current[e];if(s){let e=s.getConfig(t);if(e)return e.dict.getValue(i)}return null}}class Qt{static getResPackagePath(e,t){return isNullOrEmpty(t)?`${Qt.resRoot}${e}`:`${Qt.resRoot}${t}/${e}`}static getResPath(e,t){return isNullOrEmpty(t)?`${Qt.resRoot}${e}`:`${Qt.resRoot}${t}/${e}`}static getMapPath(e){return this.getResPath(e,"map")}static addPackage(e,t){if(Qt._uiPackageDict.hasKey(e))return Qt._uiPackageDict.getValue(e);{let t=fgui.UIPackage.addPackage(e);return Qt._uiPackageDict.add(e,t),t}}static removePackage(e,t){let i=Qt._uiPackageDict.getValue(e);i&&(fgui.UIPackage.removePackage(i.id),i.dispose(),Qt._uiPackageDict.remove(e)),Qt._uiPackageDictForReferenceNum.remove(e)}static hasLoadPackage(e){return Qt._uiPackageDict.hasKey(e)}static addPackageReferenceNum(e){let t=Qt.getPackageReferenceNum(e)+1;return 0==t&&(t=1),console.log("~~addPackageReferenceNum:  "+t+"  "+e),Qt._uiPackageDictForReferenceNum.add(e,t),t}static removePackageReferenceNum(e){let t=Qt.getPackageReferenceNum(e)-1;return t<0&&(t=0),console.log("~~removePackageReferenceNum:  "+t+"  "+e),Qt._uiPackageDictForReferenceNum.add(e,t),t}static getPackageReferenceNum(e){return Qt._uiPackageDictForReferenceNum.hasKey(e)?Qt._uiPackageDictForReferenceNum.getValue(e):0}}Qt.resRoot="res/",Qt.packageFileExtension="bin",Qt._uiPackageDict=new Dictionary,Qt._uiPackageDictForReferenceNum=new Dictionary;var Zt=Laya.Handler,ei=Laya.Loader;class ti{constructor(){this.loadedAssets=new Dictionary}loadConfig(e,t){if(t){let i={onLoaded:()=>{let i=Laya.loader.getRes(e);t(i,e)}};Laya.loader.load(e,Zt.create(i,i.onLoaded),null,ei.TEXT)}}unloadConfig(e){Laya.loader.clearRes(e)}loadList(e,t,i,s){let a=e.length,n=0,r={onComplete:r=>{let o=e[n];if(n++,s){s(a>0?n/a:1,n,a,o)}n>=a&&i&&(t?i.apply(t):i())},onProgress:e=>{}};if(e&&e.length>0){let t,i=[];for(let s=0;s<e.length;s++)switch((t=e[s])||r.onComplete(t),t.type){case f.FguiPackage:this.loadFguiByPackagename(t.url,r,r.onComplete);break;case f.FspritePackage:this.loadFSpriteByPackagename(t.url,r,r.onComplete);break;case f.Image:i.push({url:t.url,type:ei.IMAGE});break;case f.Buffer:i.push({url:t.url,type:ei.BUFFER});break;case f.Sound:i.push({url:t.url,type:ei.SOUND});break;case f.Text:i.push({url:t.url,type:ei.TEXT});break;case f.Json:i.push({url:t.url,type:ei.JSON});break;case f.Xml:i.push({url:t.url,type:ei.XML});break;case f.Font:i.push({url:t.url,type:ei.FONT});break;case f.TTF:i.push({url:t.url,type:ei.TTF})}if(i.length>0)for(let e=0;e<i.length;e++)this.loadedAssets.hasKey(i[e].url)?r.onComplete(!0):Laya.loader.load([i[e]],Zt.create(r,r.onComplete),Zt.create(r,r.onProgress)),this.loadedAssets.add(i[e].url,On.time.localTimeMS)}else r.onComplete(null)}loadFguiByPackagename(e,t,i){let s=On.guiRes.getconfig(e);this.loadFgui(s,t,i)}async loadFguiByPackagenameAsync(e){return new Promise(t=>{this.loadFguiByPackagename(e,this,e=>{t(e)})})}loadFSpriteByPackagename(e,t,i){let s=On.spriteRes.getconfig(e);s?this.loadFgui(s,t,i):console.error(`AssetManager loadFSpriteByPackagename: packageConfig=${s} packageName=${e}`)}loadFgui(e,t,i){if(!e)return void console.error(`AssetManager loadFgui: packageConfig=${e}`);let s={apply:()=>{if(Qt.addPackage(e.packagePath,e),i){if(t)return i.apply(t,[e]);i(e)}}};Qt.addPackageReferenceNum(e.packagePath),Qt.hasLoadPackage(e.packagePath)?s.apply():Laya.loader.load(e.loadList,Zt.create(s,s.apply))}unloadFgui(e,t){void 0===t&&(t=!1);let i=On.guiRes.getconfig(e);if(i||(i=On.spriteRes.getconfig(e)),i){let e=Qt.removePackageReferenceNum(i.packagePath);if(!t&&e>0)return;Qt.removePackage(i.packagePath,i);let s=i.loadList;for(let e=0;e<s.length;e++)Laya.loader.clearRes(s[e].url)}}loadFx(e,t,i){Laya.loader.load(e,Zt.create(null,e=>{i&&(t?i.apply(t,e):i(e))}),null,ei.JSON)}load(e,t,i,s){Laya.loader.load(e,Zt.create(null,e=>{t&&(i?t.apply(i,[e]):t(e))}),null,se.assetItemType2LayaLoaderType(s))}async loadAsync(e,t){return new Promise(i=>{this.load(e,e=>{i(e)},null,t)})}async loadResAsync(e,t){return new Promise(i=>{Laya.loader.load(e,Laya.Handler.create(null,e=>{Laya.timer.frameOnce(1,null,()=>{i(e)})}),null,t)})}async loadShaderVSAsync(e){return(await this.loadAsync(j.getShaderVS(e),f.Text)).replace(/\r/g,"")}async loadShaderPSAsync(e){return(await this.loadAsync(j.getShaderPS(e),f.Text)).replace(/\r/g,"")}async preloadAndInstallSoundAsync(e){return new Promise(t=>{if(!Engine.borwer.isWXGame)return void t(!1);let i=Laya.SoundManager.preloadSound(e);i?(i.once(Laya.Event.COMPLETE,this,()=>{t(!0),i.offAll()}),i.once(Laya.Event.ERROR,this,()=>{t(!1),i.offAll()})):t(!1)})}preloadAndInstallSound(e,t,i){var s=e=>{i&&(t?i.call(t,e):i(Vector4))};let a=Laya.SoundManager.preloadSound(e);a?(a.once(Laya.Event.COMPLETE,this,()=>{s(!0),a.offAll()}),a.once(Laya.Event.ERROR,this,()=>{s(!0),a.offAll()})):s(!1)}}window.AssetManager=ti;var ii,si,ai=Laya.Loader;class ni{constructor(){this.resAtlas=[],this.sounds=[]}get loadList(){if(!this._loadList){let e=[];if(e.push({url:Qt.getResPath(this.resBin,this.resDir),type:ai.BUFFER}),this.resAtlas)for(let t=0;t<this.resAtlas.length;t++)e.push({url:Qt.getResPath(this.resAtlas[t],this.resDir),type:ai.IMAGE});if(this.sounds)for(let t=0;t<this.sounds.length;t++)e.push({url:Qt.getResPath(this.sounds[t],this.resDir),type:ai.SOUND});this._loadList=e}return this._loadList}get packagePath(){return Qt.getResPackagePath(this.packageName,this.resDir)}}class ri{constructor(){this.dict=new Dictionary}addconfig(e){this.dict.add(e.packageName,e)}getconfig(e){return this.dict.getValue(e)}install(){let e;(e=new ni).resDir="fgui",e.packageName="GameHome",e.resBin="GameHome.bin",e.resAtlas.push("GameHome_atlas0.png"),e.resAtlas.push("GameHome_atlas_sqzy0.jpg"),e.resAtlas.push("GameHome_atlas_sqzy1.jpg"),e.resAtlas.push("GameHome_atlas_sqzy15.png"),e.sounds.push("GameHome_sqzy7p.mp3"),this.addconfig(e),(e=new ni).resDir="fgui",e.packageName="GameLaunch",e.resBin="GameLaunch.bin",e.resAtlas.push("GameLaunch_atlas0.png"),e.resAtlas.push("GameLaunch_atlas_qyvzw2s.png"),e.resAtlas.push("GameLaunch_atlas_tnlhw3c.png"),this.addconfig(e),(e=new ni).resDir="fgui",e.packageName="ModuleLogin",e.resBin="ModuleLogin.bin",e.resAtlas.push("ModuleLogin_atlas0.png"),e.resAtlas.push("ModuleLogin_atlas_je283m.png"),e.resAtlas.push("ModuleLogin_atlas_je283n.png"),e.resAtlas.push("ModuleLogin_atlas_tnlh35.png"),e.resAtlas.push("ModuleLogin_atlas_tnlh3d.png"),e.resAtlas.push("ModuleLogin_atlas_tnlh3e.png"),e.resAtlas.push("ModuleLogin_atlas_tnlh3j.png"),this.addconfig(e),(e=new ni).resDir="fgui",e.packageName="Sound",e.resBin="Sound.bin",this.addconfig(e)}}class oi{constructor(){this.dict=new Dictionary}addconfig(e){this.dict.add(e.packageName,e)}getconfig(e){return this.dict.getValue(e)}install(){let e;(e=new ni).resDir="fsprite",e.packageName="ActivityIcon",e.resBin="ActivityIcon.bin",e.resAtlas.push("ActivityIcon@atlas0.png"),this.addconfig(e),(e=new ni).resDir="fsprite",e.packageName="ActorBodyIcon",e.resBin="ActorBodyIcon.bin",e.resAtlas.push("ActorBodyIcon@atlas0.png"),e.resAtlas.push("ActorBodyIcon@atlas0_1.png"),e.resAtlas.push("ActorBodyIcon@atlas0_2.png"),e.resAtlas.push("ActorBodyIcon@atlas0_3.png"),e.resAtlas.push("ActorBodyIcon@atlas0_4.png"),e.resAtlas.push("ActorBodyIcon@atlas0_5.png"),this.addconfig(e),(e=new ni).resDir="fsprite",e.packageName="BlockIcon",e.resBin="BlockIcon.bin",e.resAtlas.push("BlockIcon@atlas0.png"),this.addconfig(e),(e=new ni).resDir="fsprite",e.packageName="Building",e.resBin="Building.bin",e.resAtlas.push("Building@atlas0.png"),e.resAtlas.push("Building@atlas0_1.png"),this.addconfig(e),(e=new ni).resDir="fsprite",e.packageName="CinemaIcon",e.resBin="CinemaIcon.bin",e.resAtlas.push("CinemaIcon@atlas0.png"),this.addconfig(e),(e=new ni).resDir="fsprite",e.packageName="Icon_En",e.resBin="Icon_En.bin",e.resAtlas.push("Icon_En@atlas0.png"),this.addconfig(e),(e=new ni).resDir="fsprite",e.packageName="Icon_ZH_CN",e.resBin="Icon_ZH_CN.bin",e.resAtlas.push("Icon_ZH_CN@atlas0.png"),this.addconfig(e),(e=new ni).resDir="fsprite",e.packageName="ItemIcon",e.resBin="ItemIcon.bin",e.resAtlas.push("ItemIcon@atlas0.png"),this.addconfig(e),(e=new ni).resDir="fsprite",e.packageName="MeetingIcon",e.resBin="MeetingIcon.bin",e.resAtlas.push("MeetingIcon@atlas0.png"),this.addconfig(e),(e=new ni).resDir="fsprite",e.packageName="MenuIcon",e.resBin="MenuIcon.bin",e.resAtlas.push("MenuIcon@atlas0.png"),this.addconfig(e),(e=new ni).resDir="fsprite",e.packageName="NPCHeadIcon",e.resBin="NPCHeadIcon.bin",e.resAtlas.push("NPCHeadIcon@atlas0.png"),this.addconfig(e),(e=new ni).resDir="fsprite",e.packageName="PlayerBodyIcon",e.resBin="PlayerBodyIcon.bin",e.resAtlas.push("PlayerBodyIcon@atlas0.png"),this.addconfig(e),(e=new ni).resDir="fsprite",e.packageName="PlayerHeadIcon",e.resBin="PlayerHeadIcon.bin",e.resAtlas.push("PlayerHeadIcon@atlas0.png"),this.addconfig(e),(e=new ni).resDir="fsprite",e.packageName="SettingIcon",e.resBin="SettingIcon.bin",e.resAtlas.push("SettingIcon@atlas0.png"),this.addconfig(e),(e=new ni).resDir="fsprite",e.packageName="ShootIcon",e.resBin="ShootIcon.bin",e.resAtlas.push("ShootIcon@atlas0.png"),this.addconfig(e),(e=new ni).resDir="fsprite",e.packageName="SkillIcon",e.resBin="SkillIcon.bin",e.resAtlas.push("SkillIcon@atlas0.png"),this.addconfig(e),(e=new ni).resDir="fsprite",e.packageName="StoryIcon",e.resBin="StoryIcon.bin",e.resAtlas.push("StoryIcon@atlas0.png"),e.resAtlas.push("StoryIcon@atlas0_1.png"),e.resAtlas.push("StoryIcon@atlas0_2.png"),e.resAtlas.push("StoryIcon@atlas0_3.png"),this.addconfig(e),(e=new ni).resDir="fsprite",e.packageName="StoryStackIcon",e.resBin="StoryStackIcon.bin",e.resAtlas.push("StoryStackIcon@atlas0.png"),this.addconfig(e)}}!function(e){e[e.Closed=1]="Closed",e[e.Loading=2]="Loading",e[e.Opened=3]="Opened",e[e.Destoryed=4]="Destoryed"}(ii||(ii={}));class li{static get idDict(){return li._idDict||li.init(),li._idDict}static get extDict(){return li._extDict||li.init(),li._extDict}static getId(e){return li.idDict.hasKey(e)?li.idDict.getValue(e):(console.error("SoundKey 不存在 key="+e),"")}static getUrl(e){return`ui://${li.SoundPackageId}${li.getId(e)}`}static getPath(e){return Qt.getResPath(`${li.SoundPackageName}_${li.getId(e)}${li.extDict.getValue(e)}`,"fgui")}static init(){li._idDict=new Dictionary,li._extDict=new Dictionary}}li.SoundPackageName="Sound",li.SoundPackageId="44whq70o",function(e){e[e.None=0]="None",e[e.ExceptSelf_All=1]="ExceptSelf_All",e[e.ExceptSelf_Module=2]="ExceptSelf_Module",e[e.ExceptSelf_SameLayer=3]="ExceptSelf_SameLayer"}(si||(si={}));class ci{constructor(){this.sOpen=new Signal,this.backMenuId=-1,this.backExcludeMenuIdMenuId=-1,this.closeTime=0,this.closeIsDestory=!0}open(e){this.openParametar=e,this.moduleWindow||(this.moduleWindow=new this.menuWindowConfig.windowClass,this.moduleWindow.menuId=this.menuId,this.moduleWindow.name=this.menuConfig.name,this.moduleWindow.windowContainer=Z.getLayer(this.menuConfig.menuLayer)),this.load()}close(){this.state!=ii.Closed&&this.state!=ii.Destoryed&&this.__menuManager.__onMenuClose(this)}__delayClose(){this.moduleWindow&&this.moduleWindow.menuIsCreated&&(On.event.dispatch(ne.GameFrame_CloseMenu,this.moduleWindow.menuId),this.moduleWindow.onMenuClose(),this.closeTime=On.time.localTimeMS),this.state=ii.Closed}destory(){this.moduleWindow&&(this.moduleWindow.sShowComplete.remove(this.closeOther,this),this.moduleWindow.destory(),this.moduleWindow=null),this.state=ii.Destoryed}load(){this.state=ii.Loading;let e=this.getLoadAssets();if(e&&0!=e.length){this.loadBeginTime=On.time.localTimeMS;let t=On.loader.open(this.menuConfig.menuLoaderId);t.setMax(e.length),t.setProgress(0);let i=(e,i,s,a)=>{t.setProgress(i)};On.asset.loadList(e,this,this.onLoadComplete,i)}else this.loadBeginTime=0,this.onLoadComplete()}onLoadComplete(){this.setShow(),On.loader.close(this.menuConfig.menuLoaderId),this.loadBeginTime>0&&console.log("加载界面花费时间 ("+this.menuConfig.moduleName+") :"+(On.time.localTimeMS-this.loadBeginTime)+" 毫秒")}getLoadAssets(){let e=[],t=new Dictionary;return this.moduleWindow.menuIsCreated||this.moduleWindow.getLoadAssets(e,t),this.moduleWindow.generateAssetsForDynmic(),this.moduleWindow.getLoadAssetsForDynamic(e,t),e}setShow(){if(this.moduleWindow){switch(console.log(`设置显示面板 ${this.menuConfig.name}(${this.menuConfig.moduleName}): ${this.menuId}`),this.moduleWindow.sShowComplete.addOnce(this.closeOther,this),this.moduleWindow.sShowSubwindowComplete.addOnce(this.closeOther,this),this.state=ii.Opened,this.moduleWindow.menuIsCreated?this.moduleWindow.onMenuOpen(this.openParametar):this.moduleWindow.menuParameter=this.openParametar,this.moduleWindow.menuShow(this.moduleWindow.windowContainer),this.menuId){case p.Login:case p.Home:On.sound.playMusic(li.MM_BGM_01)}this.sOpen.dispatch()}else console.warn(`设置显示 但是模块已销毁 ${this.menuConfig.name}(${this.menuConfig.moduleName}): ${this.menuId}`)}setCloseDontDestory(){}closeOther(){let e=this.__menuManager.isOpened(p.Home),t=this.__menuManager.getLastModuleOpenMenuId([this.backExcludeMenuIdMenuId,this.menuId,p.BattleResultWindow]),i=!1,s=On.menu.dict.getValues();switch(this.menuConfig.menuCloseOtherType){case si.None:break;case si.ExceptSelf_All:for(let t=0;t<s.length;t++){let a=s[t];a!=this&&(a.closeIsDestory=e,a.close(),i=!0)}break;case si.ExceptSelf_Module:for(let t=0;t<s.length;t++){let a=s[t];a!=this&&a.menuConfig.menuLayer==C.Module&&(a.closeIsDestory=e,a.close(),i=!0)}break;case si.ExceptSelf_SameLayer:for(let t=0;t<s.length;t++){let a=s[t];a.menuId!=p.Home&&(a!=this&&a.menuConfig.menuLayer==this.menuConfig.menuLayer&&(a.closeIsDestory=e,a.close(),i=!0))}}if(this.menuConfig.closeHomeWindow){let e=this.__menuManager.getMenuCtl(p.Home);e&&e.moduleWindow&&e.close()}i?-1!=t&&(this.backMenuId=t):this.backMenuId=-1}}class hi extends fgui.GLoader{static get freeList(){hi._freeList.length>0&&(hi._freeList.length=0);let e=hi.freeDictForNum.__getDict();for(let t in e)hi.freeDictForNum.getValue(t)<=0&&hi._freeList.push(t);return hi._freeList}static setUse(e){let t=hi.freeDictForNum.hasKey(e)?hi.freeDictForNum.getValue(e)+1:1;hi.freeDictForNum.add(e,t)}static setFree(e){if(-1!=e.indexOf("/MenuIcon/"))return;hi.freeDictForTime.add(e,On.time.localTimeMS);let t=hi.freeDictForNum.hasKey(e)?hi.freeDictForNum.getValue(e)-1:0;t<0&&(t=0),hi.freeDictForNum.add(e,t)}static removeFree(e){hi.freeDictForTime.remove(e),hi.freeDictForNum.remove(e)}static clearAllFree(e){for(e||(e=hi.freeList);e.length>0;){let t=e.pop();hi.removeFree(t),Laya.loader.clearRes(t)}}static clearFreeLong(){if(hi.freeDictForNum.count<=On.deviceSetting.fguiLoaderCacheNum)return;hi._freeLongList.length=0;let e=hi.freeDictForNum.__getDict();for(let t in e)if(hi.freeDictForNum.getValue(t)<=0){On.time.localTimeMS-hi.freeDictForTime.getValueOrDefault(t,0)>On.deviceSetting.fguiLoaderCacheTime&&hi._freeLongList.push(t)}hi.clearAllFree(hi._freeLongList)}loadContent(){super.loadContent()}getPackagenameByUrl(e){return e.replace("ui://","").split("/")[0]}loadFromPackage(e){if(fgui.UIPackage.getItemByURL(e))super.loadFromPackage(e);else{let t=this.getPackagenameByUrl(e),i=On.spriteRes.getconfig(t);i||(i=On.guiRes.getconfig(t)),i&&On.asset.loadFgui(i,this,this.onLoadPackage)}}onLoadPackage(){super.loadFromPackage(this.url)}loadExternal(){hi.setUse(this.url),super.loadExternal()}freeExternal(e){super.freeExternal(e),isNullOrEmpty(e.url)||(hi.setFree(e.url),e.url="")}onExternalLoadSuccess(e){super.onExternalLoadSuccess(e)}onExternalLoadFailed(){super.onExternalLoadFailed()}}hi.freeDictForTime=new Dictionary,hi.freeDictForNum=new Dictionary,hi._freeList=[],hi._freeLongList=[];var ui,mi,gi,di,pi=Laya.Pool;class Si{constructor(e,t){this.logType=e,this.msg=t+""}poolRecover(){pi.recover(Si.POOL_SIGN,this)}static poolGet(){return pi.getItemByClass(Si.POOL_SIGN,Si)}}Si.POOL_SIGN="LogItem";!function(e){e[e.Debug=0]="Debug",e[e.Info=0]="Info",e[e.Warn=2]="Warn",e[e.Error=3]="Error"}(ui||(ui={})),function(e){e.Debug="Debug",e.Info="Info",e.Warn="Warn",e.Error="Error"}(mi||(mi={}));class Ci{static get Level(){return this.level}static set Level(e){this.level=e}static Debug(...e){this.level>ui.Debug||(this.logger.debug(...e),this.mineloger.debug(...e))}static Info(...e){this.level>ui.Info||(this.logger.info(...e),this.mineloger.info(...e))}static Warn(...e){this.level>ui.Warn||(this.logger.warn(...e),this.mineloger.warn(...e))}static Error(...e){this.level>ui.Warn||(this.logger.error(...e),this.mineloger.error(...e))}static clear(){this.logger.clear(),this.mineloger.clear()}}Ci.mineloger=new class{constructor(){this.maxcount=1e3,this.enable=!0,this.dict=new Dictionary,this.list=[]}getList(e){if(this.dict.hasKey(e))return this.dict.getValue(e);let t=[];return this.dict.add(e,t),t}get listAll(){return this.list}getListByTypes(e){let t=[];for(let i=0;i<this.list.length;i++)-1!=e.indexOf(this.list[i].logType)&&t.push(this.list[i]);return t}addLog(e,t,...i){if(this.enable)if(t){let s=Si.poolGet();s.logType=e,s.msg=this.stringFormat(t,...i),this.add(s)}else{let i=Si.poolGet();i.logType=e,i.msg=t,this.add(i)}}add(e){if(!this.enable)return;let t=this.getList(e.logType);t.push(e),this.list.push(e),this.list.length>this.maxcount&&this.list.shift().poolRecover(),t.length>this.maxcount&&t.shift().poolRecover()}clear(){console.clear();for(let e of this.list)e.poolRecover();this.list=[],this.dict.clear()}stringFormat(e,...t){if(t)for(let i=0;i<t.length&&/%s|%d|%i|%o/.test(e);i++)e=e.replace(/%s|%d|%i|%o/,t[i]);return e}debug(e,...t){this.addLog(ui.Debug,e,...t)}error(e,...t){this.addLog(ui.Error,e,...t)}info(e,...t){this.addLog(ui.Info,e,...t)}log(e,...t){this.addLog(ui.Info,e,...t)}warn(e,...t){this.addLog(ui.Warn,e,...t)}},Ci.logger=console,Ci.level=ui.Debug;class fi{constructor(){this.dict=new Dictionary,this.list=[],this.stack=[]}install(){}getMenuCtl(e){return this.dict.getValue(e)}destory(e){let t=this.getMenuCtl(e);t&&(t.state==ii.Opened?(t.close(),setTimeout(()=>{t.destory()},100)):t.destory())}openTab(e,t,...i){return this._open(e,{openType:te.Tab,openIndex:t,args:i})}openSubWindow(e,t,...i){return this._open(e,{openType:te.Subwindow,openIndex:t,args:i})}async openAsync(e,...t){let i=this._open(e,{openType:te.None,openIndex:0,args:t});return i.state==ii.Opened?i:new Promise(e=>{i.sOpen.addOnce(()=>{e(i)},this)})}open(e,...t){return this._open(e,{openType:te.None,openIndex:0,args:t})}openByMenuIndexId(e,...t){let i=On.config.menuIndex.getConfig(e);if(i)switch(i.openType){case te.Subwindow:this.openSubWindow(i.menuId,i.menuIndex,...t);break;case te.Tab:this.openTab(i.menuId,i.menuIndex,...t);break;default:this.open(i.menuId,...t)}else{On.config.menu.getConfig(e)&&this.open(e,...t)}}openHome(){let e=this.getMenuCtl(p.Home);e&&e.state==ii.Opened||(e=this.open(p.Home)),e.moduleWindow.contentPane&&!e.moduleWindow.contentPane.visible&&(e.moduleWindow.contentPane.visible=!0)}closeHome(){let e=this.getMenuCtl(p.Home);e&&e.moduleWindow&&e.moduleWindow.contentPane&&(e.moduleWindow.contentPane.visible=!1)}_open(e,t){let i=this.getMenuCtl(e);if(!i){let t=On.config.menu.getConfig(e);if(!t){let t=`MenuManager.open 没有找到menuConfig, menuId=${e}`;return On.system.toastText(t),Ci.Warn(t),null}let s=vt.get(e);if(!s)return On.system.toastText(z.Disable),Ci.Warn(`MenuManager.open 没有找到menuWindowConfig, menuId=${e}`),null;if(!s.windowClass)return Ci.Error(`MenuManager.open menuWindowConfig.windowClass=${s.windowClass}, menuId=${e}`),null;(i=new ci).__menuManager=this,i.menuId=e,i.menuConfig=t,i.menuWindowConfig=s,this.dict.add(e,i),i.menuId!=p.Home&&this.list.push(i)}i.open(t);let s=this.stack.indexOf(i);return-1!=s&&this.stack.splice(s,1),this.stack.push(i),i}back(e){this.close(e)}close(e){let t=this.getMenuCtl(e);t&&(t.closeIsDestory=!0,t.backMenuId=-1,t.close())}closeAll(){for(let e=this.stack.length-1;e>=0;e--)this.stack[e].menuId!=p.War&&this.stack[e].close()}__onMenuClose(e){for(let t=this.stack.length-1;t>=0;t--)this.stack[t]==e&&this.stack.splice(t,1);let t=0,i=0,s=0;for(let a of this.list)if(a.menuId!=e.menuId)switch(a.state){case ii.Opened:if(t++,a.menuConfig.menuLayer==e.menuConfig.menuLayer&&i++,a.menuConfig.menuLayer==C.Module||a.menuConfig.menuLayer==C.ModuleTop||a.menuConfig.menuLayer==C.WarUI){s++;break}}console.log(`关闭面板 ${e.menuConfig.name} ( ${e.menuConfig.moduleName})  :" + openedNum=${t}, sameLayoutOpenedNum=${i}, moduleOpenedNum=${s}`);var a=0==s;if(a&&this.needOpenHomeFun&&(a=this.needOpenHomeFun()),a){let e=this.getMenuCtl(p.Home);e&&e.state==ii.Opened||(e=this.open(p.Home))}e.__delayClose(),this.onTick(),hi.clearFreeLong()}getLastOpenMenuId(){return this.stack.length>0?this.stack[this.stack.length-1].menuId:-1}getLastModuleOpenMenuId(e){for(let t=this.stack.length-1;t>=0;t--){let i=this.stack[t];if(i.menuConfig.menuLayer==C.Module||i.menuConfig.menuLayer==C.ModuleTop){if(e&&-1!=e.indexOf(i.menuId))continue;return i.menuId}}return-1}isOpened(e){let t=!1,i=this.getMenuCtl(e);return i&&i.state==ii.Opened&&(i.menuId==p.Home?i.moduleWindow&&i.moduleWindow.contentPane&&(t=i.moduleWindow.contentPane.visible):t=!0),t}isOpenedSubOrTab(e,t){if(!this.isOpened(e))return!1;let i=this.getMenuCtl(e);return!!i&&i.moduleWindow.isOpenSubOrTab(t)}getSubWindow(e,t){if(!this.isOpened(e))return null;let i=this.getMenuCtl(e);return i?i.moduleWindow.getSubwindow(t):null}onTick(){for(let e=0;e<this.list.length;e++){let t=this.list[e];if(t.state==ii.Closed&&-1!=t.menuConfig.cacheTime){let e=Math.max(t.menuConfig.cacheTime,On.deviceSetting.menuCacheTime);On.time.localTimeMS-t.closeTime>=e&&t.closeIsDestory&&t.destory()}}}}class yi{static get serverCmdUrl(){return j.GmConfig+"ServerGM.json"}static get clientCmdUrl(){return j.GmConfig+"ClientGM.json"}static get serverListUrl(){return this._serverListUrl}static getServerMainUrl(e){if(e)return e.https?443==e.port?"https://"+e.ip:"https://"+e.ip+":"+e.port:"http://"+e.ip+":"+e.port}}yi._serverListUrl="ServerList.json";class wi{static GetServerMonthDateNum(e,t){let i=this.GetServerDateByTimestamp();return null==e&&(e=i.getFullYear()),null==t&&(t=i.getMonth()+1),(i=new Date(e,t,0)).getDate()}static ToStr(e){return`${e.getFullYear()}-${e.getMonth()+1}-${e.getDate()} 周${0==e.getDay()?7:e.getDay()}  ${e.getHours()}:${e.getMinutes()}:${e.getSeconds()}`}static ToTimeStamp(e){var t=new Date(e.replace(/-/g,"/"));return Math.round(t.valueOf()/1e3)}static GetServerDateByTimestamp(e){return null==e&&(e=On.time.serverSeconds),new Date(1e3*e-On.time.localSubServerTimeZone)}static GetServerTimestampByHMS(e=0,t=0,i=0){return this.GetServerDateByHMS(e,t,i).getTime()}static GetServerTimestampByHMSText(e){let t,i,s,a=e.split(":");return a[0]&&(t=Number(a[0])||0),a[1]&&(i=Number(a[1])||0),a[2]&&(s=Number(a[2])||0),this.GetServerTimestampByHMS(t,i,s)}static GetServerDateByHMS(e=0,t=0,i=0){let s=this.GetServerDateByTimestamp();return s.setHours(e),s.setMinutes(t),s.setSeconds(i),s}static getServerNextDate(e=0,t=0,i=0){let s=this.GetServerDateByHMS(e,t,i);return s.getTime()>=On.time.serverMilliseconds?s:(s.setHours(s.getHours()+24),s)}static getServerNextWeekDate(e,t=0,i=0,s=0){let a=this.GetServerDateByHMS(t,i,s),n=e-a.getDay();return n<0?n+=7:0==n&&a.getTime()<On.time.serverMilliseconds&&(n+=7),a.setDate(a.getDate()+n),a}static getServerNextMonthDate(e,t=0,i=0,s=0){let a=this.GetServerDateByHMS(t,i,s),n=e;if(0==e?n=a.getDate():e<0&&(n=this.GetServerMonthDateNum()+e+1),a.setDate(n),a.getTime()>=On.time.serverMilliseconds)return a;let r=this.GetServerMonthDateNum(a.getFullYear(),a.getMonth()+1);return e<0&&(n=r+e+1),n>r&&(n=r),a.setMonth(a.getMonth()+1),a.setDate(n),a}static getServerTomorrowZeroPointTimestamp(){return this.GetServerTimestampByHMS()+1e3*this.ONE_DAY_SECONDS}static IsServerWeek(e,t){return this.GetServerDateByTimestamp(e).getDay()==t}static isToday(e){let t=new Date(1e3*e),i=new Date;return t.getFullYear()==i.getFullYear()&&t.getMonth()==i.getMonth()&&t.getDate()==i.getDate()}static IsServerToday(e){let t=this.GetServerDateByTimestamp(e),i=this.GetServerDateByTimestamp();return t.getFullYear()==i.getFullYear()&&t.getMonth()==i.getMonth()&&t.getDate()==i.getDate()}static IsSameDay(e,t){let i=new Date(1e3*e),s=new Date(1e3*t);return i.getFullYear()==s.getFullYear()&&i.getMonth()==s.getMonth()&&i.getDate()==s.getDate()}static IsServerSameDay(e,t){let i=this.GetServerDateByTimestamp(e),s=this.GetServerDateByTimestamp(t);return i.getFullYear()==s.getFullYear()&&i.getMonth()==s.getMonth()&&i.getDate()==s.getDate()}static IsBeyondTimeInSameDay(e,t=0,i=0,s=0){return this.BeyondTimeInSameDay(e,t,i,s)/1e3<=0}static BeyondTimeInSameDay(e,t=0,i=0,s=0){if(24==t){return t=0,this.GetServerDateByHMS(t,i,s).getTime()/1e3+this.ONE_DAY_SECONDS-e}return this.GetServerDateByHMS(t,i,s).getTime()/1e3-e}static SubSecondTimeInDay(e,t=0,i=0,s=0){let a=this.BeyondTimeInSameDay(e,t,i,s);return a<=0&&(a+=this.ONE_DAY_SECONDS),a}static GetYMDHMS(e,t=!0,i=!1){null!=e&&(e*=1e3);let s=i?this.GetServerDateByTimestamp(e):new Date(e);const a=s.getFullYear(),n=s.getMonth()+1<10?"0"+(s.getMonth()+1):s.getMonth()+1,r=s.getDate()<10?"0"+s.getDate():s.getDate(),o=s.getHours()<10?"0"+s.getHours():s.getHours(),l=s.getMinutes()<10?"0"+s.getMinutes():s.getMinutes();return Jt.Instance.lang==Wt.zh_cn?t?a+"-"+n+"-"+r+" "+o+":"+l:n+"-"+r+" "+o+":"+l:t?a+" "+wi.MonthText[s.getMonth()]+" "+r+", "+o+":"+l:wi.MonthText[s.getMonth()]+" "+r+", "+o+":"+l}static GetYMD(e,t=!1){null!=e&&(e*=1e3);let i=t?this.GetServerDateByTimestamp(e):new Date(e);const s=i.getFullYear(),a=i.getMonth()+1<10?"0"+(i.getMonth()+1):i.getMonth()+1,n=i.getDate()<10?"0"+i.getDate():i.getDate();return Jt.Instance.lang==Wt.zh_cn?s+"-"+a+"-"+n:s+" "+wi.MonthText[i.getMonth()]+" "+n}static GetMD(e,t=!1){null!=e&&(e*=1e3);let i=t?this.GetServerDateByTimestamp(e):new Date(e);const s=i.getMonth()+1<10?"0"+(i.getMonth()+1):i.getMonth()+1,a=i.getDate()<10?"0"+i.getDate():i.getDate();return Jt.Instance.lang==Wt.zh_cn?s+"-"+a:wi.MonthText[i.getMonth()]+" "+a}static GetHM(e,t=!1){null!=e&&(e*=1e3);let i=t?this.GetServerDateByTimestamp(e):new Date(e);return(i.getHours()<10?"0"+i.getHours():i.getHours())+":"+(i.getMinutes()<10?"0"+i.getMinutes():i.getMinutes())}static DaysLeft(e){let t=0,i=e-On.time.serverSeconds;return i>0&&(t=Math.floor(i/this.ONE_DAY_SECONDS)),t}static TimeleftHHMMSS(e){let t=e-On.time.serverSeconds;return t=Math.max(t,0),this.TimeFormatFixedHHMMSS(t)}static TimeleftIsOver(e){return e-On.time.serverSeconds<=0}static TimeFormatFixedHHMMSS(e){let t="",i=Math.floor(e/3600),s=Math.floor(e%3600/60),a=Math.floor(e%60);return t+=i<10?"0"+i:i,t+=":"+(s<10?"0"+s:s),t+=":"+(a<10?"0"+a:a)}static TimeFormatFixedMMSS(e){let t="",i=Math.floor(e%3600/60),s=Math.floor(e%60);return t+=":"+(i<10?"0"+i:i),t+=":"+(s<10?"0"+s:s)}static TimeFormatFixedHHMMSSCN(e){let t="",i=Math.abs(e),s=Math.floor(i/3600),a=Math.floor(i%3600/60),n=Math.floor(i%60);return e<0&&(t="-"),t+=s<10?"0"+s:s,t+="："+(a<10?"0"+a:a),t+="："+(n<10?"0"+n:n)}static TimeFormatFixedXHXMXS(e){let t="",i=Math.floor(e/3600),s=Math.floor(e%3600/60),a=Math.floor(e%60);return i>0&&(t+=i+z.Hour),t+=s+z.Minute,t+=a+z.Second}static TimeFormatHHMMSS(e){let t="",i=Math.abs(e),s=Math.floor(i/3600),a=Math.floor(i%3600/60),n=Math.floor(i%60);return e<0&&(t="-"),t+=0==s?"":s<10?"0"+s:s,t+=(s>0?":":"")+(a<10?"0"+a:a),t+=":"+(n<10?"0"+n:n)}static TimeFormatXHXMXS(e){let t="",i=Math.floor(e/3600),s=Math.floor(e%3600/60),a=Math.floor(e%60);return i>0&&(t+=i+z.Hour),s>0&&(t+=s+z.Minute),t+=a+z.Second}static TimeFormatXHXMXSWithoutZero(e){let t="",i=Math.floor(e/3600),s=Math.floor(e%3600/60),a=Math.floor(e%60);return i>0&&(t+=i+z.Hour),s>0&&(t+=s+z.Minute),a>0&&(t+=a+z.Second),t}static TimeBeforeByTimestamp(e){let t=On.time.serverSeconds-e;return this.TimeBefore(t)}static TimeBefore(e){let t=e/this.ONE_DAY_SECONDS;if(t>60)return this.GetYMD(t);if(t>30)return z.DATE_MonthBefore.format(1);if(t>14)return z.DATE_WeekBefore.format(2);if(t>7)return z.DATE_WeekBefore.format(1);if(t>1)return z.DATE_DayBefore.format(Math.floor(t));{let t=e/this.ONE_HOUR_SECONDS;if(t>1)return z.DATE_HourBefore.format(Math.floor(t));{let t=e/60;return t>1?z.DATE_MinuteBefore.format(Math.floor(t)):e>=1?z.DATE_SecondeBefore.format(Math.floor(e)):z.DATE_SecondeBefore.format(1)}}}}wi.ONE_DAY_SECONDS=86400,wi.ONE_HOUR_SECONDS=3600,wi.MonthText=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],window.TimeHelper=wi,function(e){e[e.Close=0]="Close",e[e.Noraml=1]="Noraml"}(gi||(gi={})),function(e){e[e.Normal=1]="Normal",e[e.StopServer=2]="StopServer"}(di||(di={}));class Li{constructor(){this.defaultServerItem={name:"默认",ip:"nisak.123u.com",port:5e3,state:gi.Noraml,https:!0,test:!1,shieldHero:[],main:"https://nisak.123u.com:5000"},this.channelUrl=`https://h5-jjsg-cdn.123u.com/server_config/config.${VersionConfig.AppVersion}.json`}static get Instance(){return Li._Instance||(Li._Instance=new Li),Li._Instance}get serverListUrl(){return yi.serverListUrl}get noticUrl(){return this.serverItem?this.serverItem.noticUrl?this.serverItem.noticUrl:this.serverItem.https?"https://"+this.serverItem.ip+"/notice.html":"http://"+this.serverItem.ip+"/notice.html":"http://172.16.0.93/notice.html"}getServerItem(e){if(!e)return null;if(this.serverList)for(let t=0;t<this.serverList.list.length;t++)if(this.serverList.list[t].name==e)return this.serverList.list[t];return null}get serverName(){if(!this._serverName){if(On.localStorage.serverName){this.getServerItem(On.localStorage.serverName)&&(this._serverName=On.localStorage.serverName)}if(!this._serverName&&this.serverList){this.getServerItem(this.serverList.defaultServer)?this._serverName=this.serverList.defaultServer:this.serverList.list.length>0&&(this._serverName=this.serverList.list[0].name)}}return this._serverName}set serverName(e){this._serverName=e,On.localStorage.serverName=e}get serverIndex(){if(this.serverList)for(let e=0;e<this.serverList.list.length;e++)if(this.serverList.list[e].name==this.serverName)return e;return-1}get serverItem(){let e=this.getServerItem(this.serverName);return e||this.defaultServerItem}async requestServerListAsync(){if(this.serverList)return!0;let e=this.serverListUrl;console.log("serverListUrl="+e);let t=await On.asset.loadAsync(e,f.Json);if(t){if(this.serverList=isString(t)?JSON.parse(t):t,this.serverList&&this.serverList.list)for(let e of this.serverList.list)e.main=yi.getServerMainUrl(e);return console.log("获取服务器列表成功"),!0}return console.log("ChannelManager LoadFail: ServerList.json "),!1}get isTodayOpenedNotice(){if(On.localStorage.isNoticTodayNoOpen&&On.localStorage.hasItem("lastOpenNoticeTime",!0)){let e=On.localStorage.getInt("lastOpenNoticeTime",!0);return!wi.isToday(e)}return!0}requestNotice(){console.log(this.noticUrl),Engine.loader.load(this.noticUrl,Handler.create(this,this.onResopneNotic))}onResopneNotic(){let e=Engine.loader.getRes(this.noticUrl);if(console.log(e),e)try{if(this.serverNoticData=isString(e)?JSON.parse(e):e,!this.serverNoticData||0==this.serverNoticData.visible)return;this.serverNoticData.type==di.Normal?this.isTodayOpenedNotice&&(On.menu.open(p.Notice),On.localStorage.setInt("lastOpenNoticeTime",On.time.localTimeMS,!0)):On.system.alrtTextFull(this.serverNoticData.content,this.serverNoticData.title,null,()=>{window.conch&&window.conch.exit&&window.conch.exit()})}catch(e){console.warn("通知有问题")}}set channelServer(e){this._channelServer=e}get channelServer(){return this._channelServer}async requestChannelServerAsync(){let e=this.channelUrl,t=await On.asset.loadAsync(e,f.Json);if(t){let e=isString(t)?JSON.parse(t):t;return e.main=yi.getServerMainUrl(e),this.serverList={list:[e],defaultServer:e.name},console.log(`ChannelUrl Request Successed: ${e}`),!0}this.requestChannelServerAsync(),console.log(`ChannelUrl Request Failed: ${e} `)}}class _i{constructor(){this.sStateChange=new Signal}install(){this.startListen()}refreshState(){}startListen(){}stopListen(){}onStateChange(){this.sStateChange.dispatch()}}class Ti extends _i{constructor(){super(...arguments),this._timelong=0,this._error=0,this._session=""}get isIndulge(){return!1}set timeLong(e){this._timelong=e}get timeLong(){return this._timelong}set error(e){this._error=e,0!=e&&1023!=e||Laya.timer.clearAll(this)}get error(){return this._error}set session(e){this._session=e}get session(){return this._session}}class vi{constructor(){this.list=[],this.login=new Ti}initList(){this.list.push(this.login)}}class Gi extends vi{install(){this.initList();for(let e=0;e<this.list.length;e++)this.list[e].install()}}class Pi{constructor(){this.master=0,this.minor=0,this.revised=0,this.revised2=0}get isZero(){return 0==this.master&&0==this.minor&&0==this.revised&&0==this.revised2}setVersionTxt(e){if(null==e)return this;if(isNullOrEmpty(e.trim()))return this;var t=(e=(e=e.toLowerCase()).replace("version:","").replace("version","").replace("ver","").replace("v","")).split(".");return this.master=parseInt(t[0]),t.length>1&&(this.minor=parseInt(t[1])),t.length>2&&(this.revised=parseInt(t[2])),t.length>3&&(this.revised2=parseInt(t[3])),this}equal(e){return this.master==e.master&&this.minor==e.minor&&this.revised==e.revised&&this.revised2==e.revised2}toString(){return`v${this.master}.${this.minor}.${this.revised}.${this.revised2}`}}var ki=Laya.LocalStorage;class Ii{constructor(){this.sLocalVersionChange=new Signal,this.assetCopytoFileVersionData=new Pi,this.localAppVersionData=new Pi,this.webAppVersionData=new Pi,this.localResVersionData=new Pi,this.webResVersionData=new Pi,this.localPartialVersionData=new Pi,this.webPartialVersionData=new Pi}static get Instance(){return Ii._Instance||(Ii._Instance=new Ii),Ii._Instance}init(){this.localAppVersionData.setVersionTxt(VersionConfig.AppVersion),this.localResVersionData.setVersionTxt(VersionConfig.ResVersion)}get localAppVersion(){return window.VersionConfig&&VersionConfig.AppVersion?VersionConfig.AppVersion:"v1.0.0.0"}get localResVersion(){return this.__localResVersion||(this.__localResVersion=ki.getItem("__localResVersion"),this.__localResVersion||(this.__localResVersion=this.localAppVersion)),this.__localResVersion}set localResVersion(e){this.__localResVersion=e,ki.setItem("__localResVersion",e),this.sLocalVersionChange.dispatch()}get assetsCopytoFileVersion(){return this.__assetsCopytoFileVersion||(this.__assetsCopytoFileVersion=ki.getItem("__assetsCopytoFileVersion"),this.__assetsCopytoFileVersion||(this.__assetsCopytoFileVersion="0.0.0")),this.__assetsCopytoFileVersion}set assetsCopytoFileVersion(e){this.__assetsCopytoFileVersion=e,ki.setItem("__assetsCopytoFileVersion",e)}get localPartialVersion(){return this.__localPartialVersion||(this.__localPartialVersion=ki.getItem("__localPartialVersion"),this.__localPartialVersion||(this.__localPartialVersion="0.0.0")),this.__localPartialVersion}set localPartialVersion(e){this.__localPartialVersion=e,ki.setItem("__localPartialVersion",e)}get isNeedAssetsCopy(){return!1}}var Mi=Laya.SoundManager;Laya.Handler;class bi{constructor(){this.soundPlayingDic=new Dictionary,this.localUseGlobal=!0}install(){}onAppResume(){this.replayMusic()}onLogin(){}playMusic(e,t,i,s){}replayMusic(){this.lastMusic?this.playMusic(this.lastMusic):this.playMusic(li.MM_BGM_01)}playSound(e,t,i,s,a){}playSoundComplete(e){this.soundPlayingDic.hasKey(e)&&this.soundPlayingDic.remove(e)}stopSound(e){let t=li.getPath(e);this.soundPlayingDic.hasKey(t)&&this.soundPlayingDic.remove(t),Mi.stopSound(t)}stopAll(){this.soundPlayingDic&&this.soundPlayingDic.clear(),Mi.stopAll()}stopAllSound(){this.soundPlayingDic&&this.soundPlayingDic.clear(),Mi.stopAllSound()}stopMusic(){Mi.stopMusic()}get muted(){return void 0===this._muted&&(this._muted=!!On.localStorage.hasItem("sound_muted",this.localUseGlobal)&&On.localStorage.getBoolean("sound_muted",this.localUseGlobal)),this._muted}set muted(e){this._muted=e,On.localStorage.setBoolean("sound_muted",e,this.localUseGlobal),Mi.muted=e}get soundMuted(){return void 0===this._soundMuted&&(this._soundMuted=!!On.localStorage.hasItem("sound_soundMuted",this.localUseGlobal)&&On.localStorage.getBoolean("sound_soundMuted",this.localUseGlobal)),this._soundMuted}set soundMuted(e){this._soundMuted=e,On.localStorage.setBoolean("sound_soundMuted",e,this.localUseGlobal),Mi.soundMuted=e}get musicMuted(){return void 0===this._musicMuted&&(this._musicMuted=!!On.localStorage.hasItem("sound_musicMuted",this.localUseGlobal)&&On.localStorage.getBoolean("sound_musicMuted",this.localUseGlobal)),this._musicMuted}set musicMuted(e){this._musicMuted=e,On.localStorage.setBoolean("sound_musicMuted",e,this.localUseGlobal),Mi.musicMuted=e,e?Mi.stopMusic():this.replayMusic()}get musicVolume(){return void 0===this._musicVolume&&(this._musicVolume=On.localStorage.hasItem("sound_musicVolume",this.localUseGlobal)?On.localStorage.getFloat("sound_musicVolume",this.localUseGlobal):1),this._musicVolume}set musicVolume(e){this._musicVolume=e,On.localStorage.setFloat("sound_musicVolume",e,this.localUseGlobal),Mi.musicVolume=e}get soundVolume(){return void 0===this._soundVolume&&(this._soundVolume=On.localStorage.hasItem("sound_soundVolume",this.localUseGlobal)?On.localStorage.getFloat("sound_soundVolume",this.localUseGlobal):1),this._soundVolume}set soundVolume(e){this._soundVolume=e,On.localStorage.setFloat("sound_soundVolume",e,this.localUseGlobal),Mi.soundVolume=e}get autoStopMusic(){return this._autoStopMusic}set autoStopMusic(e){Mi.autoStopMusic=e,this._autoStopMusic=e}}class Di{CopyValue(e){e.year=this.year,e.month=this.month,e.date=this.date,e.week=this.week,e.hour=this.hour,e.minute=this.minute,e.second=this.second,e.timezone=this.timezone,e.timestamp=this.timezone}}class Bi{constructor(){this.sServerDateChange=new Typed2Signal,this._localDateTime=new Di,this._serverDateTime=new Di,this._server2LocalDateTime=new Di,this._preServer2LocalDateTime=new Di,this._preFrame=-1,this._settingTimestampServer=(new Date).getTime(),this._settingTimestampLocal=(new Date).getTime(),this._preServerFrame=0,this.___testTimeDifference=0,this._localSubServerTime=0,this._localSubServerTimeZone=0}get localDateTime(){return this.refresh(),this._localDateTime}IsExcelArrived(e){let t=this.localDateTime;return t.hour>=e.H&&t.minute>=e.Mm&&t.second>=e.S}IsExcelIn(e,t){return this.IsExcelArrived(e)&&!this.IsExcelArrived(t)}get serverDateTime(){return this.refresh(),this._serverDateTime}get server2LocalDateTime(){return this.refresh(),this._server2LocalDateTime}start(){this.stop(),Laya.timer.loop(1e3,this,this.refresh)}stop(){Laya.timer.clearAll(this)}refresh(){if(Laya.timer.currFrame!=this._preFrame){this._preFrame=Laya.timer.currFrame;let e=new Date;this._localDateTime.timestamp=e.getTime(),this._localDateTime.year=e.getFullYear(),this._localDateTime.month=e.getMonth(),this._localDateTime.date=e.getDate(),this._localDateTime.week=e.getDay(),this._localDateTime.hour=e.getHours(),this._localDateTime.minute=e.getMinutes(),this._localDateTime.second=e.getSeconds(),this._serverDateTime.timestamp=this.settingServerTimestamp+this.settingTimeLength,e=new Date(this._serverDateTime.timestamp),this._serverDateTime.year=e.getFullYear(),this._serverDateTime.month=e.getMonth(),this._serverDateTime.date=e.getDate(),this._serverDateTime.week=e.getDay(),this._serverDateTime.hour=e.getHours(),this._serverDateTime.minute=e.getMinutes(),this._serverDateTime.second=e.getSeconds(),this._server2LocalDateTime.timestamp=this._serverDateTime.timestamp,e=new Date(this._serverDateTime.timestamp-this.localSubServerTimeZone),this._server2LocalDateTime.year=e.getFullYear(),this._server2LocalDateTime.month=e.getMonth(),this._server2LocalDateTime.date=e.getDate(),this._server2LocalDateTime.week=e.getDay(),this._server2LocalDateTime.hour=e.getHours(),this._server2LocalDateTime.minute=e.getMinutes(),this._server2LocalDateTime.second=e.getSeconds(),this._server2LocalDateTime.timezone=this._serverDateTime.timezone,this._preServer2LocalDateTime.date&&this._preServer2LocalDateTime.date!=this._server2LocalDateTime.date&&this.sServerDateChange.dispatch(this._preServer2LocalDateTime.date,this._server2LocalDateTime.date),this._server2LocalDateTime.CopyValue(this._preServer2LocalDateTime)}}get serverTimezoneMilliseconds(){return 60*this._serverDateTime.timezone*60*1e3}get localTimeMS(){return this.refresh(),this._localDateTime.timestamp}get localTimeS(){return this.refresh(),Math.floor(this._localDateTime.timestamp/1e3)}settingServerTime(e,t){null!=t&&(this._serverDateTime.timezone=t,this._localSubServerTimeZone=60*(new Date).getTimezoneOffset()*1e3*-1-60*t*60*1e3),null!=e&&(this.settingServerTimestamp=1e3*e)}get settingServerTimestamp(){return this._settingTimestampServer}set settingServerTimestamp(e){this._settingTimestampServer=e,this._settingTimestampLocal=this.localTimeMS,this._localSubServerTime=this._settingTimestampLocal-this._settingTimestampServer}get settingTimeLength(){return this.localTimeMS-this._settingTimestampLocal}get serverSeconds(){return Math.floor(this.serverMilliseconds/1e3)}get serverMilliseconds(){return this.refresh(),this.serverDateTime.timestamp}get localSubServerTime(){return this._localSubServerTime+this.___testTimeDifference}get localSubServerTimeZone(){return this._localSubServerTimeZone+this.___testTimeDifference}getSubSecondsPre(e){let t=this.serverSeconds-e;return t<0&&(t=0),t}getSubSecondsAfter(e){return e-this.serverSeconds}getSubMillisecondsPre(e){return this.serverMilliseconds-e}getSubMillisecondsAfter(e){return e-this.serverMilliseconds}}class Fi extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameLaunch","SystemToastMessage")}constructFromXML(e){super.constructFromXML(e),this.m_title=this.getChild("title")}}Fi.URL="ui://47qsdr42nk8t3",Fi.DependPackages=["GameLaunch"];class Ai extends Fi{play(e,t){this._onCompleteHandler&&this._onCompleteHandler.recover(),this._onCompleteHandler=t,this.m_title.text=e,Tween.clearAll(this),Z.floatMsg.addChild(this),re.centerScreen(this),this.alpha=0,Tween.to(this,{y:this.y-100,alpha:1},500,Ease.quadInOut),Tween.to(this,{y:this.y-200,alpha:0},500,Ease.quadInOut,Handler.create(this,this.onComplete),1e3)}onComplete(){this.removeFromParent(),this._onCompleteHandler&&(this._onCompleteHandler.runWith(this),this._onCompleteHandler.recover(),this._onCompleteHandler=null)}}var Hi,xi,Ri,Ui,Ni=Laya.Handler;class Oi{constructor(){this.list=[],this.pools=[],this.timeSpacing=1}play(e){e!=this.lastTxt?this.show(e):getTime()-this.lastTime>=this.timeSpacing&&this.show(e)}show(e){let t;this.lastTxt=e,this.lastTime=getTime(),this.pools.length>0?t=this.pools.pop():(t=Ai.createInstance(),this.list.push(t)),t.play(e,Ni.create(this,this.onItemComplete))}onItemComplete(e){this.pools.push(e)}}class Ei extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameLaunch","SystemAlertMessage")}constructFromXML(e){super.constructFromXML(e),this.m_content=this.getChild("content"),this.m_title=this.getChild("title"),this.m_dialog=this.getChild("dialog"),this.m_okBtn=this.getChild("okBtn")}}Ei.URL="ui://47qsdr42nk8t1",Ei.DependPackages=["GameLaunch"];class Wi extends Ei{get closeButton(){return this.m_dialog.m_closeButton}open(e,t="",i=null,s=null,a=null,n=!0,r=!0,o=!0){isNullOrEmpty(t)&&(t=""),this.yesFun=s,this.yesObj=i,this.isClickButtonAutoClose=o,this.m_content.text=e,this.m_title.text=t,this.m_okBtn.title=a,this.m_okBtn.enabled=r,this.closeButton.enabled=r,this.closeButton.visible=n,this.m_okBtn.onClick(this,this.onClickYes),this.closeButton.onClick(this,this.close),Z.showDialogModel(),re.centerScreen(this),this.scaleX=0,this.scaleY=0,this.x=On.screenSetting.screenWidth>>1,this.y=On.screenSetting.screenHeight>>1,this.alpha=0,Tween.to(this,{scaleX:1,scaleY:1,alpha:1},250,Ease.backInOut),Z.floatMsg.addChild(this)}close(){Z.hideDialogModel(),Tween.to(this,{scaleX:0,scaleY:0,alpha:0},250,Ease.quadInOut,Handler.create(this,this.onHide))}onHide(){this.removeFromParent()}onClickYes(){this.isClickButtonAutoClose&&this.close(),this.yesFun&&(this.yesObj?this.yesFun.apply(this.yesObj):this.yesFun())}}class Vi extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameLaunch","SystemConfirmMessage")}constructFromXML(e){super.constructFromXML(e),this.m_content=this.getChild("content"),this.m_title=this.getChild("title"),this.m_dialog=this.getChild("dialog"),this.m_okBtn=this.getChild("okBtn"),this.m_cancleBtn=this.getChild("cancleBtn")}}Vi.URL="ui://47qsdr42nk8t2",Vi.DependPackages=["GameLaunch"];class Xi extends Vi{get closeButton(){return this.m_dialog.m_closeButton}open(e,t="",i=null,s=null,a=null,n=null,r=null,o=!0,l=!0){isNullOrEmpty(t)&&(t=""),this.caller=i,this.yesFun=s,this.noFun=a,this.isClickButtonAutoClose=l,this.m_content.text=e,this.m_title.text=t,this.m_okBtn.title=n,this.m_cancleBtn.title=r,this.closeButton.visible=o,this.m_okBtn.onClick(this,this.onClickYes),this.m_cancleBtn.onClick(this,this.onClickNo),this.closeButton.onClick(this,this.onClickClose),Z.showDialogModel(),re.centerScreen(this),Tween.clearAll(this),this.scaleX=0,this.scaleY=0,this.x=On.screenSetting.screenWidth>>1,this.y=On.screenSetting.screenHeight>>1,this.alpha=0,Tween.to(this,{scaleX:1,scaleY:1,alpha:1},250,Ease.backInOut),Z.floatMsg.addChild(this)}close(){Z.hideDialogModel(),Tween.to(this,{scaleX:0,scaleY:0,alpha:0},250,Ease.quadInOut,Handler.create(this,this.onHide))}onHide(){this.removeFromParent()}onClickYes(){this.isClickButtonAutoClose&&this.close(),this.yesFun&&(this.caller?this.yesFun.apply(this.caller):this.yesFun())}onClickNo(){this.isClickButtonAutoClose&&this.close(),this.noFun&&(this.caller?this.noFun.apply(this.caller):this.noFun())}onClickClose(){this.close()}}class qi{constructor(){this.toastMessage=new Oi}playOpenSound(){window.Game&&window.Game._isInstall&&On.sound.playSound(li.MM02_Popup)}get alertMessage(){return this._alertMessage||(this._alertMessage=Wi.createInstance()),this._alertMessage}get confirmMessage(){return this._confirmMessage||(this._confirmMessage=Xi.createInstance()),this._confirmMessage}toastText(e){this.toastMessage.play(e)}toastMsg(e,...t){let i=On.config.msg.getTxtFormat(e,...t);this.toastMessage.play(i)}toastFormatText(e,...t){this.toastText(format(e,t))}toastItemNotEnough(e){let t=On.config.item.getConfig(e),i="";i=t?t.name:e.toString(),this.toastText(format(z.ToastTextItemNotEnough,i))}alertText(e,t,i){this.alrtTextFull(e,"",t,i)}alertMsg(e,t,i){let s=On.config.msg.getTxt(e);this.alrtTextFull(s,"",t,i)}alertMsgFormat(e,t,i,s){let a=On.config.msg.getTxtFormat(e,...t);this.alrtTextFull(a,"",i,s)}alrtTMsgFull(e,t,i="",s=null,a=null,n=null,r=!0,o=!0){let l=On.config.msg.getTxtFormat(e,...t);this.alrtTextFull(l,"",s,a,n,r,o)}alrtTextFull(e,t="",i=null,s=null,a=null,n=!0,r=!0,o=!0){isNullOrEmpty(a)&&(a=On.launchText.btnYes),this.alertMessage.open(e,t,i,s,a,n,r,o),this.playOpenSound()}closeAlert(){this.alertMessage.close()}confirmMsg(e,t,i="",s=null,a=null,n=null,r=null,o=null,l=!0,c=!0){let h=On.config.msg.getTxtFormat(e,...t);this.confirmText(h,i,s,a,n,r,o,l,c)}confirmText(e,t="",i=null,s=null,a=null,n=null,r=null,o=!0,l=!0){isNullOrEmpty(n)&&(n=z.ButtonYes),isNullOrEmpty(r)&&(r=z.ButtonNo),this.confirmMessage.open(e,t,i,s,a,n,r,o,l),this.playOpenSound()}alertMessageHide(){this._alertMessage&&this._alertMessage.close(),this._confirmMessage&&this._confirmMessage.close()}}class Ki extends qi{}class ji{constructor(){this.tips=[],this.btnYes="确定",this.LoadedConfig="加载配置文件",this.LoadedUI="加载UI",this.LoadedWar="加载战斗资源",this.LoadedWarConfig="加载战斗配置",this.LoadedEnd="加载完成"}setLangForEn(){this.tips=[],this.btnYes="Ok",this.LoadedConfig="Loading Config...",this.LoadedUI="Loading UI...",this.LoadedEnd="Loading Complete"}}class zi{constructor(){this.percent=0,this.showPercent=0}setBegin(){this.percent=0,this.showPercent=0,this.setPercent(0)}loading(e){e<=0?e=.001:e>100&&(e=100),this.percent=e}setTip(e){let t=On.loader.current;t&&t.setTip(e)}setPercent(e){let t=On.loader.current;t&&(t.setMax(100),t.setProgress(Math.ceil(e)))}starTweenPrecent(){this.stopTweenPrecent(),this._tweenHandler=setInterval(()=>{this.showPercent=Math.min(100,Math.ceil(Mathf.Lerp(this.showPercent,this.percent,.5))),this.setPercent(this.showPercent),this.showPercent>=100&&this.stopTweenPrecent()},100)}stopTweenPrecent(){this._tweenHandler&&(clearInterval(this._tweenHandler),this._tweenHandler=null)}onBegin(){this.setBegin(),this.starTweenPrecent()}onLoadedConfig(e,t,i){this.setTip(On.launchText.LoadedConfig),this.loading(0+Math.ceil(40*i))}onLoadedLangConfig(e,t,i){this.setTip(On.launchText.LoadedConfig),this.loading(40+Math.ceil(20*i))}onLoadedFgui(e,t){this.setTip(On.launchText.LoadedUI),this.loading(60+Math.ceil(e/t*40))}onEnd(){this.setTip(On.launchText.LoadedEnd),this.loading(100)}Reset(){this.loading(0)}}class Yi{constructor(){this.isOpened=!1,this.delayShowPanelHandler=-1}get isDelayShowPanel(){return this.loaderId==S.EnterModule}open(){this.isOpened=!0,this.loaderPanel&&(this.loaderPanel.showOn(Z.loader),this.loaderPanel.setContentVisiable(!0),this.isDelayShowPanel&&(this.loaderPanel.setContentVisiable(!1),clearTimeout(this.delayShowPanelHandler),this.delayShowPanelHandler=setTimeout(()=>{this.loaderPanel.setContentVisiable(!0)},100)))}close(){-1!=this.delayShowPanelHandler&&(clearTimeout(this.delayShowPanelHandler),this.delayShowPanelHandler=-1),this.isOpened=!1,this.loaderPanel&&(this.loaderPanel.hide(),this.isDelayShowPanel&&this.loaderPanel.setContentVisiable(!1))}setProgress(e){e<=0&&(e=1),this.loaderPanel&&this.loaderPanel.setValue(e)}setMax(e){this.loaderPanel&&this.loaderPanel.setMax(e)}setTip(e){this.loaderPanel&&this.loaderPanel.setTip(e)}setTips(e){this.loaderPanel&&this.loaderPanel.setTips(e)}setVersion(){this.loaderPanel&&this.loaderPanel.setVersion()}}class $i extends ee{constructor(){super(),this.sShowComplete=new Signal,this.sHideComplete=new Signal}onInit(){super.onInit()}getContentVisiable(){return!!this.contentPane&&this.contentPane.visible}setContentVisiable(e){this.contentPane&&(this.contentPane.visible=e)}doShowAnimation(){this.onWindowWillShow(),super.doShowAnimation()}doHideAnimation(){this.onWindowWillHide(),super.doHideAnimation()}onShown(){this.sShowComplete.dispatch()}onHide(){this.sHideComplete.dispatch()}setMax(e){}setValue(e){}setTip(e){}setTips(e){}setVersion(){}}class Ji extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameLaunch","EnterModuleLoader")}constructFromXML(e){super.constructFromXML(e),this.m_Reconnection=this.getController("Reconnection"),this.m_title=this.getChild("title"),this.m_help=this.getChild("help"),this.m_txt_resVer=this.getChild("txt_resVer"),this.m_txt_gamever=this.getChild("txt_gamever"),this.m_screenBG=this.getChild("screenBG"),this.m_progressBar=this.getChild("progressBar")}}Ji.URL="ui://47qsdr42f84s0",Ji.DependPackages=["GameLaunch"];class Qi extends Ji{}class Zi extends $i{constructor(){super(),this.tips=[],this.__setTipHandlerTimer=-1}onInit(){this.loader=Qi.createInstance(),this.contentPane=this.loader,super.onInit(),this.tips=On.launchText.tips,this.setVersion()}onShown(){super.onShown(),this.beginTips(),this.setVersion(),On.version.sLocalVersionChange.add(this.setVersion,this)}onHide(){super.onHide(),this.stopTips(),On.version.sLocalVersionChange.remove(this.setVersion,this)}beginTips(){this.stopTips(),this.tips&&this.tips.length>0&&this.__setTipHandler()}stopTips(){this.__setTipHandlerTimer>0&&(clearTimeout(this.__setTipHandlerTimer),this.__setTipHandlerTimer=-1)}__setTipHandler(){this.loader.m_help.text=this.tips[Random.range(0,this.tips.length)],this.__setTipHandlerTimer=setTimeout(()=>{this.__setTipHandler()},Random.range(100,400))}setMax(e){this.loader.m_progressBar.max=e}setValue(e){this.loader.m_progressBar.value=e}setTip(e){this.loader.m_title.text=e}setTips(e){}setVersion(){this.loader.m_txt_gamever.text="GameVersion:"+On.version.localAppVersionData.toString(),this.loader.m_txt_resVer.text="ResVersion:"+On.version.localResVersionData.toString()}}class es extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameLaunch","EnterLoginLoader")}constructFromXML(e){super.constructFromXML(e),this.m_title=this.getChild("title"),this.m_help=this.getChild("help"),this.m_txt_resVer=this.getChild("txt_resVer"),this.m_txt_gamever=this.getChild("txt_gamever"),this.m_progressBar=this.getChild("progressBar"),this.m_imgLogo=this.getChild("imgLogo")}}es.URL="ui://47qsdr42mrzrw2o",es.DependPackages=["GameLaunch"];class ts extends es{}class is extends $i{constructor(){super(),this.tips=[],this.__setTipHandlerTimer=-1}onInit(){this.loader=ts.createInstance(),this.contentPane=this.loader,super.onInit(),this.tips=On.launchText.tips,this.setVersion()}onShown(){super.onShown(),this.beginTips(),this.setVersion(),On.version.sLocalVersionChange.add(this.setVersion,this)}onHide(){super.onHide(),this.stopTips(),On.version.sLocalVersionChange.remove(this.setVersion,this)}beginTips(){this.stopTips(),this.tips&&this.tips.length>0&&this.__setTipHandler()}stopTips(){this.__setTipHandlerTimer>0&&(clearTimeout(this.__setTipHandlerTimer),this.__setTipHandlerTimer=-1)}__setTipHandler(){this.loader.m_help.text=this.tips[Random.range(0,this.tips.length)],this.__setTipHandlerTimer=setTimeout(()=>{this.__setTipHandler()},Random.range(100,400))}setMax(e){this.loader.m_progressBar.max=e}setValue(e){this.loader.m_progressBar.value=e}setTip(e){this.loader.m_title.text=e}setTips(e){}setVersion(){this.loader.m_txt_gamever.text="GameVersion:"+On.version.localAppVersionData.toString(),this.loader.m_txt_resVer.text="ResVersion:"+On.version.localResVersionData.toString()}}class ss{constructor(){this.dict=new Dictionary,this.isInited=!1}static get Instance(){return ss._Instance||(ss._Instance=new ss),ss._Instance}install(){if(this.isInited)return;this.isInited=!0;let e=new Yi;e.loaderId=S.None,this.dict.add(e.loaderId,e);let t=new Zi;(e=new Yi).loaderId=S.Circle,e.loaderPanel=t,this.dict.add(e.loaderId,e);let i=new is;(e=new Yi).loaderId=S.Launch,e.loaderPanel=i,this.dict.add(e.loaderId,e);let s=new Zi;(e=new Yi).loaderId=S.EnterModule,e.loaderPanel=s,this.dict.add(e.loaderId,e)}getLoaderCtl(e){return this.dict.getValue(e)}open(e){let t=this.getLoaderCtl(e);return t||console.error("没有找到加载控制器 LoaderManager open loaderId=",e),t.open(),this.current=t,t}close(e){let t=this.getLoaderCtl(e);t&&(this.current==t&&(this.current=null),t.close())}closeAll(){let e=this.dict.getValues();for(let t=0;t<e.length;t++)e[t].close();this.current=null}setProgress(e){this.current&&this.current.setProgress(e)}setMax(e){this.current&&this.current.setMax(e)}}class as{static get onError(){return net.logic.onError}static get onConnect(){return net.logic.onConnect}static get onClose(){return net.logic.onClose}static get onReconnect(){return net.logic.onReconnect}static get logicPing(){return net.logic.ping}static GamerLoginC2S(e,t){net.logic.gamerLoginC2S(e,t)}static get gamerLoginS2C(){return net.logic.gamerLoginS2C}static async AsyncGamerLoginC2S(e,t){return new Promise(i=>{let s={error:200},a=setTimeout(()=>{i(s)},5e3),n=function(e){clearTimeout(a),as.gamerLoginS2C.off(n),i(e)};as.gamerLoginS2C.on(n),as.GamerLoginC2S(e,t)})}static GamerLoginGetDataC2S(){net.logic.gamerLoginGetDataC2S()}static get gamerLoginGetDataS2C(){return net.logic.gamerLoginGetDataS2C}static async AsyncGamerLoginGetDataC2S(){return new Promise(e=>{let t={error:200},i=setTimeout(()=>{e(t)},5e3),s=function(t){clearTimeout(i),as.gamerLoginGetDataS2C.off(s),e(t)};as.gamerLoginGetDataS2C.on(s),as.GamerLoginGetDataC2S()})}static ServerTimeC2S(){net.logic.serverTimeC2S()}static get serverTimeS2C(){return net.logic.serverTimeS2C}static async AsyncServerTimeC2S(){return new Promise(e=>{let t={error:200},i=setTimeout(()=>{e(t)},5e3),s=function(t){clearTimeout(i),as.serverTimeS2C.off(s),e(t)};as.serverTimeS2C.on(s),as.ServerTimeC2S()})}static GamerSubChatChannelC2S(e,t){net.logic.gamerSubChatChannelC2S(e,t)}static get gamerSubChatChannelS2C(){return net.logic.gamerSubChatChannelS2C}static async AsyncGamerSubChatChannelC2S(e,t){return new Promise(i=>{let s={error:200},a=setTimeout(()=>{i(s)},5e3),n=function(e){clearTimeout(a),as.gamerSubChatChannelS2C.off(n),i(e)};as.gamerSubChatChannelS2C.on(n),as.GamerSubChatChannelC2S(e,t)})}static GamerChangeNameC2S(e){net.logic.gamerChangeNameC2S(e)}static get gamerChangeNameS2C(){return net.logic.gamerChangeNameS2C}static async AsyncGamerChangeNameC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),as.gamerChangeNameS2C.off(a),t(e)};as.gamerChangeNameS2C.on(a),as.GamerChangeNameC2S(e)})}static GamerChangeAvatarC2S(e){net.logic.gamerChangeAvatarC2S(e)}static get gamerChangeAvatarS2C(){return net.logic.gamerChangeAvatarS2C}static async AsyncGamerChangeAvatarC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),as.gamerChangeAvatarS2C.off(a),t(e)};as.gamerChangeAvatarS2C.on(a),as.GamerChangeAvatarC2S(e)})}static GamerGetBackpackC2S(){net.logic.gamerGetBackpackC2S()}static get gamerGetBackpackS2C(){return net.logic.gamerGetBackpackS2C}static async AsyncGamerGetBackpackC2S(){return new Promise(e=>{let t={error:200},i=setTimeout(()=>{e(t)},5e3),s=function(t){clearTimeout(i),as.gamerGetBackpackS2C.off(s),e(t)};as.gamerGetBackpackS2C.on(s),as.GamerGetBackpackC2S()})}static GamerSellItemC2S(e,t,i){net.logic.gamerSellItemC2S(e,t,i)}static get gamerSellItemS2C(){return net.logic.gamerSellItemS2C}static async AsyncGamerSellItemC2S(e,t,i){return new Promise(s=>{let a={error:200},n=setTimeout(()=>{s(a)},5e3),r=function(e){clearTimeout(n),as.gamerSellItemS2C.off(r),s(e)};as.gamerSellItemS2C.on(r),as.GamerSellItemC2S(e,t,i)})}static GamerUseItemC2S(e,t,i){net.logic.gamerUseItemC2S(e,t,i)}static get gamerUseItemS2C(){return net.logic.gamerUseItemS2C}static async AsyncGamerUseItemC2S(e,t,i){return new Promise(s=>{let a={error:200},n=setTimeout(()=>{s(a)},5e3),r=function(e){clearTimeout(n),as.gamerUseItemS2C.off(r),s(e)};as.gamerUseItemS2C.on(r),as.GamerUseItemC2S(e,t,i)})}static GamerFriendChatC2S(e,t){net.logic.gamerFriendChatC2S(e,t)}static get gamerFriendChatS2C(){return net.logic.gamerFriendChatS2C}static async AsyncGamerFriendChatC2S(e,t){return new Promise(i=>{let s={error:200},a=setTimeout(()=>{i(s)},5e3),n=function(e){clearTimeout(a),as.gamerFriendChatS2C.off(n),i(e)};as.gamerFriendChatS2C.on(n),as.GamerFriendChatC2S(e,t)})}static GamerWorldChatC2S(e,t){net.logic.gamerWorldChatC2S(e,t)}static get gamerWorldChatS2C(){return net.logic.gamerWorldChatS2C}static async AsyncGamerWorldChatC2S(e,t){return new Promise(i=>{let s={error:200},a=setTimeout(()=>{i(s)},5e3),n=function(e){clearTimeout(a),as.gamerWorldChatS2C.off(n),i(e)};as.gamerWorldChatS2C.on(n),as.GamerWorldChatC2S(e,t)})}static GamerTestChatC2S(e,t){net.logic.gamerTestChatC2S(e,t)}static get gamerTestChatS2C(){return net.logic.gamerTestChatS2C}static async AsyncGamerTestChatC2S(e,t){return new Promise(i=>{let s={error:200},a=setTimeout(()=>{i(s)},5e3),n=function(e){clearTimeout(a),as.gamerTestChatS2C.off(n),i(e)};as.gamerTestChatS2C.on(n),as.GamerTestChatC2S(e,t)})}static GamerClubRequestC2S(e,t){net.logic.gamerClubRequestC2S(e,t)}static get gamerClubRequestS2C(){return net.logic.gamerClubRequestS2C}static async AsyncGamerClubRequestC2S(e,t){return new Promise(i=>{let s={error:200},a=setTimeout(()=>{i(s)},5e3),n=function(e){clearTimeout(a),as.gamerClubRequestS2C.off(n),i(e)};as.gamerClubRequestS2C.on(n),as.GamerClubRequestC2S(e,t)})}static GamerNewFriendReqC2S(e,t){net.logic.gamerNewFriendReqC2S(e,t)}static get gamerNewFriendReqS2C(){return net.logic.gamerNewFriendReqS2C}static async AsyncGamerNewFriendReqC2S(e,t){return new Promise(i=>{let s={error:200},a=setTimeout(()=>{i(s)},5e3),n=function(e){clearTimeout(a),as.gamerNewFriendReqS2C.off(n),i(e)};as.gamerNewFriendReqS2C.on(n),as.GamerNewFriendReqC2S(e,t)})}static GamerDelFriendC2S(e){net.logic.gamerDelFriendC2S(e)}static get gamerDelFriendS2C(){return net.logic.gamerDelFriendS2C}static async AsyncGamerDelFriendC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),as.gamerDelFriendS2C.off(a),t(e)};as.gamerDelFriendS2C.on(a),as.GamerDelFriendC2S(e)})}static GamerProcessFriendReqC2S(e,t){net.logic.gamerProcessFriendReqC2S(e,t)}static get gamerProcessFriendReqS2C(){return net.logic.gamerProcessFriendReqS2C}static async AsyncGamerProcessFriendReqC2S(e,t){return new Promise(i=>{let s={error:200},a=setTimeout(()=>{i(s)},5e3),n=function(e){clearTimeout(a),as.gamerProcessFriendReqS2C.off(n),i(e)};as.gamerProcessFriendReqS2C.on(n),as.GamerProcessFriendReqC2S(e,t)})}static GamerGetMailC2S(){net.logic.gamerGetMailC2S()}static get gamerGetMailS2C(){return net.logic.gamerGetMailS2C}static async AsyncGamerGetMailC2S(){return new Promise(e=>{let t={error:200},i=setTimeout(()=>{e(t)},5e3),s=function(t){clearTimeout(i),as.gamerGetMailS2C.off(s),e(t)};as.gamerGetMailS2C.on(s),as.GamerGetMailC2S()})}static GamerDelMailC2S(e){net.logic.gamerDelMailC2S(e)}static get gamerDelMailS2C(){return net.logic.gamerDelMailS2C}static async AsyncGamerDelMailC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),as.gamerDelMailS2C.off(a),t(e)};as.gamerDelMailS2C.on(a),as.GamerDelMailC2S(e)})}static GamerDelHaveReadMailC2S(){net.logic.gamerDelHaveReadMailC2S()}static get gamerDelHaveReadMailS2C(){return net.logic.gamerDelHaveReadMailS2C}static async AsyncGamerDelHaveReadMailC2S(){return new Promise(e=>{let t={error:200},i=setTimeout(()=>{e(t)},5e3),s=function(t){clearTimeout(i),as.gamerDelHaveReadMailS2C.off(s),e(t)};as.gamerDelHaveReadMailS2C.on(s),as.GamerDelHaveReadMailC2S()})}static GamerOneKeyRcvMailRewardC2S(){net.logic.gamerOneKeyRcvMailRewardC2S()}static get gamerOneKeyRcvMailRewardS2C(){return net.logic.gamerOneKeyRcvMailRewardS2C}static async AsyncGamerOneKeyRcvMailRewardC2S(){return new Promise(e=>{let t={error:200},i=setTimeout(()=>{e(t)},5e3),s=function(t){clearTimeout(i),as.gamerOneKeyRcvMailRewardS2C.off(s),e(t)};as.gamerOneKeyRcvMailRewardS2C.on(s),as.GamerOneKeyRcvMailRewardC2S()})}static GamerChangeMailStateC2S(e,t){net.logic.gamerChangeMailStateC2S(e,t)}static get gamerChangeMailStateS2C(){return net.logic.gamerChangeMailStateS2C}static async AsyncGamerChangeMailStateC2S(e,t){return new Promise(i=>{let s={error:200},a=setTimeout(()=>{i(s)},5e3),n=function(e){clearTimeout(a),as.gamerChangeMailStateS2C.off(n),i(e)};as.gamerChangeMailStateS2C.on(n),as.GamerChangeMailStateC2S(e,t)})}static GamerNewHeroC2S(e){net.logic.gamerNewHeroC2S(e)}static get gamerNewHeroS2C(){return net.logic.gamerNewHeroS2C}static async AsyncGamerNewHeroC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),as.gamerNewHeroS2C.off(a),t(e)};as.gamerNewHeroS2C.on(a),as.GamerNewHeroC2S(e)})}static GamerUpgradeHeroC2S(e,t){net.logic.gamerUpgradeHeroC2S(e,t)}static get gamerUpgradeHeroS2C(){return net.logic.gamerUpgradeHeroS2C}static async AsyncGamerUpgradeHeroC2S(e,t){return new Promise(i=>{let s={error:200},a=setTimeout(()=>{i(s)},5e3),n=function(e){clearTimeout(a),as.gamerUpgradeHeroS2C.off(n),i(e)};as.gamerUpgradeHeroS2C.on(n),as.GamerUpgradeHeroC2S(e,t)})}static GamerUseHeroMedicineC2S(e,t,i){net.logic.gamerUseHeroMedicineC2S(e,t,i)}static get gamerUseHeroMedicineS2C(){return net.logic.gamerUseHeroMedicineS2C}static async AsyncGamerUseHeroMedicineC2S(e,t,i){return new Promise(s=>{let a={error:200},n=setTimeout(()=>{s(a)},5e3),r=function(e){clearTimeout(n),as.gamerUseHeroMedicineS2C.off(r),s(e)};as.gamerUseHeroMedicineS2C.on(r),as.GamerUseHeroMedicineC2S(e,t,i)})}static GamerUpStarHeroC2S(e){net.logic.gamerUpStarHeroC2S(e)}static get gamerUpStarHeroS2C(){return net.logic.gamerUpStarHeroS2C}static async AsyncGamerUpStarHeroC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),as.gamerUpStarHeroS2C.off(a),t(e)};as.gamerUpStarHeroS2C.on(a),as.GamerUpStarHeroC2S(e)})}static GamerUpHeroSkillC2S(e,t){net.logic.gamerUpHeroSkillC2S(e,t)}static get gamerUpHeroSkillS2C(){return net.logic.gamerUpHeroSkillS2C}static async AsyncGamerUpHeroSkillC2S(e,t){return new Promise(i=>{let s={error:200},a=setTimeout(()=>{i(s)},5e3),n=function(e){clearTimeout(a),as.gamerUpHeroSkillS2C.off(n),i(e)};as.gamerUpHeroSkillS2C.on(n),as.GamerUpHeroSkillC2S(e,t)})}static GamerGetHeroC2S(){net.logic.gamerGetHeroC2S()}static get gamerGetHeroS2C(){return net.logic.gamerGetHeroS2C}static async AsyncGamerGetHeroC2S(){return new Promise(e=>{let t={error:200},i=setTimeout(()=>{e(t)},5e3),s=function(t){clearTimeout(i),as.gamerGetHeroS2C.off(s),e(t)};as.gamerGetHeroS2C.on(s),as.GamerGetHeroC2S()})}static GamerPVPLoadingC2S(e,t){net.logic.gamerPVPLoadingC2S(e,t)}static get gamerPVPLoadingS2C(){return net.logic.gamerPVPLoadingS2C}static async AsyncGamerPVPLoadingC2S(e,t){return new Promise(i=>{let s={error:200},a=setTimeout(()=>{i(s)},5e3),n=function(e){clearTimeout(a),as.gamerPVPLoadingS2C.off(n),i(e)};as.gamerPVPLoadingS2C.on(n),as.GamerPVPLoadingC2S(e,t)})}static GamerPVPSyncC2S(e,t,i,s,a,n,r,o,l,c,h,u){net.logic.gamerPVPSyncC2S(e,t,i,s,a,n,r,o,l,c,h,u)}static get gamerPVPSyncS2C(){return net.logic.gamerPVPSyncS2C}static async AsyncGamerPVPSyncC2S(e,t,i,s,a,n,r,o,l,c,h,u){return new Promise(m=>{let g={error:200},d=setTimeout(()=>{m(g)},5e3),p=function(e){clearTimeout(d),as.gamerPVPSyncS2C.off(p),m(e)};as.gamerPVPSyncS2C.on(p),as.GamerPVPSyncC2S(e,t,i,s,a,n,r,o,l,c,h,u)})}static GamerReliveC2S(e,t){net.logic.gamerReliveC2S(e,t)}static get gamerReliveS2C(){return net.logic.gamerReliveS2C}static async AsyncGamerReliveC2S(e,t){return new Promise(i=>{let s={error:200},a=setTimeout(()=>{i(s)},5e3),n=function(e){clearTimeout(a),as.gamerReliveS2C.off(n),i(e)};as.gamerReliveS2C.on(n),as.GamerReliveC2S(e,t)})}static GamerGetRealTimeRankC2S(){net.logic.gamerGetRealTimeRankC2S()}static get gamerGetRealTimeRankS2C(){return net.logic.gamerGetRealTimeRankS2C}static async AsyncGamerGetRealTimeRankC2S(){return new Promise(e=>{let t={error:200},i=setTimeout(()=>{e(t)},5e3),s=function(t){clearTimeout(i),as.gamerGetRealTimeRankS2C.off(s),e(t)};as.gamerGetRealTimeRankS2C.on(s),as.GamerGetRealTimeRankC2S()})}static GamerCheckPVPBattleC2S(e){net.logic.gamerCheckPVPBattleC2S(e)}static get gamerCheckPVPBattleS2C(){return net.logic.gamerCheckPVPBattleS2C}static async AsyncGamerCheckPVPBattleC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),as.gamerCheckPVPBattleS2C.off(a),t(e)};as.gamerCheckPVPBattleS2C.on(a),as.GamerCheckPVPBattleC2S(e)})}static GamerUploadWXInfoC2S(e){net.logic.gamerUploadWXInfoC2S(e)}static get gamerUploadWXInfoS2C(){return net.logic.gamerUploadWXInfoS2C}static async AsyncGamerUploadWXInfoC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),as.gamerUploadWXInfoS2C.off(a),t(e)};as.gamerUploadWXInfoS2C.on(a),as.GamerUploadWXInfoC2S(e)})}static GamerGetNoviceGuideC2S(){net.logic.gamerGetNoviceGuideC2S()}static get gamerGetNoviceGuideS2C(){return net.logic.gamerGetNoviceGuideS2C}static async AsyncGamerGetNoviceGuideC2S(){return new Promise(e=>{let t={error:200},i=setTimeout(()=>{e(t)},5e3),s=function(t){clearTimeout(i),as.gamerGetNoviceGuideS2C.off(s),e(t)};as.gamerGetNoviceGuideS2C.on(s),as.GamerGetNoviceGuideC2S()})}static GamerNoviceGuideChangeC2S(e){net.logic.gamerNoviceGuideChangeC2S(e)}static get gamerNoviceGuideChangeS2C(){return net.logic.gamerNoviceGuideChangeS2C}static async AsyncGamerNoviceGuideChangeC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),as.gamerNoviceGuideChangeS2C.off(a),t(e)};as.gamerNoviceGuideChangeS2C.on(a),as.GamerNoviceGuideChangeC2S(e)})}static GamerMatchC2S(e,t,i,s,a,n,r,o){net.logic.gamerMatchC2S(e,t,i,s,a,n,r,o)}static get gamerMatchS2C(){return net.logic.gamerMatchS2C}static async AsyncGamerMatchC2S(e,t,i,s,a,n,r,o){return new Promise(l=>{let c={error:200},h=setTimeout(()=>{l(c)},5e3),u=function(e){clearTimeout(h),as.gamerMatchS2C.off(u),l(e)};as.gamerMatchS2C.on(u),as.GamerMatchC2S(e,t,i,s,a,n,r,o)})}static GamerCancelMatchC2S(){net.logic.gamerCancelMatchC2S()}static get gamerCancelMatchS2C(){return net.logic.gamerCancelMatchS2C}static async AsyncGamerCancelMatchC2S(){return new Promise(e=>{let t={error:200},i=setTimeout(()=>{e(t)},5e3),s=function(t){clearTimeout(i),as.gamerCancelMatchS2C.off(s),e(t)};as.gamerCancelMatchS2C.on(s),as.GamerCancelMatchC2S()})}static GamerGetRewardC2S(e){net.logic.gamerGetRewardC2S(e)}static get gamerGetRewardS2C(){return net.logic.gamerGetRewardS2C}static async AsyncGamerGetRewardC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),as.gamerGetRewardS2C.off(a),t(e)};as.gamerGetRewardS2C.on(a),as.GamerGetRewardC2S(e)})}static GamerUseIconC2S(e,t,i){net.logic.gamerUseIconC2S(e,t,i)}static get gamerUseIconS2C(){return net.logic.gamerUseIconS2C}static async AsyncGamerUseIconC2S(e,t,i){return new Promise(s=>{let a={error:200},n=setTimeout(()=>{s(a)},5e3),r=function(e){clearTimeout(n),as.gamerUseIconS2C.off(r),s(e)};as.gamerUseIconS2C.on(r),as.GamerUseIconC2S(e,t,i)})}static GamerExtractGashaponC2S(e){net.logic.gamerExtractGashaponC2S(e)}static get gamerExtractGashaponS2C(){return net.logic.gamerExtractGashaponS2C}static async AsyncGamerExtractGashaponC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),as.gamerExtractGashaponS2C.off(a),t(e)};as.gamerExtractGashaponS2C.on(a),as.GamerExtractGashaponC2S(e)})}static GamerGetGashaponPreviewC2S(e){net.logic.gamerGetGashaponPreviewC2S(e)}static get gamerGetGashaponPreviewS2C(){return net.logic.gamerGetGashaponPreviewS2C}static async AsyncGamerGetGashaponPreviewC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),as.gamerGetGashaponPreviewS2C.off(a),t(e)};as.gamerGetGashaponPreviewS2C.on(a),as.GamerGetGashaponPreviewC2S(e)})}static GetActivityRewardC2S(e){net.logic.getActivityRewardC2S(e)}static get getActivityRewardS2C(){return net.logic.getActivityRewardS2C}static async AsyncGetActivityRewardC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),as.getActivityRewardS2C.off(a),t(e)};as.getActivityRewardS2C.on(a),as.GetActivityRewardC2S(e)})}static CreateGuildC2S(e){net.logic.createGuildC2S(e)}static get createGuildS2C(){return net.logic.createGuildS2C}static async AsyncCreateGuildC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),as.createGuildS2C.off(a),t(e)};as.createGuildS2C.on(a),as.CreateGuildC2S(e)})}static GuildGamerLoginC2S(e){net.logic.guildGamerLoginC2S(e)}static get guildGamerLoginS2C(){return net.logic.guildGamerLoginS2C}static async AsyncGuildGamerLoginC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),as.guildGamerLoginS2C.off(a),t(e)};as.guildGamerLoginS2C.on(a),as.GuildGamerLoginC2S(e)})}static GuildGamerLoginoutC2S(e){net.logic.guildGamerLoginoutC2S(e)}static get guildGamerLoginoutS2C(){return net.logic.guildGamerLoginoutS2C}static async AsyncGuildGamerLoginoutC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),as.guildGamerLoginoutS2C.off(a),t(e)};as.guildGamerLoginoutS2C.on(a),as.GuildGamerLoginoutC2S(e)})}static DissolutionGuildC2S(e){net.logic.dissolutionGuildC2S(e)}static get dissolutionGuildS2C(){return net.logic.dissolutionGuildS2C}static async AsyncDissolutionGuildC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),as.dissolutionGuildS2C.off(a),t(e)};as.dissolutionGuildS2C.on(a),as.DissolutionGuildC2S(e)})}static GetGuildC2S(e){net.logic.getGuildC2S(e)}static get getGuildS2C(){return net.logic.getGuildS2C}static async AsyncGetGuildC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),as.getGuildS2C.off(a),t(e)};as.getGuildS2C.on(a),as.GetGuildC2S(e)})}static GetGuildListC2S(e,t){net.logic.getGuildListC2S(e,t)}static get getGuildListS2C(){return net.logic.getGuildListS2C}static async AsyncGetGuildListC2S(e,t){return new Promise(i=>{let s={error:200},a=setTimeout(()=>{i(s)},5e3),n=function(e){clearTimeout(a),as.getGuildListS2C.off(n),i(e)};as.getGuildListS2C.on(n),as.GetGuildListC2S(e,t)})}static ApplyJoinGuildC2S(e){net.logic.applyJoinGuildC2S(e)}static get applyJoinGuildS2C(){return net.logic.applyJoinGuildS2C}static async AsyncApplyJoinGuildC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),as.applyJoinGuildS2C.off(a),t(e)};as.applyJoinGuildS2C.on(a),as.ApplyJoinGuildC2S(e)})}static ApprovalJoinGuildC2S(e,t,i){net.logic.approvalJoinGuildC2S(e,t,i)}static get approvalJoinGuildS2C(){return net.logic.approvalJoinGuildS2C}static async AsyncApprovalJoinGuildC2S(e,t,i){return new Promise(s=>{let a={error:200},n=setTimeout(()=>{s(a)},5e3),r=function(e){clearTimeout(n),as.approvalJoinGuildS2C.off(r),s(e)};as.approvalJoinGuildS2C.on(r),as.ApprovalJoinGuildC2S(e,t,i)})}static InviteJoinGuildC2S(e,t){net.logic.inviteJoinGuildC2S(e,t)}static get inviteJoinGuildS2C(){return net.logic.inviteJoinGuildS2C}static async AsyncInviteJoinGuildC2S(e,t){return new Promise(i=>{let s={error:200},a=setTimeout(()=>{i(s)},5e3),n=function(e){clearTimeout(a),as.inviteJoinGuildS2C.off(n),i(e)};as.inviteJoinGuildS2C.on(n),as.InviteJoinGuildC2S(e,t)})}static AgreeJoinGuildC2S(e,t){net.logic.agreeJoinGuildC2S(e,t)}static get agreeJoinGuildS2C(){return net.logic.agreeJoinGuildS2C}static async AsyncAgreeJoinGuildC2S(e,t){return new Promise(i=>{let s={error:200},a=setTimeout(()=>{i(s)},5e3),n=function(e){clearTimeout(a),as.agreeJoinGuildS2C.off(n),i(e)};as.agreeJoinGuildS2C.on(n),as.AgreeJoinGuildC2S(e,t)})}static QuitGuildC2S(e){net.logic.quitGuildC2S(e)}static get quitGuildS2C(){return net.logic.quitGuildS2C}static async AsyncQuitGuildC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),as.quitGuildS2C.off(a),t(e)};as.quitGuildS2C.on(a),as.QuitGuildC2S(e)})}static KickOutGuildC2S(e,t){net.logic.kickOutGuildC2S(e,t)}static get kickOutGuildS2C(){return net.logic.kickOutGuildS2C}static async AsyncKickOutGuildC2S(e,t){return new Promise(i=>{let s={error:200},a=setTimeout(()=>{i(s)},5e3),n=function(e){clearTimeout(a),as.kickOutGuildS2C.off(n),i(e)};as.kickOutGuildS2C.on(n),as.KickOutGuildC2S(e,t)})}static GuildChatC2S(e,t){net.logic.guildChatC2S(e,t)}static get guildChatS2C(){return net.logic.guildChatS2C}static async AsyncGuildChatC2S(e,t){return new Promise(i=>{let s={error:200},a=setTimeout(()=>{i(s)},5e3),n=function(e){clearTimeout(a),as.guildChatS2C.off(n),i(e)};as.guildChatS2C.on(n),as.GuildChatC2S(e,t)})}static GMC2S(e){net.logic.gMC2S(e)}static get gMS2C(){return net.logic.gMS2C}static async AsyncGMC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),as.gMS2C.off(a),t(e)};as.gMS2C.on(a),as.GMC2S(e)})}static CheckPointListC2S(){net.logic.checkPointListC2S()}static get checkPointListS2C(){return net.logic.checkPointListS2C}static async AsyncCheckPointListC2S(){return new Promise(e=>{let t={error:200},i=setTimeout(()=>{e(t)},5e3),s=function(t){clearTimeout(i),as.checkPointListS2C.off(s),e(t)};as.checkPointListS2C.on(s),as.CheckPointListC2S()})}static GetPlotStarRewardC2S(e,t){net.logic.getPlotStarRewardC2S(e,t)}static get getPlotStarRewardS2C(){return net.logic.getPlotStarRewardS2C}static async AsyncGetPlotStarRewardC2S(e,t){return new Promise(i=>{let s={error:200},a=setTimeout(()=>{i(s)},5e3),n=function(e){clearTimeout(a),as.getPlotStarRewardS2C.off(n),i(e)};as.getPlotStarRewardS2C.on(n),as.GetPlotStarRewardC2S(e,t)})}static BuyTimesCheckPointC2S(e,t){net.logic.buyTimesCheckPointC2S(e,t)}static get buyTimesCheckPointS2C(){return net.logic.buyTimesCheckPointS2C}static async AsyncBuyTimesCheckPointC2S(e,t){return new Promise(i=>{let s={error:200},a=setTimeout(()=>{i(s)},5e3),n=function(e){clearTimeout(a),as.buyTimesCheckPointS2C.off(n),i(e)};as.buyTimesCheckPointS2C.on(n),as.BuyTimesCheckPointC2S(e,t)})}static SweepCheckPointC2S(e,t){net.logic.sweepCheckPointC2S(e,t)}static get sweepCheckPointS2C(){return net.logic.sweepCheckPointS2C}static async AsyncSweepCheckPointC2S(e,t){return new Promise(i=>{let s={error:200},a=setTimeout(()=>{i(s)},5e3),n=function(e){clearTimeout(a),as.sweepCheckPointS2C.off(n),i(e)};as.sweepCheckPointS2C.on(n),as.SweepCheckPointC2S(e,t)})}static GamerSettlePVEC2S(e,t,i,s){net.logic.gamerSettlePVEC2S(e,t,i,s)}static get gamerSettlePVES2C(){return net.logic.gamerSettlePVES2C}static async AsyncGamerSettlePVEC2S(e,t,i,s){return new Promise(a=>{let n={error:200},r=setTimeout(()=>{a(n)},5e3),o=function(e){clearTimeout(r),as.gamerSettlePVES2C.off(o),a(e)};as.gamerSettlePVES2C.on(o),as.GamerSettlePVEC2S(e,t,i,s)})}static DraugListC2S(){net.logic.draugListC2S()}static get draugListS2C(){return net.logic.draugListS2C}static async AsyncDraugListC2S(){return new Promise(e=>{let t={error:200},i=setTimeout(()=>{e(t)},5e3),s=function(t){clearTimeout(i),as.draugListS2C.off(s),e(t)};as.draugListS2C.on(s),as.DraugListC2S()})}static AwakenDraugC2S(e){net.logic.awakenDraugC2S(e)}static get awakenDraugS2C(){return net.logic.awakenDraugS2C}static async AsyncAwakenDraugC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),as.awakenDraugS2C.off(a),t(e)};as.awakenDraugS2C.on(a),as.AwakenDraugC2S(e)})}static PutDraugIntoPackC2S(){net.logic.putDraugIntoPackC2S()}static get putDraugIntoPackS2C(){return net.logic.putDraugIntoPackS2C}static async AsyncPutDraugIntoPackC2S(){return new Promise(e=>{let t={error:200},i=setTimeout(()=>{e(t)},5e3),s=function(t){clearTimeout(i),as.putDraugIntoPackS2C.off(s),e(t)};as.putDraugIntoPackS2C.on(s),as.PutDraugIntoPackC2S()})}static SwallowDraugC2S(e,t,i){net.logic.swallowDraugC2S(e,t,i)}static get swallowDraugS2C(){return net.logic.swallowDraugS2C}static async AsyncSwallowDraugC2S(e,t,i){return new Promise(s=>{let a={error:200},n=setTimeout(()=>{s(a)},5e3),r=function(e){clearTimeout(n),as.swallowDraugS2C.off(r),s(e)};as.swallowDraugS2C.on(r),as.SwallowDraugC2S(e,t,i)})}static DecomposeDraugC2S(e){net.logic.decomposeDraugC2S(e)}static get decomposeDraugS2C(){return net.logic.decomposeDraugS2C}static async AsyncDecomposeDraugC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),as.decomposeDraugS2C.off(a),t(e)};as.decomposeDraugS2C.on(a),as.DecomposeDraugC2S(e)})}static LockDraugC2S(e){net.logic.lockDraugC2S(e)}static get lockDraugS2C(){return net.logic.lockDraugS2C}static async AsyncLockDraugC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),as.lockDraugS2C.off(a),t(e)};as.lockDraugS2C.on(a),as.LockDraugC2S(e)})}static WearDraugC2S(e,t){net.logic.wearDraugC2S(e,t)}static get wearDraugS2C(){return net.logic.wearDraugS2C}static async AsyncWearDraugC2S(e,t){return new Promise(i=>{let s={error:200},a=setTimeout(()=>{i(s)},5e3),n=function(e){clearTimeout(a),as.wearDraugS2C.off(n),i(e)};as.wearDraugS2C.on(n),as.WearDraugC2S(e,t)})}static UnwearDraugC2S(e,t){net.logic.unwearDraugC2S(e,t)}static get unwearDraugS2C(){return net.logic.unwearDraugS2C}static async AsyncUnwearDraugC2S(e,t){return new Promise(i=>{let s={error:200},a=setTimeout(()=>{i(s)},5e3),n=function(e){clearTimeout(a),as.unwearDraugS2C.off(n),i(e)};as.unwearDraugS2C.on(n),as.UnwearDraugC2S(e,t)})}static DraugSelectHeroC2S(e){net.logic.draugSelectHeroC2S(e)}static get draugSelectHeroS2C(){return net.logic.draugSelectHeroS2C}static async AsyncDraugSelectHeroC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),as.draugSelectHeroS2C.off(a),t(e)};as.draugSelectHeroS2C.on(a),as.DraugSelectHeroC2S(e)})}static HeroGroupListC2S(){net.logic.heroGroupListC2S()}static get heroGroupListS2C(){return net.logic.heroGroupListS2C}static async AsyncHeroGroupListC2S(){return new Promise(e=>{let t={error:200},i=setTimeout(()=>{e(t)},5e3),s=function(t){clearTimeout(i),as.heroGroupListS2C.off(s),e(t)};as.heroGroupListS2C.on(s),as.HeroGroupListC2S()})}static UnlockHeroGroupC2S(e){net.logic.unlockHeroGroupC2S(e)}static get unlockHeroGroupS2C(){return net.logic.unlockHeroGroupS2C}static async AsyncUnlockHeroGroupC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),as.unlockHeroGroupS2C.off(a),t(e)};as.unlockHeroGroupS2C.on(a),as.UnlockHeroGroupC2S(e)})}static ChangeNameHeroGroupC2S(e,t){net.logic.changeNameHeroGroupC2S(e,t)}static get changeNameHeroGroupS2C(){return net.logic.changeNameHeroGroupS2C}static async AsyncChangeNameHeroGroupC2S(e,t){return new Promise(i=>{let s={error:200},a=setTimeout(()=>{i(s)},5e3),n=function(e){clearTimeout(a),as.changeNameHeroGroupS2C.off(n),i(e)};as.changeNameHeroGroupS2C.on(n),as.ChangeNameHeroGroupC2S(e,t)})}static HeroGroupChangeHeroC2S(e,t,i){net.logic.heroGroupChangeHeroC2S(e,t,i)}static get heroGroupChangeHeroS2C(){return net.logic.heroGroupChangeHeroS2C}static async AsyncHeroGroupChangeHeroC2S(e,t,i){return new Promise(s=>{let a={error:200},n=setTimeout(()=>{s(a)},5e3),r=function(e){clearTimeout(n),as.heroGroupChangeHeroS2C.off(r),s(e)};as.heroGroupChangeHeroS2C.on(r),as.HeroGroupChangeHeroC2S(e,t,i)})}static HeroGroupChangeSkillC2S(e,t,i){net.logic.heroGroupChangeSkillC2S(e,t,i)}static get heroGroupChangeSkillS2C(){return net.logic.heroGroupChangeSkillS2C}static async AsyncHeroGroupChangeSkillC2S(e,t,i){return new Promise(s=>{let a={error:200},n=setTimeout(()=>{s(a)},5e3),r=function(e){clearTimeout(n),as.heroGroupChangeSkillS2C.off(r),s(e)};as.heroGroupChangeSkillS2C.on(r),as.HeroGroupChangeSkillC2S(e,t,i)})}static BuyFatigueC2S(e){net.logic.buyFatigueC2S(e)}static get buyFatigueS2C(){return net.logic.buyFatigueS2C}static async AsyncBuyFatigueC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),as.buyFatigueS2C.off(a),t(e)};as.buyFatigueS2C.on(a),as.BuyFatigueC2S(e)})}static GetFatigueWelfareC2S(e){net.logic.getFatigueWelfareC2S(e)}static get getFatigueWelfareS2C(){return net.logic.getFatigueWelfareS2C}static async AsyncGetFatigueWelfareC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),as.getFatigueWelfareS2C.off(a),t(e)};as.getFatigueWelfareS2C.on(a),as.GetFatigueWelfareC2S(e)})}static UpStarEquipC2S(e,t,i,s){net.logic.upStarEquipC2S(e,t,i,s)}static get upStarEquipS2C(){return net.logic.upStarEquipS2C}static async AsyncUpStarEquipC2S(e,t,i,s){return new Promise(a=>{let n={error:200},r=setTimeout(()=>{a(n)},5e3),o=function(e){clearTimeout(r),as.upStarEquipS2C.off(o),a(e)};as.upStarEquipS2C.on(o),as.UpStarEquipC2S(e,t,i,s)})}static EatEquipsC2S(e,t,i){net.logic.eatEquipsC2S(e,t,i)}static get eatEquipsS2C(){return net.logic.eatEquipsS2C}static async AsyncEatEquipsC2S(e,t,i){return new Promise(s=>{let a={error:200},n=setTimeout(()=>{s(a)},5e3),r=function(e){clearTimeout(n),as.eatEquipsS2C.off(r),s(e)};as.eatEquipsS2C.on(r),as.EatEquipsC2S(e,t,i)})}static DesEquipC2S(e){net.logic.desEquipC2S(e)}static get desEquipS2C(){return net.logic.desEquipS2C}static async AsyncDesEquipC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),as.desEquipS2C.off(a),t(e)};as.desEquipS2C.on(a),as.DesEquipC2S(e)})}static TakeOnEquipC2S(e,t,i){net.logic.takeOnEquipC2S(e,t,i)}static get takeOnEquipS2C(){return net.logic.takeOnEquipS2C}static async AsyncTakeOnEquipC2S(e,t,i){return new Promise(s=>{let a={error:200},n=setTimeout(()=>{s(a)},5e3),r=function(e){clearTimeout(n),as.takeOnEquipS2C.off(r),s(e)};as.takeOnEquipS2C.on(r),as.TakeOnEquipC2S(e,t,i)})}static TakeOffEquipC2S(e,t){net.logic.takeOffEquipC2S(e,t)}static get takeOffEquipS2C(){return net.logic.takeOffEquipS2C}static async AsyncTakeOffEquipC2S(e,t){return new Promise(i=>{let s={error:200},a=setTimeout(()=>{i(s)},5e3),n=function(e){clearTimeout(a),as.takeOffEquipS2C.off(n),i(e)};as.takeOffEquipS2C.on(n),as.TakeOffEquipC2S(e,t)})}static RedSpotC2S(){net.logic.redSpotC2S()}static get redSpotS2C(){return net.logic.redSpotS2C}static async AsyncRedSpotC2S(){return new Promise(e=>{let t={error:200},i=setTimeout(()=>{e(t)},5e3),s=function(t){clearTimeout(i),as.redSpotS2C.off(s),e(t)};as.redSpotS2C.on(s),as.RedSpotC2S()})}static MakeTeamC2S(e,t,i,s){net.logic.makeTeamC2S(e,t,i,s)}static get makeTeamS2C(){return net.logic.makeTeamS2C}static async AsyncMakeTeamC2S(e,t,i,s){return new Promise(a=>{let n={error:200},r=setTimeout(()=>{a(n)},5e3),o=function(e){clearTimeout(r),as.makeTeamS2C.off(o),a(e)};as.makeTeamS2C.on(o),as.MakeTeamC2S(e,t,i,s)})}static SetTeamAimC2S(e){net.logic.setTeamAimC2S(e)}static get setTeamAimS2C(){return net.logic.setTeamAimS2C}static async AsyncSetTeamAimC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),as.setTeamAimS2C.off(a),t(e)};as.setTeamAimS2C.on(a),as.SetTeamAimC2S(e)})}static JoinTeamC2S(e,t,i,s){net.logic.joinTeamC2S(e,t,i,s)}static get joinTeamS2C(){return net.logic.joinTeamS2C}static async AsyncJoinTeamC2S(e,t,i,s){return new Promise(a=>{let n={error:200},r=setTimeout(()=>{a(n)},5e3),o=function(e){clearTimeout(r),as.joinTeamS2C.off(o),a(e)};as.joinTeamS2C.on(o),as.JoinTeamC2S(e,t,i,s)})}static ExitTeamC2S(){net.logic.exitTeamC2S()}static get exitTeamS2C(){return net.logic.exitTeamS2C}static async AsyncExitTeamC2S(){return new Promise(e=>{let t={error:200},i=setTimeout(()=>{e(t)},5e3),s=function(t){clearTimeout(i),as.exitTeamS2C.off(s),e(t)};as.exitTeamS2C.on(s),as.ExitTeamC2S()})}static TurnOverTeamLeaderC2S(e){net.logic.turnOverTeamLeaderC2S(e)}static get turnOverTeamLeaderS2C(){return net.logic.turnOverTeamLeaderS2C}static async AsyncTurnOverTeamLeaderC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),as.turnOverTeamLeaderS2C.off(a),t(e)};as.turnOverTeamLeaderS2C.on(a),as.TurnOverTeamLeaderC2S(e)})}static InviteTeamC2S(e){net.logic.inviteTeamC2S(e)}static get inviteTeamS2C(){return net.logic.inviteTeamS2C}static async AsyncInviteTeamC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),as.inviteTeamS2C.off(a),t(e)};as.inviteTeamS2C.on(a),as.InviteTeamC2S(e)})}static RejectTeamC2S(e,t,i){net.logic.rejectTeamC2S(e,t,i)}static get rejectTeamS2C(){return net.logic.rejectTeamS2C}static async AsyncRejectTeamC2S(e,t,i){return new Promise(s=>{let a={error:200},n=setTimeout(()=>{s(a)},5e3),r=function(e){clearTimeout(n),as.rejectTeamS2C.off(r),s(e)};as.rejectTeamS2C.on(r),as.RejectTeamC2S(e,t,i)})}static KickTeamC2S(e){net.logic.kickTeamC2S(e)}static get kickTeamS2C(){return net.logic.kickTeamS2C}static async AsyncKickTeamC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),as.kickTeamS2C.off(a),t(e)};as.kickTeamS2C.on(a),as.KickTeamC2S(e)})}static SetTeamHelpC2S(e){net.logic.setTeamHelpC2S(e)}static get setTeamHelpS2C(){return net.logic.setTeamHelpS2C}static async AsyncSetTeamHelpC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),as.setTeamHelpS2C.off(a),t(e)};as.setTeamHelpS2C.on(a),as.SetTeamHelpC2S(e)})}static SetTeamHeroC2S(e,t,i){net.logic.setTeamHeroC2S(e,t,i)}static get setTeamHeroS2C(){return net.logic.setTeamHeroS2C}static async AsyncSetTeamHeroC2S(e,t,i){return new Promise(s=>{let a={error:200},n=setTimeout(()=>{s(a)},5e3),r=function(e){clearTimeout(n),as.setTeamHeroS2C.off(r),s(e)};as.setTeamHeroS2C.on(r),as.SetTeamHeroC2S(e,t,i)})}static SwitchTeamReadyC2S(){net.logic.switchTeamReadyC2S()}static get switchTeamReadyS2C(){return net.logic.switchTeamReadyS2C}static async AsyncSwitchTeamReadyC2S(){return new Promise(e=>{let t={error:200},i=setTimeout(()=>{e(t)},5e3),s=function(t){clearTimeout(i),as.switchTeamReadyS2C.off(s),e(t)};as.switchTeamReadyS2C.on(s),as.SwitchTeamReadyC2S()})}static TeamBattleC2S(){net.logic.teamBattleC2S()}static get teamBattleS2C(){return net.logic.teamBattleS2C}static async AsyncTeamBattleC2S(){return new Promise(e=>{let t={error:200},i=setTimeout(()=>{e(t)},5e3),s=function(t){clearTimeout(i),as.teamBattleS2C.off(s),e(t)};as.teamBattleS2C.on(s),as.TeamBattleC2S()})}static GetDanInfoC2S(){net.logic.getDanInfoC2S()}static get getDanInfoS2C(){return net.logic.getDanInfoS2C}static async AsyncGetDanInfoC2S(){return new Promise(e=>{let t={error:200},i=setTimeout(()=>{e(t)},5e3),s=function(t){clearTimeout(i),as.getDanInfoS2C.off(s),e(t)};as.getDanInfoS2C.on(s),as.GetDanInfoC2S()})}static GetDuelRankC2S(e,t,i,s){net.logic.getDuelRankC2S(e,t,i,s)}static get getDuelRankS2C(){return net.logic.getDuelRankS2C}static async AsyncGetDuelRankC2S(e,t,i,s){return new Promise(a=>{let n={error:200},r=setTimeout(()=>{a(n)},5e3),o=function(e){clearTimeout(r),as.getDuelRankS2C.off(o),a(e)};as.getDuelRankS2C.on(o),as.GetDuelRankC2S(e,t,i,s)})}static SysListC2S(){net.logic.sysListC2S()}static get sysListS2C(){return net.logic.sysListS2C}static async AsyncSysListC2S(){return new Promise(e=>{let t={error:200},i=setTimeout(()=>{e(t)},5e3),s=function(t){clearTimeout(i),as.sysListS2C.off(s),e(t)};as.sysListS2C.on(s),as.SysListC2S()})}static SysOpenShowC2S(e){net.logic.sysOpenShowC2S(e)}static get sysOpenShowS2C(){return net.logic.sysOpenShowS2C}static async AsyncSysOpenShowC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),as.sysOpenShowS2C.off(a),t(e)};as.sysOpenShowS2C.on(a),as.SysOpenShowC2S(e)})}static GetQuestsC2S(){net.logic.getQuestsC2S()}static get getQuestsS2C(){return net.logic.getQuestsS2C}static async AsyncGetQuestsC2S(){return new Promise(e=>{let t={error:200},i=setTimeout(()=>{e(t)},5e3),s=function(t){clearTimeout(i),as.getQuestsS2C.off(s),e(t)};as.getQuestsS2C.on(s),as.GetQuestsC2S()})}static GetQuestRewardC2S(e){net.logic.getQuestRewardC2S(e)}static get getQuestRewardS2C(){return net.logic.getQuestRewardS2C}static async AsyncGetQuestRewardC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),as.getQuestRewardS2C.off(a),t(e)};as.getQuestRewardS2C.on(a),as.GetQuestRewardC2S(e)})}static GetDailyQuestRewardC2S(e){net.logic.getDailyQuestRewardC2S(e)}static get getDailyQuestRewardS2C(){return net.logic.getDailyQuestRewardS2C}static async AsyncGetDailyQuestRewardC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),as.getDailyQuestRewardS2C.off(a),t(e)};as.getDailyQuestRewardS2C.on(a),as.GetDailyQuestRewardC2S(e)})}static GamerHeroImageChooseC2S(){net.logic.gamerHeroImageChooseC2S()}static get gamerHeroImageChooseS2C(){return net.logic.gamerHeroImageChooseS2C}static async AsyncGamerHeroImageChooseC2S(){return new Promise(e=>{let t={error:200},i=setTimeout(()=>{e(t)},5e3),s=function(t){clearTimeout(i),as.gamerHeroImageChooseS2C.off(s),e(t)};as.gamerHeroImageChooseS2C.on(s),as.GamerHeroImageChooseC2S()})}static GamerHeroImageChangeC2S(e){net.logic.gamerHeroImageChangeC2S(e)}static get gamerHeroImageChangeS2C(){return net.logic.gamerHeroImageChangeS2C}static async AsyncGamerHeroImageChangeC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),as.gamerHeroImageChangeS2C.off(a),t(e)};as.gamerHeroImageChangeS2C.on(a),as.GamerHeroImageChangeC2S(e)})}static GamerBuyRollC2S(e){net.logic.gamerBuyRollC2S(e)}static get gamerBuyRollS2C(){return net.logic.gamerBuyRollS2C}static async AsyncGamerBuyRollC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),as.gamerBuyRollS2C.off(a),t(e)};as.gamerBuyRollS2C.on(a),as.GamerBuyRollC2S(e)})}static GetGamerSecretLandC2S(){net.logic.getGamerSecretLandC2S()}static get getGamerSecretLandS2C(){return net.logic.getGamerSecretLandS2C}static async AsyncGetGamerSecretLandC2S(){return new Promise(e=>{let t={error:200},i=setTimeout(()=>{e(t)},5e3),s=function(t){clearTimeout(i),as.getGamerSecretLandS2C.off(s),e(t)};as.getGamerSecretLandS2C.on(s),as.GetGamerSecretLandC2S()})}static GamerSecretLandBattleRewardC2S(e){net.logic.gamerSecretLandBattleRewardC2S(e)}static get gamerSecretLandBattleRewardS2C(){return net.logic.gamerSecretLandBattleRewardS2C}static async AsyncGamerSecretLandBattleRewardC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),as.gamerSecretLandBattleRewardS2C.off(a),t(e)};as.gamerSecretLandBattleRewardS2C.on(a),as.GamerSecretLandBattleRewardC2S(e)})}static GamerSecretLandWeekRewardC2S(){net.logic.gamerSecretLandWeekRewardC2S()}static get gamerSecretLandWeekRewardS2C(){return net.logic.gamerSecretLandWeekRewardS2C}static async AsyncGamerSecretLandWeekRewardC2S(){return new Promise(e=>{let t={error:200},i=setTimeout(()=>{e(t)},5e3),s=function(t){clearTimeout(i),as.gamerSecretLandWeekRewardS2C.off(s),e(t)};as.gamerSecretLandWeekRewardS2C.on(s),as.GamerSecretLandWeekRewardC2S()})}static GamerSecretLandRankC2S(e){net.logic.gamerSecretLandRankC2S(e)}static get gamerSecretLandRankS2C(){return net.logic.gamerSecretLandRankS2C}static async AsyncGamerSecretLandRankC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),as.gamerSecretLandRankS2C.off(a),t(e)};as.gamerSecretLandRankS2C.on(a),as.GamerSecretLandRankC2S(e)})}static GetGamerSecretLandInfoC2S(){net.logic.getGamerSecretLandInfoC2S()}static get getGamerSecretLandInfoS2C(){return net.logic.getGamerSecretLandInfoS2C}static async AsyncGetGamerSecretLandInfoC2S(){return new Promise(e=>{let t={error:200},i=setTimeout(()=>{e(t)},5e3),s=function(t){clearTimeout(i),as.getGamerSecretLandInfoS2C.off(s),e(t)};as.getGamerSecretLandInfoS2C.on(s),as.GetGamerSecretLandInfoC2S()})}static GamerChangeItemIsSawC2S(e,t){net.logic.gamerChangeItemIsSawC2S(e,t)}static get gamerChangeItemIsSawS2C(){return net.logic.gamerChangeItemIsSawS2C}static async AsyncGamerChangeItemIsSawC2S(e,t){return new Promise(i=>{let s={error:200},a=setTimeout(()=>{i(s)},5e3),n=function(e){clearTimeout(a),as.gamerChangeItemIsSawS2C.off(n),i(e)};as.gamerChangeItemIsSawS2C.on(n),as.GamerChangeItemIsSawC2S(e,t)})}static get gamerNotifyLoginOtherS2C(){return net.logic.gamerNotifyLoginOtherS2C}static get gamerNotifyExpLevelS2C(){return net.logic.gamerNotifyExpLevelS2C}static get gamerNotifyItemChangeS2C(){return net.logic.gamerNotifyItemChangeS2C}static get gamerNotifyNewChatS2C(){return net.logic.gamerNotifyNewChatS2C}static get gamerNotifyNewFriendReqS2C(){return net.logic.gamerNotifyNewFriendReqS2C}static get gamerNotifyNewFriendS2C(){return net.logic.gamerNotifyNewFriendS2C}static get gamerNotifyDelFriendS2C(){return net.logic.gamerNotifyDelFriendS2C}static get gamerNotifyNoticeS2C(){return net.logic.gamerNotifyNoticeS2C}static get gamerNotifyMailS2C(){return net.logic.gamerNotifyMailS2C}static get gamerNotifyNewMailS2C(){return net.logic.gamerNotifyNewMailS2C}static get gamerNotifyHerosChangeS2C(){return net.logic.gamerNotifyHerosChangeS2C}static get gamerNotifyHeroPropUpdateS2C(){return net.logic.gamerNotifyHeroPropUpdateS2C}static get gamerNotifyPVPLoadingS2C(){return net.logic.gamerNotifyPVPLoadingS2C}static get gamerNotifyGamerMiniS2C(){return net.logic.gamerNotifyGamerMiniS2C}static get gamerNotifyPVPSyncS2C(){return net.logic.gamerNotifyPVPSyncS2C}static get gamerNotifyNewPVPResultS2C(){return net.logic.gamerNotifyNewPVPResultS2C}static get gamerNotifyIconChangeS2C(){return net.logic.gamerNotifyIconChangeS2C}static get gamerNotifyDiamonChangeS2C(){return net.logic.gamerNotifyDiamonChangeS2C}static get gamerNotifyEnergyChangeS2C(){return net.logic.gamerNotifyEnergyChangeS2C}static get gamerNotifyExpChangeS2C(){return net.logic.gamerNotifyExpChangeS2C}static get gamerNotifyMatchInfoS2C(){return net.logic.gamerNotifyMatchInfoS2C}static get gamerNotifyGashaponInfoS2C(){return net.logic.gamerNotifyGashaponInfoS2C}static get gamerNotifyActivitiesS2C(){return net.logic.gamerNotifyActivitiesS2C}static get gamerNotifyApplyJoinGuildS2C(){return net.logic.gamerNotifyApplyJoinGuildS2C}static get gamerNotifyInviteJoinGuildS2C(){return net.logic.gamerNotifyInviteJoinGuildS2C}static get gamerNotifyGuildMemUpdateS2C(){return net.logic.gamerNotifyGuildMemUpdateS2C}static get gamerNotifyGuildChatS2C(){return net.logic.gamerNotifyGuildChatS2C}static get gamerNotifyCheckPointListS2C(){return net.logic.gamerNotifyCheckPointListS2C}static get gamerNotifyNewCheckPointListS2C(){return net.logic.gamerNotifyNewCheckPointListS2C}static get gamerNotifyRewardS2C(){return net.logic.gamerNotifyRewardS2C}static get gamerNotifyUnlockPosHeroGroupS2C(){return net.logic.gamerNotifyUnlockPosHeroGroupS2C}static get gamerNotifyFatigueS2C(){return net.logic.gamerNotifyFatigueS2C}static get gamerNotifyTeamS2C(){return net.logic.gamerNotifyTeamS2C}static get gamerNotifyTeamInfoS2C(){return net.logic.gamerNotifyTeamInfoS2C}static get gamerNotifyTeamChangeS2C(){return net.logic.gamerNotifyTeamChangeS2C}static get gamerNotifyTeamMemberChangeS2C(){return net.logic.gamerNotifyTeamMemberChangeS2C}static get gamerNotifyLeaveTeamS2C(){return net.logic.gamerNotifyLeaveTeamS2C}static get gamerNotifyTeamReadyS2C(){return net.logic.gamerNotifyTeamReadyS2C}static get gamerNotifyDanInfoS2C(){return net.logic.gamerNotifyDanInfoS2C}static get gamerNotifyNewSeasonS2C(){return net.logic.gamerNotifyNewSeasonS2C}static get gamerNotifyQuestsS2C(){return net.logic.gamerNotifyQuestsS2C}static get gamerNotifyGamerSecretLandInfoS2C(){return net.logic.gamerNotifyGamerSecretLandInfoS2C}static get gamerNotifySecretLandInfoS2C(){return net.logic.gamerNotifySecretLandInfoS2C}static get gamerNotifySLTreasureBoxS2C(){return net.logic.gamerNotifySLTreasureBoxS2C}static get gamerNotifyNewSecretLandResultS2C(){return net.logic.gamerNotifyNewSecretLandResultS2C}}class ns{constructor(){this.id=0,this.name="TestName",this.vipLevel=1}setGamerMain(e){for(var t in e)this[t]=e[t]}set setGamerMini(e){for(var t in e)this[t]=e[t]}}class rs{}class os extends ns{constructor(){super(),this.maxLevel=80,this.changeNameNum=0,this.isLoginAndGetUserData=!1,this.isShowLevelUp=!1,this.levelSnapshotData=new rs,this.InitTestData()}InitTestData(){this.exp=0}setGamerMain(e){super.setGamerMain(e)}levelSnapshot(){this.levelSnapshotData.exp=this.exp,this.levelSnapshotData.level=this.level}}class ls extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","PanelMainMenu")}constructFromXML(e){super.constructFromXML(e),this.m_menuLogo=this.getChild("menuLogo"),this.m_btnBar=this.getChild("btnBar")}}ls.URL="ui://moe42ygrsqzy7q",ls.DependPackages=["GameHome"];class cs extends ls{onWindowInited(){this.m_btnBar.m_bigPlayBtn.onClick(this,this.OnClickPlayBtn),this.m_btnBar.m_soundBtn.onClick(this,this.OnClickSoundBtn),this.m_btnBar.m_groupBtn.onClick(this,this.OnClickGroupBtn)}onWindowShow(){this.m_btnBar.m_soundBtn.SetSoundBtnState()}onTabShow(){console.log("PanelMainMenu onTabShow")}onTabHide(){console.log("PanelMainMenu onTabHide")}OnClickPlayBtn(){On.menu.openTab(p.Home,he.ChooseHero)}OnClickSoundBtn(){Xe.instance.changeSoundState(),this.m_btnBar.m_soundBtn.SetSoundBtnState()}OnClickGroupBtn(){}}class hs extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","BigSoundBtn")}constructFromXML(e){super.constructFromXML(e),this.m_button=this.getController("button"),this.m_off=this.getChild("off"),this.m_on=this.getChild("on")}}hs.URL="ui://moe42ygrsqzy87",hs.DependPackages=["GameHome"];class us extends hs{SetSoundBtnState(){this.m_button.setSelectedIndex(Xe.instance.soundBtnIndex)}}class ms extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","MainMenuBtnBar")}constructFromXML(e){super.constructFromXML(e),this.m_groupBtn=this.getChild("groupBtn"),this.m_soundBtn=this.getChild("soundBtn"),this.m_bigPlayBtn=this.getChild("bigPlayBtn")}}ms.URL="ui://moe42ygrsqzy88",ms.DependPackages=["GameHome"];class gs extends ms{}class ds extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","PanelChooseHero")}constructFromXML(e){super.constructFromXML(e),this.m_btnGroup=this.getChild("btnGroup"),this.m_heroGroup=this.getChild("heroGroup"),this.m_playBtn=this.getChild("playBtn"),this.m_plusBtn=this.getChild("plusBtn"),this.m_nextHeroBtn=this.getChild("nextHeroBtn"),this.m_prevHeroBtn=this.getChild("prevHeroBtn"),this.m_choiceHero=this.getChild("choiceHero")}}ds.URL="ui://moe42ygrsqzy89",ds.DependPackages=["GameHome"];class ps extends ds{onWindowInited(){this.m_playBtn.onClick(this,this.OnClickPlayBtn),this.m_plusBtn.onClick(this,this.OnClickPlusBtn)}onWindowShow(){this.SetBtnState()}onTabShow(){console.log("PanelChooseHero onTabShow"),this.SetBtnState()}onTabHide(){console.log("PanelChooseHero onTabHide")}SetBtnState(e=!0){e?(this.m_plusBtn.visible=!1,this.m_playBtn.visible=!0):(this.m_plusBtn.visible=!0,this.m_playBtn.visible=!1)}OnClickPlayBtn(){On.menu.openTab(p.Home,he.Shop)}OnClickPlusBtn(){}}class Ss extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","MenuTopPanel")}constructFromXML(e){super.constructFromXML(e),this.m_coinText=this.getChild("coinText"),this.m_coinBar=this.getChild("coinBar"),this.m_prevBtn=this.getChild("prevBtn"),this.m_homeBtn=this.getChild("homeBtn")}}Ss.URL="ui://moe42ygrsqzy8b",Ss.DependPackages=["GameHome"];class Cs extends Ss{get tabIndex(){var e=he.MenuMenu;return this.moduleWindow&&this.moduleWindow.menuParameter&&void 0!==this.moduleWindow.menuParameter.openIndex&&(e=this.moduleWindow.menuParameter.openIndex),e}onWindowInited(){Ue.sGold.add(this.OnGoldChange,this),this.m_homeBtn.onClick(this,this.OnClickHomeBtn),this.m_prevBtn.onClick(this,this.OnClickPrevBtn),this.moduleWindow.sOpenTab.add(this.OnOpenTab,this),this.OnOpenTab(he.MenuMenu)}onWindowDestory(){return Ue.sGold.remove(this.OnGoldChange,this),!1}onWindowShow(){this.OnGoldChange()}onTabShow(){this.OnGoldChange(),console.log("MenuTopPanel onTabShow")}OnOpenTab(e){this.visible=e>he.MenuMenu,this.m_prevBtn.visible=e>he.ChooseHero&&e<he.Result,this.m_homeBtn.visible=e>he.MenuMenu&&e<he.Result}OnGoldChange(){this.m_coinText.text=Ue.gold+""}OnClickHomeBtn(){On.menu.openTab(p.Home,he.MenuMenu)}OnClickPrevBtn(){var e=he.MenuMenu;this.moduleWindow&&this.moduleWindow.menuParameter&&void 0!==this.moduleWindow.menuParameter.openIndex&&(e=this.moduleWindow.menuParameter.openIndex),e>0&&(e-=1),On.menu.openTab(p.Home,e)}}class fs extends fgui.GLabel{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","HeroSprite")}constructFromXML(e){super.constructFromXML(e),this.m_sprite=this.getController("sprite"),this.m_icon=this.getChild("icon"),this.m_t0=this.getTransition("t0")}}fs.URL="ui://moe42ygrsqzy8m",fs.DependPackages=["GameHome"];class ys extends fs{}class ws extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","FxSmallRing")}constructFromXML(e){super.constructFromXML(e),this.m_shadow=this.getChild("shadow"),this.m_anim=this.getTransition("anim")}}ws.URL="ui://moe42ygrsqzy8w",ws.DependPackages=["GameHome"];class Ls extends ws{}class _s extends fgui.GLabel{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","ShopIcon")}constructFromXML(e){super.constructFromXML(e),this.m_icon=this.getChild("icon"),this.m_anim=this.getTransition("anim")}}_s.URL="ui://moe42ygrsqzy8x",_s.DependPackages=["GameHome"];class Ts extends _s{}class vs extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","PanelShop")}constructFromXML(e){super.constructFromXML(e),this.m_playBtn=this.getChild("playBtn")}}vs.URL="ui://moe42ygrsqzy8y",vs.DependPackages=["GameHome"];class Gs extends vs{onWindowInited(){this.m_playBtn.onClick(this,this.OnClickPlayBtn)}onWindowShow(){}onTabShow(){console.log("PanelShop onTabShow")}onTabHide(){console.log("PanelShop onTabHide")}OnClickPlayBtn(){On.menu.openTab(p.Home,he.ChooseGameFormat)}}class Ps extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","PanelChooseGameFormat")}constructFromXML(e){super.constructFromXML(e),this.m_formatGroup=this.getChild("formatGroup"),this.m_format3x3=this.getChild("format3x3"),this.m_format4x4=this.getChild("format4x4")}}Ps.URL="ui://moe42ygrsqzy8z",Ps.DependPackages=["GameHome"];class ks extends Ps{onWindowInited(){}onWindowShow(){}onTabShow(){console.log("PanelChooseGameFormat onTabShow")}onTabHide(){console.log("PanelChooseGameFormat onTabHide")}OnClickPlayBtn(){On.menu.open(p.War)}}class Is extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","GameFormatCard")}constructFromXML(e){super.constructFromXML(e),this.m_format=this.getController("format"),this.m_bg=this.getChild("bg"),this.m_coinIcon=this.getChild("coinIcon"),this.m_coinText=this.getChild("coinText"),this.m_coinGroup=this.getChild("coinGroup"),this.m_lock=this.getChild("lock"),this.m_plusBtn=this.getChild("plusBtn"),this.m_playBtn=this.getChild("playBtn"),this.m_fxSmallRing=this.getChild("fxSmallRing"),this.m_icon=this.getChild("icon")}}Is.URL="ui://moe42ygrsqzy91",Is.DependPackages=["GameHome"];class Ms extends Is{onWindowInited(){this.m_playBtn.onClick(this,this.OnClickPlayBtn),this.m_plusBtn.onClick(this,this.OnClickPlusBtn),this.SetBtnState(!0)}onWindowShow(){}onTabShow(){console.log("PanelMainMenu onTabShow")}onTabHide(){console.log("PanelMainMenu onTabHide")}SetBtnState(e=!0){e?(this.m_plusBtn.visible=!1,this.m_playBtn.visible=!0):(this.m_plusBtn.visible=!0,this.m_playBtn.visible=!1)}OnClickPlayBtn(){On.menu.open(p.War)}OnClickPlusBtn(){}}class bs extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","PanelPause")}constructFromXML(e){super.constructFromXML(e),this.m_btnGroup=this.getChild("btnGroup"),this.m_bg=this.getChild("bg"),this.m_logo=this.getChild("logo"),this.m_homeBtn=this.getChild("homeBtn"),this.m_soundBtn=this.getChild("soundBtn"),this.m_resumeBtn=this.getChild("resumeBtn")}}bs.URL="ui://moe42ygrsqzy9a",bs.DependPackages=["GameHome","GameLaunch"];class Ds extends bs{onWindowInited(){this.m_homeBtn.onClick(this,this.OnClickHomeBtn),this.m_soundBtn.onClick(this,this.OnClickSoundBtn),this.m_resumeBtn.onClick(this,this.OnClickResumeBtn)}Open(){this.visible=!0,Lt.game.isPause=!0,this.m_soundBtn.SetSoundBtnState()}Close(){this.visible=!1,Lt.game.isPause=!1}OnClickHomeBtn(){Lt.setGameOver(),this.Close()}OnClickSoundBtn(){Xe.instance.changeSoundState(),this.m_soundBtn.SetSoundBtnState()}OnClickResumeBtn(){this.Close()}}class Bs extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","PanelResult")}constructFromXML(e){super.constructFromXML(e),this.m_btnGroup=this.getChild("btnGroup"),this.m_resultBg=this.getChild("resultBg"),this.m_coinCurrent=this.getChild("coinCurrent"),this.m_coinMax=this.getChild("coinMax"),this.m_resultGroup=this.getChild("resultGroup"),this.m_homeBtn=this.getChild("homeBtn"),this.m_playBtn=this.getChild("playBtn")}}Bs.URL="ui://moe42ygrsqzy9d",Bs.DependPackages=["GameHome"];class Fs extends Bs{onWindowInited(){this.m_homeBtn.onClick(this,this.OnClickHome),this.m_playBtn.onClick(this,this.OnClickPlayBtn)}onTabShow(){console.log("PanelResult onTabShow"),this.SetData()}onTabHide(){console.log("PanelResult onTabHide")}SetData(){this.m_coinCurrent.text=Ue.goldPerGame+"",this.m_coinMax.text=Ue.bestGoldPerGame+""}OnClickPlayBtn(){On.menu.openTab(p.Home,he.ChooseHero)}OnClickHome(){On.menu.openTab(p.Home,he.MenuMenu)}}class As extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","MenuTopPanelWar")}constructFromXML(e){super.constructFromXML(e),this.m_iconCoin=this.getChild("iconCoin"),this.m_coinText=this.getChild("coinText"),this.m_countText=this.getChild("countText"),this.m_levelTex=this.getChild("levelTex"),this.m_levelKey=this.getChild("levelKey"),this.m_fxCoin=this.getChild("fxCoin"),this.m_puaseBtn=this.getChild("puaseBtn")}}As.URL="ui://moe42ygrsqzy9e",As.DependPackages=["GameHome"];class Hs extends As{PlayFxCoin(){Laya.timer.clear(this,this.SetCoinIconState),this.m_iconCoin.visible=!1,this.m_fxCoin.visible=!0,this.m_fxCoin.frame=0,this.m_fxCoin.playing=!0,Laya.timer.frameOnce(Math.ceil(25),this,this.SetCoinIconState)}SetCoinIconState(){this.m_iconCoin.visible=!0,this.m_fxCoin.visible=!1,this.m_fxCoin.playing=!1}}class xs extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","FxBarrel")}constructFromXML(e){super.constructFromXML(e)}}xs.URL="ui://moe42ygrsqzy9g",xs.DependPackages=["GameHome"];class Rs extends xs{}class Us extends fgui.GLabel{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","CardLifeHero")}constructFromXML(e){super.constructFromXML(e),this.m_title=this.getChild("title")}}Us.URL="ui://moe42ygrsqzy9u",Us.DependPackages=["GameHome"];class Ns extends Us{}class Os extends fgui.GLabel{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","CardLifeWarriow")}constructFromXML(e){super.constructFromXML(e),this.m_title=this.getChild("title")}}Os.URL="ui://moe42ygrsqzy9x",Os.DependPackages=["GameHome"];class Es extends Os{}class Ws extends fgui.GLabel{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","CardLifePowerUp")}constructFromXML(e){super.constructFromXML(e),this.m_title=this.getChild("title")}}Ws.URL="ui://moe42ygrsqzy9z",Ws.DependPackages=["GameHome"];class Vs extends Ws{}class Xs extends fgui.GLabel{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","CardShield")}constructFromXML(e){super.constructFromXML(e),this.m_level=this.getController("level"),this.m_icon=this.getChild("icon"),this.m_title=this.getChild("title")}}Xs.URL="ui://moe42ygrsqzya0",Xs.DependPackages=["GameHome"];class qs extends Xs{}class Ks extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","CardShopBar")}constructFromXML(e){super.constructFromXML(e),this.m_shopHeart=this.getChild("shopHeart"),this.m_shopHorseshoe=this.getChild("shopHorseshoe"),this.m_shopLock=this.getChild("shopLock"),this.m_shopKey=this.getChild("shopKey"),this.m_fxHeart=this.getChild("fxHeart")}}Ks.URL="ui://moe42ygrsqzya1",Ks.DependPackages=["GameHome"];class js extends Ks{useLuck(){this.m_shopHeart.visible=!1,this.m_fxHeart.visible=!0,this.m_fxHeart.frame=1,this.m_fxHeart.playing=!0,Laya.timer.once(1e3,this,this.refresh)}refresh(){}}class zs extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","CardViewBack")}constructFromXML(e){super.constructFromXML(e),this.m_cardBack=this.getChild("cardBack")}}zs.URL="ui://moe42ygrsqzya2",zs.DependPackages=["GameHome"];class Ys extends zs{}class $s extends fgui.GLabel{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","SpriteEnemy")}constructFromXML(e){super.constructFromXML(e),this.m_sprite=this.getController("sprite"),this.m_icon=this.getChild("icon"),this.m_t0=this.getTransition("t0")}}$s.URL="ui://moe42ygrsqzya4",$s.DependPackages=["GameHome"];class Js extends $s{}class Qs extends fgui.GLabel{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","SpriteBoss")}constructFromXML(e){super.constructFromXML(e),this.m_sprite=this.getController("sprite"),this.m_icon=this.getChild("icon"),this.m_t0=this.getTransition("t0")}}Qs.URL="ui://moe42ygrsqzya5",Qs.DependPackages=["GameHome"];class Zs extends Qs{}class ea extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","Container")}constructFromXML(e){super.constructFromXML(e)}}ea.URL="ui://moe42ygrsqzya7",ea.DependPackages=["GameHome"];class ta extends ea{}class ia extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","PanelPopupChest")}constructFromXML(e){super.constructFromXML(e),this.m_bg=this.getChild("bg"),this.m_lock=this.getChild("lock")}}ia.URL="ui://moe42ygrjak7ao",ia.DependPackages=["GameHome","GameLaunch"],function(e){e[e.LoadBig=0]="LoadBig",e[e.LoadSmall=1]="LoadSmall",e[e.FixedBig=2]="FixedBig",e[e.FiexedSmall=3]="FiexedSmall"}(Hi||(Hi={}));class sa{constructor(){var e;this.configs=[{type:Hi.LoadBig,angle:40,count:1},{type:Hi.LoadSmall,angle:20,count:3},{type:Hi.FixedBig,angle:50,count:2},{type:Hi.FiexedSmall,angle:24,count:4}],this.beginAngle=-60,this.endAngle=240,this.items=[],this.loadItems=[],this.clickMaxCount=10,this.leftClickCount=10,this.isEnd=!1,this.initItems=[];var t=2,i=-45;for(var s of this.configs)for(var a=0;a<s.count;a++)e={id:t,index:t,groundIndex:a,config:s,angle:i,isOpen:!1},i+=s.angle,this.initItems.push(e),t++}init(){this.isEnd=!1,this.leftClickCount=this.clickMaxCount,this.items.length=0,this.loadItems.length=0,this.initItems=We.shuffle(this.initItems);for(var e=this.beginAngle,t=0,i=this.initItems.length;t<i;t++){var s=this.initItems[t];switch(e+=.5*s.config.angle,s.angle=this.angle360(e),s.isOpen=!1,e+=.5*s.config.angle,this.items.push(s),s.config.type){case Hi.LoadBig:case Hi.LoadSmall:this.loadItems.push(s)}}}getItemByAngle(e){for(var t of(e=this.angle360(e),this.items)){var i=t.angle-.5*t.config.angle,s=t.angle+.5*t.config.angle;if(i=this.angle360(i),s=this.angle360(s),console.log("angle=",e,"min=",i,"max=",s),e>=i&&e<=s)return t}}isOpendAll(){for(var e of this.loadItems)if(!e.isOpen)return!1;return!0}angle360(e){return 360==e?e:((e%=360)<0&&(e+=360),e)}static Angle360(e){return 360==e?e:((e%=360)<0&&(e+=360),e)}static AngleSub360(e,t){return e=this.Angle360(e),t=this.Angle360(t),Math.abs(e-t)}}class aa extends ia{constructor(){super(...arguments),this.lockData=new sa,this.sResult=new TypedSignal}constructFromXML(e){super.constructFromXML(e),window.panelPopupChest=this}Open(){this.lockData.init(),this.m_lock.Init(this),this.visible=!0,this.alpha=0,Laya.Tween.clearAll(this),Laya.Tween.to(this,{alpha:1},200)}Close(){this.m_lock.OnClose(),Laya.Tween.to(this,{alpha:0},200,null,Laya.Handler.create(this,()=>{this.visible=!1}))}}class na extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","CPLockLamp")}constructFromXML(e){super.constructFromXML(e),this.m_state=this.getController("state"),this.m_bg=this.getChild("bg"),this.m_lighting=this.getChild("lighting")}}na.URL="ui://moe42ygrjak7ar",na.DependPackages=["GameHome"];class ra extends na{}class oa extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","CPLockBridge")}constructFromXML(e){super.constructFromXML(e),this.m_state=this.getController("state")}}oa.URL="ui://moe42ygrjak7as",oa.DependPackages=["GameHome"];class la extends oa{}class ca extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","CPLockSwitch")}constructFromXML(e){super.constructFromXML(e),this.m_button=this.getController("button"),this.m_arrow=this.getChild("arrow")}}ca.URL="ui://moe42ygrjak7at",ca.DependPackages=["GameHome"];class ha extends ca{constructor(){super(...arguments),this.speed=.05,this.elasticList=[Laya.Ease.linearInOut],this.isRuning=!1}Init(e){this.lockData=e,this.m_arrow.rotation=e.beginAngle}Run(){this.isRuning||(this.isRuning=!0,Laya.Tween.clearAll(this.m_arrow),this.ArrowTweenToMax())}Stop(){console.log("Stop"),this.isRuning=!1,Laya.Tween.clearAll(this.m_arrow)}ArrowTweenToMax(){console.log("ArrowTweenToMax",this.lockData.endAngle),Laya.Tween.clearAll(this.m_arrow);var e=this.getDuration(this.lockData.endAngle);console.log(sa.AngleSub360(this.m_arrow.rotation,this.lockData.endAngle),e);Laya.Tween.to(this.m_arrow,{rotation:this.lockData.endAngle},e,Laya.Ease.linearInOut,Laya.Handler.create(this,this.ArrowTweenToMin),0,!0,!0)}ArrowTweenToMin(){console.log("ArrowTweenToMin",this.lockData.beginAngle),Laya.Tween.clearAll(this.m_arrow);var e=this.getDuration(this.lockData.beginAngle);console.log(sa.AngleSub360(this.m_arrow.rotation,this.lockData.beginAngle),e);Laya.Tween.to(this.m_arrow,{rotation:this.lockData.beginAngle},e,Laya.Ease.linearInOut,Laya.Handler.create(this,this.ArrowTweenToMax),0,!0,!0)}getDuration(e){var t=Math.ceil(sa.AngleSub360(this.m_arrow.rotation,e)/this.speed);return t?t>3e3&&(t=3e3):t=200,t}}class ua extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","CPLockArrow")}constructFromXML(e){super.constructFromXML(e),this.m_clickSuccess=this.getTransition("clickSuccess"),this.m_clickFail=this.getTransition("clickFail")}}ua.URL="ui://moe42ygrjak7au",ua.DependPackages=["GameHome"];class ma extends ua{}class ga extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","CPLockLampGroup")}constructFromXML(e){super.constructFromXML(e),this.m_lamp_1=this.getChild("lamp_1"),this.m_lamp_2=this.getChild("lamp_2"),this.m_lamp_3=this.getChild("lamp_3"),this.m_lamp_4=this.getChild("lamp_4")}}ga.URL="ui://moe42ygrjak7av",ga.DependPackages=["GameHome"];class da extends ga{Init(e){this.lockData=e;for(var t=e.loadItems,i=0,s=t.length;i<s;i++){var a=t[i],n=this[`m_lamp_${i+1}`];a.itemViewLighting=n,n&&n.m_state.setSelectedIndex(a.isOpen?1:0)}}setItemState(e){e.itemViewLighting&&e.itemViewLighting.m_state.setSelectedIndex(e.isOpen?1:0)}}class pa extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","CPLockDialLoadBig")}constructFromXML(e){super.constructFromXML(e),this.m_state=this.getController("state")}}pa.URL="ui://moe42ygrjak7aw",pa.DependPackages=["GameHome"];class Sa extends pa{}class Ca extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","CPLockDialLoadSmall")}constructFromXML(e){super.constructFromXML(e),this.m_state=this.getController("state")}}Ca.URL="ui://moe42ygrjak7ax",Ca.DependPackages=["GameHome"];class fa extends Ca{}class ya extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","CPLockDialFixedSmall")}constructFromXML(e){super.constructFromXML(e)}}ya.URL="ui://moe42ygrjak7ay",ya.DependPackages=["GameHome"];class wa extends ya{}class La extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","CPLockDialFixedBig")}constructFromXML(e){super.constructFromXML(e)}}La.URL="ui://moe42ygrjak7az",La.DependPackages=["GameHome"];class _a extends La{}class Ta extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","CPLockDial")}constructFromXML(e){super.constructFromXML(e),this.m_fixedBig0=this.getChild("fixedBig0"),this.m_fixedBig1=this.getChild("fixedBig1"),this.m_fixedSmall0=this.getChild("fixedSmall0"),this.m_fixedSmall1=this.getChild("fixedSmall1"),this.m_fixedSmall2=this.getChild("fixedSmall2"),this.m_fixedSmall3=this.getChild("fixedSmall3"),this.m_loadBig0=this.getChild("loadBig0"),this.m_loadSmall0=this.getChild("loadSmall0"),this.m_loadSmall1=this.getChild("loadSmall1"),this.m_loadSmall2=this.getChild("loadSmall2")}}Ta.URL="ui://moe42ygrjak7b0",Ta.DependPackages=["GameHome"];class va extends Ta{Init(e){this.lockData=e;var t=e.items;for(var i of t){var s=this.getItemView(i);if(s)switch(s.rotation=i.angle,s.itemData=i,i.itemView=s,i.config.type){case Hi.LoadBig:case Hi.LoadSmall:var a=s;a.m_state?a.m_state.setSelectedIndex(i.isOpen?1:0):console.error(i.config.type,a)}else console.error("CPLockDial Init itemView = null",i)}}getItemView(e){switch(e.config.type){case Hi.LoadBig:return this[`m_loadBig${e.groundIndex}`];case Hi.LoadSmall:return this[`m_loadSmall${e.groundIndex}`];case Hi.FixedBig:return this[`m_fixedBig${e.groundIndex}`];case Hi.FiexedSmall:return this[`m_fixedSmall${e.groundIndex}`]}}setItemState(e){if(e.itemView)switch(e.config.type){case Hi.LoadBig:case Hi.LoadSmall:e.itemView.m_state.setSelectedIndex(e.isOpen?1:0)}}}class Ga extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","CPLock")}constructFromXML(e){super.constructFromXML(e),this.m_bg=this.getChild("bg"),this.m_dial=this.getChild("dial"),this.m_switch=this.getChild("switch"),this.m_bridge=this.getChild("bridge"),this.m_lampGroup=this.getChild("lampGroup")}}Ga.URL="ui://moe42ygrjak7b1",Ga.DependPackages=["GameHome"];class Pa extends Ga{Init(e){this.panel=e;var t=this.lockData=e.lockData;this.m_dial.Init(t),this.m_switch.Init(t),this.m_lampGroup.Init(t),this.m_bridge.m_state.setSelectedIndex(0),this.Run()}Run(){this.panel.on(Laya.Event.MOUSE_DOWN,this,this.onClickHandler),this.m_switch.Run()}onClickHandler(){this.panel.off(Laya.Event.MOUSE_DOWN,this,this.onClickHandler),this.m_switch.Stop();var e=this.m_switch.m_arrow.rotation,t=this.lockData.getItemByAngle(e);if(console.log(e,t),t)if(t.isOpen||this.lockData.isEnd)this.lockData.leftClickCount--,this.m_switch.m_arrow.m_clickFail.play();else switch(t.config.type){case Hi.LoadBig:case Hi.LoadSmall:t.isOpen=!0,this.m_dial.setItemState(t),this.m_lampGroup.setItemState(t),this.m_switch.m_arrow.m_clickSuccess.play();break;default:this.lockData.leftClickCount--,this.m_switch.m_arrow.m_clickFail.play()}else this.lockData.leftClickCount--,this.m_switch.m_arrow.m_clickSuccess.play();(Xe.instance.playSound(qe.PickLockNeutral),this.lockData.isEnd)||(this.lockData.isOpendAll()?(this.lockData.isEnd=!0,this.OnSuccess()):this.lockData.leftClickCount<=0&&(this.lockData.isEnd=!0,this.OnFail()));Laya.timer.once(500,this,this.Run)}OnSuccess(){this.m_bridge.m_state.setSelectedIndex(1),Xe.instance.playSound(qe.PickLockSuccess),Laya.timer.once(500,this,this.SetResult,[!0])}OnFail(){Xe.instance.playSound(qe.PickLockFail);for(var e=0;e<4;e++){var t=nt.PoolGet();t.setXY(We.getRandomIntInclusive(-120,120),We.getRandomIntInclusive(-280,120)),t.DelayPalay(We.getRandomIntInclusive(0,200),this)}Laya.timer.once(500,this,this.SetResult,[!0])}SetResult(e=!0){this.panel.sResult.dispatch(e),this.panel.Close()}OnClose(){Laya.timer.clearAll(this),this.m_switch.Stop()}}class ka{static bindAll(){let e=fgui.UIObjectFactory.setPackageItemExtension;e(cs.URL,cs),e(us.URL,us),e(gs.URL,gs),e(ps.URL,ps),e(Be.URL,Be),e(Cs.URL,Cs),e(ys.URL,ys),e(Ls.URL,Ls),e(Ts.URL,Ts),e(Gs.URL,Gs),e(ks.URL,ks),e(Ms.URL,Ms),e(Ds.URL,Ds),e(_t.URL,_t),e(Fs.URL,Fs),e(Hs.URL,Hs),e(Rs.URL,Rs),e(V.URL,V),e(Ns.URL,Ns),e(_.URL,_),e(W.URL,W),e(Es.URL,Es),e(I.URL,I),e(Vs.URL,Vs),e(qs.URL,qs),e(js.URL,js),e(Ys.URL,Ys),e(U.URL,U),e(Js.URL,Js),e(Zs.URL,Zs),e(x.URL,x),e(ta.URL,ta),e(h.URL,h),e(O.URL,O),e(v.URL,v),e(P.URL,P),e(B.URL,B),e(b.URL,b),e(A.URL,A),e(rt.URL,rt),e(st.URL,st),e(nt.URL,nt),e(Ve.URL,Ve),e(Ee.URL,Ee),e(lt.URL,lt),e(aa.URL,aa),e(ra.URL,ra),e(la.URL,la),e(ha.URL,ha),e(ma.URL,ma),e(da.URL,da),e(Sa.URL,Sa),e(fa.URL,fa),e(wa.URL,wa),e(_a.URL,_a),e(va.URL,va),e(Pa.URL,Pa)}}class Ia extends fgui.GLabel{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameLaunch","ScreenBG")}constructFromXML(e){super.constructFromXML(e),this.m_icon=this.getChild("icon")}}Ia.URL="ui://47qsdr42f84s1",Ia.DependPackages=["GameLaunch"];class Ma extends Ia{onWindowShow(){this.setScreenSize(),window.screenBG=this,Engine.stage.sResize.add(this.setScreenSize,this)}onWindowHide(){Engine.stage.sResize.remove(this.setScreenSize,this)}setScreenSize(){}}class ba extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameLaunch","DialogCloseWindow")}constructFromXML(e){super.constructFromXML(e),this.m_closeButton=this.getChild("closeButton")}}ba.URL="ui://47qsdr42f84sg",ba.DependPackages=["GameLaunch"];class Da extends ba{}class Ba extends fgui.GButton{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameLaunch","GMButton")}constructFromXML(e){super.constructFromXML(e)}}Ba.URL="ui://47qsdr42uohx13",Ba.DependPackages=["GameLaunch"];class Fa extends Ba{}class Aa extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameLaunch","BGModel")}constructFromXML(e){super.constructFromXML(e)}}Aa.URL="ui://47qsdr42ae8aw2h",Aa.DependPackages=["GameLaunch"];class Ha extends Aa{}class xa extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameLaunch","GlobalModalWaiting")}constructFromXML(e){super.constructFromXML(e),this.m_circle=this.getChild("circle"),this.m_rotation=this.getTransition("rotation")}}xa.URL="ui://47qsdr42x6asw2i",xa.DependPackages=["GameLaunch"];class Ra extends xa{}class Ua extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameLaunch","WindowModalWaiting")}constructFromXML(e){super.constructFromXML(e),this.m_circle=this.getChild("circle"),this.m_rotation=this.getTransition("rotation")}}Ua.URL="ui://47qsdr42x6asw2j",Ua.DependPackages=["GameLaunch"];class Na extends Ua{}class Oa extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameLaunch","LogoView")}constructFromXML(e){super.constructFromXML(e),this.m_t0=this.getTransition("t0")}}Oa.URL="ui://47qsdr42tnlhw2t",Oa.DependPackages=["GameLaunch"];class Ea extends Oa{}class Wa{static bindAll(){let e=fgui.UIObjectFactory.setPackageItemExtension;e(Qi.URL,Qi),e(Ma.URL,Ma),e(Da.URL,Da),e(Wi.URL,Wi),e(Xi.URL,Xi),e(Ai.URL,Ai),e(Fa.URL,Fa),e(Ha.URL,Ha),e(Ra.URL,Ra),e(Na.URL,Na),e(ts.URL,ts),e(Ea.URL,Ea)}}class Va extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("ModuleLogin","LoginPanel")}constructFromXML(e){super.constructFromXML(e),this.m_type=this.getController("type"),this.m_accountInput=this.getChild("accountInput"),this.m_passwordInput=this.getChild("passwordInput"),this.m_btn_login=this.getChild("btn_login"),this.m_btn_offLine=this.getChild("btn_offLine"),this.m_btn_randomLogin=this.getChild("btn_randomLogin"),this.m_btn_testWar=this.getChild("btn_testWar")}}Va.URL="ui://4698ugpknz0c1g",Va.DependPackages=["ModuleLogin"];class Xa extends Va{onWindowInited(){console.log("LoginPanel onWindowInited"),this.m_type.selectedIndex=1,this.m_btn_randomLogin.visible=VersionConfig.IsDebugVer,this.m_btn_testWar.visible=VersionConfig.IsDebugVer,window.userAccount=this.m_accountInput.m_txt_account,window.userPassWorld=this.m_passwordInput.m_txt_password,window.loginPanel=this}createDebugButton(e,t,i,s){var a=fgui.UIPackage.createObjectFromURL(this.m_btn_login.resourceURL);a.text=e,a.width=150,a.height=80,a.x=200+200*i,a.y=100+100*s,a.onClick(this,t),fgui.GRoot.inst.addChild(a)}get account(){return this.m_accountInput.m_txt_account.text.trim()}set account(e){this.m_accountInput.m_txt_account.text=e}get password(){return this.m_passwordInput.m_txt_password.text.trim()}set password(e){this.m_passwordInput.m_txt_password.text=e}onWindowShow(){if(console.log("LoginPanel onWindowShow"),isNullOrEmpty(this.account)&&(this.account=On.localStorage.username,Engine.borwer.isBrowser&&VersionConfig.IsDebugVer)){let e=sessionStorage.getItem("username");this.account=e||""}if(isNullOrEmpty(this.account)&&(this.account=Ie.RandName(2,7)),isNullOrEmpty(this.password)&&(this.password=On.localStorage.password,Engine.borwer.isBrowser&&VersionConfig.IsDebugVer)){let e=sessionStorage.getItem("password");this.password=e||""}Engine.borwer.isWXGame}async getAuth(){if(Ie.platform instanceof ke){let e=Ie.platform;if(await e.WXGetSdkAuthSetting())this.setModel(!1);else{this.setModel(!0),await e.WXAuth()&&this.setModel(!1)}}}setModel(e){this.m_btn_login.title=e?z.Auth:z.Login}}class qa extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("ModuleLogin","AccountInput")}constructFromXML(e){super.constructFromXML(e),this.m_txt_account=this.getChild("txt_account"),this.m_accountComboBox=this.getChild("accountComboBox")}}qa.URL="ui://4698ugpknz0c1h",qa.DependPackages=["ModuleLogin"];class Ka extends qa{}class ja extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("ModuleLogin","AccountComboBox")}constructFromXML(e){super.constructFromXML(e),this.m_c1=this.getController("c1")}}ja.URL="ui://4698ugpknz0c1i",ja.DependPackages=["ModuleLogin"];class za extends ja{}class Ya extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("ModuleLogin","passwordInput")}constructFromXML(e){super.constructFromXML(e),this.m_txt_password=this.getChild("txt_password")}}Ya.URL="ui://4698ugpknz0c1n",Ya.DependPackages=["ModuleLogin"];class $a extends Ya{}class Ja extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("ModuleLogin","BulletinPanel")}constructFromXML(e){super.constructFromXML(e),this.m_Type=this.getController("Type"),this.m_listTest=this.getChild("listTest"),this.m_listUpdate=this.getChild("listUpdate"),this.m_bg=this.getChild("bg")}}Ja.URL="ui://4698ugpkrlfx2m",Ja.DependPackages=["ModuleLogin"];class Qa extends Ja{}class Za extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("ModuleLogin","WxPanel")}constructFromXML(e){super.constructFromXML(e),this.m_btn_login=this.getChild("btn_login")}}Za.URL="ui://4698ugpkneo62p",Za.DependPackages=["ModuleLogin"];class en extends Za{}class tn extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("ModuleLogin","AccountShow")}constructFromXML(e){super.constructFromXML(e),this.m_txt_account=this.getChild("txt_account")}}tn.URL="ui://4698ugpkneo62q",tn.DependPackages=["ModuleLogin"];class sn extends tn{}class an extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("ModuleLogin","ServerPanel")}constructFromXML(e){super.constructFromXML(e),this.m_Server=this.getController("Server"),this.m_listMenu=this.getChild("listMenu"),this.m_listServer=this.getChild("listServer"),this.m_btnChange=this.getChild("btnChange"),this.m_btnStart=this.getChild("btnStart"),this.m_bg=this.getChild("bg")}}an.URL="ui://4698ugpklm612r",an.DependPackages=["ModuleLogin"];class nn extends an{constructor(){super(...arguments),this.serverList=[],this.openServer=[],this.roles=new Dictionary}onWindowInited(){}onWindowShow(){this.m_listMenu.setItemRenderer(this.MenuRender,this),this.m_listMenu.on(fgui.Events.CLICK_ITEM,this,this.MenuSelect),this.m_listServer.setItemRenderer(this.ServerRender,this),this.m_listServer.on(fgui.Events.CLICK_ITEM,this,this.ServerSelect)}onWindowHide(){this.m_listMenu.itemRenderer.clear(),this.m_listMenu.off(fgui.Events.CLICK_ITEM,this,this.MenuSelect),this.m_listServer.itemRenderer.clear(),this.m_listServer.off(fgui.Events.CLICK_ITEM,this,this.ServerSelect),this.Reset()}MenuRender(e,t){}MenuSelect(e){}ServerRender(e,t){t.RenderItem(this.serverList[e])}ServerSelect(e){let t=e.DataSource;this.lastServer=t,this.m_btnChange.RenderItem(t),this.m_Server.selectedIndex=0}Reset(){this.serverList=[],this.openServer=[],this.roles.clear()}UpdateServer(){let e=this.serverList;this.m_listServer.numItems=e.length,this.m_listMenu.selectedIndex=0;let t=this.openServer;if(!e.length)return;let i,s=On.localStorage.server;(i=s?this.GetServer(s,!0):t.length?t[t.length-1]:e[e.length-1])&&(this.lastServer=i,this.m_btnChange.RenderItem(i))}Open(e){if(this.serverList=e,this.roles.count)for(let t=0,i=e.length;t<i;t++){let i=e[t];this.roles.hasKey(i.id)&&this.openServer.push(i)}this.UpdateServer()}SetRoles(e){if(e&&e.length)for(let t=0,i=e.length;t<i;t++){let i=e[t];this.roles.add(i.server,i)}}GetRole(e){return this.roles.getValue(e)}GetServer(e,t){let i=t?this.openServer:this.serverList;for(let t=0,s=i.length;t<s;t++)if(i[t].id=e)return i[t];return this.GetServer(e)}}class rn extends fgui.GButton{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("ModuleLogin","ServerItem")}constructFromXML(e){super.constructFromXML(e),this.m_button=this.getController("button"),this.m_State=this.getController("State"),this.m_Type=this.getController("Type"),this.m_View=this.getController("View"),this.m_labServer=this.getChild("labServer"),this.m_labLevel=this.getChild("labLevel")}}rn.URL="ui://4698ugpklm612v",rn.DependPackages=["ModuleLogin"];class on extends rn{RenderItem(e){this.DataSource=e,this.m_labServer.text=e.name,this.m_labLevel.text=""}}class ln extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("ModuleLogin","CdkPanel")}constructFromXML(e){super.constructFromXML(e),this.m_cdkInput=this.getChild("cdkInput"),this.m_btn_cdk=this.getChild("btn_cdk")}}ln.URL="ui://4698ugpkipa82w",ln.DependPackages=["ModuleLogin"];class cn extends ln{get cdk(){return this.m_cdkInput.m_txt_cdk.text.trim()}set cdk(e){this.m_cdkInput.m_txt_cdk.text=e}}class hn extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("ModuleLogin","CdkInput")}constructFromXML(e){super.constructFromXML(e),this.m_txt_cdk=this.getChild("txt_cdk"),this.m_accountComboBox=this.getChild("accountComboBox")}}hn.URL="ui://4698ugpkipa82x",hn.DependPackages=["ModuleLogin"];class un extends hn{}class mn extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("ModuleLogin","CheckIDPanel")}constructFromXML(e){super.constructFromXML(e),this.m_Type=this.getController("Type"),this.m_labName=this.getChild("labName"),this.m_labID=this.getChild("labID"),this.m_btnClose=this.getChild("btnClose"),this.m_btnMake=this.getChild("btnMake")}}mn.URL="ui://4698ugpkqdfe1c",mn.DependPackages=["ModuleLogin"];class gn extends mn{}class dn extends fgui.GButton{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("ModuleLogin","CommonDialogBg")}constructFromXML(e){super.constructFromXML(e),this.m_icon=this.getChild("icon"),this.m_btn_Close=this.getChild("btn_Close")}}dn.URL="ui://4698ugpkje283k",dn.DependPackages=["ModuleLogin"];class pn extends dn{}class Sn extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("ModuleLogin","BulletinItem")}constructFromXML(e){super.constructFromXML(e),this.m_labtitle=this.getChild("labtitle"),this.m_labItem=this.getChild("labItem")}}Sn.URL="ui://4698ugpkje283x",Sn.DependPackages=["ModuleLogin"];class Cn extends Sn{}class fn{static bindAll(){let e=fgui.UIObjectFactory.setPackageItemExtension;e(Me.URL,Me),e(Xa.URL,Xa),e(Ka.URL,Ka),e(za.URL,za),e($a.URL,$a),e(Qa.URL,Qa),e(en.URL,en),e(sn.URL,sn),e(nn.URL,nn),e(on.URL,on),e(cn.URL,cn),e(un.URL,un),e(gn.URL,gn),e(pn.URL,pn),e(Cn.URL,Cn)}}class yn{static bindAll(){fgui.UIObjectFactory.setPackageItemExtension}}class wn{static fguiBinderAll(){ka.bindAll(),Wa.bindAll(),fn.bindAll(),yn.bindAll()}}class Ln{static get json(){return this._netConfig}static async GetNetConfig(){return Ln._netConfig&&0==Ln._netConfig.error?new Promise(e=>{e(Ln._netConfig)}):new Promise(e=>{net.auth.config((t,i)=>{Ln._netConfig=i,e(Ln._netConfig)})})}static async GetErrorStr(e){return Ln._netConfig?new Promise(t=>{t(Ln._netConfig.ErrStr[e.toString()])}):(await Ln.GetNetConfig(),new Promise(t=>{t(Ln._netConfig.ErrStr[e.toString()])}))}}Ln.FIRST_SCENE="test",Ln.GAME_WIDTH=1334,Ln.GAME_HEIGHT=750,Ln.GROUP_ID=0,Ln.WXAppID="wxedab64fed19eb5b4",Ln.SHARE_IMG_URL="https://thkdev.123u.com/game/makemore/",Ln.GO_URL="http://192.168.2.80:5000",Ln.shouldShowGuide=!0;class _n{static async Time(e){return new Promise(t=>{Engine.timer.once(e,this,()=>{t()})})}static async Frame(e){return new Promise(t=>{Engine.timer.frameOnce(e,this,()=>{t()})})}}class Tn{constructor(){}install(e){this.installAsync(e)}async installAsync(e){VersionConfig&&VersionConfig.Init(),On.init(),Z.install(),vt.install(),On.version.init(),Engine.borwer.isWXGame?(await this.initFguiSetting(),On.loader.install(),await this.loadVersionAsync(),On.localStorage.setString("__basePath__",Laya.URL.basePath,!0)):(await this.loadVersionAsync(),On.localStorage.setString("__basePath__",Laya.URL.basePath,!0),await this.initFguiSetting(),On.loader.install()),On.loader.open(S.Launch),On.loaderSettingHandler.onBegin(),await this.clearWXFileCache(),await this.initConfig(),await this.initLangConfig(),On.moduleModel.install(),On.loaderSettingHandler.onEnd(),On.sound.install(),window.launcherInitBG&&window.launcherInitBG.removeSelf(),On.loader.closeAll(),Ue.load(),e?e():On.menu.open(p.War)}loadVersion(){Laya.ResourceVersion.enable("version.json",Laya.Handler.create(this,this.onVersionLoaded),Laya.ResourceVersion.FILENAME_VERSION)}onVersionLoaded(){}async loadVersionAsync(){return new Promise(e=>{Laya.ResourceVersion.enable("version.json?t="+Laya.timer.currTimer,Laya.Handler.create(this,()=>{if(Laya.ResourceVersion.manifest){if(Laya.ResourceVersion.manifest.__ResVersion__){let e=Laya.ResourceVersion.manifest.__ResVersion__;On.version.localResVersionData.setVersionTxt(e),On.version.localResVersion=e}if(!VersionConfig.IsUseZip){let e=Laya.ResourceVersion.manifest,s=[];for(var t in e)s.push(t);for(var i of s)e[i.toLowerCase()]=e[i]}Laya.MiniAdpter&&(Laya.MiniAdpter.AutoCacheDownFile=!1)}this.checkWXFileCache(),e()}),Laya.ResourceVersion.FILENAME_VERSION)})}async checkWXFileCache(){if(Engine.borwer.isWXGame){let e=On.localStorage.getString("__basePath__",!0);e!=Laya.URL.basePath&&(console.log(`资源根目录不一样: preBasePath=${e}, Laya.URL.basePath=${Laya.URL.basePath}`),Laya.MiniFileMgr.onSetVersion(e,Laya.URL.basePath))}}async clearWXFileCache(){let e=VersionConfig.VersionCacheCode;if(Engine.borwer.isWXGame){let t=On.localStorage.getInt("__verIsNeedClear__",!0);t!=e&&(console.log("清理缓存 v=",t,"vv=",e),On.loaderSettingHandler.setTip("清理缓存中..."),await _n.Frame(5),Laya.MiniFileManager.RemoveAll())}On.localStorage.setInt("__verIsNeedClear__",e,!0)}async initFguiSetting(){On.guiRes.install(),fgui.UIConfig.packageFileExtension=Qt.packageFileExtension,fgui.UIObjectFactory.setLoaderExtension(hi),wn.fguiBinderAll(),fgui.UIConfig.buttonSound="ui://moe42ygrsqzy7p",fgui.UIConfig.defaultFont="_sans";let e=await On.asset.loadFguiByPackagenameAsync(ae.GameLaunch);Qt.addPackage(e.packagePath),fgui.UIConfig.globalModalWaiting=fgui.UIPackage.getItemURL(e.packageName,"GlobalModalWaiting"),fgui.UIConfig.windowModalWaiting=fgui.UIPackage.getItemURL(e.packageName,"WindowModalWaiting")}async initConfig(){On.config.configLoader=On.asset,On.config.initList(),On.config.sLoadProgress.add(On.loaderSettingHandler.onLoadedConfig,On.loaderSettingHandler),await On.config.loadAllAsync(),On.config.sLoadProgress.remove(On.loaderSettingHandler.onLoadedConfig,On.loaderSettingHandler)}async initLangConfig(){On.lang.current.configLoader=On.asset,On.lang.current.initList(),On.lang.isUseLang&&(On.lang.current.sLoadProgress.add(On.loaderSettingHandler.onLoadedLangConfig,On.loaderSettingHandler),await On.lang.current.loadAllAsync(),On.lang.current.sLoadProgress.remove(On.loaderSettingHandler.onLoadedLangConfig,On.loaderSettingHandler))}async installServerList(){VersionConfig.IsDebugVer?(await On.channel.requestServerListAsync(),net.config.url=On.channel.serverItem.main):(await On.channel.requestChannelServerAsync(),net.config.url=On.channel.serverItem.main),net.logic.onError.on(this.onNetError,this)}async onNetError(e){console.log("onNetError "+e);let t=await Ln.GetErrorStr(e);console.log(`OnNetError no=${e}  txt=${t}`),t||(t="服务器反馈错误: "+e),On.system.toastText(t)}}class vn{}class Gn{constructor(){this.packageConfigs=[],this.assets=[],this.isRuning=!1,this.isComplete=!1,this.completeCallbackList=[]}addAssetForFguiPackagename(e){this.assets.push({url:e,type:f.FguiPackage})}addAssetForFguiComponent(e){let t=e.DependPackages;for(let e=0;e<t.length;e++)this.addAssetForFguiPackagename(t[e])}addDynmicAssetForAvatarAll(e){e.getAllAssset(this.assets)}generate(){if(this.list)return;let e=new Dictionary,t=new Dictionary;for(let i=0;i<this.assets.length;i++){let s=this.assets[i],a=null;switch(s.type){case f.FguiPackage:a=On.guiRes.getconfig(s.url);break;case f.FspritePackage:a=On.spriteRes.getconfig(s.url)}if(a){t.hasKey(a.packagePath)||t.add(a.packagePath,a);let i=a.loadList;for(let t of i)if(!e.hasKey(t.url)){let i={url:t.url,type:se.layaLoaderType2AssetItemType(t.type)};e.add(i.url,i)}}else e.hasKey(s.url)||e.add(s.url,s)}this.list=e.getValues(),this.packageConfigs=t.getValues()}async start(){return new Promise(e=>{if(this.isComplete)e(!0);else{let t=()=>{e(!0)};this.completeCallbackList.push(t),this.isRuning||(this.generate(),this.list&&0!=this.list.length?On.asset.loadList(this.list,this,this.onComplete,this.onProgress):this.onComplete())}})}onProgress(e,t,i,s){On.loaderSettingHandler.onLoadedFgui(t,i)}onComplete(){for(let e of this.packageConfigs)Qt.addPackage(e.packagePath);for(let e of this.completeCallbackList)e.apply(this);this.isComplete=!0}}!function(e){e.SimulationBehaviours="SimulationBehaviours",e.EComponents="EComponents",e.ESystems="ESystems",e.EEvents="EEvents",e.ECSSystems="ECSSystems",e.UnitCmds="UnitCmds",e.UnitCmdActions="UnitCmdActions",e.TookHandlers="TookHandlers",e.RenderComponents="RenderComponents",e.RenderSystems="RenderSystems",e.RenderSimulationBehaviours="RenderSimulationBehaviours"}(xi||(xi={})),window.AssemblyNamespace=xi;class Pn{constructor(){this.menuId=0}init(){}validate(e){return!0}exe(){}__onExe(){}}Pn.__namespace=xi.TookHandlers;class kn extends Y{constructor(){super(...arguments),this.closeDict=new Dictionary}install(){}addClose(e,t){this.closeDict.add(e,t)}validate(e){let t=!1;if(this.closeDict.hasKey(e)&&(t=this.closeDict.getValue(e).apply(this)),1==t)return!1;On.config.unlock.getUnlockConfig(e);return this.dict.hasKey(e)?this.dict.getValue(e).apply(this):super.validate(e)}}class In extends Y{install(){}validate(e){return kn.getInstance().validate(e)}}class Mn extends Pn{constructor(){super(...arguments),this.fixedTimeList=[],this.endedTimeList=[]}validate(e){let t=!1,i=this.fixedTimeList.length;for(let s=0;s<i;s++){let i=this.fixedTimeList[s],a=this.endedTimeList[s];if(e>=i.timestamp){a?(t=e<=a.timestamp)&&a.reseTimestamp():(t=!0)&&i.reseTimestamp();break}}return t}}!function(e){e[e.Day=0]="Day",e[e.Week=1]="Week",e[e.Month=2]="Month"}(Ri||(Ri={})),function(e){e[e.UnArrival=0]="UnArrival",e[e.Arrival=1]="Arrival",e[e.Overdue=2]="Overdue"}(Ui||(Ui={}));class bn{constructor(){this.timeType=Ri.Day,this.monthDate=0,this.weekDay=0,this.hour=0,this.minute=0,this.second=0,this._timestamp=-1}static CreateHMS(e,t=0,i=0){let s=new bn;return s.timeType=Ri.Day,s.hour=e,s.minute=t,s.second=i,s}static CreateWeek(e,t,i=0,s=0){let a=new bn;return a.timeType=Ri.Week,a.weekDay=e,a.hour=t,a.minute=i,a.second=s,a}static CreateMonthDate(e,t,i=0,s=0){let a=new bn;return a.timeType=Ri.Month,a.monthDate=e,a.hour=t,a.minute=i,a.second=s,a}get timestamp(){return this._timestamp<=0&&this.reseTimestamp(),this._timestamp}reseTimestamp(){let e;switch(this.timeType){case Ri.Day:e=wi.getServerNextDate(this.hour,this.minute,this.second);break;case Ri.Week:e=wi.getServerNextWeekDate(this.weekDay,this.hour,this.minute,this.second);break;case Ri.Month:e=wi.getServerNextMonthDate(this.monthDate,this.hour,this.minute,this.second)}console.log(wi.ToStr(e)),this._timestamp=e.getTime()}}class Dn extends Mn{init(){let e=Global.updataDayTime;this.fixedTimeList.push(bn.CreateHMS(e.H,e.Mm,e.S)),super.init()}exe(){super.exe(),console.log("FixedTimeHookHandler_hms exe"),On.moduleModel.section.sectionData.resetData(),On.moduleModel.gashapon.resetGashaponData(),On.event.dispatch(ne.GameFrame_Everyday_Update)}}class Bn{static register(e,t){e.tag=t,this._namespace.addItem(e.__namespace,e)}static get(e){return this._namespace.get(e)}}Bn._namespace=new UnOrderMultiMap,window.Assembly=Bn;class Fn{static install(){this.isInstalled||Bn.register(Dn,"FixedTimeHookHandler_hms")}}Fn.isInstalled=!1;class An{constructor(){this.dict=new Dictionary,this.list=[],this.count=0,this.isInsalled=!1,this.serverMilliseconds=0}install(){if(this.isInsalled)return;this.isInsalled=!0,Fn.install();let e=Bn.get(xi.TookHandlers);if(e)for(let t of e)this.registerSystem(t)}registerSystem(e){let t=e.tag||e.name||e.__tookClassUid;t&&this.dict.hasKey(t)||(t=e.__tookClassUid=An.TookClassUid++);let i=new e;i instanceof Pn&&(i.init(),this.dict.add(t,i),this.list.push(i),this.count=this.list.length)}fixedReseTimestamp(){for(let e of this.list)if(e instanceof Mn)for(let t of e.fixedTimeList)t.reseTimestamp()}start(){this.install(),this.stop(),Laya.timer.loop(1e3,this,this.onTick)}stop(){Laya.timer.clear(this,this.onTick)}onTick(){this.serverMilliseconds=On.time.serverMilliseconds;for(let e=0;e<this.count;e++){let t=this.list[e];this.validate(t)&&(t.exe(),t.__onExe())}}validate(e){if(!On.user.isLoginAndGetUserData)return!1;let t=!0;if(t&&e.menuId>0&&(t=kn.getInstance().validate(e.menuId)),t&&e.menuId>0&&(t=In.getInstance().validate(e.menuId)),t&&e.preconditionMenuIds&&e.preconditionMenuIds.length>0){t=!1;for(let i of e.preconditionMenuIds)if(On.menu.isOpened(i)){t=!0;break}}return t&&(t=e.validate(this.serverMilliseconds)),t}}An.TookClassUid=1;class Hn{async reLogin(){}async login(e,t,i){if(!i&&On.user.isLoginAndGetUserData)return;fgui.GRoot.inst.showModalWait();let s=await Ie.platform.Login2(e,t);if(fgui.GRoot.inst.closeModalWait(),s.error)return 45!=s.error&&304!=s.error||On.launch.onNetError(s.error),void(1018==s.error&&On.event.dispatch("LOGIN_CDK",s.session));On.localStorage.username=e,On.localStorage.password=t,Engine.borwer.isBrowser&&VersionConfig.IsDebugVer&&(sessionStorage.setItem("username",e),sessionStorage.setItem("password",t)),On.event.dispatch("SUCCESS_LOGIN",s.session,s.roles)}async check(e,t,i,s){let a=await Ie.platform.CheckCdk(e,t);a.error?On.event.dispatch("ERROR_CDK",a.error):this.login(i,s,!0)}async CheckIDCard(e,t,i){let s=await Ie.platform.CheckIDCard(e,t,i);if(console.log("当前验证身份状态：",s.error,s.timelong),0!=s.error&&1023!=s.error){let t=On.moduleModel.login;t.session=e,t.error=s.error,t.timeLong=s.timelong}On.event.dispatch("ERROR_IDCARD",s.error)}async newAndUseRole(e,t,i){(await Ie.platform.newAndUseRole(e,t,i)).error||this.enter()}async useRole(e,t){(await Ie.platform.useRole(e,t)).error||this.enter()}async areas(){let e=await Ie.platform.Areas();e.error?On.event.dispatch("ERROR_AREAS"):On.event.dispatch("SUCCESS_AREAS",e.areas)}async enter(){fgui.GRoot.inst.showModalWait(),await On.net.AsyncGamerLoginGetDataC2S(),On.user.isLoginAndGetUserData=!0,On.netStat.isLogined=!0,fgui.GRoot.inst.closeModalWait()}}class xn{async changeName(e){return await On.net.AsyncGamerChangeNameC2S(e)}async changeHeadIcon(e){await On.net.AsyncGamerChangeAvatarC2S(e)}async uploadWXInfo(){}async sawHeadIcon(e){await On.net.GamerChangeItemIsSawC2S(6,e)}}class Rn{constructor(){this.login=new Hn,this.user=new xn}}class Un{init(){}}class Nn{constructor(){this.isConnnected=!1,this.isTryConnecting=!1,this.isLogined=!1,this.lastSendFrame=0,this.lastResponseFrame=0,this.lastMsgSuccess=!0,this.lastShowErrorFrame=0,this.timeOutShowModelWait=!0}Init(){window.net&&(net.logic.onConnect.on(this.onConnect,this),net.logic.onReconnect.on(this.onReconnect,this),net.logic.onClose.on(this.onClose,this),net.logic.onConnectError.on(this.onConnectError,this),net.logic.onSendTime.on(this.onSendTime,this),net.logic.onResponseTime.on(this.onResponseTime,this),Laya.timer.frameLoop(20,this,this.onLoop))}onConnect(){this.isConnnected=!0,this.isTryConnecting=!1,this.isLogined&&fgui.GRoot.inst.closeModalWait()}onConnectError(){this.isConnnected=!1,this.isTryConnecting=!1,this.isLogined&&On.system.toastText(z.NET_ERROR)}onClose(){this.isConnnected=!1,this.isTryConnecting=!1,this.isLogined}onReconnect(){this.isConnnected=!1,this.isTryConnecting=!0,this.isLogined&&fgui.GRoot.inst.showModalWait()}onClickConnect(){}onSendTime(){this.lastMsgSuccess&&(this.lastSendFrame=Laya.timer.currFrame),this.lastMsgSuccess=!1}onResponseTime(){this.lastResponseFrame=Laya.timer.currFrame,this.lastMsgSuccess=!0,this.timeOutShowModelWait&&(fgui.GRoot.inst.closeModalWait(),this.timeOutShowModelWait=!1)}onLoop(){this.lastMsgSuccess||this.isTryConnecting||Laya.timer.currFrame-this.lastShowErrorFrame>300&&Laya.timer.currFrame-this.lastSendFrame>300&&(this.lastShowErrorFrame=Laya.timer.currFrame,this.timeOutShowModelWait||fgui.GRoot.inst.showModalWait(),this.timeOutShowModelWait=!0,this.onConnectError())}}class On{static init(){this.isInited||(this.isInited=!0,this.screenSetting=new Ut,this.deviceSetting=new Et,this.launchText=new ji,this.launch=new Tn,this.asset=new ti,this.config=new Rt,this.lang=Jt.Instance,this.configExp=new vn,this.sound=new bi,this.time=new Bi,this.localStorage=Ot.Instance,this.loader=ss.Instance,this.loaderSettingHandler=new zi,this.menu=new fi,this.system=new Ki,this.channel=Li.Instance,this.version=Ii.Instance,this.preload=new Gn,this.moduleModel=new Gi,this.user=new os,this.guiRes=new ri,this.spriteRes=new oi,this.event=new Emitter,this.net=as,this.netStat=new Nn,this.netStat.Init(),this.protoHandler=new Un,this.protoHandler.init(),this.sender=new Rn,this.took=new An)}}On.net=as,On.isInited=!1,window.Game=On;new class{constructor(){LayaExtendClass(),Laya.stage||this.InitLaya(),e.stat&&Laya.Stat.show(),LayaExtendLogic(),FguiExtend(),Engine.init(),On.init(),On.launch.install(),Laya.stage.on(Laya.Event.KEY_DOWN,this,this.OnKeyDownHandler)}OnKeyDownHandler(e){Laya.Keyboard.P==e.keyCode&&(console.error("当前对象池信息:"),console.error(Pool._poolDic))}initLoader(){wx.getSystemInfoSync();var e=new Laya.Sprite;let t=Laya.stage.width,i=Laya.stage.height;e.graphics.drawRect(0,0,t,i,"#FFFFFF"),e.graphics.loadImage("res/fgui/GameLaunch_atlas_upoiw2g.jpg",0,0,t,i),Laya.stage.addChild(e),window.launcherInitBG=e}InitLaya(){window.Laya3D?Laya3D.init(e.width,e.height):Laya.init(e.width,e.height,Laya.WebGL),Laya.Physics&&Laya.Physics.enable(),Laya.DebugPanel&&Laya.DebugPanel.enable(),Laya.stage.scaleMode=e.scaleMode,Laya.stage.screenMode=e.screenMode,Laya.stage.alignV=e.alignV,Laya.stage.alignH=e.alignH,Laya.URL.exportSceneToJson=e.exportSceneToJson,window.Laya3D&&(Laya.Shader3D.debugMode=!1),e.physicsDebug&&Laya.PhysicsDebugDraw&&Laya.PhysicsDebugDraw.enable(),Laya.alertGlobalError=!0}}}();