!function(){"use strict";class e{constructor(){}static get isMobile(){return window.navigator.userAgent.indexOf("Mobile")>-1}static get scaleMode(){return Laya.Stage.SCALE_SHOWALL}static get scaleX(){return Laya.stage.width/this.width}static get scaleY(){return Laya.stage.height/this.height}static init(){Laya.ClassUtils.regClass}}e.width=750,e.height=1334,e.screenMode="none",e.alignV=Laya.Stage.ALIGN_TOP,e.alignH=Laya.Stage.ALIGN_CENTER,e.startScene="test/TestScene.scene",e.sceneRoot="",e.debug=!1,e.stat=!1,e.physicsDebug=!1,e.exportSceneToJson=!0,e.isAntialias=!0,e.init();class i extends excelconfigSources.Card{get name(){if(!$a.lang.isUseLang)return this.zhCnName;let e=$a.lang.getValue("Card",this.id,"zhCnName");return isNullOrEmpty(e)?this.zhCnName:e}}class s extends excelconfigSources.CardScoreType{get name(){if(!$a.lang.isUseLang)return this.zhCnName;let e=$a.lang.getValue("CardScoreType",this.id,"zhCnName");return isNullOrEmpty(e)?this.zhCnName:e}}class a extends excelconfigSources.Loader{}class n extends excelconfigSources.Menu{get name(){if(!$a.lang.isUseLang)return this.zhCnName;let e=$a.lang.getValue("Menu",this.id,"zhCnName");return isNullOrEmpty(e)?this.zhCnName:e}}class r extends excelconfigSources.Msg{get notice(){if(!$a.lang.isUseLang)return this.zhCnNotice;let e=$a.lang.getValue("Msg",this.id,"zhCnNotice");return isNullOrEmpty(e)?this.zhCnNotice:e}}class o extends excelconfigSources.Unlock{get name(){if(!$a.lang.isUseLang)return this.zhCnName;let e=$a.lang.getValue("Unlock",this.id,"zhCnName");return isNullOrEmpty(e)?this.zhCnName:e}}class l extends fgui.GButton{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","CardView")}constructFromXML(e){super.constructFromXML(e)}}l.URL="ui://moe42ygrsqzy9s",l.DependPackages=["GameHome"];class c extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","CardViewFrontBg")}constructFromXML(e){super.constructFromXML(e),this.m_state=this.getController("state"),this.m_icon=this.getChild("icon")}}c.URL="ui://moe42ygrsqzya8",c.DependPackages=["GameHome"];class h extends c{}var u;!function(e){e[e.Default=0]="Default",e[e.Warrior=1]="Warrior",e[e.Hero=2]="Hero",e[e.PowerUp=3]="PowerUp"}(u||(u={}));class g extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","CardViewFrontHero")}constructFromXML(e){super.constructFromXML(e),this.m_icon=this.getChild("icon"),this.m_life=this.getChild("life"),this.m_shield=this.getChild("shield"),this.m_shopBar=this.getChild("shopBar")}}g.URL="ui://moe42ygrsqzy9v",g.DependPackages=["GameHome"];class m{}m.Width=640,m.Height=960,m.HeroStartRow=2,m.HeroStartColumn=2,m.CardWidth=198,m.CardHeight=226,m.CardSpaceBetweenWidth=10,m.CardSpaceBetweenHeight=10,m.AnimationTime=185,m.AnimationMultiplier=.5,m.ScaleZoom=1.2,m.ScaleSpeed=50,m.FlipSpeed=200,m.FlipZoom=1.3,m.SmashDelay=200,m.HeroCurrentLife1="HeroCurrentLife1",m.HeroCurrentLife2="HeroCurrentLife2",m.HeroTotalLife1="HeroTotalLife1",m.HeroTotalLife2="HeroTotalLife2",m.CardLife="CardLife",m.CardLife1="CardLife1",m.CardLife2="CardLife2",m.PowerUpCircle="PowerUpCircle",m.PowerUp="PowerUp",m.CardManAnimation="CardManAnimation",m.WaveSize=7,m.ScaleSize=30,m.textFontWeight=22,m.numbersFontWeight=28,m.resultNumbersFontWeight=35,m.creditsColor="#ffffff",m.creditsFontWeight=24,m.BackgroundImageName="BackgroundImageName",m.BackgroundName="BackgroundName",m.LightningDuration=50,m.ShakeIntensity=20,m.ContainerName="container",m.CoinMaxValue=5,m.Shadow="shadow",m.Hero="hero",m.CardWithArm="cardWithArm",m.CardWithMovingArm="cardWithMovingArm",m.ShowTime=300,m.StorageName="pirated-cards-adventure",m.IsDev=!1,m.IsAndroid=!1,m.HighResolutionScale=!1,m.MaxPixelRatio=3,m.WarriorAnimationDuration=500;class d{constructor(){this.onStart=new Signal,this.onComplete=new Signal,this.tweens=[],this.duration=null,this._delay=0}static PoolGet(){return Pool.createByClass(d)}recover(){Laya.timer.clearAll(this),this.recoverArray(this.tweens),this.tweens.length=0,this.onStart.removeAll(),this.onComplete.removeAll(),this.duration=null,this._delay=0,Pool.recoverByClass(this)}recoverArray(e){if(null!=e)if(e instanceof Array)for(var t of e)null!=t&&(t instanceof Array?this.recoverArray(t):t.recover());else e.recover()}get animationDuration(){if(null===this.duration){for(var e=0,t=0,i=this.tweens.length;t<i;t++){var s=this.tweens[t];if(s)if(s instanceof d)e=Math.max(s.animationDuration,e);else if(s instanceof Array)if(s.length>0){var a=s[0];if(a)if(a instanceof d)e=Math.max(a.animationDuration,e);else{var n=a._duration+a._delay;e=Math.max(n,e)}else this.duration=100}else this.duration=100;else{n=s._duration+s._delay;e=Math.max(n,e)}}this.duration=e}return this.duration}set animationDuration(e){this.duration=e}setAnimationDuration(e){return this.duration=e,this}setFirstDelay(e){this._delay=e}restart(){setTimeout(this.onEnd.bind(this),this.animationDuration),this.onStart.dispatch(),console.log(this.tweens),this._delay>0?Laya.timer.once(this._delay,this,this.playTweens):this.playTweens()}playTweens(){this.playArray(this.tweens)}playArray(e){if(null!=e)if(e instanceof Array){for(var t of e)if(null!=t)if(t instanceof Array)this.playArray(t);else{if(t instanceof Laya.Tween&&(!t._props||0==t._props.length)){console.error("没设置属性");continue}t.restart()}}else e.restart()}onEnd(){this.onComplete.dispatch(),Laya.timer.once(3e3,this,this.recover)}}var p,S,C,f,y=Laya.Tween;class w{static to(e,t,i,s=null,a=null,n=0,r=!1,o=!0){return Pool.getItemByClass("tween",y)._create(e,t,i,s,a,n,r,!0,o,!1)}static from(e,t,i,s=null,a=null,n=0,r=!1,o=!0){return Pool.getItemByClass("tween",y)._create(e,t,i,s,a,n,r,!1,o,!1)}}class L{static spriteHide(e){Laya.Tween.clearAll(e),Laya.Tween.to(e,{scaleX:0,scaleY:0,rotation:360,alpha:0},700,null,Laya.Handler.create(this,()=>{e.visible=!1,e.rotation=0,e.alpha=0}))}static spriteShow(e){e.visible=!0,Laya.Tween.clearAll(e),Laya.Tween.to(e,{scaleX:0,scaleY:0},100),Laya.Tween.to(e,{scaleX:1.5,scaleY:1.5},250,null,null,100),Laya.Tween.to(e,{scaleX:1,scaleY:1},100,null,null,350)}static turnAnimationStart(e,t){e||(e=new d);var i=w.to(t,{scaleX:m.ScaleZoom,scaleY:m.ScaleZoom},m.ScaleSpeed);e.tweens.push(i);var s=w.to(t,{scaleX:.1,scaleY:m.FlipZoom},m.FlipSpeed/2,null,null,m.ScaleSpeed,!1);return e.tweens.push(s),e}static turnAnimationEnd(e,t){e||(e=new d);var i=w.to(t,{scaleX:m.ScaleZoom,scaleY:m.ScaleZoom},m.FlipSpeed/2);e.tweens.push(i);var s=w.to(t,{scaleX:1,scaleY:1},m.FlipSpeed);return e.tweens.push(s),e}static scaleIn(e,t,i=!0){e||(e=new d),t.enabled=!1;var s=w.to(t,{scaleX:0,scaleY:0},.25*m.ShowTime,null,Laya.Handler.create(this,()=>{t.setScale(1,1),t.visible=!1,t.enabled=!0}));return e.tweens.push(s),e}static scaleOut(e,t,i=1){t.setScale(0,0),t.visible=!0,t.enabled=!0,e||(e=new d);var s=w.to(t,{scaleX:i,scaleY:i},.25*m.ShowTime);return e.tweens.push(s),e}}class _ extends g{SetConfig(e){this.cardConfig=e,this.m_icon.m_sprite.setSelectedIndex(e.id%100-1)}SetCard(e){this.card=e}OnRecover(){this.cardView=null,this.cardConfig=null,this.card=null}setArmorHide(){L.spriteHide(this.m_shield)}setArmorShowOrChange(){L.spriteShow(this.m_shield)}}class v extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","CardViewFrontPowerUp")}constructFromXML(e){super.constructFromXML(e),this.m_icon=this.getChild("icon"),this.m_life=this.getChild("life")}}v.URL="ui://moe42ygrsqzyaa",v.DependPackages=["GameHome"];class T extends v{SetConfig(e){this.cardConfig=e,this.m_icon.url=e.spriteUrl}SetCard(e){this.card=e}OnRecover(){this.cardView=null,this.cardConfig=null,this.card=null}}class G extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","CardViewFrontPowerUpBarrel")}constructFromXML(e){super.constructFromXML(e),this.m_icon=this.getChild("icon"),this.m_openFx=this.getChild("openFx"),this.m_life=this.getChild("life")}}G.URL="ui://moe42ygrsqzyab",G.DependPackages=["GameHome"];class P extends G{SetConfig(e){this.cardConfig=e}SetCard(e){this.card=e}OnRecover(){this.cardView=null,this.cardConfig=null,this.card=null}}class I extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","CardViewFrontPowerUpCannon")}constructFromXML(e){super.constructFromXML(e),this.m_icon=this.getChild("icon"),this.m_fx=this.getChild("fx"),this.m_life=this.getChild("life")}}I.URL="ui://moe42ygrsqzy9y",I.DependPackages=["GameHome"];class k extends I{SetConfig(e){this.cardConfig=e}SetCard(e){this.card=e}OnRecover(){this.cardView=null,this.cardConfig=null,this.card=null}}class M extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","CardViewFrontPowerUpBomb")}constructFromXML(e){super.constructFromXML(e),this.m_icon=this.getChild("icon"),this.m_fx=this.getChild("fx"),this.m_life=this.getChild("life")}}M.URL="ui://moe42ygrsqzyad",M.DependPackages=["GameHome"];class D extends M{SetConfig(e){this.cardConfig=e}SetCard(e){this.card=e}OnRecover(){this.cardView=null,this.cardConfig=null,this.card=null}}class F extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","CardViewFrontPowerUpChest")}constructFromXML(e){super.constructFromXML(e),this.m_state=this.getController("state"),this.m_icon=this.getChild("icon"),this.m_life=this.getChild("life")}}F.URL="ui://moe42ygrsqzyac",F.DependPackages=["GameHome"];class A extends F{SetConfig(e){this.cardConfig=e}SetCard(e){this.card=e}OnRecover(){this.cardView=null,this.cardConfig=null,this.card=null}}class b extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","CardViewFrontPowerUpSkull")}constructFromXML(e){super.constructFromXML(e),this.m_fx=this.getChild("fx"),this.m_life=this.getChild("life")}}b.URL="ui://moe42ygrsqzyae",b.DependPackages=["GameHome"];class B extends b{SetConfig(e){this.cardConfig=e}SetCard(e){this.card=e}OnRecover(){this.cardView=null,this.cardConfig=null,this.card=null}}class H extends fgui.GButton{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","CardViewFrontWarriowBoss")}constructFromXML(e){super.constructFromXML(e),this.m_icon=this.getChild("icon"),this.m_life=this.getChild("life")}}H.URL="ui://moe42ygrsqzya6",H.DependPackages=["GameHome"];class R extends H{SetConfig(e){this.cardConfig=e,this.m_icon.m_sprite.setSelectedIndex(e.id%100-1)}SetCard(e){this.card=e}OnRecover(){this.cardView=null,this.cardConfig=null,this.card=null}}class x extends fgui.GButton{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","CardViewFrontWarriowEnemy")}constructFromXML(e){super.constructFromXML(e),this.m_icon=this.getChild("icon"),this.m_life=this.getChild("life")}}x.URL="ui://moe42ygrsqzya3",x.DependPackages=["GameHome"];class N extends x{SetConfig(e){this.cardConfig=e,this.m_icon.m_sprite.setSelectedIndex(e.id%100-1)}SetCard(e){this.card=e}OnRecover(){this.cardView=null,this.cardConfig=null,this.card=null}}class U extends fgui.GButton{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","CardViewFrontWarriowTrap")}constructFromXML(e){super.constructFromXML(e),this.m_state=this.getController("state"),this.m_icon=this.getChild("icon"),this.m_life=this.getChild("life"),this.m_DoClose=this.getTransition("DoClose"),this.m_DoOpen=this.getTransition("DoOpen")}}U.URL="ui://moe42ygrsqzya9",U.DependPackages=["GameHome"];class E extends U{SetConfig(e){this.cardConfig=e}SetCard(e){this.card=e}OnRecover(){this.cardView=null,this.cardConfig=null,this.card=null}}class O extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","CardViewFrontWarriow")}constructFromXML(e){super.constructFromXML(e),this.m_icon=this.getChild("icon"),this.m_life=this.getChild("life")}}O.URL="ui://moe42ygrsqzy9w",O.DependPackages=["GameHome"];class W extends O{SetConfig(e){this.cardConfig=e,this.m_icon.url=e.spriteUrl}SetCard(e){this.card=e}OnRecover(){this.cardView=null,this.cardConfig=null,this.card=null}}class V extends l{static get FrontClassMap(){if(!this._FrontClassMap){var e=new Map;this._FrontClassMap=e,e.set("CardViewFrontHero",_),e.set("CardViewFrontPowerUp",T),e.set("CardViewFrontPowerUpBarrel",P),e.set("CardViewFrontPowerUpBomb",D),e.set("CardViewFrontPowerUpCannon",k),e.set("CardViewFrontPowerUpChest",A),e.set("CardViewFrontPowerUpSkull",B),e.set("CardViewFrontWarriow",W),e.set("CardViewFrontWarriowBoss",R),e.set("CardViewFrontWarriowEnemy",N),e.set("CardViewFrontWarriowTrap",E)}return this._FrontClassMap}static GetFrontClass(e){return this.FrontClassMap.has(e)?this.FrontClassMap.get(e):(console.error("没有找到卡牌视图组件",e),T)}static GetFrontView(e){var t=V.GetFrontClass(e),i=Pool.getItem(t.URL);return i||(i=t.createInstance()),i}static GetSpriteUrl(e){return"ui://GameHome/"+e}static PoolGet(){var e=Pool.getItem(this.URL);return e||(e=V.createInstance()),e}PoolRecover(){this.RecoverFront(),this.cardConfig=null,this.cardScoreConfig=null,Pool.recover(V.URL,this)}constructor(){super()}constructFromXML(e){super.constructFromXML(e),this.InitBg()}InitBg(){this.bg=h.createInstance(),this.addChild(this.bg),this.bg.setXY(.5*this.width,.5*this.height)}SetBg(e){this.bg.m_state.setSelectedIndex(e)}SetFront(e){var t=V.GetFrontView(e);t.displayListContainer.mouseThrough=!0,t.displayListContainer.mouseEnabled=!1,t.cardView=this,this.addChild(t),t.setXY(.5*this.width,.5*this.height),this.front=t;var i=this.front.SetConfig;i&&i.call(this.front,this.cardConfig),this.onClick(this,this.OnClickHandler)}RecoverFront(){if(this.front){this.front.removeFromParent();var e=this.front.OnRecover;e&&e.call(this.front);var t=this.front.constructor.URL;Pool.recover(t,this.front),this.front=null}this.offClick(this,this.OnClickHandler)}SetConfig(e){if(this.RecoverFront(),this.cardConfig=e,e){var t=this.cardScoreConfig=e.cardScoreConfig;t&&null!=t.backgroundType||console.error("!cardScoreConfig || cardScoreConfig.backgroundType == undefined",t,e),this.SetBg(t.backgroundType),this.SetFront(t.frontView)}else this.cardScoreConfig=null,this.SetBg(u.Default)}SetCard(e){if(this.card=e,this.front){var t=this.front.SetCard;t&&t.call(this.front,this.card)}}OnClickHandler(){this.card&&this.game.keyboardManager.OnClickCard(this.card)}setHealthText(){if(this.card.isHero){var e=this.card;this.front.m_life.title=e.currentLife+"/"+e.totalLife}else this.front.m_life.title=this.card.currentLife.toString()}setPowerUpText(){this.front.m_life.title=this.card.powerUpAmount.toString()}setArmor(){if(this.card.isHero){var e=this.card,t=this.front;e.armor>0?t.setArmorShowOrChange():t.setArmorHide(),t.m_shield.title=e.armor.toString()}}tweenLife(){var e=this.front.m_life,t=this.card.getScaleTween(e);return t.onComplete.addOnce(this.setHealthText,this),t}tweenPowerUp(){var e=this.front.m_life,t=this.card.getScaleTween(e);return t.onComplete.addOnce(this.setHealthText,this),t}useLuck(){if(this.card.isHero){this.card;this.front.m_shopBar.useLuck()}}increaseLifeByOneTween(){}setOpen(){this.card.isTrap&&this.front.m_DoOpen.play()}setClose(){this.card.isTrap&&this.front.m_DoClose.play()}}class X extends i{get cardScoreConfig(){return $a.config.cardScoreType.getConfig(this.scoreTypeKey)}get spriteUrl(){return this._spriteUrl||(this._spriteUrl=V.GetSpriteUrl(this.sprite)),this._spriteUrl}}class q extends s{}class K extends a{}!function(e){e[e.Notice=0]="Notice",e[e.Home=100]="Home",e[e.War=601]="War",e[e.Login=101]="Login",e[e.Plot=102]="Plot",e[e.Gashapon=200]="Gashapon",e[e.Hero=201]="Hero",e[e.Bag=202]="Bag",e[e.Equip=203]="Equip",e[e.Draug=204]="Draug",e[e.Sections=207]="Sections",e[e.Quest=300]="Quest",e[e.Team=303]="Team",e[e.BattlePlan=304]="BattlePlan",e[e.PVPHall=401]="PVPHall",e[e.PVEHall=402]="PVEHall",e[e.SystemSetting=500]="SystemSetting",e[e.Mail=501]="Mail",e[e.Rank=502]="Rank",e[e.PlayerInfo=503]="PlayerInfo"}(p||(p={})),window.MenuId=p,function(e){e[e.None=0]="None",e[e.Circle=1]="Circle",e[e.Launch=2]="Launch",e[e.EnterWar=3]="EnterWar",e[e.EnterModule=4]="EnterModule"}(S||(S={}));class j{static get res3dzip_manifest(){return this.res3dzip+"manifest.json"}static get res3dzip_manifest_pve01(){return this.res3dzip+"pve_01_manifest.json"}static get res3dzip_zip_pve01(){return this.res3dzip+"pve_01.zip"}static get config(){return j.root+"config/"}static get PathConfig(){return j.root+"config/path/"}static get GmConfig(){return j.root+"config/gm/"}static get shader(){return j.root+"shader/"}static get particles(){return j.root+"particles/"}static get spine(){return j.root+"spine/"}static get spineUI(){return j.root+"spineUI/"}static getConfigIcon(e){return j.fspriteassets+e+".png"}static get fspriteassets(){return j.root+"fspriteassets/"}static get actorBodyIcon(){return j.root+"fspriteassets/ActorBodyIcon/"}static get draugHeroIcon(){return j.root+"fspriteassets/icon/draugHeroIcon/"}static get draugIcon(){return j.root+"fspriteassets/icon/draugIcon/"}static get menuIcon(){return j.root+"fspriteassets/MenuItemIcon/"}static get HeroIcon(){return j.root+"fspriteassets/icon/heroIcon/"}static getActorBodyIcon(e){return j.actorBodyIcon+`${e}.png`}static getDraugHeroIcon(e){return-1!=$a.channel.serverItem.shieldHero.indexOf(e)&&(e=1001),j.draugHeroIcon+`${e}.png`}static getDraugIcon(e){return j.draugIcon+`${e}.png`}static getMenuIcon(e){return j.menuIcon+`${e}.png`}static getSpineSKPathF(e,t){return j.spine+`${e}_F/${t}_F/${t}_F.sk`}static getSpineSKPathB(e,t){return j.spine+`${e}_B/${t}_B/${t}_B.sk`}static getSpinePngPathF(e,t){return j.spine+`${e}_F/${t}_F/${t}_F.png`}static getSpinePngPathB(e,t){return j.spine+`${e}_B/${t}_B/${t}_B.png`}static getSpineUIPngPath(e){return j.spineUI+`${e}.png`}static getSpineUISkPath(e){return j.spineUI+`${e}.sk`}static getSpineSoltPartPath(e){return j.spine+"SlotTexture/"+e+".png"}static getMenuIconUrl(e){return j.fspriteassets+"MenuIcon/"+e+".png"}static getMenuNameIconUrl(e){return j.fspriteassets+"MenuNameIcon/"+e+".png"}static getBgUrl(e){return j.fspriteassets+"Background/"+e+".png"}static getSpritePath(e){return j.root+"sprite/"+e+".png"}static getSpritePathHasExt(e){return j.root+"sprite/"+e}static getShaderVS(e){return j.shader+e+".vs"}static getShaderPS(e){return j.shader+e+".fs"}static getParticles(e){return j.particles+e+".part"}static GetBattleRoleIcon(e){return j.fspriteassets+e+".png"}static GetAvatarSource(e){let t=$a.config.avatar.getConfig(e);return j.fspriteassets+t.icon+".png"}}j.res3dsrc="",j.res3dzip="res3dzip/",j.root="res/";class z{}z.NET_ERROR="网络连接失败！请检查网络设备!加油哦！！",z.Login="登录",z.Auth="授权",z.LangSelectMsg="语言需要重启游戏才有效!",z.FunNoOpen="此功能暂未开放，敬请期待！",z.ButtonSelect="选择",z.ButtonOk="确定",z.ButtonCannel="取消",z.ButtonYes="是",z.ButtonNo="否",z.Disable="内容优化",z.Lock="无解锁配置！",z.LvUpMax="等级达到最大",z.LvUpTo="玩家升级 {0} → {1}",z.Lv="{0}级",z.LVDot="等级：{0}",z.PlayerExp="主公经验：{0}",z.FatigueNotEnough="体力不足，无法进行挑战",z.cannotRecharge="游客不能充值",z.cannotRechargeNoIos="只支持ios内购",z.rechargeError="充值失败，请稍候重试",z.systemTip="系统提示",z.TitleTip="提示",z.ErorNoInitProto="没有初始化网络",z.ErorRequestServerList="请求服务器列表失败",z.ErorAccountFrozen="账号被冻结",z.ErorAccountDropped="账号被停用",z.TipEnterRoleName="输入你的名称",z.ErrorNameEmpty="名字不能是空的",z.ErrorContentEmpty="内容不能是空的",z.ErrorNameUsed="名称已经被使用",z.ErrorFormatName="存在非法字符串，请修改后重试",z.ErrorHttpSendFail="[Error] 发送请求失败",z.HttpTimeOut="网络超时! 当前设置的超时时间是{0}",z.AlertTextBuyActor="是否花费{0}{1}增加艺人数量",z.AlertTextScountActor="是否花费{0}{1} 探查艺人？",z.ToastTextItemNotEnough="{0}数量不足",z.ToastTextItemNotEnough2="数量不足，需要{0} {1}",z.ChangeNameCost="本次改名需要 {0}",z.DuelTempLevel="当前决斗神殿段位：{0}",z.DuelTempMaxLevel="历史最高决斗神殿段位：{0}",z.DuelTempCurrentPvpLevel="当前竞技排名：{0}",z.DuelTempMaxPvpLevel="历史最高竞技排名：{0}",z.BattlePlanTeamHeroNameAndLevel="{0}  {1}级",z.BagCapacity="{0}/{1}",z.BagItemCount="拥有：{0}",z.BagExpiredLimitTip="{0}后过期",z.BagExpiredPeriodTip="将在{0}过期",z.BagItemSell="出售",z.BagItemUse="使用",z.BagItemSplit="分解",z.BagItemForge="锻造",z.BagItemChangeEquip="穿戴",z.BagItemLevelUp="使用可增加{0}英雄经验",z.EquipPropDes="{0}+{1}",z.EquipExclusiveTxtMsg="{0}专属！只有{1}才可穿戴次装备",z.EquipExclusiveTxt="{0}专属",z.EquipEatExp="该装备可提供{0}的强化经验",z.EquipTypeWeapon="武器",z.EquipTypeHelmet="头盔",z.EquipTypeArmor="战甲",z.EquipTypeBoots="战靴",z.EquipTypePendant="玉佩",z.EquipTypeGem="宝物",z.EquipNotEnough="道具不足，无法选择",z.EquipLevelUpStr1="下一级属性",z.EquipLevelUpStr2="强化到{0}级时属性增加",z.EquipAtkRange="系数",z.MailTitle="邮件",z.DeleteRead="删除已读",z.ToReader="致玩家：",z.ReawrdMsg="奖励内容：",z.Progress="{0}/{1}",z.N0="零",z.N1="一",z.N2="二",z.N3="三",z.N4="四",z.N5="五",z.N6="六",z.N7="七",z.N8="八",z.N9="九",z.N10="十",z.N100="百",z.N1000="千",z.N10000="万",z.RewardItemCount="x{0}",z.DATE_MonthBefore="{0}个月前",z.DATE_WeekBefore="{0}周前",z.DATE_DayBefore="{0}天前",z.DATE_HourBefore="{0}小时前",z.DATE_MinuteBefore="{0}分钟前",z.DATE_SecondeBefore="{0}秒前",z.Hour="小时",z.Minute="分",z.Second="秒",z.MissionNotOpen="该关卡尚未开启",z.Chapter="第{0}章",z.ChapterStarTipTitle="本章累计{0}星可领取",z.ChapterStarNotEnough="星星数量不足",z.ChapterRewardAlreadyGet="奖励已经领取过",z.ChapterSpecialTimes="今日精英剩余次数：{0}",z.ChapterMonsterTimes="今日剩余次数：{0}",z.SecretBookTimes="今日剩余次数：{0}",z.SecretBookTimesNotEnough="该副本今日挑战次数不足",z.SectionSpecialTotalTimes="每日一共可购买{0}次精英奖励次数",z.SectionMonsterTotalTimes="每日一共可购买{0}次魔王奖励次数",z.SecretBookTotalTimes="每日一共可购买{0}次秘闻奖励次数",z.SectionBuyTimesToast="奖励次数提升",z.SectionCurrentTimes="今日第{0}次购买",z.SectionTimesNotEnough="今日次数已用完",z.MissionUnlockCondition="{0}级开启",z.ChapterCurrentStarNum="{0}/{1}",z.SecretTimesRemain="今日剩余次数: {0}",z.MissionMaxTime="通关时间低于{0}秒",z.MissionKillBoss="打败首领",z.MissionHPState="剩余生命超过{0}%",z.MissionStamina="x{0}",z.SecretMissionTimesRemain="今日剩余次数：{0}",z.SecretLand_BestScore="最佳成绩：大秘境{0}",z.SecretLand_CurrentKeyStone="当前钥石：{0}级",z.SecretLand_Buy_Roll_Tips="是否消耗{0}点体力兑换Roll币",z.SecretLand_Roll_tips="当日可兑换次数为{0}，Roll积攒数量上限为{1}",z.SecretLand_Fatigue_Not_Enough="您没有足够的体力值，需要{0}体力兑换Roll币",z.Keystone_LevelUp_Time_Limit="{0}分钟",z.SecretLand_Level_Limit="等级达到{0}后开启{1}层大秘境",z.SecretLand_Time_Cost="通关时间: {0}",z.SecretLand_New_Keystone="获取新钥匙：{0}{1}级",z.Gashapon_NextFreeTime="{0}后免费",z.Gashapon_Rate="概率 {0}%",z.Gashapon_PropDisplay="{0} +{1}",z.Gashapon_Times_Remain="每日可招募{0}次，今日剩余{1}次",z.Gashapon_Times_Not_Enough="今日剩余次数不足",z.DuelSeasonDuration="{0} - {1}",z.DuelSeasonRemainDays="距离赛季结束还有{0}",z.DuelCurrentWinTimes="本赛季胜场：{0}",z.DuelSelectHeroGroupFirst="请先选择队伍",z.DuelTempOldSeason="恭喜您，在上赛季结算时的段位达到了{0}，赛季奖励已经发送 到您的邮箱",z.DuelTempNewSeason="由于您上赛季的出色表现，您在本赛季的起始段位为{0}",z.DuelTempWinTimes="胜场：{0}",z.HeroSkillOpenLevel="英雄等级达到{0}级别后解锁",z.HeroMaxLevel="已满级",z.HeroInBattle="当前英雄已在队伍中！！！",z.HeroStarProStr="成长",z.HeroLevelUpNotEnough="当前无法升级，请提升战队等级",z.HeroLevelUpItemNotEnough="物品不足，无法升级",z.HeroLevelUpMax="已提升当前最高级",z.RankMyAllRank="我的全区排行：{0}",z.RankNotOnRank="未上榜",z.RankDanStar="{0} {1}星",z.HeroSkillLevelNotLevel="升级条件不足，需英雄{0}级",z.SecretBookHeroLevelNotEnough="英雄{0}级开启",z.GuideFinish="现在引导结束了，你可以自由体验了",z.GuideGoToBattle="guide_go_section",z.GuideBackHome="guide_go_back_home",z.GuideBack="guide_go_back";class Y{constructor(){this.dict=new Dictionary}static getInstance(){return null==this.__instance&&(this.__instance=new this,this.__instance.install()),this.__instance}validate(e){return!this.dict.hasKey(e)||this.dict.getValue(e).apply(this)}validateTab(e,t){return!0}openMenu(e,t){}openTab(e,t,i){}openItem(e,t,i){}closeRed(e){}add(e,t){this.dict.add(e,t)}install(){}}class $ extends Y{install(){}validate(e){return super.validate(e)}warEnableOpen(){return!0}}class J extends Y{install(){}validate(e){return!!this.dict.hasKey(e)&&this.dict.getValue(e).apply(this)}}class Q{constructor(e,t){this.menuId=e,this.windowClass=t}}!function(e){e[e.Home=1]="Home",e[e.HomeTop=2]="HomeTop",e[e.WarUI=3]="WarUI",e[e.Module=4]="Module",e[e.ModuleTop=5]="ModuleTop",e[e.MainUI=6]="MainUI",e[e.Dialog=7]="Dialog",e[e.Guide=8]="Guide",e[e.Loader=9]="Loader",e[e.GM=10]="GM",e[e.FloatMsg=11]="FloatMsg"}(C||(C={}));class Z{static get dialogModel(){return Z._dialogModel||(Z._dialogModel=new fgui.GComponent),Z._dialogModel}static showDialogModel(){Z.dialog.width=$a.screenSetting.screenWidth,Z.dialog.height=$a.screenSetting.screenHeight,Z.dialogModel.alpha=.8,Z.dialogModel.width=$a.screenSetting.screenWidth,Z.dialogModel.height=$a.screenSetting.screenHeight,Z.dialogModel&&Z.dialog.addChildAt(Z.dialogModel,0)}static resetDialogModelSize(){Z.dialog.width=$a.screenSetting.screenWidth,Z.dialog.height=$a.screenSetting.screenHeight,Z.dialogModel.width=$a.screenSetting.screenWidth,Z.dialogModel.height=$a.screenSetting.screenHeight}static hideDialogModel(){Z.dialogModel&&Z.dialogModel.removeFromParent()}static install(){Laya.stage.addChild(fgui.GRoot.inst.displayObject),Z.root=fgui.GRoot.inst,Z.home=Z.createLayer(C.Home,"MenuLayer-home"),Z.warUI=Z.createLayer(C.WarUI,"MenuLayer-warUI"),Z.module=Z.createLayer(C.Module,"MenuLayer-module"),Z.mainUI=Z.createLayer(C.MainUI,"MenuLayer-mainUI"),Z.dialog=Z.createLayer(C.Dialog,"MenuLayer-dialog"),Z.guide=Z.createLayer(C.Guide,"MenuLayer-guide"),Z.loader=Z.createLayer(C.Loader,"MenuLayer-loader"),Z.gm=Z.createLayer(C.GM,"MenuLayer-gm"),Z.floatMsg=Z.createLayer(C.FloatMsg,"MenuLayer-floatMsg"),Z.dict.add(C.Home,Z.home),Z.dict.add(C.WarUI,Z.warUI),Z.dict.add(C.Module,Z.module),Z.dict.add(C.MainUI,Z.mainUI),Z.dict.add(C.Dialog,Z.dialog),Z.dict.add(C.Guide,Z.guide),Z.dict.add(C.Loader,Z.loader),Z.dict.add(C.GM,Z.gm),Z.dict.add(C.FloatMsg,Z.floatMsg)}static getLayer(e){return Z.dict.getValue(e)}static createLayer(e,t){let i=Z.root,s=new fgui.GRoot;if(s.menuLayer=e,t&&(s.name=t),Engine.borwer.isLiuHai)switch(e){case C.Loader:s.x=0,s.y=0,s.setSize(i.width,i.height);break;default:$a.screenSetting.isLandsape?(s.x=$a.screenSetting.liuHaiHeightTop,s.setSize($a.screenSetting.screenWidthLiuHai,i.height)):(s.y=$a.screenSetting.liuHaiHeightTop,s.setSize(i.width,i.height-$a.screenSetting.screenHeightLiuHai))}else s.setSize(i.width,i.height);return i.addChild(s),s}static getLayerHeight(e){if(Engine.borwer.isLiuHai)switch(e){case Z.loader:return $a.screenSetting.screenHeight;default:return $a.screenSetting.screenHeightLiuHai}return $a.screenSetting.screenHeight}static getLayerWidth(e){if(Engine.borwer.isLiuHai)switch(e){case Z.loader:return $a.screenSetting.screenWidth;default:return $a.screenSetting.screenWidthLiuHai}return $a.screenSetting.screenWidth}}Z.dict=new Dictionary,window.MenuLayer=Z;class ee extends fgui.Window{constructor(){super(...arguments),this.isAddedStage=!1}get isShowed(){return!!this.contentPane&&null!=this.parent}onWindowWillShow(){this.contentPane&&this.callChildOnWindowWillShow(this.contentPane),this.setScreenSize(),this.isAddedStage||(this.isAddedStage=!0,Laya.stage.on(Laya.Event.RESIZE,this,this.setScreenSize))}onWindowWillHide(){this.contentPane&&this.callChildOnWindowWillHide(this.contentPane),this.isAddedStage=!1,Laya.stage.off(Laya.Event.RESIZE,this,this.setScreenSize)}setScreenSize(){this.contentPane&&(this.windowContainer&&void 0!==this.windowContainer.menuLayer?$a.screenSetting.isLandsape?(this.width=Z.getLayerWidth(this.windowContainer.menuLayer),this.height=this.windowContainer.height,this.contentPane.width=this.width,this.contentPane.height=this.height):(this.width=this.windowContainer.width,this.height=Z.getLayerHeight(this.windowContainer.menuLayer),this.contentPane.width=this.width,this.contentPane.height=this.height):(this.width=$a.screenSetting.screenWidth,this.height=$a.screenSetting.screenHeight,this.contentPane.width=$a.screenSetting.screenWidth,this.contentPane.height=$a.screenSetting.screenHeight),this.callChildOnWindowResize(this.contentPane))}callChildOnWindowWillShow(e){if(e){let t=e.onWindowWillShow;if(t&&t.apply(e),e._children)for(let t=0;t<e._children.length;t++)this.callChildOnWindowWillShow(e._children[t])}}callChildOnWindowWillHide(e){if(e){let t=e.onWindowWillHide;if(t&&t.apply(e),e._children)for(let t=0;t<e._children.length;t++)this.callChildOnWindowWillHide(e._children[t])}}callChildOnWindowResize(e){if(e){let t=e.onWindowResize;if(t&&t.apply(e),e._children)for(let t=0;t<e._children.length;t++)this.callChildOnWindowResize(e._children[t])}}}!function(e){e[e.FguiPackage=0]="FguiPackage",e[e.FspritePackage=1]="FspritePackage",e[e.Image=2]="Image",e[e.TEXTURE2D=3]="TEXTURE2D",e[e.Buffer=4]="Buffer",e[e.Sound=5]="Sound",e[e.Text=6]="Text",e[e.Json=7]="Json",e[e.Xml=8]="Xml",e[e.Font=9]="Font",e[e.TTF=10]="TTF",e[e.PKM=11]="PKM"}(f||(f={}));var te,ie=Laya.Loader;class se{static get layaLoaderType2AssetItemTypeDict(){if(!se._layaLoaderType2AssetItemTypeDict){let e=new Dictionary;e.add(ie.IMAGE,f.Image),e.add(ie.TEXTURE2D,f.TEXTURE2D),e.add(ie.BUFFER,f.Buffer),e.add(ie.SOUND,f.Sound),e.add(ie.TEXT,f.Text),e.add(ie.JSON,f.Json),e.add(ie.XML,f.Xml),e.add(ie.FONT,f.Font),e.add(ie.TTF,f.TTF),se._layaLoaderType2AssetItemTypeDict=e}return se._layaLoaderType2AssetItemTypeDict}static get assetItemType2LayaLoaderTypeDict(){if(!se._assetItemType2LayaLoaderTypeDict){let e=this.layaLoaderType2AssetItemTypeDict.__getDict(),t=new Dictionary;for(let i in e)t[e[i]]=e;se._assetItemType2LayaLoaderTypeDict=t}return se._assetItemType2LayaLoaderTypeDict}static layaLoaderType2AssetItemType(e){return se.layaLoaderType2AssetItemTypeDict.getValue(e)}static assetItemType2LayaLoaderType(e){return se.assetItemType2LayaLoaderTypeDict.getValue(e)}static getAssetItemKey(e){return e.type+" "+e.url}}class ae{}ae.GameHome="GameHome",ae.GameLaunch="GameLaunch",ae.ModuleLogin="ModuleLogin",ae.Sound="Sound",function(e){e[e.None=0]="None",e[e.Tab=2]="Tab",e[e.Subwindow=3]="Subwindow"}(te||(te={}));class ne{}ne.Test="Test",ne.GameBattle_onSyncNormal="GameFrame_onSyncNormal",ne.GameBattle_onSyncChasingFrame="GameBattle_onSyncChasingFrame",ne.GameBattle_onEntityCreate="GameBattle_onEntityCreate",ne.GameBattle_onEntityRemove="GameFrame_onEntityRemove",ne.GameBattle_onEntityRollbackBegin="GameFrame_onEntityRollbackBegin",ne.GameBattle_onEntityRollbackEnd="GameBattle_onEntityRollbackEnd",ne.GameBattle_onShowDamageUI="GameBattle_onShowDamageUI",ne.GameBattle_onShowHitUI="GameFrame_onShowHitUI",ne.GameBattle_onShakeScreen="GameFrame_onShakeScreen",ne.GameBattle_onScreenScale="GameBattle_onScreenScale",ne.GameBattle_onScreenMove="GameBattle_onScreenMove",ne.GameBattle_onAnimNotify="GameFrame_onAnimNotify",ne.GameBattle_onChangeNotify="GameFrame_onChangeNotify",ne.GameBattle_onCharacterBorn="GameBattle_onCharacterBorn",ne.GameBattle_OnViewAlphaChange="GameBattle_OnViewAlphaChange",ne.GameBattle_onPlaySound="GameFrame_onPlaySound",ne.GameBattle_onPlaySoundBehit="GameFrame_onPlaySoundBehit",ne.GameBattle_onTiggerEffectScreenShow="GameBattle_onTiggerEffectScreenShow",ne.GameBattle_onTiggerEffectScreenHide="GameBattle_onTiggerEffectScreenHide",ne.GameBattle_onSceneFadeOut="GameFrame_onSceneFadeOut",ne.GameBattle_onTiggerUIScreenShow="GameBattle_onTiggerUIScreenShow",ne.GameBattle_onTiggerUIScreenHide="GameBattle_onTiggerUIScreenHide",ne.GameBattle_onTriggerChangeSceneBg="GameBattle_onTriggerChangeSceneBg",ne.GameBattle_onBossAppear="GameBattle_onBossAppear",ne.GameBttle_showBossSpecialView="GameBttle_showBossSpecialView",ne.GameBattle_onShowGameStart="GameBattle_onShowGameStart",ne.GameBattle_onServerError2300="GameBattle_onServerError2300",ne.GameBattle_MonsterCreater="GameBattle_nextAirWallMonster",ne.GameBattle_WaveChange="GameBattle_WaveChange",ne.GameBattle_MonsterHpChange="GameBattle_MonsterHpChange",ne.GameBattle_EntityTeleport="GameBattle_EntityTeleport",ne.GameBattle_PlayerRevive="GameBattle_PlayerRevive",ne.GameBattle_EntityDead="GameBattle_EntityDead",ne.GameFrame_OpenMenu="GameFrame_OpenMenu",ne.GameFrame_CloseMenu="GameFrame_CloseMenu",ne.GameFrame_ReLoginData_Begin="GameFrame_ReLoginData_Begin",ne.GameFrame_ReLoginData_End="GameFrame_ReLoginData_End",ne.GameFrame_Everyday_Update="GameFrame_Everyday_Update",ne.GameFrame_HideOpenDialog="GameFrame_HideOpenDialog",ne.GameFrame_ShowOpenDialog="GameFrame_ShowOpenDialog",ne.GameFrame_TeamMemberNetStateChange="GameFrame_TeamMemberStateChange",ne.GameFrame_TeamMemberLeave="GameFrame_TeamMemberLeave",ne.GameFrame_UseItem="GameFrame_UseItem",ne.GameFrame_ConsumeItem="GameFrame_ConsumeItem",ne.GameFrame_HeroLevelUp="GameFrame_HeroLevelUp",ne.GameFrame_HeroStarUp="GameFrame_HeroStarUp",ne.GameFrame_AddHero="GameFrame_AddHero",ne.GameFrame_HeroSkillLevel="GameFrame_HeroSkillLevel",ne.GameFrame_HeroLeveling="GameFrame_HeroLeveling",ne.GameFrame_UpdateEXP="GameFrame_UpdateEXP",ne.GameFrame_UpdateProp="GameFrame_UpdateProp",ne.GameFrame_BackUpData="GameFrame_BackUpData",ne.GameFrame_RestoreData="GameFrame_RestoreData",ne.GameFrame_ItemExceedBound="GameFrame_ItemExceedBound",ne.GameFrame_LevelExceedBound="GameFrame_LevelExceedBound",ne.GameFrame_LevelExceedMaxLevelInLoop="GameFrame_LevelExceedMaxLevelInLoop",ne.GameFrame_EquipStarUp="GameFrame_EquipStarUp",ne.GameFrame_EquipLevelUp="GameFrame_EquipLevelUp",ne.GameFrame_EquipQualitySelect="GameFrame_EquipQualitySelect",ne.GameFrame_EquipQualitySort="GameFrame_EquipQualitySort",ne.GameFrame_EquipItemSelect="GameFrame_EquipItemSelect",ne.GameFrame_HeroSelectEquip="GameFrame_HeroSelectEquip",ne.GameFrame_BattlePlanDataUpdate="GameFrame_BattlePlanDataUpdate",ne.GameFrame_BattlePlanUnlockNewTeam="GameFrame_BattlePlanUnlockNewTeam",ne.GameFrame_BattlePlanChangeTeamName="GameFrame_BattlePlanChangeTeamName",ne.GameFrame_BattlePlanChangeHero="GameFrame_BattlePlanChangeHero",ne.GameFrame_BattlePlanTeamCentern="GameFrame_BattlePlanTeamCentern",ne.GameFrame_BattlePlanUnlockNewHeroChair="GameFrame_BattlePlanUnlockNewHeroChair",ne.GameFrame_BattlePlanSelectedTeam="GameFrame_BattlePlanSelectedTeam",ne.GameFrame_BattlePlanSecondHero="GameFrame_BattlePlanSecondHero",ne.GameFrame_BattlePlanRefreshCommonSkill="GameFrame_BattlePlanRefreshCommonSkill",ne.GameFrame_HomeWindowBattleStartBtn="GameFrame_HomeWindowBattleStartBtn",ne.GameFrame_HeroWindowEquipPanel="GameFrame_HeroWindowEquipPanel",ne.GameFrame_HeroPanelBack="GameFrame_HeroPanelBack",ne.Gameframe_HeroEquipClose="Gameframe_HeroEquipClose",ne.GameFrame_BattleEnterOnClick="GameFrame_BattleEnterOnClick",ne.GameFrame_SectionEnterOnClick="GameFrame_SectionEnterOnClick",ne.GameFrame_SectionDeltaEnterOnClick="GameFrame_SectionDeltaEnterOnClick",ne.GameFrame_BattlePlanEnter="GameFrame_BattlePlanEnter",ne.GameFrame_GuideJoystickFinish="GameFrame_GuideJoystickFinish",ne.GameFrame_BattleOneWave="GameFrame_GuideAttackStart",ne.GameFrame_GuideAttackFinish="GameFrame_GuideAttackFinish",ne.GameFrame_GuideFirSkillStart="GameFrame_GuideFirSkillStart",ne.GameFrame_GuideFirSkillEnd="GameFrame_GuideFirSkillEnd",ne.GameFrame_GuideBattleEndRemove="GameFrame_GuideBattleEndRemove",ne.GameFrame_SectionBackBtnOnClick="GameFrame_SectionBackBtnOnClick",ne.GameFrame_HomeHeroBtnOnClick="GameFrame_HomeHeroBtnOnClick",ne.GameFrame_HeroPanelChooseHero="GameFrame_HeroPanelChooseHero",ne.GameFrame_HeroBattleChooseHero="GameFrame_HeroBattleChooseHero",ne.GameFrame_HeroBattleHero="GameFrame_HeroBattleHero",ne.GameFrame_HeroInfoShowAddExpPanel="GameFrame_HeroInfoShowAddExpPanel",ne.GameFrame_HeroExpIncreaseByItem="GameFrame_HeroExpIncreaseByItem",ne.GameFrame_HeroChooseFinish="GameFrame_HeroChooseFinish",ne.gameFrame_GuideOpenLevelUpPanel="gameFrame_GuideOpenLevelUpPanel",ne.gameFrame_GuideEquipUIFinish="gameFrame_GuideEquipUIFinish",ne.gameFrame_GuideEquipList="gameFrame_GuideEquipUIFinish",ne.gameFrame_HeroEquip="gameFrame_HeroEquip",ne.GameFrame_FinishGuideOpenHeroEquip="GameFrame_FinishOpenHeroEquip",ne.GameFrame_OpenHeroEquipList="GameFrame_OpenHeroEquipList",ne.GameFrame_gameStart="GameFrame_onShowGameStart",ne.GameFrame_SectionFinishSuccess="GameFrame_SectionFinishSuccess",ne.GameFrame_HomeEquipBtnOnClick="GameFrame_HomeEquipBtnOnClick",ne.GameFrame_EquipSelectFirst="GameFrame_EquipSelectFirst",ne.GameFrame_EquipStrengthenBtn="GameFrame_EquipStrengthenBtn",ne.GameFrame_EquipStrengthenBtn2="GameFrame_EquipStrengthenBtn2",ne.GameFrame_EquipStrengthenEnterBtn="GameFrame_EquipStrengthenEnterBtn",ne.GameFrame_BattleNormalBtn="GameFrame_BattleNormal",ne.GameFrame_BattleSpecialBtn="GameFrame_BattleSpecialBtn",ne.GameFrame_BattleSpecialList="GameFrame_BattleSpecialList",ne.GameFrame_GuideChangeHero="GameFrame_GuideChangeHero",ne.GameFrame_BtnBackOnClick="GameFrame_BtnBackOnClick",ne.GameFrame_HeroLevelGuideUpClose="GameFrame_HeroLevelUpClose";class re{static setChildWindow(e,t){if(e&&(e.moduleWindow=t,e._children))for(let i=0;i<e._children.length;i++)this.setChildWindow(e._children[i],t)}static callChildOnWindowInited(e){if(e){let t=e.onWindowInited;if(t&&t.apply(e),e._children)for(let t=0;t<e._children.length;t++)this.callChildOnWindowInited(e._children[t])}}static callChildOnWindowDestory(e){let t;if(e instanceof fgui.GObject&&(t=e.displayObject),e){let i=e.onWindowDestory;if(i&&i.apply(e))return;for(let e=t.numChildren-1;e>=0;e--){let i=t.getChildAt(e);i.$owner&&this.callChildOnWindowDestory(i.$owner)}}}static callChildOnWindowShow(e){if(e){let t=!0,i=e.onWindowShow;if(i){if(void 0!==e.whenSelfVisiableCallWindowShowAndHide){e.whenSelfVisiableCallWindowShowAndHide&&0==e.visible&&(t=!1)}t&&i.apply(e)}if(t&&e._children)for(let t=e._children.length-1;t>=0;t--)this.callChildOnWindowShow(e._children[t])}}static callChildOnWindowHide(e){if(e){let t=!0,i=e.onWindowHide;if(i){if(void 0!==e.whenSelfVisiableCallWindowShowAndHide){e.whenSelfVisiableCallWindowShowAndHide&&0==e.visible&&(t=!1)}t&&i.apply(e)}if(t&&e._children)for(let t=0;t<e._children.length;t++)this.callChildOnWindowHide(e._children[t])}}static callChildOnTabShow(e){if(e){let t=e.onTabShow;if(t&&t.apply(e),e._children)for(let t=0;t<e._children.length;t++)this.callChildOnTabShow(e._children[t])}}static callChildOnTabHide(e){if(e){let t=e.onTabHide;if(t&&t.apply(e),e._children)for(let t=0;t<e._children.length;t++)this.callChildOnTabHide(e._children[t])}}static autoScreenScaleShrink(e,t,i){let s=$a.screenSetting.screenScaleShrink;if(e.scaleX=s,e.scaleY=s,t){let a=fgui.GRoot.inst;switch(t){case Laya.Stage.ALIGN_LEFT:e.x=0;break;case Laya.Stage.ALIGN_CENTER:e.x=.5*(a.width-e.width*s);break;case Laya.Stage.ALIGN_RIGHT:e.x=a.width-e.width*s}switch(i){case Laya.Stage.ALIGN_TOP:e.y=0;break;case Laya.Stage.ALIGN_MIDDLE:e.y=.5*(a.height-e.height*s);break;case Laya.Stage.ALIGN_BOTTOM:e.y=a.height-e.height*s}}}static autoScreenScaleShrink2(e,t=1){let i=$a.screenSetting.screenScaleShrinkMax;e.scaleX=i*t,e.scaleY=i*t,e.parent&&(e.x=.5*e.parent.width,e.y=.5*e.parent.height)}static autoScreenScale(e,t,i){let s=$a.screenSetting.screenScaleExpand;if(e.scaleX=s,e.scaleY=s,t){let a=fgui.GRoot.inst;switch(t){case Laya.Stage.ALIGN_LEFT:e.x=0;break;case Laya.Stage.ALIGN_CENTER:e.x=.5*(a.width-e.width*s);break;case Laya.Stage.ALIGN_RIGHT:e.x=a.width-e.width*s}switch(i){case Laya.Stage.ALIGN_TOP:e.y=0;break;case Laya.Stage.ALIGN_MIDDLE:e.parent?(this.helpPoint.y=.5*(a.height-e.height*s),this.helpPoint=e.parent.globalToLocal(0,this.helpPoint.y,this.helpPoint),e.y=this.helpPoint.y):e.y=.5*(a.height-e.height*s);break;case Laya.Stage.ALIGN_BOTTOM:e.y=a.height-e.height*s}}}static autoScreenScale2(e){let t=$a.screenSetting.screenScaleExpand;e.scaleX=t,e.scaleY=t,e.parent&&(e.x=.5*e.parent.width,e.y=.5*e.parent.height)}static autoScreenScale3(e){let t=$a.screenSetting.screenScaleExpand;e.scaleX=t,e.scaleY=t}static autoScreenSize(e,t,i){let s=$a.screenSetting.screenScaleExpand;if(e.width=e.sourceWidth*s,e.height=e.sourceHeight*s,t){let s=fgui.GRoot.inst;switch(t){case Laya.Stage.ALIGN_LEFT:e.x=0;break;case Laya.Stage.ALIGN_CENTER:e.x=.5*(s.width-e.width);break;case Laya.Stage.ALIGN_RIGHT:e.x=s.width-e.width}switch(i){case Laya.Stage.ALIGN_TOP:e.y=0;break;case Laya.Stage.ALIGN_MIDDLE:e.parent?(this.helpPoint.y=.5*(s.height-e.height),this.helpPoint=e.parent.globalToLocal(0,this.helpPoint.y,this.helpPoint),e.y=this.helpPoint.y):e.y=.5*(s.height-e.height);break;case Laya.Stage.ALIGN_BOTTOM:e.y=s.height-e.height}}}static autoParentSize(e,t,i){let s=$a.screenSetting.screenScaleExpand;if(e.width=e.sourceWidth*s,e.height=e.sourceHeight*s,t){let s=fgui.GRoot.inst;switch(t){case Laya.Stage.ALIGN_LEFT:e.x=0;break;case Laya.Stage.ALIGN_CENTER:e.x=.5*(s.width-e.width);break;case Laya.Stage.ALIGN_RIGHT:e.x=s.width-e.width}switch(i){case Laya.Stage.ALIGN_TOP:e.y=0;break;case Laya.Stage.ALIGN_MIDDLE:e.y=.5*(s.height-e.height);break;case Laya.Stage.ALIGN_BOTTOM:e.y=s.height-e.height}}}static centerScreen(e){e.x=.5*($a.screenSetting.screenWidth-e.width),e.y=.5*($a.screenSetting.screenHeight-e.height)}static centerScreenForCenter(e){e.x=.5*$a.screenSetting.screenWidth,e.y=.5*$a.screenSetting.screenHeight}static setScreenSize(e){e.width=$a.screenSetting.screenWidth,e.height=$a.screenSetting.screenHeight}static getValueForPath(e,t,...i){return e.endsWith("()")?re.getFunResultForPath(e,t,...i):re.getFieldValueForPath(e,t)}static getFunResultForPath(e,t,...i){if(!e.endsWith("()"))return re.getFieldValueForPath(e,t);{e=e.replace("()","");let s=re.getFieldValueForPath(e,t);if(s){let a=e.split(/[\.\/]/);if(1==a.length)return 1==i.length?s.apply(t,i[0]):s.apply(t,i);{let e="",n="";for(let t=0;t<a.length-1;t++)e+=n+a[t],n=".";let r=re.getFieldValueForPath(e,t);return 1==i.length?s.apply(r,i[0]):s.apply(r,i)}}}}static getFieldValueForPath(e,t){t||(t=window)||(t=this);let i=e.split(/[\.\/]/),s=t;for(let e=0;e<i.length;e++){if(!s[i[e]])return null;s=s[i[e]]}return s}static setStringsSource(e){let t=fgui.TranslationHelper.strings={},i=e.getConfigList();for(let e=0;e<i.length;e++){let r=i[e],o=r.dict.getValue("name"),l=r.dict.getValue("value"),c=o.indexOf("-");if(null!=l&&-1!=c){var s=o.substr(0,c),a=o.substr(c+1),n=t[s];n||(n={},t[s]=n),n[a]=l}}}static setGray(e){if(e){if(!re.grayscaleFilters){var t=new Laya.ColorFilter(re.grayscaleMat);re.grayscaleFilters=[t]}e.displayObject.filters=re.grayscaleFilters}}static clearFilters(e){e&&(e.displayObject.filters=null)}static get saturationFilters(){return re._saturationFilters||(re._saturationFilters=[new Laya.ColorFilter(re.saturation)]),re._saturationFilters}static get saturationFilters2(){return re._saturationFilters2||(re._saturationFilters2=[new Laya.ColorFilter(re.saturation2)]),re._saturationFilters2}static get saturationFilters3(){return re._saturationFilters3||(re._saturationFilters3=[(new Laya.ColorFilter).adjustColor(0,-50,-100,0)]),re._saturationFilters3}static halfStaturation(e){e&&(e.displayObject.filters=re.saturationFilters)}static half2Staturation(e){e&&(e.displayObject.filters=re.saturationFilters2)}static half3Staturation(e){e&&(e.displayObject.filters=re.saturationFilters3)}static boundEffect(e,t=1e3){e.setPivot(.5,.5),e.setScale(.5,.5),Laya.Tween.to(e,{scaleX:1,scaleY:1},t,Laya.Ease.backOut,Laya.Handler.create(null,()=>{}),0,!0,!0)}}re.helpPoint=new Laya.Point,re.grayscaleMat=[.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,0,0,0,1,0],re.grayscaleFilters=null,re.normalFilters=null,re.saturation=[.5,0,0,0,0,0,.5,0,0,0,0,0,.5,0,0,0,0,0,1,0],re.saturation2=[.25,0,0,0,0,0,.25,0,0,0,0,0,.25,0,0,0,0,0,1,0];var oe,le,ce,he,ue,ge,me,de,pe,Se,Ce=Laya.Point,fe=Laya.Handler;class ye extends ee{constructor(){super(...arguments),this.sShowComplete=new Signal,this.sHideComplete=new Signal,this.menuIsCreated=!1,this.isDestoryed=!1,this.enableShowAnimation=!0,this.enableShowSignal=!0,this.enableHideSignal=!0,this._loadAssets=[],this._dynamicAssetsList=[],this.toPoint=new Ce,this.srcPoint=new Ce,this.sShowSubwindowComplete=new Signal,this.sHideSubwindowComplete=new Signal,this.subwindowDict=new Dictionary,this.subwindowStack=[],this.tabDict=new Dictionary,this.tabHistorys=[]}static async AsyncEnableOpen(){return Promise.resolve(!0)}isOpenSubOrTab(e){return this.menuParameter.openIndex==e}addAssetForFguiPackagename(e){this._loadAssets.push({url:e,type:f.FguiPackage})}addAssetForFguiComponent(e){let t=e.DependPackages;for(let e=0;e<t.length;e++)this.addAssetForFguiPackagename(t[e])}getLoadAssets(e,t){let i=this._loadAssets;for(let s=0;s<i.length;s++){let a=se.getAssetItemKey(i[s]);t.hasKey(a)||(e.push(i[s]),t.add(a,i[s]))}return e}unloadAssetForFguiPackagename(e){switch(e){case ae._ResImageUIV1:case ae.__ResFont:case ae.CommonBase:case ae.CommonGame:case ae.CommonFx:case ae.SystemModuleDialog:return}$a.asset.unloadFgui(e)}unloadAssetForFguiComponent(e){let t=e.DependPackages;for(let e=0;e<t.length;e++)this.unloadAssetForFguiPackagename(t[e])}unloadAssetFroAssetList(){for(let e=0;e<this._loadAssets.length;e++)this.unloadAssetForFguiPackagename(this._loadAssets[e].url)}addDynamicAsset(e){e&&this._dynamicAssetsList.push(e)}addDynmicAssetForAvatarAll(e){e.getAllAssset(this._dynamicAssetsList)}generateAssetsForDynmic(){this._dynamicAssetsList=[]}getLoadAssetsForDynamic(e,t){let i=this._dynamicAssetsList;for(let s=0;s<i.length;s++){let a=se.getAssetItemKey(i[s]);t.hasKey(a)||(e.push(i[s]),t.add(a,i[s]))}let s=this.subwindowDict.getValues();for(let i=0;i<s.length;i++)s[i].getLoadAssetsForDynamic(e,t);return e}onInit(){this.onMenuCreate(),super.onInit()}onMenuCreate(){this.setChildWindow(this.contentPane),this.callChildOnWindowInited(this.contentPane),this.menuIsCreated=!0,this.onMenuOpen(this.menuParameter)}setCloseBtnEvent(){this.contentPane&&this.contentPane.m_frame&&this.contentPane.m_frame.getChild("closeBtn")&&this.contentPane.m_frame.getChild("closeBtn").onClick(this,this.menuClose)}setBackBtnEvent(){this.contentPane&&this.contentPane.m_frame&&this.contentPane.m_frame.getChild("closeBtn")&&this.contentPane.m_frame.getChild("closeBtn").onClick(this,this.menuBack)}onMenuOpen(e){switch(this.enableShowSignal=!0,this.enableShowAnimation=!0,this.menuParameter=e,e.openType){case te.Subwindow:this.enableShowSignal=!1,this.enableShowAnimation=!1,this.openSubwindowByIndex(e.openIndex,!1,...e.args);break;case te.Tab:this.openTab(e.openIndex);break;default:$a.event.dispatch(ne.GameFrame_OpenMenu,this.menuId,e.openType)}}windowShow(){this.windowContainer?this.showOn(this.windowContainer):this.show()}menuShow(e){switch(this.menuParameter.openType){case te.Subwindow:this.contentPane||this.onInit();break;default:this.showOn(e)}}menuClose(){$a.menu.close(this.menuId)}menuBack(){$a.menu.back(this.menuId)}destory(){this.callChildOnWindowDestory(this.contentPane),this.onMenuDestory(),this.sShowComplete.removeAll(),this.sHideComplete.removeAll(),this.sShowSubwindowComplete.removeAll(),this.sHideSubwindowComplete.removeAll(),this.tabDict.clear();let e=this.subwindowDict.getValues();for(let t=0;t<e.length;t++){e[t].destory()}this.subwindowDict.clear(),this.contentPane&&(this.contentPane.dispose(),this.contentPane=null),this.unloadAssetFroAssetList(),super.dispose(),this.isDestoryed=!0}onMenuDestory(){}doShowAnimation(){this.onWindowWillShow(),1==this.openAnimation?(this.srcPoint.x=this.panel.x,this.srcPoint.y=this.panel.y,this.panel.setScale(.1,.1),this.calBuutonPos(),this.panel.setXY(this.toPoint.x,this.toPoint.y),Laya.Tween.to(this.panel,{scaleX:1,scaleY:1,x:this.srcPoint.x,y:this.srcPoint.y},300,Laya.Ease.quadOut,fe.create(this,()=>{this.onShown()}))):super.doShowAnimation()}get panel(){return this.contentPane.m_panel?this.contentPane.m_panel:this.contentPane}doHideAnimation(){this.onWindowWillHide(),1==this.closeAnimation?(this.panel.setScale(1,1),this.calBuutonPos(),Laya.Tween.to(this.panel,{scaleX:.1,scaleY:.1,x:this.toPoint.x,y:this.toPoint.y},300,Laya.Ease.quadOut,fe.create(this,()=>{this.panel.x=this.srcPoint.x,this.panel.y=this.srcPoint.y,this.hideImmediately()}))):super.doHideAnimation()}get openAnimation(){return null==this.menuConfig?0:this.menuConfig.openAnimation}get closeAnimation(){return null==this.menuConfig?0:this.menuConfig.closeAnimation}get menuConfig(){return this.menuId>0?$a.config.menu.getConfig(this.menuId):null}calBuutonPos(){}onShown(){this.enableHideSignal=!0,this.onShowComplete(),this.contentPane&&this.callChildOnWindowShow(this.contentPane)}onMenuClose(){this.hide();let e=this.subwindowDict.getValues();for(let t=0;t<e.length;t++){e[t].hide()}}onHide(){this.enableShowSignal=!0,this.onHideComplete(),this.clearTabHistorys(),this.contentPane&&this.callChildOnWindowHide(this.contentPane)}onShowComplete(){this.enableShowSignal&&this.sShowComplete.dispatch()}onHideComplete(){this.enableHideSignal&&this.sHideComplete.dispatch()}getSubwindow(e){return this.subwindowDict.getValue(e)}registerSubwindow(e){this.subwindowDict.add(e.subwindowIndex,e)}__onSubWindowClose(e){for(let t=this.subwindowStack.length-1;t>=0;t--)this.subwindowStack[t]==e&&this.subwindowStack.splice(t,1)}__getLastOpenSubWindow(e){for(let t=this.subwindowStack.length-1;t>=0;t--){let i=this.subwindowStack[t];if(!e||-1==e.indexOf(i))return i}return null}closeAllSubwindowSelf(e){let t=[];for(let e=this.subwindowStack.length-1;e>=0;e--)t.push(this.subwindowStack[e]);for(let i=0;i<t.length;i++){let s=t[i];e&&-1!=e.indexOf(s)||s.closeSelf()}}closeLastSubwindowSelf(){let e=this.__getLastOpenSubWindow();e&&e.closeSelf()}getLastMenuParameter(){let e=this.__getLastOpenSubWindow();return e?e.menuParameter:this.menuParameter}openSubwindow(e,t=!1,...i){e.__backSubWindow=this.__getLastOpenSubWindow([e]),this.menuParameter.openType=te.Subwindow,this.menuParameter.openIndex=e.subwindowIndex,this.menuParameter.args=i;let s={openType:this.menuParameter.openType,openIndex:this.menuParameter.openIndex,args:i,dontCloseOther:t};if(!t){let t={on:()=>{if(e.whenOpenCloseMainwindow&&(this.enableHideSignal=!1,this.hideImmediately()),e.whenOpenCloseOthersubwindow){let t=this.subwindowDict.getValues;for(let i=0;i<t.length;i++){let s=t[i];s!=e&&(s.hideImmediately(),this.__onSubWindowClose(s))}}this.sShowSubwindowComplete.dispatch()}};e.sShowComplete.addOnce(t.on,t)}let a=this.subwindowStack.indexOf(e);-1!=a&&this.subwindowStack.splice(a,1),this.subwindowStack.push(e),e.menuIsCreated?e.onMenuOpen(s):e.menuParameter=s,e.showOn(this.windowContainer),$a.event.dispatch(ne.GameFrame_OpenMenu,this.menuId,s.openType,s.openIndex)}openSubwindowByIndex(e,t=!1,...i){let s=this.getSubwindow(e);this.openSubwindow(s,t,...i)}onSubwindowBack(e){this.menuParameter.openType=te.None,this.menuParameter.openIndex=0,this.sShowComplete.addOnce(()=>{e.hide()},e),this.windowContainer.parent&&e.hide(),this.showOn(this.windowContainer),this.subwindowStack=[]}getTabDispyaObjects(e){if(this.tabDict.hasKey(e))return this.tabDict.getValue(e);let t=[];return this.tabDict.add(e,t),t}registerControllerTab(e,t=null){t||(t=this.contentPane);let i=t.numChildren;for(let s=0;s<i;s++){let i=t.getChildAt(s);if(i._gears&&i._gears.length>0)for(let t of i._gears)if(t&&t.controller==e&&t instanceof fgui.GearDisplay&&t.pages&&t.pages.length>0)for(let e of t.pages){let t=toInt(e);this.registerTab(t,i)}}}registerTab(e,t){this.getTabDispyaObjects(e).push(t)}setTabVisiable(e,t){let i=this.getTabDispyaObjects(e);for(let e=0;e<i.length;e++)t?this.callChildOnTabShow(i[e]):i[e].visible&&this.callChildOnTabHide(i[e]),i[e].visible=t}setOpenTab(e){this.menuParameter.openIndex=e;let t=this.tabDict.getKeys();for(let i=0;i<t.length;i++)t[i]!=e&&this.setTabVisiable(t[i],!1);this.setTabVisiable(e,!0),this.onOpenTab(e)}openTab(e){this.tabHistorys.push(e),this.setOpenTab(e),$a.event.dispatch(ne.GameFrame_OpenMenu,this.menuId,te.Tab,e)}onOpenTab(e){}backTab(){if(this.tabHistorys.length>0){let e;for(let t=this.tabHistorys.length-1;t>=0;t--)this.tabHistorys[t]==this.menuParameter.openIndex&&t>0&&this.tabHistorys[t-1]!=this.menuParameter.openIndex&&(e=this.tabHistorys[t-1]);void 0===e?this.menuBack():this.openTab(e)}}clearTabHistorys(){this.tabHistorys=[]}setChildWindow(e){re.setChildWindow(e,this)}callChildOnWindowInited(e){re.callChildOnWindowInited(e)}callChildOnWindowDestory(e){re.callChildOnWindowDestory(e)}callChildOnWindowShow(e){re.callChildOnWindowShow(e)}callChildOnWindowHide(e){re.callChildOnWindowHide(e)}callChildOnTabShow(e){re.callChildOnTabShow(e)}callChildOnTabHide(e){re.callChildOnTabHide(e)}}class we extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("ModuleLogin","LoginWindowUI")}constructFromXML(e){super.constructFromXML(e),this.m_Show=this.getController("Show"),this.m_txt_resVer=this.getChild("txt_resVer"),this.m_txt_gamever=this.getChild("txt_gamever"),this.m_screenBG=this.getChild("screenBG"),this.m_loginPanel=this.getChild("loginPanel"),this.m_wxPanel=this.getChild("wxPanel"),this.m_cdkPanel=this.getChild("cdkPanel"),this.m_panelCheckID=this.getChild("panelCheckID"),this.m_btnBulletin=this.getChild("btnBulletin"),this.m_panelBulletin=this.getChild("panelBulletin"),this.m_panelServer=this.getChild("panelServer")}}we.URL="ui://4698ugpknz0c0",we.DependPackages=["ModuleLogin","GameLaunch"],function(e){e[e.None=0]="None",e[e.Man=1]="Man",e[e.Woman=2]="Woman"}(oe||(oe={}));class Le{constructor(){this.language="",this.nickName="",this.avatarUrl="",this.gender=oe.None,this.country="",this.province="",this.city="",this.unionId="",this.openId="",this.sessionId="",this.sign=""}ToString(){return" UserInfo::<br/>NickName:"+this.nickName+",<br/>AvatarUrl:"+this.avatarUrl+",<br/>OpenID:"+this.openId+",<br/>City:"+this.city+",<br/>SessionID:"+this.sessionId}}class _e{constructor(){this.code=""}}class ve{}!function(e){e[e.RemoveRankList=0]="RemoveRankList",e[e.FetchFriendRankList=1]="FetchFriendRankList",e[e.SubmitScore=3]="SubmitScore",e[e.GameOverRank=4]="GameOverRank",e[e.FetchGroupFriendRankList=5]="FetchGroupFriendRankList",e[e.NotifyTime=6]="NotifyTime"}(le||(le={}));class Te{constructor(){this.m_stSystemInfo=null,this.m_stSdkUserInfo=null,this.m_stSdkLoginInfo=null,this.m_stSystemInfo=new ve,this.m_stSdkUserInfo=new Le,this.m_stSdkLoginInfo=new _e}static get platformWX(){return $a.browserSetting.isWeixinMinigame}get userInfo(){return this.m_stSdkUserInfo}get systemInfo(){return this.m_stSystemInfo}async Login(e=null,t="",i=1,s=1){return null}async Login2(e=null,t=""){return null}async CheckCdk(e,t){return null}async CheckIDCard(e,t,i){return null}async Areas(){return null}async newAndUseRole(e,t,i){return null}async useRole(e,t){return null}async FastLogin(e,t,i){return null}async GameDoSdkAuthAsync(){return null}async GameDoSdkLoginAsync(){return new Promise(e=>{e(this.m_stSdkLoginInfo)})}GetLaunchOptions(){return{}}async UserCheck(){return new Promise(e=>{e(!0)})}Share(e,t,i){return null}}class Ge extends Te{constructor(){super()}async Login(e=null,t="",i=1,s=1){net.config.channel="mine";let a=e;return isNullOrEmpty(a)&&(a=Ie.LocationUrlParam("name")||Ie.RandName(2,7)),new Promise(e=>{net.auth.mineLogin(a,t,a,s,i,function(t,i){if(t){net.logic.connect();let t=function(i){net.logic.gamerLoginS2C.off(t),e(i)};net.logic.gamerLoginS2C.on(t)}else e(i)})})}async Login2(e=null,t=""){net.config.channel="mine";let i=e;return isNullOrEmpty(i)&&(i=Ie.LocationUrlParam("name")||Ie.RandName(2,7)),new Promise(e=>{net.auth.mineLogin2(i,t,function(t,i){e(i)})})}async CheckCdk(e,t){return new Promise(i=>{net.auth.checkcdk(e,t,function(e,t){i(e?{}:t)})})}async CheckIDCard(e,t,i){return new Promise(s=>{net.auth.checkIDCard(e,t,i,function(e,t){s(e?{}:t)})})}async Areas(){return new Promise(e=>{net.auth.areas(function(t,i){t?e(i):this.Areas()})})}async newAndUseRole(e,t,i){return new Promise(s=>{net.auth.newAndUseRole(e,t,1,i,"",function(e,t){if(e){net.logic.connect();let e=function(t){net.logic.gamerLoginS2C.off(e),s(t)};net.logic.gamerLoginS2C.on(e)}else s(t)})})}async useRole(e,t){return new Promise(i=>{net.auth.useRole(e,t,function(e,t){if(e){net.logic.connect();let e=function(t){net.logic.gamerLoginS2C.off(e),i(t)};net.logic.gamerLoginS2C.on(e)}else i(t)})})}async FastLogin(e,t,i){return net.config.channel=t,new Promise(s=>{net.auth.fastLogin(e,t,i,function(e,t){if(e){net.logic.connect();let e=function(t){net.logic.gamerLoginS2C.off(e),s(t)};net.logic.gamerLoginS2C.on(e)}else s(t)})})}async GameDoSdkAuthAsync(){return this.m_stSdkUserInfo.nickName="ANTMINE-NICKNAME",this.m_stSdkUserInfo.avatarUrl="https://wx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKpmpnxfYeeUqFOlwK9x260xibs866I7NpmuHjgerLXgUk1B77HpIo2oZP0wAbnib4Lkc30N7yibYoww/132",this.m_stSdkUserInfo.gender=oe.Man,this.m_stSdkUserInfo.city="上海",this.m_stSdkUserInfo.country="中国",this.m_stSdkUserInfo.language="zh_CN",this.m_stSdkUserInfo.province="上海",new Promise(e=>{e(this.m_stSdkUserInfo)})}GetLaunchOptions(){return{key1:Ie.LocationUrlParam("key1"),key2:Ie.LocationUrlParam("key2")}}}class Pe extends Te{constructor(){super(),this.GetSystemInfo(),wx.setKeepScreenOn&&wx.setKeepScreenOn({keepScreenOn:!0,success:function(){console.log("常亮设置成功！")}})}async WXGetSdkAuthSetting(){return new Promise(e=>{wx.getSetting({success:function(t){console.info("success: wx.getSetting",t),e(t.authSetting["scope.userInfo"])},fail:function(t){console.log("fail: wx.getSetting",t.errMsg),e(!1)}})})}async UserCheck(){return await this.WXGetSdkAuthSetting()}async WXGetSdkUserInfo(){return new Promise(e=>{console.log("发起向微信获取用户信息"),wx.getUserInfo({success:t=>{console.info("success: wx.getUserInfo",t),e(t.userInfo)},fail:t=>{console.log("fail: wx.getUserInfo",t.errMsg),e(null)}})})}async WXAuth(){let e=await this.GameDoSdkAuthAsync();for(;!e;)e=await this.GameDoSdkAuthAsync();return e}async Login(e=null,t="",i=1,s=1){let a=await this.GameDoSdkLoginAsync();for(;!a;)a=await this.GameDoSdkLoginAsync();let n=this.m_stSdkLoginInfo.code;return net.config.channel="wechat",new Promise(e=>{net.auth.sdkLogin(n,"",this.m_stSdkUserInfo.nickName,s,i,null,function(t,i){if(t){net.logic.connect();let t=function(i){net.logic.gamerLoginS2C.off(t),e(i)};net.logic.gamerLoginS2C.on(t)}else e(i)})})}async Login2(e=null,t=""){let i=await this.GameDoSdkLoginAsync();for(;!i;)i=await this.GameDoSdkLoginAsync();let s=this.m_stSdkLoginInfo.code;return net.config.channel="wechat",new Promise(e=>{net.auth.sdkLogin2(s,"",function(t,i){e(i)})})}async CheckCdk(e,t){return new Promise(i=>{net.auth.checkcdk(e,t,function(e,t){i(e?{}:t)})})}async CheckIDCard(e,t,i){return new Promise(s=>{net.auth.checkIDCard(e,t,i,function(e,t){s(e?{}:t)})})}async Areas(){return new Promise(e=>{net.auth.areas(function(t,i){t?e(i):this.Areas()})})}async newAndUseRole(e,t,i){return t=this.m_stSdkLoginInfo.code,new Promise(s=>{net.auth.newAndUseRole(e,t,1,i,"",function(e,t){if(e){net.logic.connect();let e=function(t){net.logic.gamerLoginS2C.off(e),s(t)};net.logic.gamerLoginS2C.on(e)}else s(t)})})}async useRole(e,t){return new Promise(i=>{net.auth.useRole(e,t,function(e,t){if(e){net.logic.connect();let e=function(t){net.logic.gamerLoginS2C.off(e),i(t)};net.logic.gamerLoginS2C.on(e)}else i(t)})})}async GameDoSdkAuthAsync(){let e=await this.WXGetSdkAuthSetting()?await this.WXGetSdkUserInfo():await this.WXCreateWXUserButton();return e?(this.SetUserInfo(e),new Promise(e=>{e(this.m_stSdkUserInfo)})):new Promise(e=>{e(null)})}async GameDoSdkLoginAsync(){return console.log("发起登录微信 wx.login"),new Promise(e=>{wx.login({success:t=>{console.info("success: wx.login",t),this.m_stSdkLoginInfo.code=t.code,e(this.m_stSdkLoginInfo)},fail:t=>{console.info("fail: wx.login",t),e(null)}})})}async WXCreateWXUserButton(){let e=wx.createUserInfoButton({type:"text",lang:"zh_CN",text:"",style:{left:0,top:0,width:2e3,height:2e3,lineHeight:40,textAlign:"center",fontSize:16,borderRadius:4}});return e.show(),new Promise(t=>{e.onTap(function(i){i.userInfo?(console.log("按钮获取用户信息成功","wxLogin auth success"),e.hide(),t(i.userInfo)):(console.error("按钮获取用户信息失败"),t(null))})})}SetUserInfo(e){console.info("用户信息",e),this.m_stSdkUserInfo.language=e.language,this.m_stSdkUserInfo.nickName=e.nickName,this.m_stSdkUserInfo.avatarUrl=e.avatarUrl,this.m_stSdkUserInfo.gender=e.gender,this.m_stSdkUserInfo.country=e.country,this.m_stSdkUserInfo.province=e.province,this.m_stSdkUserInfo.city=e.city}GetSystemInfo(){let e=wx.getSystemInfoSync();return console.info("wx.getSystemInfoSync:",e),this.m_stSystemInfo.benchmarkLevel=e.benchmarkLevel,this.m_stSystemInfo.model=e.model,this.m_stSystemInfo.pixelRatio=e.pixelRatio,this.m_stSystemInfo.platform=e.platform,this.m_stSystemInfo.screenHeight=e.screenHeight,this.m_stSystemInfo.screenWidth=e.screenWidth,this.m_stSystemInfo.system=e.system,this.m_stSystemInfo.version=e.version,this.m_stSystemInfo.windowHeight=e.windowHeight,this.m_stSystemInfo.windowWidth=e.windowWidth,this.m_stSystemInfo.SDKVersion=e.SDKVersion,this.m_stSystemInfo}Share(e,t,i){return new Promise(s=>{wx.shareAppMessage({title:e,imageUrl:t,query:i,success:function(){console.error("share success!"),s(!0)},fail:function(){console.error("share fail!"),s(!1)}})})}GetLaunchOptions(){return wx.getLaunchOptionsSync().query}}class Ie{static LocationUrlParam(e){if(Engine.borwer.isWXGame)return null;var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),i=window.location.search.substr(1).match(t);return null!=i?unescape(i[2]):null}static RandName(e,t,i=!0){let s="",a=e,n=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"];i&&(a=Math.round(Math.random()*(t-e))+e);for(var r=0;r<a;r++){s+=n[Math.round(Math.random()*(n.length-1))]}return s}static get platform(){return Ie._insPlatform||(Engine.borwer.isWXGame&&Ie.enableWXLogin?Ie._insPlatform=new Pe:Ie._insPlatform=new Ge),Ie._insPlatform}}Ie.enableWXLogin=VersionConfig.IsEnableWx,Ie._insPlatform=null;class ke extends we{onWindowShow(){this.m_panelBulletin.m_bg.m_btn_Close.onClick(this,this.onCloseBulletin),this.m_panelServer.m_btnChange.onClick(this,this.onChangeServer),this.m_panelServer.m_btnStart.onClick(this,this.onStartGame),this.m_panelServer.m_bg.m_btn_Close.onClick(this,this.onReturnServer),this.m_panelCheckID.m_btnClose.onClick(this,this.onCloseCheckID),this.m_panelCheckID.m_btnClose.visible=!1,this.m_panelCheckID.m_btnMake.onClick(this,this.onMakeCheckID),this.m_loginPanel.m_btn_login.onClick(this,this.onClickLogin),this.m_loginPanel.m_btn_randomLogin.onClick(this,this.onClickRandomLogin),this.m_cdkPanel.m_btn_cdk.onClick(this,this.onClickCdk),$a.net.gamerLoginS2C.on(this.GamerLoginS2C,this),$a.event.add("SUCCESS_LOGIN",this.LoginSuccess,this),$a.event.add("LOGIN_CDK",this.LoginCdk,this),$a.event.add("ERROR_CDK",this.ErrorCdk,this),$a.event.add("ERROR_IDCARD",this.ErrorIdCard,this),$a.event.add("ERROR_AREAS",this.ErrorAreas,this),$a.event.add("SUCCESS_AREAS",this.SucessAreas,this),$a.event.add("INDULGE_END",this.IndulgeEnd,this),this.Init()}onWindowHide(){this.m_panelBulletin.m_bg.m_btn_Close.offClick(this,this.onCloseBulletin),this.m_panelServer.m_btnChange.offClick(this,this.onChangeServer),this.m_panelServer.m_btnStart.offClick(this,this.onStartGame),this.m_panelServer.m_bg.m_btn_Close.offClick(this,this.onReturnServer),this.m_panelCheckID.m_btnClose.onClick(this,this.onCloseCheckID),this.m_panelCheckID.m_btnMake.onClick(this,this.onMakeCheckID),this.m_loginPanel.m_btn_login.offClick(this,this.onClickLogin),this.m_loginPanel.m_btn_randomLogin.offClick(this,this.onClickRandomLogin),this.m_cdkPanel.m_btn_cdk.offClick(this,this.onClickCdk),$a.net.gamerLoginS2C.off(this.GamerLoginS2C,this),$a.event.remove("SUCCESS_LOGIN",this.LoginSuccess,this),$a.event.remove("LOGIN_CDK",this.LoginCdk,this),$a.event.remove("ERROR_CDK",this.ErrorCdk,this),$a.event.remove("ERROR_IDCARD",this.ErrorIdCard,this),$a.event.remove("ERROR_AREAS",this.ErrorAreas,this),$a.event.remove("SUCCESS_AREAS",this.SucessAreas,this),$a.event.remove("INDULGE_END",this.IndulgeEnd,this),this.Reset()}onCloseBulletin(){this.m_Show.selectedIndex=3}onChangeServer(){this.m_panelServer.m_Server.selectedIndex=1}onReturnServer(){this.m_panelServer.m_Server.selectedIndex=0}onCloseCheckID(){this.GetServer()}onMakeCheckID(){switch(this.m_panelCheckID.m_Type.selectedIndex){case 3:$a.moduleModel.login.isIndulge?this.m_Show.selectedIndex=0:this.GetServer();break;case 1:this.SendIDCard()}}onStartGame(){let e=this.m_panelServer.lastServer;if(!e)return void $a.system.toastText("尚未获取服务器列表！");$a.localStorage.server=e.id;let t=this.m_panelServer.GetRole(e.id);t?$a.sender.login.useRole(this.login_session,t.id):$a.sender.login.newAndUseRole(this.login_session,this.m_loginPanel.account,e.id)}onClickLogin(){this.m_loginPanel.password="123",Boolean(this.m_loginPanel.account)&&Boolean(this.m_loginPanel.password)?$a.sender.login.login(this.m_loginPanel.account,this.m_loginPanel.password,!0):$a.system.toastText("请输入账号和密码！")}onClickRandomLogin(){this.m_loginPanel.account=Ie.RandName(2,7),$a.sender.login.login(this.m_loginPanel.account,"123",!0)}onClickCancel(){this.m_Show.selectedIndex=0}onClickCdk(){let e=this.login_session,t=this.m_cdkPanel.cdk,i=this.m_loginPanel.account,s=this.m_loginPanel.password;$a.sender.login.check(e,t,i,s)}GamerLoginS2C(e){e.error}LoginSuccess(e,t){this.login_session=e,this.m_panelServer.SetRoles(t);let i=this.m_loginPanel.account;VersionConfig.IsOpenIDCard&&-1==["jjsg1","jjsg2","jjsg3","jjsg4","jjsg5","jjsg6"].indexOf(i)?this.SendIDCard():this.GetServer(),this.m_Show.selectedIndex=1}LoginCdk(e){this.login_session=e,this.m_Show.selectedIndex=4}ErrorCdk(e){switch(e){case 1017:$a.system.toastText("验证码错误！");break;case 1001:$a.system.toastText("验证时间超时！"),this.onStartGame()}}ErrorIdCard(e){switch(e){case 0:case 1023:""!=this.m_panelCheckID.m_labName.text&&""!=this.m_panelCheckID.m_labID.text&&$a.system.toastText("实名制验证成功！"),this.GetServer();break;case 1021:case 1022:case 1026:$a.system.toastText("实名制验证失败！");case 1025:this.m_Show.selectedIndex=5,this.m_panelCheckID.m_Type.selectedIndex=1;break;case 1024:this.m_Show.selectedIndex=5,this.m_panelCheckID.m_Type.selectedIndex=3}}ErrorAreas(){$a.system.toastText("拉取服务器错误！")}SucessAreas(e){e.sort((e,t)=>e.id-t.id),this.m_panelServer.Open(e)}IndulgeEnd(){if(5!=this.m_Show.selectedIndex){switch($a.moduleModel.login.error){case 1024:this.m_panelCheckID.m_Type.selectedIndex=0;break;default:this.m_panelCheckID.m_Type.selectedIndex=3}}}Init(){this.m_txt_gamever.text="GameVersion:"+$a.version.localAppVersionData.toString(),this.m_txt_resVer.text="ResVersion:"+$a.version.localResVersionData.toString(),this.StartGame()}Reset(){this.m_txt_gamever.text="",this.m_txt_resVer.text="",this.m_Show.selectedIndex=0}GetServer(){$a.sender.login.areas()}StartGame(){Ie.platform instanceof Pe&&VersionConfig.IsEnableWx?($a.sender.login.login("",""),this.m_Show.selectedIndex=3):this.m_Show.selectedIndex=0}SendIDCard(){let e=this.login_session,t=this.m_panelCheckID.m_labName.text,i=this.m_panelCheckID.m_labID.text;$a.sender.login.CheckIDCard(e,t,i)}}!function(e){e[e.Login=0]="Login",e[e.LoginGuest=1]="LoginGuest",e[e.Register=2]="Register",e[e.Agreement=3]="Agreement"}(ce||(ce={}));class Me extends ye{constructor(){super(),this.addAssetForFguiComponent(ke)}generateAssetsForDynmic(){super.generateAssetsForDynmic()}onMenuCreate(){let e=ke.createInstance();this.conent=e,this.contentPane=e,super.onMenuCreate()}onShowComplete(){super.onShowComplete()}onHideComplete(){super.onHideComplete()}}class De extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","WindowHomeUI")}constructFromXML(e){super.constructFromXML(e),this.m_Tab=this.getController("Tab"),this.m_bg=this.getChild("bg"),this.m_mainMenu=this.getChild("mainMenu"),this.m_chooseHero=this.getChild("chooseHero"),this.m_shop=this.getChild("shop"),this.m_chooseGameFormat=this.getChild("chooseGameFormat"),this.m_result=this.getChild("result")}}De.URL="ui://moe42ygrsqzy8a",De.DependPackages=["GameHome","GameLaunch"];class Fe extends De{}class Ae extends ye{constructor(){super(),this.addAssetForFguiComponent(Fe)}generateAssetsForDynmic(){super.generateAssetsForDynmic()}onMenuCreate(){let e=Fe.createInstance();this.conent=e,this.contentPane=e,super.onMenuCreate()}onShowComplete(){super.onShowComplete()}onHideComplete(){super.onHideComplete()}}class be extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","WindowWarUI")}constructFromXML(e){super.constructFromXML(e),this.m_bg=this.getChild("bg"),this.m_menuTopPanel=this.getChild("menuTopPanel"),this.m_container=this.getChild("container")}}be.URL="ui://moe42ygrsqzy9c",be.DependPackages=["GameHome","GameLaunch"],function(e){e[e.None=0]="None",e[e.Hero=1]="Hero",e[e.Trap=2]="Trap",e[e.Enemy=3]="Enemy",e[e.Boss=4]="Boss",e[e.Warrior=18]="Warrior",e[e.Health=5]="Health",e[e.Gold=6]="Gold",e[e.Armor=7]="Armor",e[e.Cannon=8]="Cannon",e[e.Barrel=9]="Barrel",e[e.Chest=10]="Chest",e[e.Bomb=11]="Bomb",e[e.Poison=12]="Poison",e[e.Horseshoe=13]="Horseshoe",e[e.Lightning=14]="Lightning",e[e.Multiplier=15]="Multiplier",e[e.Skull=16]="Skull"}(he||(he={})),function(e){e[e.Base=1]="Base",e[e.Bomb=2]="Bomb",e[e.Gun=3]="Gun",e[e.Key=4]="Key"}(ue||(ue={}));class Be{static degToRad(e){return e*Be.DEG_TO_RAD}static radToDeg(e){return e*Be.RAD_TO_DEG}static getNextPowerOfTwo(e){if(e>0&&0==(e&e-1))return e;for(var t=1;t<e;)t<<=1;return t}static isPowerOfTwo(e,t){return e>0&&0==(e&e-1)&&t>0&&0==(t&t-1)}static random(e,t){if(void 0===e&&(e=0),void 0===t&&(t=1),e===t)return e;if(e>t){var i=e;e=t,t=i}return Math.random()*(t-e)+e}static between(e,t){if(void 0===e&&(e=0),void 0===t&&(t=1),e===t)return e;if(e>t){var i=e;e=t,t=i}return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e}static fuzzyEqual(e,t,i){return void 0===i&&(i=1e-4),Math.abs(e-t)<i}static fuzzyLessThan(e,t,i){return void 0===i&&(i=1e-4),e<t+i}static fuzzyGreaterThan(e,t,i){return void 0===i&&(i=1e-4),e>t-i}static fuzzyCeil(e,t){return void 0===t&&(t=1e-4),Math.ceil(e-t)}static fuzzyFloor(e,t){return void 0===t&&(t=1e-4),Math.floor(e+t)}static average(){for(var e=0,t=arguments.length,i=0;i<t;i++)e+=+arguments[i];return e/t}static shear(e){return e%1}static snapTo(e,t,i){return void 0===i&&(i=0),0===t?e:(e-=i,i+(e=t*Math.round(e/t)))}static snapToFloor(e,t,i){return void 0===i&&(i=0),0===t?e:(e-=i,i+(e=t*Math.floor(e/t)))}static snapToCeil(e,t,i){return void 0===i&&(i=0),0===t?e:(e-=i,i+(e=t*Math.ceil(e/t)))}static roundTo(e,t,i){void 0===t&&(t=0),void 0===i&&(i=10);var s=Math.pow(i,-t);return Math.round(e*s)/s}static floorTo(e,t,i){void 0===t&&(t=0),void 0===i&&(i=10);var s=Math.pow(i,-t);return Math.floor(e*s)/s}static ceilTo(e,t,i){void 0===t&&(t=0),void 0===i&&(i=10);var s=Math.pow(i,-t);return Math.ceil(e*s)/s}static trunc(e){return isFinite(e)?e-e%1||(e<0?-0:0===e?e:0):e}static rotateToAngle(e,t,i){return void 0===i&&(i=.05),e===t?e:(Math.abs(t-e)<=i||Math.abs(t-e)>=Be.PI2-i?e=t:(Math.abs(t-e)>Math.PI&&(t<e?t+=Be.PI2:t-=Be.PI2),t>e?e+=i:t<e&&(e-=i)),e)}static getShortestAngle(e,t){var i=t-e;return 0===i?0:i-360*Math.floor((i- -180)/360)}static angleBetween(e,t,i,s){return Math.atan2(s-t,i-e)}static angleBetweenY(e,t,i,s){return Math.atan2(i-e,s-t)}static angleBetweenPoints(e,t){return Math.atan2(t.y-e.y,t.x-e.x)}static angleBetweenPointsY(e,t){return Math.atan2(t.x-e.x,t.y-e.y)}static reverseAngle(e){return this.normalizeAngle(e+Math.PI)}static normalizeAngle(e){return(e%=2*Math.PI)>=0?e:e+2*Math.PI}static maxAdd(e,t,i){return Math.min(e+t,i)}static minSub(e,t,i){return Math.max(e-t,i)}static wrap(e,t,i){var s=i-t;if(s<=0)return 0;var a=(e-t)%s;return a<0&&(a+=s),a+t}static wrapValue(e,t,i){return((e=Math.abs(e))+(t=Math.abs(t)))%Math.abs(i)}static isOdd(e){return!!(1&e)}static isEven(e){return!(1&e)}static min(){if(1===arguments.length&&"object"==typeof arguments[0])e=arguments[0];else var e=arguments;for(var t=1,i=0,s=e.length;t<s;t++)e[t]<e[i]&&(i=t);return e[i]}static max(){if(1===arguments.length&&"object"==typeof arguments[0])e=arguments[0];else var e=arguments;for(var t=1,i=0,s=e.length;t<s;t++)e[t]>e[i]&&(i=t);return e[i]}static minProperty(e){if(2===arguments.length&&"object"==typeof arguments[1])t=arguments[1];else var t=arguments.slice(1);for(var i=1,s=0,a=t.length;i<a;i++)t[i][e]<t[s][e]&&(s=i);return t[s][e]}static maxProperty(e){if(2===arguments.length&&"object"==typeof arguments[1])t=arguments[1];else var t=arguments.slice(1);for(var i=1,s=0,a=t.length;i<a;i++)t[i][e]>t[s][e]&&(s=i);return t[s][e]}static wrapAngle(e,t){return t?this.wrap(e,-Math.PI,Math.PI):this.wrap(e,-180,180)}static linearInterpolation(e,t){var i=e.length-1,s=i*t,a=Math.floor(s);return t<0?this.linear(e[0],e[1],s):t>1?this.linear(e[i],e[i-1],i-s):this.linear(e[a],e[a+1>i?i:a+1],s-a)}static bezierInterpolation(e,t){for(var i=0,s=e.length-1,a=0;a<=s;a++)i+=Math.pow(1-t,s-a)*Math.pow(t,a)*e[a]*this.bernstein(s,a);return i}static catmullRomInterpolation(e,t){var i=e.length-1,s=i*t,a=Math.floor(s);return e[0]===e[i]?(t<0&&(a=Math.floor(s=i*(1+t))),this.catmullRom(e[(a-1+i)%i],e[a],e[(a+1)%i],e[(a+2)%i],s-a)):t<0?e[0]-(this.catmullRom(e[0],e[0],e[1],e[1],-s)-e[0]):t>1?e[i]-(this.catmullRom(e[i],e[i],e[i-1],e[i-1],s-i)-e[i]):this.catmullRom(e[a?a-1:0],e[a],e[i<a+1?i:a+1],e[i<a+2?i:a+2],s-a)}static linear(e,t,i){return(t-e)*i+e}static bernstein(e,t){return this.factorial(e)/this.factorial(t)/this.factorial(e-t)}static factorial(e){if(0===e)return 1;for(var t=e;--e;)t*=e;return t}static catmullRom(e,t,i,s,a){var n=.5*(i-e),r=.5*(s-t),o=a*a;return(2*t-2*i+n+r)*(a*o)+(-3*t+3*i-2*n-r)*o+n*a+t}static difference(e,t){return Math.abs(e-t)}static roundAwayFromZero(e){return e>0?Math.ceil(e):Math.floor(e)}static sinCosGenerator(e,t,i,s){void 0===t&&(t=1),void 0===i&&(i=1),void 0===s&&(s=1);for(var a=t,n=i,r=s*Math.PI/e,o=[],l=[],c=0;c<e;c++)a+=(n-=a*r)*r,o[c]=n,l[c]=a;return{sin:l,cos:o,length:e}}static hypot(e,t){return Math.sqrt(e*e+t*t)}static distance(e,t,i,s){var a=e-i,n=t-s;return Math.sqrt(a*a+n*n)}static distanceSq(e,t,i,s){var a=e-i,n=t-s;return a*a+n*n}static distancePow(e,t,i,s,a){return void 0===a&&(a=2),Math.sqrt(Math.pow(i-e,a)+Math.pow(s-t,a))}static clamp(e,t,i){return e<t?t:i<e?i:e}static clampBottom(e,t){return e<t?t:e}static within(e,t,i){return Math.abs(e-t)<=i}static mapLinear(e,t,i,s,a){return s+(e-t)*(a-s)/(i-t)}static smoothstep(e,t,i){return(e=Math.max(0,Math.min(1,(e-t)/(i-t))))*e*(3-2*e)}static smootherstep(e,t,i){return(e=Math.max(0,Math.min(1,(e-t)/(i-t))))*e*e*(e*(6*e-15)+10)}static sign(e){return e<0?-1:e>0?1:0}static percent(e,t,i){return void 0===i&&(i=0),e>t||i>t?1:e<i||i>e?0:(e-i)/t}}Be.PI2=2*Math.PI,Be.HALF_PI=.5*Math.PI,Be.DEG_TO_RAD=Math.PI/180,Be.RAD_TO_DEG=180/Math.PI;class He{static getRandomItem(e,t,i){if(null===e)return null;void 0===t&&(t=0),void 0===i&&(i=e.length);var s=t+Math.floor(Math.random()*i);return void 0===e[s]?null:e[s]}static removeRandomItem(e,t,i){if(null==e)return null;void 0===t&&(t=0),void 0===i&&(i=e.length);var s=t+Math.floor(Math.random()*i);if(s<e.length){var a=e.splice(s,1);return void 0===a[0]?null:a[0]}return null}static remove(e,t,i){var s=e.length;if(!(t>=s||0===i)){null==i&&(i=1);for(var a=s-i,n=t;n<a;++n)e[n]=e[n+i];e.length=a}}static shuffle(e){for(var t=e.length-1;t>0;t--){var i=Math.floor(Math.random()*(t+1)),s=e[t];e[t]=e[i],e[i]=s}return e}static transposeMatrix(e){for(var t=e.length,i=e[0].length,s=new Array(i),a=0;a<i;a++){s[a]=new Array(t);for(var n=t-1;n>-1;n--)s[a][n]=e[n][a]}return s}static rotateMatrix(e,t){if("string"!=typeof t&&(t=(t%360+360)%360),90===t||-270===t||"rotateLeft"===t)e=(e=He.transposeMatrix(e)).reverse();else if(-90===t||270===t||"rotateRight"===t)e=e.reverse(),e=He.transposeMatrix(e);else if(180===Math.abs(t)||"rotate180"===t){for(var i=0;i<e.length;i++)e[i].reverse();e=e.reverse()}return e}static findClosest(e,t){if(!t.length)return NaN;if(1===t.length||e<t[0])return t[0];for(var i=1;t[i]<e;)i++;var s=t[i-1],a=i<t.length?t[i]:Number.POSITIVE_INFINITY;return a-e<=e-s?a:s}static rotateRight(e){var t=e.pop();return e.unshift(t),t}static rotateLeft(e){var t=e.shift();return e.push(t),t}static numberArray(e,t){null!=t||(t=e,e=0);for(var i=[],s=e;s<=t;s++)i.push(s);return i}static numberArrayStep(e,t,i){null!=e||(e=0),null!=t||(t=e,e=0),void 0===i&&(i=1);for(var s=[],a=Math.max(Be.roundAwayFromZero((t-e)/(i||1)),0),n=0;n<a;n++)s.push(e),e+=i;return s}}class Re{static isCardScoreTypeNegative(e){return e==he.Trap||e==he.Boss||e==he.Enemy||e==he.Poison}static isCardScoreTypePositive(e){return e==he.Health||e==he.Armor||e==he.Cannon||e==he.Horseshoe||e==he.Lightning||e==he.Skull}static getRandomFromChest(){return He.getRandomItem(Re.itemsFromChest)}static getRandomPowerUpFromBarrel(){return He.getRandomItem(Re.itemsFromBarrel)}static getRandomPowerUp(){return He.getRandomItem(Re.powerUps)}}Re.itemsFromChest=[he.Bomb,he.Poison,he.Horseshoe,he.Lightning,he.Multiplier,he.Skull],Re.itemsFromBarrel=[he.Health,he.Gold,he.Armor,he.Cannon],Re.powerUps=[he.Bomb,he.Barrel,he.Skull];class xe{static init(){this.currentHero==ue.Key&&(this.isKey=!0),this.isHeroAlive=!0,this.gameLevel=1,this.levelStep=10,this.turnsToBoss=this.levelStep,this.goldPerGame=0,this.movesAfterLastSpecialCard=0,this.cardCounter=0,this.isNeedCreateBoss=!1}static load(){$a.localStorage.hasItem(this.DATE_KEY,!1)&&(this.data=$a.localStorage.getJSON(this.DATE_KEY))}static save(){$a.localStorage.setJSON(this.DATE_KEY,this.data,!1)}static get gold(){return this.data.gold}static set gold(e){this.data.gold=e,this.save()}static get bestGoldPerGame(){return this.data.bestGoldPerGame}static set bestGoldPerGame(e){this.data.bestGoldPerGame=e,this.save()}static get isTutorialSeen(){return this.data.isTutorialSeen}static set isTutorialSeen(e){this.data.isTutorialSeen=e,this.save()}static get isTutorialStep1Done(){return this.data.isTutorialSeen}static set isTutorialStep1Done(e){this.data.isTutorialStep1Done=e,this.save()}static get isTutorialStep2Done(){return this.data.isTutorialStep2Done}static set isTutorialStep2Done(e){this.data.isTutorialStep2Done=e,this.save()}static get isTutorialChestSeen(){return this.data.isTutorialChestSeen}static set isTutorialChestSeen(e){this.data.isTutorialChestSeen=e,this.save()}static get isBombHero(){return this.data.isBombHero}static set isBombHero(e){this.data.isBombHero=e,this.save()}static get isKeyHero(){return this.data.isKeyHero}static set isKeyHero(e){this.data.isKeyHero=e,this.save()}static get isGunHero(){return this.data.isGunHero}static set isGunHero(e){this.data.isGunHero=e,this.save()}static get isFourXFour(){return this.data.isFourXFour}static set isFourXFour(e){this.data.isFourXFour=e,this.save()}static get isHorseshoe(){return this.data.isHorseshoe}static set isHorseshoe(e){this.data.isHorseshoe=e,this.save()}static get isHeart(){return this.data.isHeart}static set isHeart(e){this.data.isHeart=e,this.save()}static get isLuck(){return this.data.isLuck}static set isLuck(e){this.data.isLuck=e,this.save()}static get isKey(){return this.data.isKey}static set isKey(e){this.data.isKey=e,this.save()}static get lastAdvCoolDown(){return this.data.lastAdvCoolDown}static set lastAdvCoolDown(e){this.data.lastAdvCoolDown=e,this.save()}static get lastResultAdvCoolDown(){return this.data.lastResultAdvCoolDown}static set lastResultAdvCoolDown(e){this.data.lastResultAdvCoolDown=e,this.save()}static get lastItemWithAdv(){return this.data.lastItemWithAdv}static set lastItemWithAdv(e){this.data.lastItemWithAdv=e,this.save()}static addGold(e){this.goldPerGame+=e,this.bestGoldPerGame<this.goldPerGame&&(this.bestGoldPerGame=this.goldPerGame)}static resetShop(){this.isHeart=!1,this.isHorseshoe=!1,this.isLuck=!1,this.isKey=!1}static updateMovesAfterSpecialCard(e){e==he.Health||e==he.Armor?this.movesAfterLastSpecialCard=0:this.movesAfterLastSpecialCard++}static updateCardCounter(e){Re.isCardScoreTypeNegative(e)&&this.cardCounter--,Re.isCardScoreTypePositive(e)&&this.cardCounter++}static stepUpdate(){this.isBossShouldBeCreated()&&(this.isNeedCreateBoss=!0,this.levelStep++,this.turnsToBoss=this.levelStep+1)}static isBossShouldBeCreated(){return!this.isNeedCreateBoss&&1==this.turnsToBoss}static decreaseTurnsToBoss(){return this.turnsToBoss&&this.turnsToBoss++}}xe.DATE_KEY="GameStatus",xe.data={gold:0,bestGoldPerGame:0,isTutorialSeen:!1,isTutorialStep1Done:!1,isTutorialStep2Done:!1,isTutorialChestSeen:!1,isBombHero:!1,isKeyHero:!1,isGunHero:!1,isFourXFour:!1,isHorseshoe:!1,isHeart:!1,isLuck:!1,isKey:!1,lastAdvCoolDown:0,lastItemWithAdv:0,lastResultAdvCoolDown:0},xe.gameLevel=1,xe.levelStep=10,xe.turnsToBoss=10,xe.goldPerGame=0,xe.cardCounter=0,xe.isNeedCreateBoss=!1,xe.isNeedCreateChest=!1,xe.currentHero=ue.Base,xe.RowCount=3,xe.ColumnCount=3,xe.isHeroAlive=!1,xe.isGameEnd=!1,xe.isNeedCreateChestOnNextStep=!1,xe.movesAfterLastSpecialCard=0,window.GameStatus=xe;class Ne{static get instance(){return this._instance||(this._instance=new Ne),this._instance}playSound(e){var t=`res/sounds/mp3/${e}.mp3`;Laya.SoundManager.playSound(t,1)}}class Ue{}Ue.Click="click",Ue.Barrel1="barrel1",Ue.Barrel2="barrel2",Ue.Bomb="bomb",Ue.BossAppearance="bossAppearance",Ue.Buy="buy",Ue.Cannon="cannon",Ue.Card="card",Ue.ChestOpening="chestOpening",Ue.Coin="coin",Ue.CoinsBag="coinsBag",Ue.CoinsCounting="coinsCounting",Ue.Health1="health1",Ue.Health2="health2",Ue.HeroDies="heroDies",Ue.Hit1="hit1",Ue.Hit2="hit2",Ue.Horseshoe="horseshoe",Ue.Idol="idol",Ue.IncorrectClick="incorrectClick",Ue.Lighting="lighting",Ue.Melody="melody",Ue.PickLockFail="picklockFail",Ue.PickLockNeutral="picklockNeutral",Ue.PickLockSuccess="picklockSuccess",Ue.Poison="poison",Ue.Revive="revive",Ue.ShieldMetal="shieldMetal",Ue.ShieldWood="shieldWood",Ue.Skull="skull",Ue.Move01="move01",Ue.Move02="move02",Ue.Trap="trap";class Ee extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","FxShootLightningBig")}constructFromXML(e){super.constructFromXML(e),this.m_fx=this.getChild("fx")}}Ee.URL="ui://moe42ygrsqzyai",Ee.DependPackages=["GameHome"];class Oe extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","FxShootLightningSmall")}constructFromXML(e){super.constructFromXML(e),this.m_fx=this.getChild("fx")}}Oe.URL="ui://moe42ygrsqzyal",Oe.DependPackages=["GameHome"];class We extends Oe{static PoolGet(){var e=Pool.getItem(this.URL);return e||(e=We.createInstance()),e}PoolRecover(){Laya.timer.clearAll(this),Laya.Tween.clearAll(this.m_fx),this.removeFromParent(),this.m_fx.playing=!1,Pool.recover(We.URL,this)}Play(){this.m_fx.frame=0,this.m_fx.playing=!0,this.alpha=0;var e=d.PoolGet(),t=w.to(this.m_fx,{alpha:1},1);e.tweens.push(t);t=w.to(this,{alpha:0},1,null,null,102);return e.tweens.push(t),Laya.timer.once(103,this,this.PoolRecover),e.restart(),e}}class Ve{static getRandomIntInclusive(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e}static getRandomBool(){return Math.random()>.5}static shuffle(e){for(var t,i,s=e.length;0!==s;)i=Math.floor(Math.random()*s),t=e[s-=1],e[s]=e[i],e[i]=t;return e}}class Xe extends Ee{static PoolGet(){var e=Pool.getItem(this.URL);return e||(e=Xe.createInstance()),e}PoolRecover(){Laya.timer.clearAll(this),Laya.Tween.clearAll(this.m_fx),this.removeFromParent(),this.m_fx.playing=!1,Pool.recover(Xe.URL,this)}Play(){this.m_fx.frame=0,this.m_fx.playing=!0,this.m_fx.alpha=0,this.m_fx.y=20;var e=d.PoolGet(),t=w.to(this.m_fx,{alpha:1},50);e.tweens.push(t);t=w.to(this.m_fx,{y:-20},200,null,null,50);e.tweens.push(t);t=w.to(this.m_fx,{alpha:0},50,null,null,250);return e.tweens.push(t),e.onStart.addOnce(this.onStart,this),Laya.timer.once(300,this,this.PoolRecover),e}onStart(){if(this.parent){var e=We.PoolGet(),t=m.CardWidth/2-20,i=m.CardHeight/2-20;Ve.getRandomBool()&&(t=-t),Ve.getRandomBool()&&(i=-i),this.parent.addChild(e),e.setXY(this.x,this.y),e.m_fx.setXY(t,i),e.Play()}}}class qe{constructor(){this.type=he.None,this.isOnClickInitiated=!1,this.powerUpAmount=0,this.lifeAmount=0,this.initialLife=0,this.currentLife=0,this.isOpen=!1,this.canLightningStrike=!1,this.view=V.PoolGet(),this.reset()}static GetDefault(e){console.log("Card 创建空牌");var t=Pool.createByClass(qe);return t.game=e,t.type=he.None,t.SetEmpty(),t}static GetNew(e,t,i,s){console.log("Card 创建",t);var a=$a.config.card.getTypeLevelConfig(t,i);null==a&&console.error("没有找到卡牌配置",t,i,s);var n=Pool.createByClass(qe);return n.game=e,n.type=t,n.SetConfig(a),n.setScore(s),xe.updateCardCounter(t),xe.updateMovesAfterSpecialCard(t),n}poolRecover(){this.reset(),Pool.recoverByClass(this)}reset(){this.view.setXY(-100,-400),this.view.setScale(1,1),this.isOnClickInitiated=!1,this.powerUpAmount=0,this.lifeAmount=0,this.initialLife=0,this.currentLife=0,this.isOpen=!1,this.canLightningStrike=!1}SetEmpty(){this.SetConfig(null)}SetConfig(e){this.config=e,this.view.game=this.game,this.view.SetConfig(e),this.view.SetCard(this)}get isEmpty(){return this.type==he.None}get isHero(){return this.type==he.Hero}get isBoss(){return this.type==he.Boss}get isTrap(){return this.type==he.Trap}get level(){return this.config.level}stepUpdate(){if(this.isTrap){var e=this.changeStatus(),t=xe.currentHero==ue.Gun;this.lifeAmount=t?0:e?this.powerUpAmount:0,this.currentLife=this.lifeAmount,this.setHealthText()}this.type==he.Poison&&this.setPowerUp(this.powerUpAmount+1),this.type==he.Bomb&&this.setPowerUp(this.powerUpAmount-1),this.type==he.Barrel&&this.powerUpAmount>2&&this.setPowerUp(this.powerUpAmount-1)}changeStatus(){return this.isOpen?(this.view.setClose(),this.isOpen=!1):(this.view.setClose(),this.isOpen=!0),this.isOpen}getScore(){return this.type==he.Trap?this.lifeAmount:this.lifeAmount+this.powerUpAmount}getLife(){return this.lifeAmount}getPowerUp(){return this.powerUpAmount}multiplyScore(e){var t;return this.lifeAmount>0?(this.increaseLife(this.lifeAmount*e),(t=this.view.tweenLife()).onComplete.addOnce(()=>{this.increaseLife(e)},this),t):this.powerUpAmount>0?((t=this.view.tweenLife()).onComplete.addOnce(()=>{this.increasePowerUp(e)},this),t):null}increaseLife(e){this.setLife(this.lifeAmount*e),this.type===he.Trap&&this.setPowerUp(this.powerUpAmount*e)}increasePowerUp(e){this.setPowerUp(this.powerUpAmount*e)}reduceScoreInNSeconds(e,t){this.powerUpAmount>0&&(this.powerUpAmount=this.powerUpAmount-e,setTimeout(this.setPowerUpText.bind(this),t)),this.lifeAmount>0&&(this.lifeAmount=this.lifeAmount-e,setTimeout(this.setHealthText.bind(this),t))}increaseScoreInNSeconds(e,t){this.powerUpAmount>0&&(this.powerUpAmount=this.powerUpAmount+e,setTimeout(this.increasePowerUpTween.bind(this),t)),this.lifeAmount>0&&(this.lifeAmount=this.lifeAmount+e,setTimeout(this.increaseLifeTween.bind(this),t))}increasePowerUpTween(){this.view.tweenPowerUp().restart()}increaseLifeTween(){this.view.tweenLife().restart()}setScore(e){switch(this.type){case he.Boss:case he.Enemy:this.initialLife=e,this.currentLife=e,this.setLife(e);break;case he.Gold:case he.Health:case he.Armor:case he.Poison:case he.Cannon:case he.Lightning:case he.Multiplier:case he.Skull:case he.Barrel:this.setPowerUp(e);break;case he.Bomb:this.setLife(e),this.setPowerUp(10);break;case he.Trap:this.setPowerUp(e),this.setLife(e);break;case he.Chest:break;case he.Horseshoe:this.setPowerUp(1)}}setPowerUp(e){this.powerUpAmount=e,this.setPowerUpText()}setLife(e){null!=e&&(this.lifeAmount=e),this.setHealthText()}setHealthText(){this.view.setHealthText()}setPowerUpText(){this.view.setPowerUpText()}isNegative(){switch(this.type){case he.Trap:case he.Bomb:case he.Poison:return!0;case he.Health:case he.Gold:case he.Armor:case he.Cannon:case he.Chest:case he.Barrel:case he.Horseshoe:case he.Lightning:case he.Multiplier:case he.Skull:case he.Hero:return!1}}getGoldValue(){return this.initialLife}moveTo(e,t){return this.game.container.addChild(this.view),w.to(this.view,e,t)}setCoordinate(e){this.game.container.addChild(this.view),this.view.setXY(e.x,e.y)}open(){return null}endTurnAnimationStart(){this.view.setScale(0,m.FlipZoom)}startTurnAnimation(e,t){var i=L.turnAnimationStart(null,this.view);return i.onStart.add(this.playCardSoundInSeconds,this),i.onComplete.add(this.removeShapeFromStage,this),i.onComplete.add(e,t),i}playCardSoundInSeconds(){setTimeout(this.playCardSound.bind(this),50)}playCardSound(){Ne.instance.playSound(Ue.Card)}endTurnAnimationEnd(){this.isBoss&&Ne.instance.playSound(Ue.BossAppearance),this.view.scaleX=.1,L.turnAnimationEnd(null,this.view).restart()}getScaleTween(e,t){t||(t=d.PoolGet());var i=w.to(e,{scaleX:2.5,scaleY:2.5},200);return t.tweens.push(i),i=w.to(e,{scaleX:1,scaleY:1},200,null,null,200),t.tweens.push(i),t}removeChild(){var e=d.PoolGet(),t=w.to(this.view,{scaleX:1.1,scaleY:1.1},50);return e.tweens.push(t),t=w.to(this.view,{scaleX:1,scaleY:1},50,null,null,50),e.tweens.push(t),t=w.to(this.view,{scaleX:1.1,scaleY:1.1},50,null,null,100),e.tweens.push(t),t=w.to(this.view,{scaleX:0,scaleY:0},80,null,Laya.Handler.create(this,this.removeShapeFromStage),150),e.tweens.push(t),e}removeShapeFromStage(){console.log("Card 移除",this),this.view.removeFromParent(),this.delayPoolRecover()}delayPoolRecover(){Laya.timer.frameOnce(1,this,this.poolRecover)}getCenterX(){return this.view.x}getCenterY(){return this.view.y}runLightning(){var e=Xe.PoolGet();return e.setXY(this.getCenterX(),this.getCenterY()),this.game.container.addChild(e),e.Play()}}!function(e){e[e.Right=1]="Right",e[e.Down=2]="Down",e[e.Left=3]="Left",e[e.Up=4]="Up"}(ge||(ge={}));class Ke{constructor(e,t){this.x=0,this.y=0,this.x=e,this.y=t}}class je{constructor(e,t){this.column=0,this.row=0,this.column=e,this.row=t}getNewPosition(e){var t=new je(this.column,this.row);switch(e){case ge.Right:t.column++;break;case ge.Down:t.row++;break;case ge.Left:t.column--;break;case ge.Up:t.row--}return t}getPoint(){return new Ke(this.pointX,this.pointY)}get pointX(){return this.column*m.CardWidth+m.CardWidth/2+this.column*m.CardSpaceBetweenWidth}get pointY(){return this.row*m.CardHeight+m.CardHeight/2+this.row*m.CardSpaceBetweenHeight}}class ze{constructor(e=3,t=3,i){this.columnCount=3,this.rowCount=3,this.columnCount=e,this.rowCount=t,this.game=i,this.initArray()}initArray(){this.items=[];for(var e=0;e<this.rowCount;e++){for(var t=[],i=0;i<this.columnCount;i++)t.push(qe.GetDefault(this.game));this.items.push(t)}}getColumnCount(){return this.columnCount}getRowCount(){return this.rowCount}getAll(){for(var e=[],t=0;t<this.rowCount;t++)for(var i=0;i<this.columnCount;i++)e.push(this.items[i][t]);return e}findHeroCard(){for(var e,t=0;t<this.rowCount;t++)for(var i=0;i<this.columnCount;i++)if((e=this.items[i][t]).isHero)return e;return null}findHeroPosition(){for(var e=0;e<this.rowCount;e++)for(var t=0;t<this.columnCount;t++)if(this.items[t][e].isHero)return new je(t,e);return null}findPosition(e){for(var t=0;t<this.rowCount;t++)for(var i=0;i<this.columnCount;i++){if(this.items[i][t]==e)return new je(i,t)}return null}getPosition(e){for(var t=0;t<this.rowCount;t++)for(var i=0;i<this.columnCount;i++){var s=new je(i,t);if(e(this.get(s)))return s}return null}getPositions(e){for(var t=[],i=0;i<this.rowCount;i++)for(var s=0;s<this.columnCount;s++){var a=new je(s,i);e(this.get(a))&&t.push(a)}return t}get(e){return this.items[e.column][e.row]}set(e,t){this.items[e.column][e.row]=t}any(e){for(var t=0;t<this.rowCount;t++)for(var i=0;i<this.columnCount;i++){var s=new je(i,t);if(e(this.get(s)))return!0}return!1}isPositionValid(e){return e.column>=0&&e.column<this.columnCount&&e.row>=0&&e.row<this.rowCount}}!function(e){e[e.Random=1]="Random",e[e.AfterChest=2]="AfterChest",e[e.AfterBarrel=3]="AfterBarrel",e[e.Positive=4]="Positive"}(me||(me={})),function(e){e[e.Start=1]="Start",e[e.Center=2]="Center",e[e.End=3]="End"}(de||(de={}));class Ye{constructor(e,t,i){this.isHeroAlive=e,this.isChest=t,this.isMove=i}}class $e{}$e.Items1="Items1",$e.Items2="Items2",$e.Barrel="Barrel",$e.Background="background",$e.BackgroundMenu="backgroundMenu",$e.BackgroundPause="backgroundPause",$e.FamobiLogo="famobiLogo",$e.PauseLogo="PauseLogo",$e.Skull="skull",$e.SkullLight="skull_light",$e.MenuStar="menuStar",$e.MenuLogo="menuLogo",$e.Loading="loading",$e.ChoiceBackground="choiceBackground",$e.Lock="lock",$e.CoinPanel="coinPanel",$e.ThreeXThree="ThreeXThree",$e.FourXFour="FourXFour",$e.CardBackground="cardBackrounds",$e.NoAccess="noAccess",$e.Boss="boss",$e.Enemy="enemy",$e.Shield="shields",$e.CardLifeCircle="cardLifeCircle",$e.CardPowerUpCircle="cardPowerUpCircle",$e.SmallRing="smallRing",$e.BigRing="bigRing",$e.Hero="hero",$e.HeroBomb="heroBomb",$e.HeroKey="heroKey",$e.HeroGun="heroGun",$e.Health="health",$e.Coin="coin",$e.CoinBag="coinBag",$e.Cannon="cannon",$e.BombFlame="bomb_flame",$e.GameStatusPanel="menuPanel",$e.SmallBtnBackground="smallBtnBackground",$e.BigBtnBackground="bigBtnBackground",$e.SoundBtn="soundBtn",$e.PauseBtn="pauseBtn",$e.HomeBtn="homeBtn",$e.HomeSmallBtn="homeBtnSmall",$e.GroupBtn="groupBtn",$e.NextBtn="nextBtn",$e.PrevBtn="prevBtn",$e.PlayBtn="playBtn",$e.PlusBtn="plusBtn",$e.ResumeBtn="resumeBtn",$e.SettingsBtn="settingsBtn",$e.ControlBtn="controlBtn",$e.AdvPlayBtn="advPlayBtn",$e.IBtn="iBtn",$e.Shadow="shadow",$e.ShopItemBackground="shopItemBackground",$e.BigHeart="heartBig",$e.BigHorseshoe="horseshoeBig",$e.BigLuck="luckBig",$e.Key2="key2",$e.Key3="key3",$e.Key4="key4",$e.SmallHeart="heartSmall",$e.SmallHorseshoe="horseshoeSmall",$e.SmallLuck="luckSmall",$e.SmallKey="key_small",$e.Medal="medal",$e.Trap="trap",$e.Chest="chest",$e.LockBody="lockBody",$e.LockBridge="lockBridge",$e.LockSwitch="lockSwitch",$e.LockArrow="lockArrow",$e.LockRod="lockRod",$e.LockDoubleRod="lockDoubleRod",$e.LockBomb="lockBomb",$e.LockBombLamp="lockBombLamp",$e.LockFixedRod="lockFixedRod",$e.LockDoubleFixedRod="lockDoubleFixedRod",$e.MouseClick="mouse_click",$e.Core="core",$e.Smoke1="smoke_1",$e.Smoke2="smoke_2",$e.Smoke3="smoke_3",$e.Smoke4="smoke_4",$e.Smoke5="smoke_5",$e.Bomb="bomb",$e.Poison="poison",$e.Boom="boom",$e.Lightning="lightning",$e.BigLightning="lightning_1",$e.SmallLightning="lightning_2",$e.Multiplier2="multiplier2",$e.Multiplier3="multiplier3",$e.Dust="dust",$e.BarrelIronDot="barrelIronDot",$e.BarrelIron="barrelIron",$e.BarrelCircleDark="barrelCircleDark",$e.BarrelCircleLight="barrelCircleLight",$e.BarrelBoardRight1="barrelBoardRight1",$e.BarrelBoardRight2="barrelBoardRight2",$e.BarrelBoard1="barrelBoard1",$e.BarrelBoard2="barrelBoard2",$e.BarrelBoard3="barrelBoard3",$e.BarrelBoard4="barrelBoard4",$e.BarrelBoard5="barrelBoard5",$e.BarrelBoard6="barrelBoard6",$e.BarrelBoard7="barrelBoard7",$e.BarrelBoard8="barrelBoard8",$e.BarrelBoard9="barrelBoard9",$e.BarrelBoard10="barrelBoard10",$e.BarrelBoardStraight1="barrelBoardStraight1",$e.BarrelBoardStraight2="barrelBoardStraight2",$e.Enemy9Vane="enemy_9_vane",$e.Enemy9Pipe="enemy_9_pipe",$e.TurnsToBoss="turnsToBoss",$e.CheckMark="check",$e.Arm="arm",$e.MoreGames="more_games",$e.BigPlayBtn="bigPlayBtn",$e.AdvPanel="advPanel",$e.Smile="smile",$e.NoIcon="noIcon";class Je extends qe{constructor(){super(...arguments),this.armor=0,this.totalLife=0,this.needRunLightning=!1,this.lightningScore=0,this.needShoot=!1,this.shootScore=0,this.needShootMultiplier=!1,this.multiplierScore=0,this.needShootSkull=!1}fight(e){var t=new Ye(!0,!1,!0);switch(e.type){case he.Trap:e.getLife()>0&&xe.currentHero!=ue.Gun&&(Ne.instance.playSound(Ue.Trap),this.currentLife>e.getScore()?(this.currentLife-=e.getScore(),xe.addGold(e.getScore()),t.isHeroAlive=!0):t.isHeroAlive=!1);break;case he.Boss:case he.Enemy:Ne.instance.playSound(He.getRandomItem([Ue.Hit1,Ue.Hit2])),t.isHeroAlive=this.fightWithEnemy(e),t.isHeroAlive&&e.isBoss&&(t.isNeedIncreaseLifeByOneAfterBoss=!0);break;case he.Armor:e.getScore(),Ne.instance.playSound(Ue.ShieldWood),xe.currentHero==ue.Gun?this.needSmashLightning(e.getScore()):this.armor<e.getScore()?(this.armor=e.getScore(),this.setArmorFrame(e)):xe.currentHero==ue.Base&&this.armor++;break;case he.Gold:1==e.level?Ne.instance.playSound(Ue.Coin):Ne.instance.playSound(Ue.CoinsBag),xe.addGold(e.getScore());break;case he.Health:Ne.instance.playSound(He.getRandomItem([Ue.Health1,Ue.Health2])),this.currentLife+=e.getScore(),this.currentLife>this.totalLife&&(this.currentLife=this.totalLife);break;case he.Cannon:this.needShoot=!0,this.shootScore=e.getScore();break;case he.Chest:t.isChest=!0;break;case he.Poison:if(Ne.instance.playSound(Ue.Poison),xe.isLuck)return t.isHeroAlive=!0,this.useLuck(),t;if(e.getScore()>=this.currentLife)return t.isHeroAlive=!1,t;this.currentLife-=e.getScore();break;case he.Horseshoe:t.isNeedIncreaseLifeByOne=!0;break;case he.Bomb:break;case he.Lightning:this.needSmashLightning(e.getScore());break;case he.Multiplier:this.needShootMultiplier=!0,this.multiplierScore=e.getScore();break;case he.Skull:this.needShootSkull=!0;break;case he.Barrel:Ne.instance.playSound(He.getRandomItem([Ue.Barrel1,Ue.Barrel2])),t.isMove=!1}return this.setStatus(),t}needSmashLightning(e){this.needRunLightning=!0,this.lightningScore=e}setStatus(){this.setLife(),this.setArmor()}stepUpdate(){}getScore(){return this.currentLife+this.armor}reduceScoreInNSeconds(e,t){if(e<=this.armor)this.armor-=e;else{var i=e-this.armor;this.armor=0,this.currentLife-=i}setTimeout(this.setStatus.bind(this),t)}increaseScoreInNSeconds(e,t){this.totalLife-this.currentLife>e?this.currentLife=this.totalLife:this.currentLife+=e,setTimeout(this.setStatus.bind(this),t)}setShopItemsStatus(){}addSpriteByName(e,i,s,a){void 0===s&&(s=0),void 0===a&&(a=1);var n=38*i-.5*m.CardWidth,r=t.ShapeFactoryHelper.getShape(this.game,n,80,$e.Items1,e,0);r.name=e,r.angle=s,r.scale.set(a),this.view.add(r)}destroySpriteByName(e){var t=this.view.getByName(e);t&&t.destroy()}setArmor(){this.view.setArmor()}setArmorFrame(e){this.view.setArmor()}fightWithEnemy(e){if(e.getScore()>=this.armor+this.currentLife)return!1;if(e.getScore()<=this.armor)e.getScore()<this.armor&&xe.currentHero==ue.Base?this.armor-=1:this.armor-=e.getScore();else if(this.armor>0){var t=e.getScore()-this.armor;this.armor=0,this.currentLife-=t}else this.currentLife-=e.getScore();return xe.addGold(e.getScore()),!0}useHeart(){var e=this.view.getByName($e.SmallHeart);this.view.bringToTop(e),Ne.instance.playSound(Ue.Revive),e.animations.add("explode",Phaser.Animation.generateFrameNames($e.SmallHeart,0,16,"",4),30,!1,!1),this.game.add.tween(e.scale).to({x:1,y:1},100,null,!0).onComplete.add(function(){var t=e.animations.play("explode",60,!1,!1);t.onComplete.add(this.setStatus,this),t.onComplete.add(this.setShopItemsStatus,this)},this),this.currentLife=this.totalLife}increaseLifeByOneTween(){var e=this.view.tweenLife();return e.onStart.addOnce(this.playHorseshoe,this),e.onComplete.addOnce(this.increaseLifeByOne,this),e}playHorseshoe(){Ne.instance.playSound(Ue.Horseshoe)}increaseLifeByOne(){this.currentLife++,this.totalLife++,this.setLife()}useLuck(){xe.isLuck=!1,this.view.useLuck()}getGoldValue(){return 0}}class Qe extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","FxShootCannon")}constructFromXML(e){super.constructFromXML(e),this.m_core=this.getChild("core")}}Qe.URL="ui://moe42ygrsqzyaf",Qe.DependPackages=["GameHome"];class Ze extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","FxShootSmoke")}constructFromXML(e){super.constructFromXML(e),this.m_smoke=this.getChild("smoke")}}Ze.URL="ui://moe42ygrsqzyag",Ze.DependPackages=["GameHome"];class et extends Ze{static PoolGet(){var e=Pool.getItem(this.URL);return e||(e=et.createInstance()),e}PoolRecover(){Laya.timer.clearAll(this),this.removeFromParent(),this.m_smoke.playing=!1,Pool.recover(et.URL,this)}Play(){this.m_smoke.frame=0,this.m_smoke.playing=!0;var e=Math.floor(1e4/24);Laya.timer.once(e,this,this.PoolRecover)}}class tt extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","FxShootBoom")}constructFromXML(e){super.constructFromXML(e),this.m_boom=this.getChild("boom")}}tt.URL="ui://moe42ygrsqzyah",tt.DependPackages=["GameHome"];class it extends tt{static PoolGet(){var e=Pool.getItem(this.URL);return e||(e=it.createInstance()),e}PoolRecover(){Laya.timer.clearAll(this),this.removeFromParent(),this.m_boom.playing=!1,Pool.recover(it.URL,this)}Play(){this.m_boom.frame=0,this.m_boom.playing=!0;var e=Math.floor(750);Laya.timer.once(e,this,this.PoolRecover)}}class st extends Qe{constructor(){super(...arguments),this._tweenProgress=0}static PoolGet(){var e=Pool.getItem(this.URL);return e||(e=st.createInstance()),e}PoolRecover(){Laya.timer.clearAll(this),Laya.Tween.clearAll(this),this.removeFromParent(),Pool.recover(st.URL,this)}moveTo(e,t,i,s,a){this.setXY(e,t),this.tweenProgress=0;var n=d.PoolGet(),r=w.to(this,{x:i,y:s,tweenProgress:100},a,null,Laya.Handler.create(this,this.onMoveEnd));return n.tweens.push(r),n}get tweenProgress(){return this._tweenProgress}set tweenProgress(e){if(this._tweenProgress=e,Math.floor(e)%10&&this.parent){var t=et.PoolGet();this.parent.addChild(t),t.setXY(this.x,this.y),t.Play()}}onMoveEnd(){if(this.parent){var e=it.PoolGet();this.parent.addChild(e),e.setXY(this.x,this.y),e.Play()}Laya.timer.frameOnce(2,this,this.PoolRecover)}}class at extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","FxSkull")}constructFromXML(e){super.constructFromXML(e),this.m_fx=this.getChild("fx")}}at.URL="ui://moe42ygrsqzyam",at.DependPackages=["GameHome"];class nt extends at{constructor(){super(...arguments),this._tweenProgress=0}static PoolGet(){var e=Pool.getItem(this.URL);return e||(e=nt.createInstance()),e}PoolRecover(){Laya.timer.clearAll(this),Laya.Tween.clearAll(this),this.removeFromParent(),Pool.recover(nt.URL,this)}moveTo(e,t,i,s,a){this.setXY(e,t),this.tweenProgress=0;var n=d.PoolGet(),r=w.to(this,{x:i,y:s,tweenProgress:100},a,null,Laya.Handler.create(this,this.onMoveEnd));return n.tweens.push(r),n}get tweenProgress(){return this._tweenProgress}set tweenProgress(e){if(this._tweenProgress=e,Math.floor(e)%10&&this.parent){var t=et.PoolGet();this.parent.addChild(t),t.setXY(this.x,this.y),t.Play()}}onMoveEnd(){if(this.parent){var e=it.PoolGet();this.parent.addChild(e),e.setXY(this.x,this.y),e.Play()}Laya.timer.frameOnce(2,this,this.PoolRecover)}}class rt{constructor(e){this.step=1,this.game=e,this.cardFactory=e.cardFactory}initField(){var e=[],t=xe.ColumnCount,i=xe.RowCount,s=m.AnimationTime-(i*t==9?0:50);this.field=new ze(t,i,this.game);Ve.getRandomIntInclusive(1,5);for(var a=0;a<i;a++)for(var n=0;n<t;n++){var r=void 0,o=a===m.HeroStartRow-1,l=n===m.HeroStartColumn-1;o&&l?(r=this.cardFactory.getHero(),xe.isHeroAlive=!0,xe.isGameEnd=!1):r=this.getCardFromFactory();var c=new je(n,a),h=this.cardFactory.getDefault();e.push(this.moveAndSetWithAnimation(c,h,s)),e.push(this.replaceCardByPosition(c,r).setAnimationDuration(1))}return e}addShadow(){var e=this.game.add.graphics(0,0);e.name=m.Shadow,e.alpha=.5,e.beginFill(0),e.drawRect(2*-this.game.width,2*-this.game.height,4*this.game.width,4*this.game.height),this.cardFactory.container.add(e),this.cardFactory.container.bringToTop(this.cardFactory.container.getByName(m.Hero)),this.cardFactory.container.bringToTop(this.cardFactory.container.getByName(m.CardWithArm))}runArmTween(){var e=this.cardFactory.container.getByName(m.Shadow);e&&this.cardFactory.container.bringToTop(e),this.cardFactory.container.bringToTop(this.cardFactory.container.getByName(m.Hero)),this.cardFactory.container.bringToTop(this.cardFactory.container.getByName(m.CardWithMovingArm)),this.movingArm.alpha=1,this.movingArm.y=this.movingArmY;var t=this.movingArmY+150,i=this.game.add.tween(this.movingArm).to({y:this.movingArmY},200).to({y:t},600),s=this.game.add.tween(this.movingArm).to({y:t},200);i.onStart.add(function(){this.movingArm.changeFrame(1)},this),s.onStart.add(function(){this.movingArm.changeFrame(0)},this),s.onComplete.add(this.runArmTween,this),i.chain(s),i.start()}getChestCardFromFactory(){return this.cardFactory.getChestCard()}getCardFromFactory(e=me.Random,t=0){return this.cardFactory.getCard(e,t,this.getCardTypesOnTheTable())}getEnemyCardFromFactory(e){return this.cardFactory.getEnemy(e)}getHealsCardFromFactory(e){return this.cardFactory.getHealth(e)}getCardTypesOnTheTable(){return this.field.getAll().map(function(e){return e.type})}getCoinCardFromFactory(e){return this.cardFactory.getCoinCard(e)}getHero(){return this.field.get(this.getHeroPosition())}getHeroPosition(){return this.field.findHeroPosition()}getCardToFight(e){var t=this.field.findHeroPosition();if(null!=t){var i=t.getNewPosition(e);if(this.field.isPositionValid(i))return this.field.get(i)}return null}replaceCard(e,t,i=0){var s=this.field.getPosition(function(e){return e instanceof Je}),a=Array(),n=this.getCardFromFactory(t,i);return a.push(this.replaceCardByPosition(s.getNewPosition(e),n)),a}tutorialStep1(){var e=this;this.movingArm.animations.stop(),this.runArmTween(),xe.isTutorialStep1Done=!0,this.field.getAll().forEach(function(t){t instanceof qe&&t.view.name===m.CardWithMovingArm&&t.setOnClickEvent(e.onCardDown,e.onCardUp,e)})}tutorialStep2(e){xe.isTutorialStep2Done=!0,this.runAllCardsAroundHero(e)}tutorialStep3(e){this.runAllCardsAroundHero(e)}tutorialStep4(){var e=this.cardFactory.container.getByName(m.Shadow);this.game.add.tween(e).to({alpha:0},100).start().onComplete.add(function(){var i=this;e.destroy(),xe.isTutorialSeen=!0,this.field.getAll().forEach(function(e){e instanceof t.Card&&e.setOnClickEvent(i.onCardDown,i.onCardUp,i)})}.bind(this))}runAllCardsAroundHero(e){for(var i=0,s=[e.getNewPosition(ge.Left),e.getNewPosition(ge.Up),e.getNewPosition(ge.Right),e.getNewPosition(ge.Down)];i<s.length;i++){var a=s[i];if(this.field.isPositionValid(a)){var n=this.field.get(a);this.cardFactory.container.bringToTop(n.view),n instanceof t.Card&&n.setOnClickEvent(this.onCardDown,this.onCardUp,this)}}}move(e){var t=[],i=this.getHeroPosition(),s=i.getNewPosition(e),a=this.field.get(s);if(a.isEmpty)return t;this.isPlayMove(a)&&setTimeout(this.playMoveSound.bind(this),115);var n=this.field.get(i);if(a.type===he.Bomb)t.push(this.moveAndSetWithAnimation(i.getNewPosition(e),n,m.AnimationTime).setAnimationDuration(1)),t.push(this.moveAndSetWithAnimation(i,a,m.AnimationTime));else{a.isBoss&&xe.gameLevel++;var r=this.getCardPositionType(e,i),o=this.getCardToReplace(a),l=d.PoolGet();switch(l.tweens.push(a.removeChild()),t.push(l),r){case de.Center:switch(t.push(this.moveAndSetWithAnimation(i.getNewPosition(e),n,m.AnimationTime)),e){case ge.Left:if(0===i.row){var c=i.getNewPosition(ge.Down),h=this.moveAllLine(ge.Down,ge.Up,c,o);t.push(h)}else{c=i.getNewPosition(ge.Up),h=this.moveAllLine(ge.Up,ge.Down,c,o);t.push(h)}break;case ge.Right:if(i.row===this.field.getRowCount()-1){c=i.getNewPosition(ge.Up),h=this.moveAllLine(ge.Up,ge.Down,c,o);t.push(h)}else{c=i.getNewPosition(ge.Down),h=this.moveAllLine(ge.Down,ge.Up,c,o);t.push(h)}break;case ge.Up:if(i.column===this.field.getColumnCount()-1){c=i.getNewPosition(ge.Left),h=this.moveAllLine(ge.Left,ge.Right,c,o);t.push(h)}else{c=i.getNewPosition(ge.Right),h=this.moveAllLine(ge.Right,ge.Left,c,o);t.push(h)}break;case ge.Down:if(0===i.column){c=i.getNewPosition(ge.Right),h=this.moveAllLine(ge.Right,ge.Left,c,o);t.push(h)}else{c=i.getNewPosition(ge.Left),h=this.moveAllLine(ge.Left,ge.Right,c,o);t.push(h)}}break;case de.End:t.push(this.moveAllLine(this.getOppositeMoveType(e),e,i,o))}}return xe.isTutorialSeen||this.step++,t}isPlayMove(e){switch(e.type){case he.Boss:case he.Enemy:return!1;case he.Trap:return!e.isOpen;case he.Health:case he.Gold:case he.Armor:case he.Cannon:case he.Barrel:case he.Chest:case he.Bomb:case he.Poison:case he.Horseshoe:case he.Lightning:case he.Multiplier:case he.Skull:return!0}}playMoveSound(){Ne.instance.playSound(He.getRandomItem([Ue.Move01,Ue.Move02]))}getCardToReplace(e){return e.isBoss?this.getChestCardFromFactory():this.getCardFromFactory()}getCardToReplaceAfterSmash(e){var t;return e.isBoss&&(xe.isNeedCreateChestOnNextStep=!0),t=e.getGoldValue()>0?e.getGoldValue():e.getScore(),this.getCoinCardFromFactory(t)}getCardPositionType(e,t){switch(e){case ge.Right:return t.column==this.field.getColumnCount()-1?de.Start:0==t.column?de.Center:de.End;case ge.Down:return t.row==this.field.getRowCount()-1?de.Start:0==t.row?de.Center:de.End;case ge.Left:return 0==t.column?de.Start:t.column==this.field.getColumnCount()-1?de.Center:de.End;case ge.Up:return 0==t.row?de.Start:t.row==this.field.getRowCount()-1?de.Center:de.End}}removeAllChild(){var e=[];Ne.instance.playSound(Ue.HeroDies);for(var t=this.field.getAll(),i=0,s=t=Ve.shuffle(t);i<s.length;i++){var a=t[i],n=d.PoolGet();n.animationDuration=Ve.getRandomIntInclusive(50,150),n.tweens.push(a.removeChild()),e.push(n)}return e}isBossInTheField(){return this.field.any(function(e){return e.isBoss})}moveAllLine(e,t,i,s){for(var a=[],n=m.AnimationTime*m.AnimationMultiplier;this.field.isPositionValid(i);)a.push(this.moveAndSetWithAnimation(i.getNewPosition(t),this.field.get(i),m.AnimationTime).setAnimationDuration(n)),i=i.getNewPosition(e);var r=this.cardFactory.getDefault(),o=i.getNewPosition(t);return a.push(this.moveAndSetWithAnimation(o,r,m.AnimationTime)),a.push(this.replaceCardByPosition(o,s).setAnimationDuration(1)),a}stepUpdate(){for(var e=0,t=this.field.getAll();e<t.length;e++){t[e].stepUpdate()}}shootCannon(){Ne.instance.playSound(Ue.Cannon);var e=this.getHeroPosition(),t=this.field.get(e),i=[];return i.push(this.shootCannonInDirection(ge.Right,t,e)),i.push(this.shootCannonInDirection(ge.Left,t,e)),i.push(this.shootCannonInDirection(ge.Up,t,e)),i.push(this.shootCannonInDirection(ge.Down,t,e)),i}shootCannonInDirection(e,t,i){var s=[],a=i.getNewPosition(e);if(!this.field.isPositionValid(a))return s;var n=this.field.get(a);if(rt.canShootCard(n)){var r=this.shootCard(t.getCenterX(),t.getCenterY(),n.getCenterX(),n.getCenterY(),200);if(s.push(r),n.type===he.Cannon)n.increaseScoreInNSeconds(t.shootScore,400);else if(t.shootScore>=n.getScore()){var o=this.getCardToReplaceAfterSmash(n),l=this.replaceCardByPosition(a,o,!0).setAnimationDuration(1);l.setFirstDelay(400),s.push(l)}else n.reduceScoreInNSeconds(t.shootScore,400)}return s}shootCard(e,t,i,s,a){var n=st.PoolGet();this.game.container.addChild(n);var r=n.moveTo(e,t,s,s,a);return r.animationDuration=1,r}static canShootCard(e){if(e.isEmpty)return!1;switch(e.type){case he.Boss:case he.Enemy:case he.Trap:case he.Armor:case he.Health:case he.Poison:case he.Cannon:return!0;default:return!1}}smashBomb(){for(var e=this.field.getPositions(function(e){return e.type===he.Bomb&&e.getPowerUp()<=0}),t=[],i=0;i<e.length;i++){var s=e[i];Ne.instance.playSound(Ue.Bomb);var a=this.field.get(s);this.addBombExplosionAnimation(a.view.x,a.view.y,100);var n=this.getCardToReplaceAfterSmash(this.field.get(s)),r=this.replaceCardByPosition(s,n,!0);t.push(r);for(var o=a.getLife(),l=[ge.Up,ge.Down,ge.Left,ge.Right],c=0;c<l.length;c++){var h=l[c];if(t.push(this.smashBombInDirection(h,s,o)),!xe.isHeroAlive)return t}}return t}smashBombInDirection(e,t,i){var s=[],a=m.SmashDelay;for(t=t.getNewPosition(e);this.field.isPositionValid(t);){if(s.push(this.smashBombInPosition(t,a,i)),!xe.isHeroAlive)return s;a+=m.SmashDelay,t=t.getNewPosition(e)}return s}smashBombInPosition(e,t,i){var s=this.field.get(e),a=4==xe.RowCount?1e3:500;if(this.game.shake(m.ShakeIntensity,a),this.addBombExplosionAnimation(s.view.x,s.view.y,t),s.type==he.Chest)return[];if(s.isHero&&xe.currentHero==ue.Bomb)return[];if(i>=s.getScore()){if(!s.isHero){var n=this.getCardToReplaceAfterSmash(s);return[this.replaceCardByPosition(e,n,!0).setAnimationDuration(1)]}if(!xe.isHeart)return xe.isHeroAlive=!1,this.removeAllChild();var r=s;xe.isHeart=!1,this.keyboardManager.reset(),r.useHeart()}else s.reduceScoreInNSeconds(i,1.2*t);return[]}addBombExplosionAnimation(e,t,i){setTimeout(this.playBombExplosionAnimation.bind(this,e,t),i)}playBombExplosionAnimation(e,t){var i=it.PoolGet();i.setXY(e,t),this.game.container.addChild(i),i.Play()}replaceCardByPosition(e,t,i=!1){var s=d.PoolGet(),a=s.tweens,n=this.field.get(e);return i&&(n.type==he.Chest?a.push(n.open()):n.type==he.Barrel&&a.push(n.open())),n.isBoss&&xe.gameLevel++,this.moveAndSet(e,t),t.endTurnAnimationStart(),s.tweens.push(n.startTurnAnimation(t.endTurnAnimationEnd,t)),s}moveAndSet(e,t){this.field.set(e,t),t.setCoordinate(e.getPoint())}moveAndSetWithAnimation(e,t,i){var s=e.getPoint();this.field.set(e,t);var a=d.PoolGet();return a.tweens.push(t.moveTo(s,i)),a}getOppositeMoveType(e){switch(e){case ge.Up:return ge.Down;case ge.Down:return ge.Up;case ge.Left:return ge.Right;case ge.Right:return ge.Left}}shootLightning(){var e=this.getHeroPosition(),t=this.field.get(e),i=[],s=this.shootLightningInAllDirections(t.lightningScore,e,m.LightningDuration);return i.push(s),this.clearLightning(),i.length>0&&Ne.instance.playSound(Ue.Lighting),i}clearLightning(){this.field.getAll().forEach(function(e){e.canLightningStrike=!1})}shootLightningInAllDirections(e,t,i){var s=[];return s.push(this.shootLightningInDirection(ge.Right,e,t,i)),s.push(this.shootLightningInDirection(ge.Left,e,t,i)),s.push(this.shootLightningInDirection(ge.Up,e,t,i)),s.push(this.shootLightningInDirection(ge.Down,e,t,i)),s}shootLightningInDirection(e,t,i,s){var a=[],n=i.getNewPosition(e);if(!this.field.isPositionValid(n))return a;var r=this.field.get(n);if(r.isHero)return a;if(r.canLightningStrike)return a;if(rt.canShootLightning(r)){var o=s+m.LightningDuration,l=d.PoolGet();if(l.tweens.push(r.runLightning()),l.setAnimationDuration(m.LightningDuration),a.push(l),t>=r.getScore()){var c=this.getCardToReplaceAfterSmash(r);c.canLightningStrike=!0;var h=this.replaceCardByPosition(n,c,!0).setAnimationDuration(1);h.setFirstDelay(2*o),a.push(h)}else r.reduceScoreInNSeconds(t,2*o);r.canLightningStrike=!1,a.push(this.shootLightningInAllDirections(t,n,o))}return a}static canShootLightning(e){switch(e.type){case he.Boss:case he.Enemy:case he.Trap:return!0;default:return!1}}shootMultiplier(){Ne.instance.playSound(Ue.Idol);var e=this.getHeroPosition(),t=this.field.get(e),i=[];return i.push(this.shootMultiplierInDirection(ge.Right,t.multiplierScore,e)),i.push(this.shootMultiplierInDirection(ge.Left,t.multiplierScore,e)),i.push(this.shootMultiplierInDirection(ge.Up,t.multiplierScore,e)),i.push(this.shootMultiplierInDirection(ge.Down,t.multiplierScore,e)),i}shootSkull(){Ne.instance.playSound(Ue.Skull);for(var e=this.getHeroPosition().getPoint(),t=this.field.getPositions(function(e){return!e.isHero}),i=[],s=0;s<t.length;s++){var a=t[s],n=a.getPoint();i.push(this.shootSkullInCoordinate(e.x,e.y,n.x,n.y,300));var r=this.getCardToReplaceAfterSmash(this.field.get(a)),o=this.replaceCardByPosition(a,r,!0).setAnimationDuration(1);o.setFirstDelay(350),i.push(o)}return i}shootSkullInCoordinate(e,t,i,s,a){var n=nt.PoolGet(),r=n.moveTo(e,t,i,s,a);return this.game.container.addChild(n),r.animationDuration=1,r}shootMultiplierInDirection(e,t,i){var s=[],a=i.getNewPosition(e);if(!this.field.isPositionValid(a))return s;var n=this.field.get(a);if(rt.canMultiply(n.type,n.getScore())){var r=n.multiplyScore(t);if(!r)return s;r.setAnimationDuration(1),s.push(r)}return s}static canMultiply(e,t){switch(e){case he.Armor:case he.Bomb:case he.Cannon:case he.Gold:case he.Health:case he.Lightning:case he.Poison:case he.Boss:case he.Enemy:case he.Barrel:return!0;case he.Trap:return t>0;case he.Multiplier:case he.Horseshoe:case he.Chest:case he.Skull:return!1}}stopAllAnimations(){for(var e=0,i=this.field.getAll();e<i.length;e++)i[e].view.children.filter(function(e){return e instanceof t.SpriteAnimationBase}).forEach(function(e){e.stopAnimation()})}playAllAnimations(){for(var e=0,i=this.field.getAll();e<i.length;e++)i[e].view.children.filter(function(e){return e instanceof t.SpriteAnimationBase}).forEach(function(e){e.playAnimation()})}replaceAllNegativeCards(){for(var e=[],i=0,s=this.field.getPositions(function(e){return!(e instanceof t.Hero)});i<s.length;i++){var a=s[i];if(this.field.get(a).isNegative()){var n=this.getCardFromFactory(t.CardGenerationType.Positive),r=this.replaceCardByPosition(a,n,!0).setAnimationDuration(1);r.tweens[0].delay(200),e.push(r)}}return e}smashHero(e){var t=this.getHero();this.addBombExplosionAnimation(t.getCenterX(),t.getCenterY(),e)}}class ot{}ot.MVMouseClick="MVMouseClick";class lt{constructor(){this._isInstalled=!1,this._lastTime=0,this.gap=100}install(){this._isInstalled||(this._isInstalled=!0,Laya.stage.on(Laya.Event.MOUSE_DOWN,this,this.onMouseDown))}uninstall(){Laya.stage.off(Laya.Event.MOUSE_DOWN,this,this.onMouseDown)}onMouseDown(e){if(ct.showCount<10&&Laya.timer.currTimer-this._lastTime>this.gap){let t=ct.poolGet();t.setXY(e.stageX,e.stageY),t.show(),this._lastTime=Laya.timer.currTimer}}}class ct{constructor(){this.halfWidth=100,this.halfHeight=100,this.fx=fgui.UIPackage.createObject(ae.GameHome,ot.MVMouseClick),this.fx.displayObject.blendMode=Laya.BlendMode.ADD,this.halfWidth=this.fx.width>>1,this.halfHeight=this.fx.height>>1}show(){ct.showCount++,this.fx.setPlaySettings(0,-1,1,-1,Laya.Handler.create(this,this.hide,null,!0)),Z.floatMsg.addChild(this.fx)}hide(){this.fx.removeFromParent(),this.poolRecover(),ct.showCount--}setXY(e,t){e-=this.halfWidth,t-=this.halfHeight,this.fx.setXY(e,t)}poolRecover(){ct._poolRecover(this)}static poolGet(){let e;return e=ct.pool.length>0?ct.pool.pop():new ct}static _poolRecover(e){-1==this.pool.indexOf(e)&&this.pool.push(e)}}ct.showCount=0,ct.pool=[];class ht{constructor(){this.items={},this.count=0}ContainsKey(e){return this.items.hasOwnProperty(e)}Count(){return this.count}Add(e,t){this.items.hasOwnProperty(e)||this.count++,this.items[e]=t}Remove(e){var t=this.items[e];return delete this.items[e],this.count--,t}Item(e){return this.items[e]}Keys(){var e=[];for(var t in this.items)this.items.hasOwnProperty(t)&&e.push(t);return e}Values(){var e=[];for(var t in this.items)this.items.hasOwnProperty(t)&&e.push(this.items[t]);return e}}class ut{constructor(e=.2,t=.2,i=!1){this.status=new ht,this.initialStatus=new ht,this.updateVal=.2,this.step=.2,this.resetToZero=!1,this.updateVal=e,this.step=t,this.resetToZero=i}fillBasket(e,t){for(var i=e;i<=t;i++){var s=3-(i-1)*this.step;this.initialStatus.ContainsKey(i.toString())||(this.initialStatus.Add(i.toString(),s),this.status.Add(i.toString(),s))}}fillBasketWithStep(e,t,i,s){this.fillBasket(e,Be.clamp(t+Math.floor(xe.gameLevel/i),e,s))}getFromBasket(){for(var e=this.status.Values().reduce(function(e,t){return e+t}),t=Math.random()*e,i=0,s=0,a=this.status.Keys();s<a.length;s++){var n=a[s],r=this.status.Item(n);if(t>i&&t<r+i)return this.removeFromBasket(n),n;i+=r}throw new Error("Item not found in the basked")}removeFromBasket(e){this.status.Keys().forEach(t=>{t===e?this.resetToZero?this.status.Add(e,0):this.status.Add(e,this.initialStatus.Item(e)):this.status.Add(t,this.status.Item(t)+this.updateVal)})}static AfterChestBasket(){var e=new ut(.5,.2,!0);return e.add(he.Horseshoe.toString(),1),e.add(he.Bomb.toString(),1),e.add(he.Lightning.toString(),1),e.add(he.Skull.toString(),1),e.add(he.Multiplier.toString(),1),e}add(e,t){this.status.Add(e,t),this.initialStatus.Add(e,t)}print(e){this.status.Values().reduce(function(e,t){return e+t});for(var t=0,i=this.status.Keys();t<i.length;t++){var s=i[t];this.status.Item(s),this.initialStatus.Item(s)}console.groupEnd()}}class gt{static reset(){this.PositiveCardProbability=0,this.CurrentPositiveCardProbability=0,this.ChanceOfNegativeFromBox=0,this.ChanceOfPositiveFromBox=0}}gt.PositiveCardProbability=0,gt.CurrentPositiveCardProbability=0,gt.ChanceOfNegativeFromBox=0,gt.ChanceOfPositiveFromBox=0;class mt{constructor(e){this.movesAfterLastSpecialCard=0,this.healthBasket=new ut,this.armorBasket=new ut,this.cannonBasket=new ut,this.enemyBasket=new ut,this.goldBasket=new ut,this.chestBasket=ut.AfterChestBasket(),this.game=e,this.container=e.container}getDefault(){return qe.GetDefault(this.game)}getHero(){var e=$a.config.card.getTypeLevelConfig(he.Hero,xe.currentHero),t=new Je;return t.game=this.game,t.type=he.Hero,t.SetConfig(e),t.setShopItemsStatus(),t.totalLife=10,t.currentLife=10,t.armor=0,xe.isHorseshoe&&(t.totalLife+=1,t.currentLife+=1),t.setStatus(),this.movesAfterLastSpecialCard++,t}getCard(e=me.Random,t,i){return console.log("随机生成卡牌","cardGenerationType=",e,"score=",t,"cardTypeList=",i),xe.isNeedCreateBoss&&e==me.Random?(xe.isNeedCreateBoss=!1,this.getBoss()):xe.isNeedCreateChest&&e==me.Random?(xe.isNeedCreateChest=!1,this.getChestCard()):this.generateCardType(e,i)==u.Warrior?this.getEnemy(t):this.getPowerUp(e,t,i)}getHealth(e){var t=he.Health,i=1;return e<=5&&(i=2),qe.GetNew(this.game,t,i,e)}generateCardType(e,t){if(e==me.AfterBarrel&&xe.currentHero==ue.Key)return u.PowerUp;if(e==me.AfterChest||e==me.Positive)return u.PowerUp;if(e==me.AfterBarrel&&Math.random()<.75)return u.PowerUp;if(gt.reset(),xe.cardCounter>2){var i=Math.random();if(gt.ChanceOfNegativeFromBox=i,i<.8)return u.Warrior}if(xe.cardCounter<-3){var s=Math.random();if(gt.ChanceOfPositiveFromBox=s,s<.8)return u.PowerUp}return mt.isShouldBePositiveCard(t)?u.PowerUp:u.Warrior}static isShouldBePositiveCard(e){var t=e.filter(Re.isCardScoreTypePositive).length,i=e.filter(Re.isCardScoreTypeNegative).length;if(!xe.isFourXFour&&Math.random()<.85&&t<=1)return Math.random()<.8;if(xe.isFourXFour&&Math.random()<.85&&t<=2)return Math.random()<.8;var s=Math.min(.35,.4-.01*xe.levelStep),a=i*(xe.isFourXFour?.02:.03),n=Be.clamp(s+a,.2,.75),r=Math.random();return gt.PositiveCardProbability=n,gt.CurrentPositiveCardProbability=r,r<n}getPowerUp(e,t,i){var s=this.generatePowerUpType(e,i);t=this.generateCardScore(s,t);return qe.GetNew(this.game,s,1,t)}generateCardScore(e,t=0){if(0==t)switch(e){case he.Armor:this.armorBasket.fillBasketWithStep(1,4,3,10),t=Number(this.armorBasket.getFromBasket());break;case he.Health:this.healthBasket.fillBasketWithStep(1,4,3,10),t=Number(this.healthBasket.getFromBasket());break;case he.Cannon:this.cannonBasket.fillBasketWithStep(1,1,3,10),t=Number(this.cannonBasket.getFromBasket()),xe.currentHero==ue.Bomb&&(t+=2);break;case he.Barrel:t=this.generateScore(2,4,3,10);break;case he.Poison:var i=1+Math.ceil(xe.gameLevel/2);t=i>10?10:i;break;case he.Lightning:t=this.generateScore(1,4,3,10);break;case he.Gold:this.goldBasket.fillBasketWithStep(1,4,2,1e3),t=Number(this.goldBasket.getFromBasket());break;default:t=this.game.rnd.integerInRange(1,5)}return e===he.Bomb&&(t=this.game.rnd.integerInRange(1,4+Math.ceil(xe.gameLevel/2)))>10&&(t=10),e===he.Multiplier&&(t=2),t}generateScore(e,t,i,s){var a=t+Math.ceil(xe.gameLevel/i),n=this.game.rnd.integerInRange(e,a);return Be.clamp(n,e,s)}getEnemy(e){var t=this.generateEnemyPower(e);return m.IsDev&&this.enemyBasket.print("Enemy"),0==e&&(e=t,xe.gameLevel>10&&(e+=Math.floor((xe.gameLevel-10)/2))),0==t?this.getTrap(e+1):this.getWarrior(t,e)}getTrap(e){return qe.GetNew(this.game,he.Trap,1,e)}getWarrior(e,t){return qe.GetNew(this.game,he.Enemy,e,t)}static getTrapScore(){return xe.currentHero==ue.Gun?0:1+Ve.getRandomIntInclusive(0,Math.ceil(xe.gameLevel/4))}getBoss(){var e=mt.generateBossPower(),t=8+xe.gameLevel;return qe.GetNew(this.game,he.Boss,e,t)}getChestCard(){return qe.GetNew(this.game,he.Chest,1,0)}getCoinCard(e){var t=he.Gold;0===e&&(e=this.generateCardScore(t));var i=e<6?1:2;return qe.GetNew(this.game,t,i,e)}static generateBossPower(){return Ve.getRandomIntInclusive(1,3)}generatePowerUpType(e,t){return e==me.AfterChest?this.generatePowerUpTypeFromChest():e==me.AfterBarrel?mt.generatePowerUpTypeFromBarrel(t):mt.generatePowerUpCardScoreType(t)}generatePowerUpTypeFromChest(){return Number(this.chestBasket.getFromBasket())}static generatePowerUpTypeFromBarrel(e){return mt.generateFromBasket(e,Re.getRandomPowerUpFromBarrel,this.maxPowerUpNumber())}static generatePowerUpCardScoreType(e){return mt.generateFromBasket(e,Re.getRandomPowerUp,this.maxPowerUpNumber())}static generateFromBasket(e,t,i){for(var s,a=e=>e===s,n=0;n<10&&(s=t(),!(e.filter(a).length<i));n++);return s}static maxPowerUpNumber(){return Ve.getRandomIntInclusive(1,2)}generateEnemyPower(e){if(this.enemyBasket.fillBasketWithStep(0,4,2,9),0==e)return Number(this.enemyBasket.getFromBasket());var t=Be.clamp(e,0,9);return this.enemyBasket.removeFromBasket(t.toString()),t}}class dt{constructor(e=[]){this.c=1,this.s0=0,this.s1=0,this.s2=0,"string"==typeof e?this.state(e):this.sow(e)}rnd(){var e=2091639*this.s0+2.3283064365386963e-10*this.c;return this.c=0|e,this.s0=this.s1,this.s1=this.s2,this.s2=e-this.c,this.s2}sow(e){if(this.s0=this.hash(" "),this.s1=this.hash(this.s0),this.s2=this.hash(this.s1),this.c=1,e)for(var t=0;t<e.length&&null!=e[t];t++){var i=e[t];this.s0-=this.hash(i),this.s0+=~~(this.s0<0),this.s1-=this.hash(i),this.s1+=~~(this.s1<0),this.s2-=this.hash(i),this.s2+=~~(this.s2<0)}}hash(e){var t,i,s;for(s=4022871197,e=e.toString(),i=0;i<e.length;i++)t=.02519603282416938*(s+=e.charCodeAt(i)),t-=s=t>>>0,s=(t*=s)>>>0,s+=4294967296*(t-=s);return 2.3283064365386963e-10*(s>>>0)}integer(){return 4294967296*this.rnd.apply(this)}frac(){return this.rnd.apply(this)+1.1102230246251565e-16*(2097152*this.rnd.apply(this)|0)}real(){return this.integer()+this.frac()}integerInRange(e,t){return Math.floor(this.realInRange(0,t-e+1)+e)}between(e,t){return this.integerInRange(e,t)}realInRange(e,t){return this.frac()*(t-e)+e}normal(){return 1-2*this.frac()}uuid(){for(var e=0,t="";e++<36;t+=~e%5|3*e&4?(15^e?8^this.frac()*(20^e?16:4):4).toString(16):"-");return t}pick(e){return e[this.integerInRange(0,e.length-1)]}sign(){return this.pick([-1,1])}weightedPick(e){return e[~~(Math.pow(this.frac(),2)*(e.length-1)+.5)]}timestamp(e,t){return this.realInRange(e||9466848e5,t||1577862e6)}angle(){return this.integerInRange(-180,180)}state(e){return"string"==typeof e&&e.match(/^!rnd/)&&(e=e.split(","),this.c=parseFloat(e[1]),this.s0=parseFloat(e[2]),this.s1=parseFloat(e[3]),this.s2=parseFloat(e[4])),["!rnd",this.c,this.s0,this.s1,this.s2].join(",")}}class pt{constructor(){this.isUp=!1,this.isDown=!1,this.isLeft=!1,this.isRight=!1,this.isSpace=!1}init(e){this.game=e}reset(){this.isUp=!1,this.isDown=!1,this.isLeft=!1,this.isRight=!1,this.isSpace=!1}getMoveType(){return this.isDown?ge.Down:this.isLeft?ge.Left:this.isRight?ge.Right:this.isUp?ge.Up:void 0}isPressed(){return this.isUp||this.isDown||this.isLeft||this.isRight||this.isSpace}StartListenKeyboard(){Laya.stage.on(Laya.Event.KEY_UP,this,this.OnKeyboard)}StopListenKeyboard(){Laya.stage.off(Laya.Event.KEY_UP,this,this.OnKeyboard)}OnKeyboard(e){switch(e.keyCode){case Laya.Keyboard.LEFT:case Laya.Keyboard.A:this.reset(),this.isLeft=!0;break;case Laya.Keyboard.RIGHT:case Laya.Keyboard.D:this.reset(),this.isRight=!0;break;case Laya.Keyboard.UP:case Laya.Keyboard.W:this.reset(),this.isUp=!0;break;case Laya.Keyboard.DOWN:case Laya.Keyboard.S:this.reset(),this.isDown=!0}}OnClickCard(e){var t=this.game.field.field.findHeroPosition(),i=this.game.field.field.findPosition(e);if(t.row==i.row)1==(s=i.column-t.column)?(this.reset(),this.isRight=!0):-1==s&&(this.reset(),this.isLeft=!0);else if(t.column==i.column){var s;1==(s=i.row-t.row)?(this.reset(),this.isDown=!0):-1==s&&(this.reset(),this.isUp=!0)}}}class St{constructor(){this._isShaking=!1,this._startTime=0,this._offsetPos=[0,0],this.shank_I=0,this._orgX=0,this._orgY=0}exe(e,t=30,i=300,s=6){this._isShaking||(this._isShaking=!0,this._startTime=Laya.timer.currTimer,this._offsetPos=[0,0],this.shank_I=0,this._target=e,this._orgX=e.x,this._orgY=e.y,Laya.timer.loop(t,this,this._pos,[i,s]))}_pos(e,t){this._offsetPos[this.shank_I%2]=this._offsetPos[this.shank_I%2]>0?-t:t,this.shank_I++,this._target.x+=this._offsetPos[0],this._target.y+=this._offsetPos[1],Laya.timer.currTimer-this._startTime>=e&&(Laya.timer.clear(this,this._pos),this.shank_I=0,this._isShaking=!1,this._target.x=this._orgX,this._target.y=this._orgY,this._target=null)}}class Ct{constructor(){this.shakeHandler=new St,this.animationQueue=[],this.keyboardManager=new pt,this.isAnimationing=!1,this.isPause=!1,this.isChest=!1}init(e){window.game=this,this.windowUI=e,this.container=e.m_container,this.stageClickFx=new lt,this.keyboardManager.init(this),this.rnd=new dt([(Date.now()*Math.random()).toString()]),this.cardFactory=new mt(this),this.field=new rt(this)}testCardViews(){for(var e=$a.config.card.getConfigList(),t=0,i=e.length;t<i;t++){var s=e[t],a=V.PoolGet();a.SetConfig(s),this.container.addChild(a);var n=t%5*a.width+.5*a.width,r=Math.floor(t/5)*a.height;a.setXY(n,r),console.log(t,n,r,s.name,s.id)}this.container.setScale(.5,.5)}launch(){xe.init(),this.stageClickFx.install(),this.keyboardManager.StartListenKeyboard(),this.animationQueue=this.field.initField(),Laya.timer.frameLoop(1,this,this.update)}stop(){Laya.timer.clear(this,this.update),this.stageClickFx.uninstall(),this.keyboardManager.StopListenKeyboard()}update(){this.isPause||this.isAnimationing||(this.animationQueue.length>0?this.runAnimationFromQueue():this.fillQueue())}runAnimationFromQueue(){var e=this.animationQueue.shift();if(e instanceof d){var t=e.animationDuration;this.isAnimationing=!0,e.restart(),setTimeout(this.onAnimationComplete.bind(this),t)}else console.error(e),this.onAnimationComplete()}onAnimationComplete(){this.isAnimationing=!1,this.keyboardManager.reset()}fillQueue(){if(xe.isHeroAlive){var e=this.field.getHero();if(e.needShoot)return this.addToAnimationQueue(this.field.shootCannon()),void(e.needShoot=!1);if(e.needRunLightning)return this.addToAnimationQueue(this.field.shootLightning()),void(e.needRunLightning=!1);if(e.needShootMultiplier)return this.addToAnimationQueue(this.field.shootMultiplier()),void(e.needShootMultiplier=!1);if(e.needShootSkull)return this.addToAnimationQueue(this.field.shootSkull()),void(e.needShootSkull=!1);this.addToAnimationQueue(this.field.smashBomb()),this.checkKeyHandler()}else xe.isGameEnd=!0}addToAnimationQueue(e){if(null!=e)if(e instanceof Array)for(var t of e)null!=t&&(t instanceof Array?this.addToAnimationQueue(t):this.animationQueue.push(t));else this.animationQueue.push(e)}checkKeyHandler(){var e=this.keyboardManager.getMoveType();if(e){console.log(e);var t=this.move(e);t&&t.length>0?(this.field.stepUpdate(),this.addToAnimationQueue(t)):this.keyboardManager.reset()}}move(e){var t=this.field.getCardToFight(e);if(null==t)return[];var i,s=this.field.getHero(),a=s.fight(t);if(!a.isHeroAlive)return xe.isHeart?(xe.isHeart=!1,this.keyboardManager.reset(),s.useHeart(),this.field.move(e)):(xe.isHeroAlive=!1,this.field.removeAllChild());if(a.isChest)return this.moveType=e,xe.currentHero==ue.Key?this.chestOpened():xe.isKey?(this.field.getHero().setShopItemsStatus(),this.chestOpened()):this.openChestPopUp(),[];var n=[];if(xe.stepUpdate(),a.isNeedIncreaseLifeByOne&&((i=d.PoolGet()).tweens.push(this.field.getHero().increaseLifeByOneTween()),n.push(i)),a.isMove)n.push(this.field.move(e));else{console.log("替换卡牌, 木桶替换"),i=d.PoolGet();var r=this.field.replaceCard(e,me.AfterBarrel,t.getScore());i.tweens.push(r),i.tweens.push(this.field.getHero().increaseLifeByOneTween()),n.push(i)}return this.isChangeTurnsToBoss()&&xe.decreaseTurnsToBoss(),n}isChangeTurnsToBoss(){return!xe.isNeedCreateBoss&&!this.field.isBossInTheField()}shake(e,t){this.shakeHandler.exe(this.windowUI,e,t)}}class ft{static init(e){this.isInited||(this.game=new Ct,this.game.init(e),this.isInited=!0)}static launch(){this.game.launch()}static stop(){this.game.stop()}static uninstall(){}}ft.isInited=!1,window.War=ft;class yt extends be{onWindowInited(){ft.init(this)}onWindowDestory(){return!1}onWindowWillShow(){}onWindowWillHide(){}onWindowShow(){ft.launch()}onWindowHide(){}}class wt extends ye{constructor(){super(),this.addAssetForFguiComponent(yt)}generateAssetsForDynmic(){super.generateAssetsForDynmic()}onMenuCreate(){let e=yt.createInstance();this.conent=e,this.contentPane=e,super.onMenuCreate()}onShowComplete(){super.onShowComplete()}onHideComplete(){super.onHideComplete()}}class Lt{static get dict(){return this._dict||(this._dict=new Dictionary),this._dict}static get(e){return Lt.dict.getValue(e)}static add(e,t){Lt.dict.add(e,new Q(e,t))}static install(){Lt.add(p.Login,Me),Lt.add(p.Home,Ae),Lt.add(p.War,wt)}}class _t extends n{get menuId(){return this.id}get menuLayer(){return this.layer}get menuCloseOtherType(){return this.closeOtherType}get menuLoaderId(){switch(this.menuId){case p.War:return S.Launch}return this.loaderId}get iconUrl(){return this._iconUrl||isNullOrEmpty(this.icon)||(this._iconUrl=j.getMenuIconUrl(this.icon)),this._iconUrl}get nameIconUrl(){return this._nameIcon||isNullOrEmpty(this.moduleNameIcon)||(this._nameIcon=j.getMenuNameIconUrl(this.moduleNameIcon)),this._nameIcon}get isSubbarMainButton(){return this.menuId>=p.SubMenuButtonBegin}get isUnlock(){let e=this.menuId;return!$a.config.unlock.hasConfig(e)||$a.moduleModel.home.IsOpen(e)}get lockText(){let e=$a.config.unlock.getUnlockConfig(this.menuId);if(e){let t=e.openLevel<=$a.user.level?"":`需要主公等级达到${e.openLevel}`;if(!e.checkPoint)return t+"后开启";let i=$a.config.checkPoint.getConfig(e.checkPoint),s=$a.moduleModel.section.getMissionDataById(e.checkPoint).isActive,a=`通过关卡${i.chapter}-${i.mapID}`;return Boolean(t)?t+(s?",且"+a:""):a+"后开启"}return z.Lock}get lockVisiable(){let e=$a.config.unlock.getConfig(this.menuId);return!e||0==e.showType}get enableOpen(){return $.getInstance().validate(this.menuId)}get isNew(){return J.getInstance().validate(this.menuId)}async openMenu(){if(this.menuId<p.SubMenuButtonBegin){if(!this.isUnlock)return $a.system.toastText(this.lockText),!1;let e=Lt.get(this.menuId);if(!e)return $a.system.toastText(z.Disable),!1;if(e.windowClass){if(!await e.windowClass.AsyncEnableOpen())return!1}if(this.enableOpen)return $a.menu.open(this.menuId),!0}return!0}}class vt extends r{}class Tt extends o{get menuConfig(){return $a.config.menu.getConfig(this.menuId)}get lockvisible(){return 1==this.showType}get isUnlock(){let e=this.menuConfig;return!!e&&e.isUnlock}get IsNew(){let e=this.menuConfig;return!!e&&e.isNew}get isOpenShow(){return!1}get isOpenShowMenu(){return!1}get iconUrl(){return""}}class Gt{constructor(e,t){this._configList=[],this.tableName=e,this.tabelConfigClass=t}onGameLoadedAll(){}get configDict(){return this._configDict||(this._configDict=At.pbconfig[this.tableName]),this._configDict}get configList(){if(0==this._configList.length)for(let e in this.configDict)this._configList.push(this.configDict[e]);return this._configList}getConfigList(){return this.configList}getConfig(e){return this.configDict[e]||console.log(`${this.tableName} 没有 id=${e} 的配置`),this.configDict[e]}hasConfig(e){return!!this.configDict[e]}shieldConfig(e){for(let t=0,i=e.length;t<i;t++){let i=e[t];if(this.hasConfig(i)){delete this._configDict[i];let e=this.configList;for(let t=0,s=e.length;t<s;t++)if(e[t].id==i){e.splice(t,1);break}}}}}class Pt extends Gt{static GetId(e,t=1){return 100*e+t}getTypeLevelConfig(e,t=1){var i=Pt.GetId(e,t);return this.getConfig(i)}}class It extends Gt{constructor(){super(...arguments),this.configsByKey=new Map}onGameLoadedAll(){super.onGameLoadedAll();let e=this.configList;for(let t=0;t<e.length;t++){let i=e[t].key;isNullOrEmpty(i)&&(i=e[t].id),this.configsByKey.set(i,e[t])}}getConfig(e){if(!this.configsByKey.has(e)){if(this.hasConfig(e))return super.getConfig(e);console.log(`${this.tableName} 没有 key=${e} 的配置`)}return this.configsByKey.get(e)}}class kt extends Gt{}class Mt extends Gt{constructor(){super(...arguments),this.barDict=new Dictionary}getBarMenus(e){let t=[],i=[];for(let s=0,a=(t=this.barDict.getValue(e)).length;s<a;s++){let e=t[s],a=$a.config.unlock.getUnlockConfig(e.menuId);a&&2!=a.showType&&e.menuId!=p.Sections&&i.push(e)}return i.sort((e,t)=>e.barIndex-t.barIndex),i}getShowBarMenus(e){let t=[],i=[];for(let s=0,a=(t=this.barDict.getValue(e)).length;s<a;s++){let e=t[s],a=$a.config.unlock.getUnlockConfig(e.menuId);a&&1==a.showType&&a.showLevel<=$a.user.level&&i.push(e)}return i.sort((e,t)=>e.barIndex-t.barIndex),i}onGameLoadedAll(){let e=this.configList;for(let t=0;t<e.length;t++){let i=e[t],s=this.barDict.getValue(i.barType);s||(s=[],this.barDict.add(i.barType,s)),s.push(i)}}}class Dt extends Gt{constructor(){super(...arguments),this.configsByKey=new Map}onGameLoadedAll(){super.onGameLoadedAll();let e=this.configList;for(let t=0;t<e.length;t++){let i=e[t].key;isNullOrEmpty(i)&&(i=e[t].id),this.configsByKey.set(i,e[t])}}getConfig(e){if(!this.configsByKey.has(e)){if(this.hasConfig(e))return super.getConfig(e);console.log(`${this.tableName} 没有 key=${e} 的配置`)}return this.configsByKey.get(e)}getTxt(e){let t=this.getConfig(e);return t?t.notice:`[Error]${this.tableName} 没有 key=${e} 的配置`}getTxtFormat(e,...t){return this.getTxt(e).format(...t)}}class Ft extends Gt{constructor(){super(...arguments),this.menuConfigs=new Dictionary,this.menuGroups=new Dictionary,this.unlockGroups=new Dictionary,this.sortMenus=new Dictionary}setConfig(e){let t,i,s,a;e.menuIndexId?this.menuConfigs.add(e.menuIndexId,e):this.menuConfigs.add(e.menuId,e),i=e.group,this.menuGroups.hasKey(i)?t=this.menuGroups.getValue(i):(t=[],this.menuGroups.add(i,t)),t.push(e),a=e.openType,this.unlockGroups.hasKey(a)?s=this.unlockGroups.getValue(a):(s=[],this.unlockGroups.add(a,s)),s.push(e)}getUnlockConfig(e){return this.menuConfigs.getValue(e)}getBarMenus(e){let t=this.menuGroups.getValue(e);return 0==this.sortMenus.hasKey(e)&&(t.sort((e,t)=>e.groupId-t.groupId),this.sortMenus.add(e,!0)),t}getUnlocks(e){return this.unlockGroups.getValue(e)}onGameLoadedAll(){let e=this.configList;for(let t of e)this.setConfig(t)}}class At{constructor(){this.card=new Pt("Card",X),this.cardScoreType=new It("CardScoreType",q),this.loader=new kt("Loader",K),this.menu=new Mt("Menu",_t),this.msg=new Dt("Msg",vt),this.unlock=new Ft("Unlock",Tt)}static Init(){excelconfig.Card=X,excelconfig.CardScoreType=q,excelconfig.Loader=K,excelconfig.Menu=_t,excelconfig.Msg=vt,excelconfig.Unlock=Tt}}class bt extends At{}!function(e){e[e.pb=0]="pb",e[e.json=1]="json"}(pe||(pe={}));class Bt extends bt{constructor(){super(...arguments),this.sLoadProgress=new Typed3Signal,this.sLoaded=new Signal,this.loadProgress=0,this.readers=[],this.readerMap=new Map,this.configType=pe.json}initList(){At.Init(),this.readers.length=0;for(let e in this){let t=this[e];t instanceof Gt&&(this.readers.push(t),this.readerMap.set(t.tableName,t))}}shieldList(){let e=$a.channel.serverItem.shieldHero;e&&e.length&&$a.config.hero.shieldConfig(e)}async loadAllAsync(){this.loadProgress=0;this.readers.length;switch(this.configType){case pe.pb:await this.loadPB();break;default:await this.loadJson()}window.Global=At.pbconfig.Global,this.onGameLoadedAll()}async loadPB(){let e=await $a.asset.loadResAsync("res/config/pb/excelconfig.bin",Laya.Loader.BUFFER),t=new Uint8Array(e);At.pbconfig=excelconfig.ConfigMng.decode(t)}async loadJson(){let e=await $a.asset.loadResAsync("res/config/pb/excelconfig.json",Laya.Loader.JSON);this.InstallJson(e)}InstallJson(e){let t=At.pbconfig=new excelconfig.ConfigMng,i=e.Global,s=new excelconfig.Global;for(var a in i){this.keyToPbKey(a);s[a]=i[a]}t.Global=s;for(let i in e){let s=e[i];if(!this.readerMap.has(i))continue;let n=this.readerMap.get(i).tabelConfigClass;t[i]={};for(let e in s){let r=s[e],o=new n;for(var a in r){o[this.keyToPbKey(a)]=r[a]}t[i][e]=o}}}keyToPbKey(e){if(-1==e.indexOf("_"))return e;let t=e.split("_");for(let e=1;e<t.length;e++){let i=t[e];i.length>=1&&(t[e]=i.substr(0,1).toUpperCase()+i.substr(1,i.length-1))}return e=t.join("")}onGameLoadedAll(){for(let e=0;e<this.readers.length;e++)this.readers[e].onGameLoadedAll();this.sLoaded.dispatch()}}class Ht{constructor(){this.developWidth=750,this.developHeight=1334}get developAspect(){return this.developWidth/this.developHeight}get isLandsape(){return this.screenWidth>this.screenHeight}get screenWidth(){return Laya.stage.width}get screenHeight(){return Laya.stage.height}get isWX(){return!!window.wx}get safeArea(){if(this.isWX)return wx.getSystemInfoSync().safeArea}get liuHaiHeightTop(){return 44}get liuHaiHeightBottom(){return this.isWX?this.liuHaiHeightTop:44}get screenHeightLiuHai(){return fgui.GRoot.inst.height-this.liuHaiHeightTop-this.liuHaiHeightBottom}get screenWidthLiuHai(){return fgui.GRoot.inst.width-this.liuHaiHeightTop-this.liuHaiHeightBottom}get screenAspect(){return this.screenWidth/this.screenHeight}get screenScaleExpand(){let e=1;return e=this.screenAspect<=this.developAspect?this.screenHeight/this.developHeight/(this.screenWidth/this.developWidth):this.screenWidth/this.developWidth/(this.screenHeight/this.developHeight)}get screenScaleX(){return this.screenWidth/this.developWidth}get screenScaleY(){return this.screenHeight/this.developHeight}get screenScaleShrink(){return Math.min(this.screenScaleX,this.screenScaleY)}get screenScaleShrinkMax(){return Math.max(this.screenScaleX,this.screenScaleY)}}class Rt{get username(){return this._username||(this._username=this.getString("username",!0)),this._username}set username(e){this._username=e,this.setString("username",e,!0),$a.sound.onLogin()}getKey(e,t=!1){return t?e:this.username+"_"+e}setItem(e,t,i=!1){Laya.LocalStorage.setItem(this.getKey(e,i),t)}getItem(e,t=!1){return Laya.LocalStorage.getItem(this.getKey(e,t))}setString(e,t,i=!1){Laya.LocalStorage.setItem(this.getKey(e,i),t)}getString(e,t=!1){let i=Laya.LocalStorage.getItem(this.getKey(e,t));return null==i&&(i=""),i}setBoolean(e,t,i=!1){Laya.LocalStorage.setItem(this.getKey(e,i),t?"true":"false")}getBoolean(e,t=!1){return"true"==Laya.LocalStorage.getItem(this.getKey(e,t))}setInt(e,t,i=!1){Laya.LocalStorage.setItem(this.getKey(e,i),t.toString())}getInt(e,t=!1){let i=Laya.LocalStorage.getItem(this.getKey(e,t));return i?parseInt(i):0}setFloat(e,t,i=!1){Laya.LocalStorage.setItem(this.getKey(e,i),t.toString())}getFloat(e,t=!1){let i=Laya.LocalStorage.getItem(this.getKey(e,t));return i?parseFloat(i):0}setJSON(e,t,i=!1){Laya.LocalStorage.setJSON(this.getKey(e,i),t)}getJSON(e,t=!1){return Laya.LocalStorage.getJSON(this.getKey(e,t))}removeItem(e,t=!1){return Laya.LocalStorage.removeItem(this.getKey(e,t))}hasItem(e,t=!1){return!isNullOrEmpty(Laya.LocalStorage.getItem(this.getKey(e,t)))}clear(){return Laya.LocalStorage.clear()}}class xt extends Rt{static get Instance(){return xt._Instance||(xt._Instance=new xt),xt._Instance}get gmX(){return void 0===this._gmX&&(this._gmX=this.getFloat("gmX",!0)),this._gmX}set gmX(e){this._gmX=e,this.setFloat("gmX",e,!0)}get gmY(){return void 0===this._gmY&&(this.hasItem("gmY",!0)?this._gmY=this.getFloat("gmY",!0):this._gmY=100),this._gmY}set gmY(e){this._gmY=e,this.setFloat("gmY",e,!0)}get fontSetting(){return this._fontSetting||(this._fontSetting=this.getItem("fontSetting",!0)),this._fontSetting}set fontSetting(e){this._fontSetting=e,this.setItem("fontSetting",e,!0)}get serverName(){return this._serverName||(this._serverName=this.getItem("serverName",!0)),this._serverName}set serverName(e){this._serverName=e,this.setItem("serverName",e,!0)}get useraccountList(){return this._useraccountList||(this._useraccountList=this.getJSON("_useraccountList",!0)),this._useraccountList||(this._useraccountList=[]),this._useraccountList}set useraccountList(e){this._useraccountList=e,this.setJSON("_useraccountList",e,!0)}addUseraccount(e,t){let i=!1,s=this.useraccountList?this.useraccountList:[];for(let a=0;a<s.length;a++)s[a].username==e&&(s[a].password=t,s[a].lasttime=$a.time.localTimeMS,i=!0);i||s.push({username:e,password:t,lasttime:$a.time.localTimeMS}),s.sort((e,t)=>t.lasttime-e.lasttime),this.useraccountList=s}get password(){return this._password||(this._password=this.getItem("password"),null==this._password&&(this._password="")),this._password}set password(e){this._password=e,this.setItem("password",e)}get server(){return this._server||(this._server=this.getInt("server"),null==this._server&&(this._server=0)),this._server}set server(e){this._server=e,this.setInt("server",e)}get deviceId(){if(!this._deviceId&&!(this._deviceId&&"undefined"!=this._deviceId&&null!=this._deviceId||(this._deviceId=this.getString("_deviceId",!0),this._deviceId))){let e=(new Date).getTime(),t=Math.random();this._deviceId=e.toString()+"."+t.toString()}return this._deviceId}set deviceId(e){this._deviceId=e,this.setString("_deviceId",e,!0)}get guestusername(){return this._guestusername||(this._guestusername=this.getString("guest",!0)),this._guestusername}set guestusername(e){this._guestusername=e,this.setString("guest",e,!0),$a.sound.onLogin()}get isGuest(){return void 0===this._isGuest&&(this._isGuest=this.getBoolean("isGuest",!0)),this._isGuest}set isGuest(e){this._isGuest=e,this.setBoolean("isGuest",e,!0)}get isGameGuest(){return void 0===this._isGameGuest&&(this._isGameGuest=this.getBoolean("isGameGuest",!0)),this._isGameGuest}set isGameGuest(e){this._isGameGuest=e,this.setBoolean("isGameGuest",e,!0)}get isNoticTodayNoOpen(){return void 0===this._isNoticTodayNoOpen&&(this._isNoticTodayNoOpen=this.getBoolean("isNoticTodayNoOpen",!0)),this._isNoticTodayNoOpen}set isNoticTodayNoOpen(e){this._isNoticTodayNoOpen=e,this.setBoolean("isNoticTodayNoOpen",e,!0)}get lastOpenShopSpecialTime(){return void 0===this._lastOpenShopSpecialTime&&(this._lastOpenShopSpecialTime=this.getFloat("lastOpenShopSpecialTime",!0)),this._lastOpenShopSpecialTime}set lastOpenShopSpecialTime(e){this._lastOpenShopSpecialTime=e,this.setFloat("lastOpenShopSpecialTime",e,!0)}get lastOpenShopSingleTime(){return void 0===this._lastOpenShopSingleTime&&(this._lastOpenShopSingleTime=this.getFloat("lastOpenShopSingleTime",!0)),this._lastOpenShopSingleTime}set lastOpenShopSingleTime(e){this._lastOpenShopSingleTime=e,this.setFloat("lastOpenShopSingleTime",e,!0)}}!function(e){e[e.VeryLower=0]="VeryLower",e[e.Lower=1]="Lower",e[e.Middle=2]="Middle",e[e.Hight=3]="Hight"}(Se||(Se={}));class Nt{constructor(){this.skeletonCacheMaxNum=10,this.unitMaxNum=10,this.roomUnitMaxNum=2,this.menuCacheTime=1e4,this.fguiLoaderCacheNum=100,this.fguiLoaderCacheTime=100,this.trailNum=5,this._performanceType=Se.Lower,this._networkType=-1}get performanceType(){return this._performanceType}set performanceType(e){switch(this._performanceType=e,e){case Se.VeryLower:this.skeletonCacheMaxNum=5,this.unitMaxNum=18,this.roomUnitMaxNum=2,this.menuCacheTime=3e3,this.fguiLoaderCacheNum=50,this.fguiLoaderCacheTime=3e3,this.trailNum=1;break;case Se.Lower:this.skeletonCacheMaxNum=10,this.unitMaxNum=20,this.roomUnitMaxNum=3,this.menuCacheTime=3e3,this.fguiLoaderCacheNum=30,this.fguiLoaderCacheTime=3e3,this.trailNum=2;break;case Se.Middle:this.skeletonCacheMaxNum=25,this.unitMaxNum=30,this.roomUnitMaxNum=4,this.menuCacheTime=1e4,this.fguiLoaderCacheNum=60,this.fguiLoaderCacheTime=1e4,this.trailNum=4;break;case Se.Hight:this.skeletonCacheMaxNum=50,this.unitMaxNum=50,this.roomUnitMaxNum=4,this.menuCacheTime=3e5,this.fguiLoaderCacheNum=100,this.fguiLoaderCacheTime=1e5,this.trailNum=5}}init(){let e=this.getTotalMem();this.performanceType=e<=0?Se.Hight:e<=1048576?Se.VeryLower:e<=2097152?Se.Middle:Se.Hight}get isApp(){return!!window.conch}getTotalMem(){return this.isApp?window.conch.config.getTotalMem():0}getUsedMem(){return this.isApp?window.conch.config.getUsedMem():0}getAvalidMem(){return this.isApp?window.conch.config.getAvalidMem():0}getNetworkType(){return-1!=this._networkType?this._networkType:this.isApp?(this._networkType=window.conch.config.getNetworkType(),this._networkType):NetworkType.NET_UNKNOWN}set networkType(e){this._networkType=e}printInfo(){let e=` TotalMem: ${kbToStr(this.getTotalMem())}\n UsedMem: ${kbToStr(this.getUsedMem())}\n AvalidMem: ${kbToStr(this.getAvalidMem())}\n NetworkType: ${this.getNetworkType()}`;console.log(e)}}class Ut{static toLang(e){-1!=(e=e.replace("-","_").toLowerCase()).indexOf("en")&&(e=Ut.en);{let t=!1;for(let i in Ut)if(i==e){t=!0;break}t||(e=Ut.en)}return e}}Ut.zh_cn="zh_cn",Ut.zh_tw="zh_tw",Ut.en="en";class Et{constructor(){this.configs=new Dictionary}getConfigList(){return this.configs.getValues()}get configList(){return this.configs.getValues()}getConfig(e){return this.configs.hasKey(e)||console.log(`${this.tableName} 没有 id=${e} 的配置`),this.configs.getValue(e)}addConfig(e){this.configs.add(e.id,e)}getConfigPath(){return j.config+`csv/${this.tableName}.csv`}load(e,t){}reload(e,t){}onGameLoadedAll(){}clear(){this.configs.clear()}}class Ot extends Et{constructor(){super(...arguments),this.csvDelimiter="\t",this.csvSeparatorReplace=null,this.csvLineSeparatorReplace="|n|",this.headTypes=new Dictionary,this.headKeyEns=new Dictionary,this.headKeyFields=new Dictionary,this.headKeyCns=new Dictionary}ReplaceSpearator(e){return"TextFgui"==this.tableName&&e.indexOf(this.csvLineSeparatorReplace),e=(e=e.replace(/\|n\|/g,"\n")).replace(/\r/g,"")}load(e,t){e.loadConfig(this.getConfigPath(),(i,s)=>{this.parse(i),t&&t(this),e.unloadConfig(this.getConfigPath())})}reload(e,t){this.clear(),this.load(e,t)}clear(){this.headTypes.clear(),this.headKeyEns.clear(),this.headKeyFields.clear(),this.headKeyCns.clear(),super.clear()}parse(e){if(null==e)return void console.error(`${this.tableName}: txt=${e}`);let t,i,s=e.split("\n");i=(t=s[0]).split(this.csvDelimiter),this.ParseHeadTypes(i),i=(t=s[1]).split(this.csvDelimiter),this.ParseHeadKeyCN(i),i=(t=s[2]).split(this.csvDelimiter),this.ParseHeadKeyEN(i);for(let e=3;e<s.length;e++)if(t=s[e],!isNullOrEmpty(t)){i=t.split(this.csvDelimiter);for(let e=0;e<i.length;e++)i[e]=this.ReplaceSpearator(i[e]);this.ParseCsv(i)}}ParseHeadTypes(e){let t;for(let i=0;i<e.length;i++)t=e[i],isNullOrEmpty(t)||(t=t.trim(),this.headTypes.add(i,t))}ParseHeadKeyCN(e){let t;for(let i=0;i<e.length;i++)t=this.ReplaceSpearator(e[i]),isNullOrEmpty(t)||(t=t.trim(),this.headKeyCns.add(i,t))}ParseHeadKeyEN(e){let t;for(let i=0;i<e.length;i++)t=e[i],isNullOrEmpty(t)||(t=t.trim(),this.headKeyEns.hasKey(t)&&console.error(`${this.tableName}: ParseHeadKeyEN 已经存在key= ${t},  i = ${i}`),this.headKeyEns.add(t,i),this.headKeyFields.add(i,t))}ParseCsv(e){}GetHeadType(e){return this.headTypes.getValue(e)}GetHeadField(e){return this.headKeyFields.getValue(e)}GetHeadIndex(e){return this.headKeyEns.hasKey(e)?this.headKeyEns.getValue(e):(console.error(`${this.tableName}: headKeyEns[${e}] = -1`),-1)}onGameLoadedAll(){}}class Wt{}class Vt extends Wt{constructor(){super(...arguments),this.dict=new Dictionary}}class Xt{}Xt.MString="string",Xt.MStringArray="string[]";class qt extends Ot{constructor(e){super(),this.lang="zh_cn",this.tableName=e}getConfigPath(){return`config/lang/${this.lang}/${this.tableName}.csv`}get headKeyFieldList(){return this._headKeyFieldList||(this._headKeyFieldList=this.headKeyFields.getValues()),this._headKeyFieldList}ParseCsv(e){let t=new Vt;t.id=csvGetInt(e,this.GetHeadIndex("id"));let i=this.headKeyFieldList;for(let s=0;s<i.length;s++){let a=csvGetString(e,this.GetHeadIndex(i[s]));switch(this.GetHeadType(s)){case Xt.MStringArray:t.dict.add(i[s],toStringArray(a));break;default:t.dict.add(i[s],a)}}this.addConfig(t)}}class Kt{constructor(){this.lang="zh_cn",this.renders=[],this.textCode=new qt("TextCode"),this.textFgui=new qt("TextFgui")}initList(){}}class jt extends Kt{constructor(){super(...arguments),this.sLoadProgress=new Typed3Signal,this.sLoaded=new Signal,this.loadProgress=0,this.isLoadCompleted=!1,this.textRenders=[],this.sTextLoaded=new Signal}async loadAllAsync(){return new Promise(e=>{this.loadAll(),this.sLoaded.addOnce(()=>{e()},this)})}loadAll(){this.loadProgress=0;let e=this.renders.length,t=0,i=()=>{t++,this.loadProgress=t/e,this.sLoadProgress.dispatch(t,e,this.loadProgress),t>=e&&this.onGameLoadedAll()};for(let e=0;e<this.renders.length;e++)this.renders[e].lang=this.lang,this.renders[e].load(this.configLoader,i)}onGameLoadedAll(){for(let e=0;e<this.renders.length;e++)this.renders[e].onGameLoadedAll();this.setCodeTEXT(),re.setStringsSource(this.textFgui),this.isLoadCompleted=!0,this.sLoaded.dispatch()}loadText(){let e=this.textRenders;0==e.length&&(e.push(this.textCode),e.push(this.textFgui)),this.loadProgress=0;let t=e.length,i=0,s=()=>{++i>=t&&this.onLoadTextComplte()};for(let t=0;t<e.length;t++)e[t].lang=this.lang,e[t].load(this.configLoader,s)}onLoadTextComplte(){let e=this.textRenders;for(let t=0;t<e.length;t++)e[t].onGameLoadedAll();this.setCodeTEXT(),re.setStringsSource(this.textFgui),this.sTextLoaded.dispatch()}setCodeTEXT(){if(!this._srcTEXT&&z){this._srcTEXT=new Dictionary;for(let e in z)this._srcTEXT.add(e,z[e])}let e=this.textCode.getConfigList();for(let t=0;t<e.length;t++){let i=e[t],s=i.dict.getValue("key"),a=i.dict.getValue("value");isNullOrEmpty(a)||(z[s]=a)}}}class zt{constructor(){this.isUseLang=!1,this._lang=null,this.langListDict=new Dictionary}static get Instance(){return zt._Instance||(zt._Instance=new zt),zt._Instance}get httpLang(){return this._httpLang||(this.httpLang=this.lang),this._httpLang}set httpLang(e){if((e=e.replace("_","-")).indexOf("-")){let t=e.split("-");for(let e=1;e<t.length;e++)t[e]=t[e].toUpperCase();e=t.join("-")}this._httpLang=e}get lang(){return this._lang||($a.localStorage.hasItem("_lang",!0)?this._lang=$a.localStorage.getString("_lang",!0):this._lang=Ut.zh_cn,this.httpLang=this._lang),this._lang}set lang(e){this._lang=e,this.httpLang=e,$a.localStorage.setString("_lang",e,!0)}get current(){if(this._current)return this._current;if(!this.langListDict.hasKey(this.lang)){let e=new jt;e.lang=this.lang,this.langListDict.add(e.lang,e),this._current=e}return this.langListDict.getValue(this.lang)}getValue(e,t,i){let s=this.current[e];if(s){let e=s.getConfig(t);if(e)return e.dict.getValue(i)}return null}}class Yt{static getResPackagePath(e,t){return isNullOrEmpty(t)?`${Yt.resRoot}${e}`:`${Yt.resRoot}${t}/${e}`}static getResPath(e,t){return isNullOrEmpty(t)?`${Yt.resRoot}${e}`:`${Yt.resRoot}${t}/${e}`}static getMapPath(e){return this.getResPath(e,"map")}static addPackage(e,t){if(Yt._uiPackageDict.hasKey(e))return Yt._uiPackageDict.getValue(e);{let t=fgui.UIPackage.addPackage(e);return Yt._uiPackageDict.add(e,t),t}}static removePackage(e,t){let i=Yt._uiPackageDict.getValue(e);i&&(fgui.UIPackage.removePackage(i.id),i.dispose(),Yt._uiPackageDict.remove(e)),Yt._uiPackageDictForReferenceNum.remove(e)}static hasLoadPackage(e){return Yt._uiPackageDict.hasKey(e)}static addPackageReferenceNum(e){let t=Yt.getPackageReferenceNum(e)+1;return 0==t&&(t=1),console.log("~~addPackageReferenceNum:  "+t+"  "+e),Yt._uiPackageDictForReferenceNum.add(e,t),t}static removePackageReferenceNum(e){let t=Yt.getPackageReferenceNum(e)-1;return t<0&&(t=0),console.log("~~removePackageReferenceNum:  "+t+"  "+e),Yt._uiPackageDictForReferenceNum.add(e,t),t}static getPackageReferenceNum(e){return Yt._uiPackageDictForReferenceNum.hasKey(e)?Yt._uiPackageDictForReferenceNum.getValue(e):0}}Yt.resRoot="res/",Yt.packageFileExtension="bin",Yt._uiPackageDict=new Dictionary,Yt._uiPackageDictForReferenceNum=new Dictionary;var $t=Laya.Handler,Jt=Laya.Loader;class Qt{constructor(){this.loadedAssets=new Dictionary}loadConfig(e,t){if(t){let i={onLoaded:()=>{let i=Laya.loader.getRes(e);t(i,e)}};Laya.loader.load(e,$t.create(i,i.onLoaded),null,Jt.TEXT)}}unloadConfig(e){Laya.loader.clearRes(e)}loadList(e,t,i,s){let a=e.length,n=0,r={onComplete:r=>{let o=e[n];if(n++,s){s(a>0?n/a:1,n,a,o)}n>=a&&i&&(t?i.apply(t):i())},onProgress:e=>{}};if(e&&e.length>0){let t,i=[];for(let s=0;s<e.length;s++)switch((t=e[s])||r.onComplete(t),t.type){case f.FguiPackage:this.loadFguiByPackagename(t.url,r,r.onComplete);break;case f.FspritePackage:this.loadFSpriteByPackagename(t.url,r,r.onComplete);break;case f.Image:i.push({url:t.url,type:Jt.IMAGE});break;case f.Buffer:i.push({url:t.url,type:Jt.BUFFER});break;case f.Sound:i.push({url:t.url,type:Jt.SOUND});break;case f.Text:i.push({url:t.url,type:Jt.TEXT});break;case f.Json:i.push({url:t.url,type:Jt.JSON});break;case f.Xml:i.push({url:t.url,type:Jt.XML});break;case f.Font:i.push({url:t.url,type:Jt.FONT});break;case f.TTF:i.push({url:t.url,type:Jt.TTF})}if(i.length>0)for(let e=0;e<i.length;e++)this.loadedAssets.hasKey(i[e].url)?r.onComplete(!0):Laya.loader.load([i[e]],$t.create(r,r.onComplete),$t.create(r,r.onProgress)),this.loadedAssets.add(i[e].url,$a.time.localTimeMS)}else r.onComplete(null)}loadFguiByPackagename(e,t,i){let s=$a.guiRes.getconfig(e);this.loadFgui(s,t,i)}async loadFguiByPackagenameAsync(e){return new Promise(t=>{this.loadFguiByPackagename(e,this,e=>{t(e)})})}loadFSpriteByPackagename(e,t,i){let s=$a.spriteRes.getconfig(e);s?this.loadFgui(s,t,i):console.error(`AssetManager loadFSpriteByPackagename: packageConfig=${s} packageName=${e}`)}loadFgui(e,t,i){if(!e)return void console.error(`AssetManager loadFgui: packageConfig=${e}`);let s={apply:()=>{if(Yt.addPackage(e.packagePath,e),i){if(t)return i.apply(t,[e]);i(e)}}};Yt.addPackageReferenceNum(e.packagePath),Yt.hasLoadPackage(e.packagePath)?s.apply():Laya.loader.load(e.loadList,$t.create(s,s.apply))}unloadFgui(e,t){void 0===t&&(t=!1);let i=$a.guiRes.getconfig(e);if(i||(i=$a.spriteRes.getconfig(e)),i){let e=Yt.removePackageReferenceNum(i.packagePath);if(!t&&e>0)return;Yt.removePackage(i.packagePath,i);let s=i.loadList;for(let e=0;e<s.length;e++)Laya.loader.clearRes(s[e].url)}}loadFx(e,t,i){Laya.loader.load(e,$t.create(null,e=>{i&&(t?i.apply(t,e):i(e))}),null,Jt.JSON)}load(e,t,i,s){Laya.loader.load(e,$t.create(null,e=>{t&&(i?t.apply(i,[e]):t(e))}),null,se.assetItemType2LayaLoaderType(s))}async loadAsync(e,t){return new Promise(i=>{this.load(e,e=>{i(e)},null,t)})}async loadResAsync(e,t){return new Promise(i=>{Laya.loader.load(e,Laya.Handler.create(null,e=>{Laya.timer.frameOnce(1,null,()=>{i(e)})}),null,t)})}async loadShaderVSAsync(e){return(await this.loadAsync(j.getShaderVS(e),f.Text)).replace(/\r/g,"")}async loadShaderPSAsync(e){return(await this.loadAsync(j.getShaderPS(e),f.Text)).replace(/\r/g,"")}async preloadAndInstallSoundAsync(e){return new Promise(t=>{if(!Engine.borwer.isWXGame)return void t(!1);let i=Laya.SoundManager.preloadSound(e);i?(i.once(Laya.Event.COMPLETE,this,()=>{t(!0),i.offAll()}),i.once(Laya.Event.ERROR,this,()=>{t(!1),i.offAll()})):t(!1)})}preloadAndInstallSound(e,t,i){var s=e=>{i&&(t?i.call(t,e):i(Vector4))};let a=Laya.SoundManager.preloadSound(e);a?(a.once(Laya.Event.COMPLETE,this,()=>{s(!0),a.offAll()}),a.once(Laya.Event.ERROR,this,()=>{s(!0),a.offAll()})):s(!1)}}window.AssetManager=Qt;var Zt,ei,ti=Laya.Loader;class ii{constructor(){this.resAtlas=[],this.sounds=[]}get loadList(){if(!this._loadList){let e=[];if(e.push({url:Yt.getResPath(this.resBin,this.resDir),type:ti.BUFFER}),this.resAtlas)for(let t=0;t<this.resAtlas.length;t++)e.push({url:Yt.getResPath(this.resAtlas[t],this.resDir),type:ti.IMAGE});if(this.sounds)for(let t=0;t<this.sounds.length;t++)e.push({url:Yt.getResPath(this.sounds[t],this.resDir),type:ti.SOUND});this._loadList=e}return this._loadList}get packagePath(){return Yt.getResPackagePath(this.packageName,this.resDir)}}class si{constructor(){this.dict=new Dictionary}addconfig(e){this.dict.add(e.packageName,e)}getconfig(e){return this.dict.getValue(e)}install(){let e;(e=new ii).resDir="fgui",e.packageName="GameHome",e.resBin="GameHome.bin",e.resAtlas.push("GameHome_atlas0.png"),e.resAtlas.push("GameHome_atlas_sqzy0.jpg"),e.resAtlas.push("GameHome_atlas_sqzy1.jpg"),e.sounds.push("GameHome_sqzy7p.mp3"),this.addconfig(e),(e=new ii).resDir="fgui",e.packageName="GameLaunch",e.resBin="GameLaunch.bin",e.resAtlas.push("GameLaunch_atlas0.png"),e.resAtlas.push("GameLaunch_atlas_qyvzw2s.png"),e.resAtlas.push("GameLaunch_atlas_tnlhw3c.png"),this.addconfig(e),(e=new ii).resDir="fgui",e.packageName="ModuleLogin",e.resBin="ModuleLogin.bin",e.resAtlas.push("ModuleLogin_atlas0.png"),e.resAtlas.push("ModuleLogin_atlas_je283m.png"),e.resAtlas.push("ModuleLogin_atlas_je283n.png"),e.resAtlas.push("ModuleLogin_atlas_tnlh35.png"),e.resAtlas.push("ModuleLogin_atlas_tnlh3d.png"),e.resAtlas.push("ModuleLogin_atlas_tnlh3e.png"),e.resAtlas.push("ModuleLogin_atlas_tnlh3j.png"),this.addconfig(e),(e=new ii).resDir="fgui",e.packageName="Sound",e.resBin="Sound.bin",this.addconfig(e)}}class ai{constructor(){this.dict=new Dictionary}addconfig(e){this.dict.add(e.packageName,e)}getconfig(e){return this.dict.getValue(e)}install(){let e;(e=new ii).resDir="fsprite",e.packageName="ActivityIcon",e.resBin="ActivityIcon.bin",e.resAtlas.push("ActivityIcon@atlas0.png"),this.addconfig(e),(e=new ii).resDir="fsprite",e.packageName="ActorBodyIcon",e.resBin="ActorBodyIcon.bin",e.resAtlas.push("ActorBodyIcon@atlas0.png"),e.resAtlas.push("ActorBodyIcon@atlas0_1.png"),e.resAtlas.push("ActorBodyIcon@atlas0_2.png"),e.resAtlas.push("ActorBodyIcon@atlas0_3.png"),e.resAtlas.push("ActorBodyIcon@atlas0_4.png"),e.resAtlas.push("ActorBodyIcon@atlas0_5.png"),this.addconfig(e),(e=new ii).resDir="fsprite",e.packageName="BlockIcon",e.resBin="BlockIcon.bin",e.resAtlas.push("BlockIcon@atlas0.png"),this.addconfig(e),(e=new ii).resDir="fsprite",e.packageName="Building",e.resBin="Building.bin",e.resAtlas.push("Building@atlas0.png"),e.resAtlas.push("Building@atlas0_1.png"),this.addconfig(e),(e=new ii).resDir="fsprite",e.packageName="CinemaIcon",e.resBin="CinemaIcon.bin",e.resAtlas.push("CinemaIcon@atlas0.png"),this.addconfig(e),(e=new ii).resDir="fsprite",e.packageName="Icon_En",e.resBin="Icon_En.bin",e.resAtlas.push("Icon_En@atlas0.png"),this.addconfig(e),(e=new ii).resDir="fsprite",e.packageName="Icon_ZH_CN",e.resBin="Icon_ZH_CN.bin",e.resAtlas.push("Icon_ZH_CN@atlas0.png"),this.addconfig(e),(e=new ii).resDir="fsprite",e.packageName="ItemIcon",e.resBin="ItemIcon.bin",e.resAtlas.push("ItemIcon@atlas0.png"),this.addconfig(e),(e=new ii).resDir="fsprite",e.packageName="MeetingIcon",e.resBin="MeetingIcon.bin",e.resAtlas.push("MeetingIcon@atlas0.png"),this.addconfig(e),(e=new ii).resDir="fsprite",e.packageName="MenuIcon",e.resBin="MenuIcon.bin",e.resAtlas.push("MenuIcon@atlas0.png"),this.addconfig(e),(e=new ii).resDir="fsprite",e.packageName="NPCHeadIcon",e.resBin="NPCHeadIcon.bin",e.resAtlas.push("NPCHeadIcon@atlas0.png"),this.addconfig(e),(e=new ii).resDir="fsprite",e.packageName="PlayerBodyIcon",e.resBin="PlayerBodyIcon.bin",e.resAtlas.push("PlayerBodyIcon@atlas0.png"),this.addconfig(e),(e=new ii).resDir="fsprite",e.packageName="PlayerHeadIcon",e.resBin="PlayerHeadIcon.bin",e.resAtlas.push("PlayerHeadIcon@atlas0.png"),this.addconfig(e),(e=new ii).resDir="fsprite",e.packageName="SettingIcon",e.resBin="SettingIcon.bin",e.resAtlas.push("SettingIcon@atlas0.png"),this.addconfig(e),(e=new ii).resDir="fsprite",e.packageName="ShootIcon",e.resBin="ShootIcon.bin",e.resAtlas.push("ShootIcon@atlas0.png"),this.addconfig(e),(e=new ii).resDir="fsprite",e.packageName="SkillIcon",e.resBin="SkillIcon.bin",e.resAtlas.push("SkillIcon@atlas0.png"),this.addconfig(e),(e=new ii).resDir="fsprite",e.packageName="StoryIcon",e.resBin="StoryIcon.bin",e.resAtlas.push("StoryIcon@atlas0.png"),e.resAtlas.push("StoryIcon@atlas0_1.png"),e.resAtlas.push("StoryIcon@atlas0_2.png"),e.resAtlas.push("StoryIcon@atlas0_3.png"),this.addconfig(e),(e=new ii).resDir="fsprite",e.packageName="StoryStackIcon",e.resBin="StoryStackIcon.bin",e.resAtlas.push("StoryStackIcon@atlas0.png"),this.addconfig(e)}}!function(e){e[e.Closed=1]="Closed",e[e.Loading=2]="Loading",e[e.Opened=3]="Opened",e[e.Destoryed=4]="Destoryed"}(Zt||(Zt={}));class ni{static get idDict(){return ni._idDict||ni.init(),ni._idDict}static get extDict(){return ni._extDict||ni.init(),ni._extDict}static getId(e){return ni.idDict.hasKey(e)?ni.idDict.getValue(e):(console.error("SoundKey 不存在 key="+e),"")}static getUrl(e){return`ui://${ni.SoundPackageId}${ni.getId(e)}`}static getPath(e){return Yt.getResPath(`${ni.SoundPackageName}_${ni.getId(e)}${ni.extDict.getValue(e)}`,"fgui")}static init(){ni._idDict=new Dictionary,ni._extDict=new Dictionary}}ni.SoundPackageName="Sound",ni.SoundPackageId="44whq70o",function(e){e[e.None=0]="None",e[e.ExceptSelf_All=1]="ExceptSelf_All",e[e.ExceptSelf_Module=2]="ExceptSelf_Module",e[e.ExceptSelf_SameLayer=3]="ExceptSelf_SameLayer"}(ei||(ei={}));class ri{constructor(){this.sOpen=new Signal,this.backMenuId=-1,this.backExcludeMenuIdMenuId=-1,this.closeTime=0,this.closeIsDestory=!0}open(e){this.openParametar=e,this.moduleWindow||(this.moduleWindow=new this.menuWindowConfig.windowClass,this.moduleWindow.menuId=this.menuId,this.moduleWindow.name=this.menuConfig.name,this.moduleWindow.windowContainer=Z.getLayer(this.menuConfig.menuLayer)),this.load()}close(){this.state!=Zt.Closed&&this.state!=Zt.Destoryed&&this.__menuManager.__onMenuClose(this)}__delayClose(){this.moduleWindow&&this.moduleWindow.menuIsCreated&&($a.event.dispatch(ne.GameFrame_CloseMenu,this.moduleWindow.menuId),this.moduleWindow.onMenuClose(),this.closeTime=$a.time.localTimeMS),this.state=Zt.Closed}destory(){this.moduleWindow&&(this.moduleWindow.sShowComplete.remove(this.closeOther,this),this.moduleWindow.destory(),this.moduleWindow=null),this.state=Zt.Destoryed}load(){this.state=Zt.Loading;let e=this.getLoadAssets();if(e&&0!=e.length){this.loadBeginTime=$a.time.localTimeMS;let t=$a.loader.open(this.menuConfig.menuLoaderId);t.setMax(e.length),t.setProgress(0);let i=(e,i,s,a)=>{t.setProgress(i)};$a.asset.loadList(e,this,this.onLoadComplete,i)}else this.loadBeginTime=0,this.onLoadComplete()}onLoadComplete(){this.setShow(),$a.loader.close(this.menuConfig.menuLoaderId),this.loadBeginTime>0&&console.log("加载界面花费时间 ("+this.menuConfig.moduleName+") :"+($a.time.localTimeMS-this.loadBeginTime)+" 毫秒")}getLoadAssets(){let e=[],t=new Dictionary;return this.moduleWindow.menuIsCreated||this.moduleWindow.getLoadAssets(e,t),this.moduleWindow.generateAssetsForDynmic(),this.moduleWindow.getLoadAssetsForDynamic(e,t),e}setShow(){if(this.moduleWindow){switch(console.log(`设置显示面板 ${this.menuConfig.name}(${this.menuConfig.moduleName}): ${this.menuId}`),this.moduleWindow.sShowComplete.addOnce(this.closeOther,this),this.moduleWindow.sShowSubwindowComplete.addOnce(this.closeOther,this),this.state=Zt.Opened,this.moduleWindow.menuIsCreated?this.moduleWindow.onMenuOpen(this.openParametar):this.moduleWindow.menuParameter=this.openParametar,this.moduleWindow.menuShow(this.moduleWindow.windowContainer),this.menuId){case p.Login:case p.Home:$a.sound.playMusic(ni.MM_BGM_01)}this.sOpen.dispatch()}else console.warn(`设置显示 但是模块已销毁 ${this.menuConfig.name}(${this.menuConfig.moduleName}): ${this.menuId}`)}setCloseDontDestory(){}closeOther(){let e=this.__menuManager.isOpened(p.Home),t=this.__menuManager.getLastModuleOpenMenuId([this.backExcludeMenuIdMenuId,this.menuId,p.BattleResultWindow]),i=!1,s=$a.menu.dict.getValues();switch(this.menuConfig.menuCloseOtherType){case ei.None:break;case ei.ExceptSelf_All:for(let t=0;t<s.length;t++){let a=s[t];a!=this&&(a.closeIsDestory=e,a.close(),i=!0)}break;case ei.ExceptSelf_Module:for(let t=0;t<s.length;t++){let a=s[t];a!=this&&a.menuConfig.menuLayer==C.Module&&(a.closeIsDestory=e,a.close(),i=!0)}break;case ei.ExceptSelf_SameLayer:for(let t=0;t<s.length;t++){let a=s[t];a.menuId!=p.Home&&(a!=this&&a.menuConfig.menuLayer==this.menuConfig.menuLayer&&(a.closeIsDestory=e,a.close(),i=!0))}}if(this.menuConfig.closeHomeWindow){let e=this.__menuManager.getMenuCtl(p.Home);e&&e.moduleWindow&&e.close()}i?-1!=t&&(this.backMenuId=t):this.backMenuId=-1}}class oi extends fgui.GLoader{static get freeList(){oi._freeList.length>0&&(oi._freeList.length=0);let e=oi.freeDictForNum.__getDict();for(let t in e)oi.freeDictForNum.getValue(t)<=0&&oi._freeList.push(t);return oi._freeList}static setUse(e){let t=oi.freeDictForNum.hasKey(e)?oi.freeDictForNum.getValue(e)+1:1;oi.freeDictForNum.add(e,t)}static setFree(e){if(-1!=e.indexOf("/MenuIcon/"))return;oi.freeDictForTime.add(e,$a.time.localTimeMS);let t=oi.freeDictForNum.hasKey(e)?oi.freeDictForNum.getValue(e)-1:0;t<0&&(t=0),oi.freeDictForNum.add(e,t)}static removeFree(e){oi.freeDictForTime.remove(e),oi.freeDictForNum.remove(e)}static clearAllFree(e){for(e||(e=oi.freeList);e.length>0;){let t=e.pop();oi.removeFree(t),Laya.loader.clearRes(t)}}static clearFreeLong(){if(oi.freeDictForNum.count<=$a.deviceSetting.fguiLoaderCacheNum)return;oi._freeLongList.length=0;let e=oi.freeDictForNum.__getDict();for(let t in e)if(oi.freeDictForNum.getValue(t)<=0){$a.time.localTimeMS-oi.freeDictForTime.getValueOrDefault(t,0)>$a.deviceSetting.fguiLoaderCacheTime&&oi._freeLongList.push(t)}oi.clearAllFree(oi._freeLongList)}loadContent(){super.loadContent()}getPackagenameByUrl(e){return e.replace("ui://","").split("/")[0]}loadFromPackage(e){if(fgui.UIPackage.getItemByURL(e))super.loadFromPackage(e);else{let t=this.getPackagenameByUrl(e),i=$a.spriteRes.getconfig(t);i||(i=$a.guiRes.getconfig(t)),i&&$a.asset.loadFgui(i,this,this.onLoadPackage)}}onLoadPackage(){super.loadFromPackage(this.url)}loadExternal(){oi.setUse(this.url),super.loadExternal()}freeExternal(e){super.freeExternal(e),isNullOrEmpty(e.url)||(oi.setFree(e.url),e.url="")}onExternalLoadSuccess(e){super.onExternalLoadSuccess(e)}onExternalLoadFailed(){super.onExternalLoadFailed()}}oi.freeDictForTime=new Dictionary,oi.freeDictForNum=new Dictionary,oi._freeList=[],oi._freeLongList=[];var li,ci,hi,ui,gi=Laya.Pool;class mi{constructor(e,t){this.logType=e,this.msg=t+""}poolRecover(){gi.recover(mi.POOL_SIGN,this)}static poolGet(){return gi.getItemByClass(mi.POOL_SIGN,mi)}}mi.POOL_SIGN="LogItem";!function(e){e[e.Debug=0]="Debug",e[e.Info=0]="Info",e[e.Warn=2]="Warn",e[e.Error=3]="Error"}(li||(li={})),function(e){e.Debug="Debug",e.Info="Info",e.Warn="Warn",e.Error="Error"}(ci||(ci={}));class di{static get Level(){return this.level}static set Level(e){this.level=e}static Debug(...e){this.level>li.Debug||(this.logger.debug(...e),this.mineloger.debug(...e))}static Info(...e){this.level>li.Info||(this.logger.info(...e),this.mineloger.info(...e))}static Warn(...e){this.level>li.Warn||(this.logger.warn(...e),this.mineloger.warn(...e))}static Error(...e){this.level>li.Warn||(this.logger.error(...e),this.mineloger.error(...e))}static clear(){this.logger.clear(),this.mineloger.clear()}}di.mineloger=new class{constructor(){this.maxcount=1e3,this.enable=!0,this.dict=new Dictionary,this.list=[]}getList(e){if(this.dict.hasKey(e))return this.dict.getValue(e);let t=[];return this.dict.add(e,t),t}get listAll(){return this.list}getListByTypes(e){let t=[];for(let i=0;i<this.list.length;i++)-1!=e.indexOf(this.list[i].logType)&&t.push(this.list[i]);return t}addLog(e,t,...i){if(this.enable)if(t){let s=mi.poolGet();s.logType=e,s.msg=this.stringFormat(t,...i),this.add(s)}else{let i=mi.poolGet();i.logType=e,i.msg=t,this.add(i)}}add(e){if(!this.enable)return;let t=this.getList(e.logType);t.push(e),this.list.push(e),this.list.length>this.maxcount&&this.list.shift().poolRecover(),t.length>this.maxcount&&t.shift().poolRecover()}clear(){console.clear();for(let e of this.list)e.poolRecover();this.list=[],this.dict.clear()}stringFormat(e,...t){if(t)for(let i=0;i<t.length&&/%s|%d|%i|%o/.test(e);i++)e=e.replace(/%s|%d|%i|%o/,t[i]);return e}debug(e,...t){this.addLog(li.Debug,e,...t)}error(e,...t){this.addLog(li.Error,e,...t)}info(e,...t){this.addLog(li.Info,e,...t)}log(e,...t){this.addLog(li.Info,e,...t)}warn(e,...t){this.addLog(li.Warn,e,...t)}},di.logger=console,di.level=li.Debug;class pi{constructor(){this.dict=new Dictionary,this.list=[],this.stack=[]}install(){}getMenuCtl(e){return this.dict.getValue(e)}destory(e){let t=this.getMenuCtl(e);t&&(t.state==Zt.Opened?(t.close(),setTimeout(()=>{t.destory()},100)):t.destory())}openTab(e,t,...i){return this._open(e,{openType:te.Tab,openIndex:t,args:i})}openSubWindow(e,t,...i){return this._open(e,{openType:te.Subwindow,openIndex:t,args:i})}async openAsync(e,...t){let i=this._open(e,{openType:te.None,openIndex:0,args:t});return i.state==Zt.Opened?i:new Promise(e=>{i.sOpen.addOnce(()=>{e(i)},this)})}open(e,...t){return this._open(e,{openType:te.None,openIndex:0,args:t})}openByMenuIndexId(e,...t){let i=$a.config.menuIndex.getConfig(e);if(i)switch(i.openType){case te.Subwindow:this.openSubWindow(i.menuId,i.menuIndex,...t);break;case te.Tab:this.openTab(i.menuId,i.menuIndex,...t);break;default:this.open(i.menuId,...t)}else{$a.config.menu.getConfig(e)&&this.open(e,...t)}}openHome(){let e=this.getMenuCtl(p.Home);e&&e.state==Zt.Opened||(e=this.open(p.Home)),e.moduleWindow.contentPane&&!e.moduleWindow.contentPane.visible&&(e.moduleWindow.contentPane.visible=!0)}closeHome(){let e=this.getMenuCtl(p.Home);e&&e.moduleWindow&&e.moduleWindow.contentPane&&(e.moduleWindow.contentPane.visible=!1)}_open(e,t){let i=this.getMenuCtl(e);if(!i){let t=$a.config.menu.getConfig(e);if(!t){let t=`MenuManager.open 没有找到menuConfig, menuId=${e}`;return $a.system.toastText(t),di.Warn(t),null}let s=Lt.get(e);if(!s)return $a.system.toastText(z.Disable),di.Warn(`MenuManager.open 没有找到menuWindowConfig, menuId=${e}`),null;if(!s.windowClass)return di.Error(`MenuManager.open menuWindowConfig.windowClass=${s.windowClass}, menuId=${e}`),null;(i=new ri).__menuManager=this,i.menuId=e,i.menuConfig=t,i.menuWindowConfig=s,this.dict.add(e,i),i.menuId!=p.Home&&this.list.push(i)}i.open(t);let s=this.stack.indexOf(i);return-1!=s&&this.stack.splice(s,1),this.stack.push(i),i}back(e){this.close(e)}close(e){let t=this.getMenuCtl(e);t&&(t.closeIsDestory=!0,t.backMenuId=-1,t.close())}closeAll(){for(let e=this.stack.length-1;e>=0;e--)this.stack[e].menuId!=p.War&&this.stack[e].close()}__onMenuClose(e){for(let t=this.stack.length-1;t>=0;t--)this.stack[t]==e&&this.stack.splice(t,1);let t=0,i=0,s=0;for(let a of this.list)if(a.menuId!=e.menuId)switch(a.state){case Zt.Opened:if(t++,a.menuConfig.menuLayer==e.menuConfig.menuLayer&&i++,a.menuConfig.menuLayer==C.Module||a.menuConfig.menuLayer==C.ModuleTop||a.menuConfig.menuLayer==C.WarUI){s++;break}}console.log(`关闭面板 ${e.menuConfig.name} ( ${e.menuConfig.moduleName})  :" + openedNum=${t}, sameLayoutOpenedNum=${i}, moduleOpenedNum=${s}`);var a=0==s;if(a&&this.needOpenHomeFun&&(a=this.needOpenHomeFun()),a){let e=this.getMenuCtl(p.Home);e&&e.state==Zt.Opened||(e=this.open(p.Home))}e.__delayClose(),this.onTick(),oi.clearFreeLong()}getLastOpenMenuId(){return this.stack.length>0?this.stack[this.stack.length-1].menuId:-1}getLastModuleOpenMenuId(e){for(let t=this.stack.length-1;t>=0;t--){let i=this.stack[t];if(i.menuConfig.menuLayer==C.Module||i.menuConfig.menuLayer==C.ModuleTop){if(e&&-1!=e.indexOf(i.menuId))continue;return i.menuId}}return-1}isOpened(e){let t=!1,i=this.getMenuCtl(e);return i&&i.state==Zt.Opened&&(i.menuId==p.Home?i.moduleWindow&&i.moduleWindow.contentPane&&(t=i.moduleWindow.contentPane.visible):t=!0),t}isOpenedSubOrTab(e,t){if(!this.isOpened(e))return!1;let i=this.getMenuCtl(e);return!!i&&i.moduleWindow.isOpenSubOrTab(t)}getSubWindow(e,t){if(!this.isOpened(e))return null;let i=this.getMenuCtl(e);return i?i.moduleWindow.getSubwindow(t):null}onTick(){for(let e=0;e<this.list.length;e++){let t=this.list[e];if(t.state==Zt.Closed&&-1!=t.menuConfig.cacheTime){let e=Math.max(t.menuConfig.cacheTime,$a.deviceSetting.menuCacheTime);$a.time.localTimeMS-t.closeTime>=e&&t.closeIsDestory&&t.destory()}}}}class Si{static get serverCmdUrl(){return j.GmConfig+"ServerGM.json"}static get clientCmdUrl(){return j.GmConfig+"ClientGM.json"}static get serverListUrl(){return this._serverListUrl}static getServerMainUrl(e){if(e)return e.https?443==e.port?"https://"+e.ip:"https://"+e.ip+":"+e.port:"http://"+e.ip+":"+e.port}}Si._serverListUrl="ServerList.json";class Ci{static GetServerMonthDateNum(e,t){let i=this.GetServerDateByTimestamp();return null==e&&(e=i.getFullYear()),null==t&&(t=i.getMonth()+1),(i=new Date(e,t,0)).getDate()}static ToStr(e){return`${e.getFullYear()}-${e.getMonth()+1}-${e.getDate()} 周${0==e.getDay()?7:e.getDay()}  ${e.getHours()}:${e.getMinutes()}:${e.getSeconds()}`}static ToTimeStamp(e){var t=new Date(e.replace(/-/g,"/"));return Math.round(t.valueOf()/1e3)}static GetServerDateByTimestamp(e){return null==e&&(e=$a.time.serverSeconds),new Date(1e3*e-$a.time.localSubServerTimeZone)}static GetServerTimestampByHMS(e=0,t=0,i=0){return this.GetServerDateByHMS(e,t,i).getTime()}static GetServerTimestampByHMSText(e){let t,i,s,a=e.split(":");return a[0]&&(t=Number(a[0])||0),a[1]&&(i=Number(a[1])||0),a[2]&&(s=Number(a[2])||0),this.GetServerTimestampByHMS(t,i,s)}static GetServerDateByHMS(e=0,t=0,i=0){let s=this.GetServerDateByTimestamp();return s.setHours(e),s.setMinutes(t),s.setSeconds(i),s}static getServerNextDate(e=0,t=0,i=0){let s=this.GetServerDateByHMS(e,t,i);return s.getTime()>=$a.time.serverMilliseconds?s:(s.setHours(s.getHours()+24),s)}static getServerNextWeekDate(e,t=0,i=0,s=0){let a=this.GetServerDateByHMS(t,i,s),n=e-a.getDay();return n<0?n+=7:0==n&&a.getTime()<$a.time.serverMilliseconds&&(n+=7),a.setDate(a.getDate()+n),a}static getServerNextMonthDate(e,t=0,i=0,s=0){let a=this.GetServerDateByHMS(t,i,s),n=e;if(0==e?n=a.getDate():e<0&&(n=this.GetServerMonthDateNum()+e+1),a.setDate(n),a.getTime()>=$a.time.serverMilliseconds)return a;let r=this.GetServerMonthDateNum(a.getFullYear(),a.getMonth()+1);return e<0&&(n=r+e+1),n>r&&(n=r),a.setMonth(a.getMonth()+1),a.setDate(n),a}static getServerTomorrowZeroPointTimestamp(){return this.GetServerTimestampByHMS()+1e3*this.ONE_DAY_SECONDS}static IsServerWeek(e,t){return this.GetServerDateByTimestamp(e).getDay()==t}static isToday(e){let t=new Date(1e3*e),i=new Date;return t.getFullYear()==i.getFullYear()&&t.getMonth()==i.getMonth()&&t.getDate()==i.getDate()}static IsServerToday(e){let t=this.GetServerDateByTimestamp(e),i=this.GetServerDateByTimestamp();return t.getFullYear()==i.getFullYear()&&t.getMonth()==i.getMonth()&&t.getDate()==i.getDate()}static IsSameDay(e,t){let i=new Date(1e3*e),s=new Date(1e3*t);return i.getFullYear()==s.getFullYear()&&i.getMonth()==s.getMonth()&&i.getDate()==s.getDate()}static IsServerSameDay(e,t){let i=this.GetServerDateByTimestamp(e),s=this.GetServerDateByTimestamp(t);return i.getFullYear()==s.getFullYear()&&i.getMonth()==s.getMonth()&&i.getDate()==s.getDate()}static IsBeyondTimeInSameDay(e,t=0,i=0,s=0){return this.BeyondTimeInSameDay(e,t,i,s)/1e3<=0}static BeyondTimeInSameDay(e,t=0,i=0,s=0){if(24==t){return t=0,this.GetServerDateByHMS(t,i,s).getTime()/1e3+this.ONE_DAY_SECONDS-e}return this.GetServerDateByHMS(t,i,s).getTime()/1e3-e}static SubSecondTimeInDay(e,t=0,i=0,s=0){let a=this.BeyondTimeInSameDay(e,t,i,s);return a<=0&&(a+=this.ONE_DAY_SECONDS),a}static GetYMDHMS(e,t=!0,i=!1){null!=e&&(e*=1e3);let s=i?this.GetServerDateByTimestamp(e):new Date(e);const a=s.getFullYear(),n=s.getMonth()+1<10?"0"+(s.getMonth()+1):s.getMonth()+1,r=s.getDate()<10?"0"+s.getDate():s.getDate(),o=s.getHours()<10?"0"+s.getHours():s.getHours(),l=s.getMinutes()<10?"0"+s.getMinutes():s.getMinutes();return zt.Instance.lang==Ut.zh_cn?t?a+"-"+n+"-"+r+" "+o+":"+l:n+"-"+r+" "+o+":"+l:t?a+" "+Ci.MonthText[s.getMonth()]+" "+r+", "+o+":"+l:Ci.MonthText[s.getMonth()]+" "+r+", "+o+":"+l}static GetYMD(e,t=!1){null!=e&&(e*=1e3);let i=t?this.GetServerDateByTimestamp(e):new Date(e);const s=i.getFullYear(),a=i.getMonth()+1<10?"0"+(i.getMonth()+1):i.getMonth()+1,n=i.getDate()<10?"0"+i.getDate():i.getDate();return zt.Instance.lang==Ut.zh_cn?s+"-"+a+"-"+n:s+" "+Ci.MonthText[i.getMonth()]+" "+n}static GetMD(e,t=!1){null!=e&&(e*=1e3);let i=t?this.GetServerDateByTimestamp(e):new Date(e);const s=i.getMonth()+1<10?"0"+(i.getMonth()+1):i.getMonth()+1,a=i.getDate()<10?"0"+i.getDate():i.getDate();return zt.Instance.lang==Ut.zh_cn?s+"-"+a:Ci.MonthText[i.getMonth()]+" "+a}static GetHM(e,t=!1){null!=e&&(e*=1e3);let i=t?this.GetServerDateByTimestamp(e):new Date(e);return(i.getHours()<10?"0"+i.getHours():i.getHours())+":"+(i.getMinutes()<10?"0"+i.getMinutes():i.getMinutes())}static DaysLeft(e){let t=0,i=e-$a.time.serverSeconds;return i>0&&(t=Math.floor(i/this.ONE_DAY_SECONDS)),t}static TimeleftHHMMSS(e){let t=e-$a.time.serverSeconds;return t=Math.max(t,0),this.TimeFormatFixedHHMMSS(t)}static TimeleftIsOver(e){return e-$a.time.serverSeconds<=0}static TimeFormatFixedHHMMSS(e){let t="",i=Math.floor(e/3600),s=Math.floor(e%3600/60),a=Math.floor(e%60);return t+=i<10?"0"+i:i,t+=":"+(s<10?"0"+s:s),t+=":"+(a<10?"0"+a:a)}static TimeFormatFixedMMSS(e){let t="",i=Math.floor(e%3600/60),s=Math.floor(e%60);return t+=":"+(i<10?"0"+i:i),t+=":"+(s<10?"0"+s:s)}static TimeFormatFixedHHMMSSCN(e){let t="",i=Math.abs(e),s=Math.floor(i/3600),a=Math.floor(i%3600/60),n=Math.floor(i%60);return e<0&&(t="-"),t+=s<10?"0"+s:s,t+="："+(a<10?"0"+a:a),t+="："+(n<10?"0"+n:n)}static TimeFormatFixedXHXMXS(e){let t="",i=Math.floor(e/3600),s=Math.floor(e%3600/60),a=Math.floor(e%60);return i>0&&(t+=i+z.Hour),t+=s+z.Minute,t+=a+z.Second}static TimeFormatHHMMSS(e){let t="",i=Math.abs(e),s=Math.floor(i/3600),a=Math.floor(i%3600/60),n=Math.floor(i%60);return e<0&&(t="-"),t+=0==s?"":s<10?"0"+s:s,t+=(s>0?":":"")+(a<10?"0"+a:a),t+=":"+(n<10?"0"+n:n)}static TimeFormatXHXMXS(e){let t="",i=Math.floor(e/3600),s=Math.floor(e%3600/60),a=Math.floor(e%60);return i>0&&(t+=i+z.Hour),s>0&&(t+=s+z.Minute),t+=a+z.Second}static TimeFormatXHXMXSWithoutZero(e){let t="",i=Math.floor(e/3600),s=Math.floor(e%3600/60),a=Math.floor(e%60);return i>0&&(t+=i+z.Hour),s>0&&(t+=s+z.Minute),a>0&&(t+=a+z.Second),t}static TimeBeforeByTimestamp(e){let t=$a.time.serverSeconds-e;return this.TimeBefore(t)}static TimeBefore(e){let t=e/this.ONE_DAY_SECONDS;if(t>60)return this.GetYMD(t);if(t>30)return z.DATE_MonthBefore.format(1);if(t>14)return z.DATE_WeekBefore.format(2);if(t>7)return z.DATE_WeekBefore.format(1);if(t>1)return z.DATE_DayBefore.format(Math.floor(t));{let t=e/this.ONE_HOUR_SECONDS;if(t>1)return z.DATE_HourBefore.format(Math.floor(t));{let t=e/60;return t>1?z.DATE_MinuteBefore.format(Math.floor(t)):e>=1?z.DATE_SecondeBefore.format(Math.floor(e)):z.DATE_SecondeBefore.format(1)}}}}Ci.ONE_DAY_SECONDS=86400,Ci.ONE_HOUR_SECONDS=3600,Ci.MonthText=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],window.TimeHelper=Ci,function(e){e[e.Close=0]="Close",e[e.Noraml=1]="Noraml"}(hi||(hi={})),function(e){e[e.Normal=1]="Normal",e[e.StopServer=2]="StopServer"}(ui||(ui={}));class fi{constructor(){this.defaultServerItem={name:"默认",ip:"nisak.123u.com",port:5e3,state:hi.Noraml,https:!0,test:!1,shieldHero:[],main:"https://nisak.123u.com:5000"},this.channelUrl=`https://h5-jjsg-cdn.123u.com/server_config/config.${VersionConfig.AppVersion}.json`}static get Instance(){return fi._Instance||(fi._Instance=new fi),fi._Instance}get serverListUrl(){return Si.serverListUrl}get noticUrl(){return this.serverItem?this.serverItem.noticUrl?this.serverItem.noticUrl:this.serverItem.https?"https://"+this.serverItem.ip+"/notice.html":"http://"+this.serverItem.ip+"/notice.html":"http://172.16.0.93/notice.html"}getServerItem(e){if(!e)return null;if(this.serverList)for(let t=0;t<this.serverList.list.length;t++)if(this.serverList.list[t].name==e)return this.serverList.list[t];return null}get serverName(){if(!this._serverName){if($a.localStorage.serverName){this.getServerItem($a.localStorage.serverName)&&(this._serverName=$a.localStorage.serverName)}if(!this._serverName&&this.serverList){this.getServerItem(this.serverList.defaultServer)?this._serverName=this.serverList.defaultServer:this.serverList.list.length>0&&(this._serverName=this.serverList.list[0].name)}}return this._serverName}set serverName(e){this._serverName=e,$a.localStorage.serverName=e}get serverIndex(){if(this.serverList)for(let e=0;e<this.serverList.list.length;e++)if(this.serverList.list[e].name==this.serverName)return e;return-1}get serverItem(){let e=this.getServerItem(this.serverName);return e||this.defaultServerItem}async requestServerListAsync(){if(this.serverList)return!0;let e=this.serverListUrl;console.log("serverListUrl="+e);let t=await $a.asset.loadAsync(e,f.Json);if(t){if(this.serverList=isString(t)?JSON.parse(t):t,this.serverList&&this.serverList.list)for(let e of this.serverList.list)e.main=Si.getServerMainUrl(e);return console.log("获取服务器列表成功"),!0}return console.log("ChannelManager LoadFail: ServerList.json "),!1}get isTodayOpenedNotice(){if($a.localStorage.isNoticTodayNoOpen&&$a.localStorage.hasItem("lastOpenNoticeTime",!0)){let e=$a.localStorage.getInt("lastOpenNoticeTime",!0);return!Ci.isToday(e)}return!0}requestNotice(){console.log(this.noticUrl),Engine.loader.load(this.noticUrl,Handler.create(this,this.onResopneNotic))}onResopneNotic(){let e=Engine.loader.getRes(this.noticUrl);if(console.log(e),e)try{if(this.serverNoticData=isString(e)?JSON.parse(e):e,!this.serverNoticData||0==this.serverNoticData.visible)return;this.serverNoticData.type==ui.Normal?this.isTodayOpenedNotice&&($a.menu.open(p.Notice),$a.localStorage.setInt("lastOpenNoticeTime",$a.time.localTimeMS,!0)):$a.system.alrtTextFull(this.serverNoticData.content,this.serverNoticData.title,null,()=>{window.conch&&window.conch.exit&&window.conch.exit()})}catch(e){console.warn("通知有问题")}}set channelServer(e){this._channelServer=e}get channelServer(){return this._channelServer}async requestChannelServerAsync(){let e=this.channelUrl,t=await $a.asset.loadAsync(e,f.Json);if(t){let e=isString(t)?JSON.parse(t):t;return e.main=Si.getServerMainUrl(e),this.serverList={list:[e],defaultServer:e.name},console.log(`ChannelUrl Request Successed: ${e}`),!0}this.requestChannelServerAsync(),console.log(`ChannelUrl Request Failed: ${e} `)}}class yi{constructor(){this.sStateChange=new Signal}install(){this.startListen()}refreshState(){}startListen(){}stopListen(){}onStateChange(){this.sStateChange.dispatch()}}class wi extends yi{constructor(){super(...arguments),this._timelong=0,this._error=0,this._session=""}get isIndulge(){return!1}set timeLong(e){this._timelong=e}get timeLong(){return this._timelong}set error(e){this._error=e,0!=e&&1023!=e||Laya.timer.clearAll(this)}get error(){return this._error}set session(e){this._session=e}get session(){return this._session}}class Li{constructor(){this.list=[],this.login=new wi}initList(){this.list.push(this.login)}}class _i extends Li{install(){this.initList();for(let e=0;e<this.list.length;e++)this.list[e].install()}}class vi{constructor(){this.master=0,this.minor=0,this.revised=0,this.revised2=0}get isZero(){return 0==this.master&&0==this.minor&&0==this.revised&&0==this.revised2}setVersionTxt(e){if(null==e)return this;if(isNullOrEmpty(e.trim()))return this;var t=(e=(e=e.toLowerCase()).replace("version:","").replace("version","").replace("ver","").replace("v","")).split(".");return this.master=parseInt(t[0]),t.length>1&&(this.minor=parseInt(t[1])),t.length>2&&(this.revised=parseInt(t[2])),t.length>3&&(this.revised2=parseInt(t[3])),this}equal(e){return this.master==e.master&&this.minor==e.minor&&this.revised==e.revised&&this.revised2==e.revised2}toString(){return`v${this.master}.${this.minor}.${this.revised}.${this.revised2}`}}var Ti=Laya.LocalStorage;class Gi{constructor(){this.sLocalVersionChange=new Signal,this.assetCopytoFileVersionData=new vi,this.localAppVersionData=new vi,this.webAppVersionData=new vi,this.localResVersionData=new vi,this.webResVersionData=new vi,this.localPartialVersionData=new vi,this.webPartialVersionData=new vi}static get Instance(){return Gi._Instance||(Gi._Instance=new Gi),Gi._Instance}init(){this.localAppVersionData.setVersionTxt(VersionConfig.AppVersion),this.localResVersionData.setVersionTxt(VersionConfig.ResVersion)}get localAppVersion(){return window.VersionConfig&&VersionConfig.AppVersion?VersionConfig.AppVersion:"v1.0.0.0"}get localResVersion(){return this.__localResVersion||(this.__localResVersion=Ti.getItem("__localResVersion"),this.__localResVersion||(this.__localResVersion=this.localAppVersion)),this.__localResVersion}set localResVersion(e){this.__localResVersion=e,Ti.setItem("__localResVersion",e),this.sLocalVersionChange.dispatch()}get assetsCopytoFileVersion(){return this.__assetsCopytoFileVersion||(this.__assetsCopytoFileVersion=Ti.getItem("__assetsCopytoFileVersion"),this.__assetsCopytoFileVersion||(this.__assetsCopytoFileVersion="0.0.0")),this.__assetsCopytoFileVersion}set assetsCopytoFileVersion(e){this.__assetsCopytoFileVersion=e,Ti.setItem("__assetsCopytoFileVersion",e)}get localPartialVersion(){return this.__localPartialVersion||(this.__localPartialVersion=Ti.getItem("__localPartialVersion"),this.__localPartialVersion||(this.__localPartialVersion="0.0.0")),this.__localPartialVersion}set localPartialVersion(e){this.__localPartialVersion=e,Ti.setItem("__localPartialVersion",e)}get isNeedAssetsCopy(){return!1}}var Pi=Laya.SoundManager;Laya.Handler;class Ii{constructor(){this.soundPlayingDic=new Dictionary,this.localUseGlobal=!0}install(){}onAppResume(){this.replayMusic()}onLogin(){}playMusic(e,t,i,s){}replayMusic(){this.lastMusic?this.playMusic(this.lastMusic):this.playMusic(ni.MM_BGM_01)}playSound(e,t,i,s,a){}playSoundComplete(e){this.soundPlayingDic.hasKey(e)&&this.soundPlayingDic.remove(e)}stopSound(e){let t=ni.getPath(e);this.soundPlayingDic.hasKey(t)&&this.soundPlayingDic.remove(t),Pi.stopSound(t)}stopAll(){this.soundPlayingDic&&this.soundPlayingDic.clear(),Pi.stopAll()}stopAllSound(){this.soundPlayingDic&&this.soundPlayingDic.clear(),Pi.stopAllSound()}stopMusic(){Pi.stopMusic()}get muted(){return void 0===this._muted&&(this._muted=!!$a.localStorage.hasItem("sound_muted",this.localUseGlobal)&&$a.localStorage.getBoolean("sound_muted",this.localUseGlobal)),this._muted}set muted(e){this._muted=e,$a.localStorage.setBoolean("sound_muted",e,this.localUseGlobal),Pi.muted=e}get soundMuted(){return void 0===this._soundMuted&&(this._soundMuted=!!$a.localStorage.hasItem("sound_soundMuted",this.localUseGlobal)&&$a.localStorage.getBoolean("sound_soundMuted",this.localUseGlobal)),this._soundMuted}set soundMuted(e){this._soundMuted=e,$a.localStorage.setBoolean("sound_soundMuted",e,this.localUseGlobal),Pi.soundMuted=e}get musicMuted(){return void 0===this._musicMuted&&(this._musicMuted=!!$a.localStorage.hasItem("sound_musicMuted",this.localUseGlobal)&&$a.localStorage.getBoolean("sound_musicMuted",this.localUseGlobal)),this._musicMuted}set musicMuted(e){this._musicMuted=e,$a.localStorage.setBoolean("sound_musicMuted",e,this.localUseGlobal),Pi.musicMuted=e,e?Pi.stopMusic():this.replayMusic()}get musicVolume(){return void 0===this._musicVolume&&(this._musicVolume=$a.localStorage.hasItem("sound_musicVolume",this.localUseGlobal)?$a.localStorage.getFloat("sound_musicVolume",this.localUseGlobal):1),this._musicVolume}set musicVolume(e){this._musicVolume=e,$a.localStorage.setFloat("sound_musicVolume",e,this.localUseGlobal),Pi.musicVolume=e}get soundVolume(){return void 0===this._soundVolume&&(this._soundVolume=$a.localStorage.hasItem("sound_soundVolume",this.localUseGlobal)?$a.localStorage.getFloat("sound_soundVolume",this.localUseGlobal):1),this._soundVolume}set soundVolume(e){this._soundVolume=e,$a.localStorage.setFloat("sound_soundVolume",e,this.localUseGlobal),Pi.soundVolume=e}get autoStopMusic(){return this._autoStopMusic}set autoStopMusic(e){Pi.autoStopMusic=e,this._autoStopMusic=e}}class ki{CopyValue(e){e.year=this.year,e.month=this.month,e.date=this.date,e.week=this.week,e.hour=this.hour,e.minute=this.minute,e.second=this.second,e.timezone=this.timezone,e.timestamp=this.timezone}}class Mi{constructor(){this.sServerDateChange=new Typed2Signal,this._localDateTime=new ki,this._serverDateTime=new ki,this._server2LocalDateTime=new ki,this._preServer2LocalDateTime=new ki,this._preFrame=-1,this._settingTimestampServer=(new Date).getTime(),this._settingTimestampLocal=(new Date).getTime(),this._preServerFrame=0,this.___testTimeDifference=0,this._localSubServerTime=0,this._localSubServerTimeZone=0}get localDateTime(){return this.refresh(),this._localDateTime}IsExcelArrived(e){let t=this.localDateTime;return t.hour>=e.H&&t.minute>=e.Mm&&t.second>=e.S}IsExcelIn(e,t){return this.IsExcelArrived(e)&&!this.IsExcelArrived(t)}get serverDateTime(){return this.refresh(),this._serverDateTime}get server2LocalDateTime(){return this.refresh(),this._server2LocalDateTime}start(){this.stop(),Laya.timer.loop(1e3,this,this.refresh)}stop(){Laya.timer.clearAll(this)}refresh(){if(Laya.timer.currFrame!=this._preFrame){this._preFrame=Laya.timer.currFrame;let e=new Date;this._localDateTime.timestamp=e.getTime(),this._localDateTime.year=e.getFullYear(),this._localDateTime.month=e.getMonth(),this._localDateTime.date=e.getDate(),this._localDateTime.week=e.getDay(),this._localDateTime.hour=e.getHours(),this._localDateTime.minute=e.getMinutes(),this._localDateTime.second=e.getSeconds(),this._serverDateTime.timestamp=this.settingServerTimestamp+this.settingTimeLength,e=new Date(this._serverDateTime.timestamp),this._serverDateTime.year=e.getFullYear(),this._serverDateTime.month=e.getMonth(),this._serverDateTime.date=e.getDate(),this._serverDateTime.week=e.getDay(),this._serverDateTime.hour=e.getHours(),this._serverDateTime.minute=e.getMinutes(),this._serverDateTime.second=e.getSeconds(),this._server2LocalDateTime.timestamp=this._serverDateTime.timestamp,e=new Date(this._serverDateTime.timestamp-this.localSubServerTimeZone),this._server2LocalDateTime.year=e.getFullYear(),this._server2LocalDateTime.month=e.getMonth(),this._server2LocalDateTime.date=e.getDate(),this._server2LocalDateTime.week=e.getDay(),this._server2LocalDateTime.hour=e.getHours(),this._server2LocalDateTime.minute=e.getMinutes(),this._server2LocalDateTime.second=e.getSeconds(),this._server2LocalDateTime.timezone=this._serverDateTime.timezone,this._preServer2LocalDateTime.date&&this._preServer2LocalDateTime.date!=this._server2LocalDateTime.date&&this.sServerDateChange.dispatch(this._preServer2LocalDateTime.date,this._server2LocalDateTime.date),this._server2LocalDateTime.CopyValue(this._preServer2LocalDateTime)}}get serverTimezoneMilliseconds(){return 60*this._serverDateTime.timezone*60*1e3}get localTimeMS(){return this.refresh(),this._localDateTime.timestamp}get localTimeS(){return this.refresh(),Math.floor(this._localDateTime.timestamp/1e3)}settingServerTime(e,t){null!=t&&(this._serverDateTime.timezone=t,this._localSubServerTimeZone=60*(new Date).getTimezoneOffset()*1e3*-1-60*t*60*1e3),null!=e&&(this.settingServerTimestamp=1e3*e)}get settingServerTimestamp(){return this._settingTimestampServer}set settingServerTimestamp(e){this._settingTimestampServer=e,this._settingTimestampLocal=this.localTimeMS,this._localSubServerTime=this._settingTimestampLocal-this._settingTimestampServer}get settingTimeLength(){return this.localTimeMS-this._settingTimestampLocal}get serverSeconds(){return Math.floor(this.serverMilliseconds/1e3)}get serverMilliseconds(){return this.refresh(),this.serverDateTime.timestamp}get localSubServerTime(){return this._localSubServerTime+this.___testTimeDifference}get localSubServerTimeZone(){return this._localSubServerTimeZone+this.___testTimeDifference}getSubSecondsPre(e){let t=this.serverSeconds-e;return t<0&&(t=0),t}getSubSecondsAfter(e){return e-this.serverSeconds}getSubMillisecondsPre(e){return this.serverMilliseconds-e}getSubMillisecondsAfter(e){return e-this.serverMilliseconds}}class Di extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameLaunch","SystemToastMessage")}constructFromXML(e){super.constructFromXML(e),this.m_title=this.getChild("title")}}Di.URL="ui://47qsdr42nk8t3",Di.DependPackages=["GameLaunch"];class Fi extends Di{play(e,t){this._onCompleteHandler&&this._onCompleteHandler.recover(),this._onCompleteHandler=t,this.m_title.text=e,Tween.clearAll(this),Z.floatMsg.addChild(this),re.centerScreen(this),this.alpha=0,Tween.to(this,{y:this.y-100,alpha:1},500,Ease.quadInOut),Tween.to(this,{y:this.y-200,alpha:0},500,Ease.quadInOut,Handler.create(this,this.onComplete),1e3)}onComplete(){this.removeFromParent(),this._onCompleteHandler&&(this._onCompleteHandler.runWith(this),this._onCompleteHandler.recover(),this._onCompleteHandler=null)}}var Ai,bi,Bi,Hi=Laya.Handler;class Ri{constructor(){this.list=[],this.pools=[],this.timeSpacing=1}play(e){e!=this.lastTxt?this.show(e):getTime()-this.lastTime>=this.timeSpacing&&this.show(e)}show(e){let t;this.lastTxt=e,this.lastTime=getTime(),this.pools.length>0?t=this.pools.pop():(t=Fi.createInstance(),this.list.push(t)),t.play(e,Hi.create(this,this.onItemComplete))}onItemComplete(e){this.pools.push(e)}}class xi extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameLaunch","SystemAlertMessage")}constructFromXML(e){super.constructFromXML(e),this.m_content=this.getChild("content"),this.m_title=this.getChild("title"),this.m_dialog=this.getChild("dialog"),this.m_okBtn=this.getChild("okBtn")}}xi.URL="ui://47qsdr42nk8t1",xi.DependPackages=["GameLaunch"];class Ni extends xi{get closeButton(){return this.m_dialog.m_closeButton}open(e,t="",i=null,s=null,a=null,n=!0,r=!0,o=!0){isNullOrEmpty(t)&&(t=""),this.yesFun=s,this.yesObj=i,this.isClickButtonAutoClose=o,this.m_content.text=e,this.m_title.text=t,this.m_okBtn.title=a,this.m_okBtn.enabled=r,this.closeButton.enabled=r,this.closeButton.visible=n,this.m_okBtn.onClick(this,this.onClickYes),this.closeButton.onClick(this,this.close),Z.showDialogModel(),re.centerScreen(this),this.scaleX=0,this.scaleY=0,this.x=$a.screenSetting.screenWidth>>1,this.y=$a.screenSetting.screenHeight>>1,this.alpha=0,Tween.to(this,{scaleX:1,scaleY:1,alpha:1},250,Ease.backInOut),Z.floatMsg.addChild(this)}close(){Z.hideDialogModel(),Tween.to(this,{scaleX:0,scaleY:0,alpha:0},250,Ease.quadInOut,Handler.create(this,this.onHide))}onHide(){this.removeFromParent()}onClickYes(){this.isClickButtonAutoClose&&this.close(),this.yesFun&&(this.yesObj?this.yesFun.apply(this.yesObj):this.yesFun())}}class Ui extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameLaunch","SystemConfirmMessage")}constructFromXML(e){super.constructFromXML(e),this.m_content=this.getChild("content"),this.m_title=this.getChild("title"),this.m_dialog=this.getChild("dialog"),this.m_okBtn=this.getChild("okBtn"),this.m_cancleBtn=this.getChild("cancleBtn")}}Ui.URL="ui://47qsdr42nk8t2",Ui.DependPackages=["GameLaunch"];class Ei extends Ui{get closeButton(){return this.m_dialog.m_closeButton}open(e,t="",i=null,s=null,a=null,n=null,r=null,o=!0,l=!0){isNullOrEmpty(t)&&(t=""),this.caller=i,this.yesFun=s,this.noFun=a,this.isClickButtonAutoClose=l,this.m_content.text=e,this.m_title.text=t,this.m_okBtn.title=n,this.m_cancleBtn.title=r,this.closeButton.visible=o,this.m_okBtn.onClick(this,this.onClickYes),this.m_cancleBtn.onClick(this,this.onClickNo),this.closeButton.onClick(this,this.onClickClose),Z.showDialogModel(),re.centerScreen(this),Tween.clearAll(this),this.scaleX=0,this.scaleY=0,this.x=$a.screenSetting.screenWidth>>1,this.y=$a.screenSetting.screenHeight>>1,this.alpha=0,Tween.to(this,{scaleX:1,scaleY:1,alpha:1},250,Ease.backInOut),Z.floatMsg.addChild(this)}close(){Z.hideDialogModel(),Tween.to(this,{scaleX:0,scaleY:0,alpha:0},250,Ease.quadInOut,Handler.create(this,this.onHide))}onHide(){this.removeFromParent()}onClickYes(){this.isClickButtonAutoClose&&this.close(),this.yesFun&&(this.caller?this.yesFun.apply(this.caller):this.yesFun())}onClickNo(){this.isClickButtonAutoClose&&this.close(),this.noFun&&(this.caller?this.noFun.apply(this.caller):this.noFun())}onClickClose(){this.close()}}class Oi{constructor(){this.toastMessage=new Ri}playOpenSound(){window.Game&&window.Game._isInstall&&$a.sound.playSound(ni.MM02_Popup)}get alertMessage(){return this._alertMessage||(this._alertMessage=Ni.createInstance()),this._alertMessage}get confirmMessage(){return this._confirmMessage||(this._confirmMessage=Ei.createInstance()),this._confirmMessage}toastText(e){this.toastMessage.play(e)}toastMsg(e,...t){let i=$a.config.msg.getTxtFormat(e,...t);this.toastMessage.play(i)}toastFormatText(e,...t){this.toastText(format(e,t))}toastItemNotEnough(e){let t=$a.config.item.getConfig(e),i="";i=t?t.name:e.toString(),this.toastText(format(z.ToastTextItemNotEnough,i))}alertText(e,t,i){this.alrtTextFull(e,"",t,i)}alertMsg(e,t,i){let s=$a.config.msg.getTxt(e);this.alrtTextFull(s,"",t,i)}alertMsgFormat(e,t,i,s){let a=$a.config.msg.getTxtFormat(e,...t);this.alrtTextFull(a,"",i,s)}alrtTMsgFull(e,t,i="",s=null,a=null,n=null,r=!0,o=!0){let l=$a.config.msg.getTxtFormat(e,...t);this.alrtTextFull(l,"",s,a,n,r,o)}alrtTextFull(e,t="",i=null,s=null,a=null,n=!0,r=!0,o=!0){isNullOrEmpty(a)&&(a=$a.launchText.btnYes),this.alertMessage.open(e,t,i,s,a,n,r,o),this.playOpenSound()}closeAlert(){this.alertMessage.close()}confirmMsg(e,t,i="",s=null,a=null,n=null,r=null,o=null,l=!0,c=!0){let h=$a.config.msg.getTxtFormat(e,...t);this.confirmText(h,i,s,a,n,r,o,l,c)}confirmText(e,t="",i=null,s=null,a=null,n=null,r=null,o=!0,l=!0){isNullOrEmpty(n)&&(n=z.ButtonYes),isNullOrEmpty(r)&&(r=z.ButtonNo),this.confirmMessage.open(e,t,i,s,a,n,r,o,l),this.playOpenSound()}alertMessageHide(){this._alertMessage&&this._alertMessage.close(),this._confirmMessage&&this._confirmMessage.close()}}class Wi extends Oi{}class Vi{constructor(){this.tips=[],this.btnYes="确定",this.LoadedConfig="加载配置文件",this.LoadedUI="加载UI",this.LoadedWar="加载战斗资源",this.LoadedWarConfig="加载战斗配置",this.LoadedEnd="加载完成"}setLangForEn(){this.tips=[],this.btnYes="Ok",this.LoadedConfig="Loading Config...",this.LoadedUI="Loading UI...",this.LoadedEnd="Loading Complete"}}class Xi{constructor(){this.percent=0,this.showPercent=0}setBegin(){this.percent=0,this.showPercent=0,this.setPercent(0)}loading(e){e<=0?e=.001:e>100&&(e=100),this.percent=e}setTip(e){let t=$a.loader.current;t&&t.setTip(e)}setPercent(e){let t=$a.loader.current;t&&(t.setMax(100),t.setProgress(Math.ceil(e)))}starTweenPrecent(){this.stopTweenPrecent(),this._tweenHandler=setInterval(()=>{this.showPercent=Math.min(100,Math.ceil(Mathf.Lerp(this.showPercent,this.percent,.5))),this.setPercent(this.showPercent),this.showPercent>=100&&this.stopTweenPrecent()},100)}stopTweenPrecent(){this._tweenHandler&&(clearInterval(this._tweenHandler),this._tweenHandler=null)}onBegin(){this.setBegin(),this.starTweenPrecent()}onLoadedConfig(e,t,i){this.setTip($a.launchText.LoadedConfig),this.loading(0+Math.ceil(40*i))}onLoadedLangConfig(e,t,i){this.setTip($a.launchText.LoadedConfig),this.loading(40+Math.ceil(20*i))}onLoadedFgui(e,t){this.setTip($a.launchText.LoadedUI),this.loading(60+Math.ceil(e/t*40))}onEnd(){this.setTip($a.launchText.LoadedEnd),this.loading(100)}Reset(){this.loading(0)}}class qi{constructor(){this.isOpened=!1,this.delayShowPanelHandler=-1}get isDelayShowPanel(){return this.loaderId==S.EnterModule}open(){this.isOpened=!0,this.loaderPanel&&(this.loaderPanel.showOn(Z.loader),this.loaderPanel.setContentVisiable(!0),this.isDelayShowPanel&&(this.loaderPanel.setContentVisiable(!1),clearTimeout(this.delayShowPanelHandler),this.delayShowPanelHandler=setTimeout(()=>{this.loaderPanel.setContentVisiable(!0)},100)))}close(){-1!=this.delayShowPanelHandler&&(clearTimeout(this.delayShowPanelHandler),this.delayShowPanelHandler=-1),this.isOpened=!1,this.loaderPanel&&(this.loaderPanel.hide(),this.isDelayShowPanel&&this.loaderPanel.setContentVisiable(!1))}setProgress(e){e<=0&&(e=1),this.loaderPanel&&this.loaderPanel.setValue(e)}setMax(e){this.loaderPanel&&this.loaderPanel.setMax(e)}setTip(e){this.loaderPanel&&this.loaderPanel.setTip(e)}setTips(e){this.loaderPanel&&this.loaderPanel.setTips(e)}setVersion(){this.loaderPanel&&this.loaderPanel.setVersion()}}class Ki extends ee{constructor(){super(),this.sShowComplete=new Signal,this.sHideComplete=new Signal}onInit(){super.onInit()}getContentVisiable(){return!!this.contentPane&&this.contentPane.visible}setContentVisiable(e){this.contentPane&&(this.contentPane.visible=e)}doShowAnimation(){this.onWindowWillShow(),super.doShowAnimation()}doHideAnimation(){this.onWindowWillHide(),super.doHideAnimation()}onShown(){this.sShowComplete.dispatch()}onHide(){this.sHideComplete.dispatch()}setMax(e){}setValue(e){}setTip(e){}setTips(e){}setVersion(){}}class ji extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameLaunch","EnterModuleLoader")}constructFromXML(e){super.constructFromXML(e),this.m_Reconnection=this.getController("Reconnection"),this.m_title=this.getChild("title"),this.m_help=this.getChild("help"),this.m_txt_resVer=this.getChild("txt_resVer"),this.m_txt_gamever=this.getChild("txt_gamever"),this.m_screenBG=this.getChild("screenBG"),this.m_progressBar=this.getChild("progressBar")}}ji.URL="ui://47qsdr42f84s0",ji.DependPackages=["GameLaunch"];class zi extends ji{}class Yi extends Ki{constructor(){super(),this.tips=[],this.__setTipHandlerTimer=-1}onInit(){this.loader=zi.createInstance(),this.contentPane=this.loader,super.onInit(),this.tips=$a.launchText.tips,this.setVersion()}onShown(){super.onShown(),this.beginTips(),this.setVersion(),$a.version.sLocalVersionChange.add(this.setVersion,this)}onHide(){super.onHide(),this.stopTips(),$a.version.sLocalVersionChange.remove(this.setVersion,this)}beginTips(){this.stopTips(),this.tips&&this.tips.length>0&&this.__setTipHandler()}stopTips(){this.__setTipHandlerTimer>0&&(clearTimeout(this.__setTipHandlerTimer),this.__setTipHandlerTimer=-1)}__setTipHandler(){this.loader.m_help.text=this.tips[Random.range(0,this.tips.length)],this.__setTipHandlerTimer=setTimeout(()=>{this.__setTipHandler()},Random.range(100,400))}setMax(e){this.loader.m_progressBar.max=e}setValue(e){this.loader.m_progressBar.value=e}setTip(e){this.loader.m_title.text=e}setTips(e){}setVersion(){this.loader.m_txt_gamever.text="GameVersion:"+$a.version.localAppVersionData.toString(),this.loader.m_txt_resVer.text="ResVersion:"+$a.version.localResVersionData.toString()}}class $i extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameLaunch","EnterLoginLoader")}constructFromXML(e){super.constructFromXML(e),this.m_title=this.getChild("title"),this.m_help=this.getChild("help"),this.m_txt_resVer=this.getChild("txt_resVer"),this.m_txt_gamever=this.getChild("txt_gamever"),this.m_progressBar=this.getChild("progressBar"),this.m_imgLogo=this.getChild("imgLogo")}}$i.URL="ui://47qsdr42mrzrw2o",$i.DependPackages=["GameLaunch"];class Ji extends $i{}class Qi extends Ki{constructor(){super(),this.tips=[],this.__setTipHandlerTimer=-1}onInit(){this.loader=Ji.createInstance(),this.contentPane=this.loader,super.onInit(),this.tips=$a.launchText.tips,this.setVersion()}onShown(){super.onShown(),this.beginTips(),this.setVersion(),$a.version.sLocalVersionChange.add(this.setVersion,this)}onHide(){super.onHide(),this.stopTips(),$a.version.sLocalVersionChange.remove(this.setVersion,this)}beginTips(){this.stopTips(),this.tips&&this.tips.length>0&&this.__setTipHandler()}stopTips(){this.__setTipHandlerTimer>0&&(clearTimeout(this.__setTipHandlerTimer),this.__setTipHandlerTimer=-1)}__setTipHandler(){this.loader.m_help.text=this.tips[Random.range(0,this.tips.length)],this.__setTipHandlerTimer=setTimeout(()=>{this.__setTipHandler()},Random.range(100,400))}setMax(e){this.loader.m_progressBar.max=e}setValue(e){this.loader.m_progressBar.value=e}setTip(e){this.loader.m_title.text=e}setTips(e){}setVersion(){this.loader.m_txt_gamever.text="GameVersion:"+$a.version.localAppVersionData.toString(),this.loader.m_txt_resVer.text="ResVersion:"+$a.version.localResVersionData.toString()}}class Zi{constructor(){this.dict=new Dictionary,this.isInited=!1}static get Instance(){return Zi._Instance||(Zi._Instance=new Zi),Zi._Instance}install(){if(this.isInited)return;this.isInited=!0;let e=new qi;e.loaderId=S.None,this.dict.add(e.loaderId,e);let t=new Yi;(e=new qi).loaderId=S.Circle,e.loaderPanel=t,this.dict.add(e.loaderId,e);let i=new Qi;(e=new qi).loaderId=S.Launch,e.loaderPanel=i,this.dict.add(e.loaderId,e);let s=new Yi;(e=new qi).loaderId=S.EnterModule,e.loaderPanel=s,this.dict.add(e.loaderId,e)}getLoaderCtl(e){return this.dict.getValue(e)}open(e){let t=this.getLoaderCtl(e);return t||console.error("没有找到加载控制器 LoaderManager open loaderId=",e),t.open(),this.current=t,t}close(e){let t=this.getLoaderCtl(e);t&&(this.current==t&&(this.current=null),t.close())}closeAll(){let e=this.dict.getValues();for(let t=0;t<e.length;t++)e[t].close();this.current=null}setProgress(e){this.current&&this.current.setProgress(e)}setMax(e){this.current&&this.current.setMax(e)}}class es{static get onError(){return net.logic.onError}static get onConnect(){return net.logic.onConnect}static get onClose(){return net.logic.onClose}static get onReconnect(){return net.logic.onReconnect}static get logicPing(){return net.logic.ping}static GamerLoginC2S(e,t){net.logic.gamerLoginC2S(e,t)}static get gamerLoginS2C(){return net.logic.gamerLoginS2C}static async AsyncGamerLoginC2S(e,t){return new Promise(i=>{let s={error:200},a=setTimeout(()=>{i(s)},5e3),n=function(e){clearTimeout(a),es.gamerLoginS2C.off(n),i(e)};es.gamerLoginS2C.on(n),es.GamerLoginC2S(e,t)})}static GamerLoginGetDataC2S(){net.logic.gamerLoginGetDataC2S()}static get gamerLoginGetDataS2C(){return net.logic.gamerLoginGetDataS2C}static async AsyncGamerLoginGetDataC2S(){return new Promise(e=>{let t={error:200},i=setTimeout(()=>{e(t)},5e3),s=function(t){clearTimeout(i),es.gamerLoginGetDataS2C.off(s),e(t)};es.gamerLoginGetDataS2C.on(s),es.GamerLoginGetDataC2S()})}static ServerTimeC2S(){net.logic.serverTimeC2S()}static get serverTimeS2C(){return net.logic.serverTimeS2C}static async AsyncServerTimeC2S(){return new Promise(e=>{let t={error:200},i=setTimeout(()=>{e(t)},5e3),s=function(t){clearTimeout(i),es.serverTimeS2C.off(s),e(t)};es.serverTimeS2C.on(s),es.ServerTimeC2S()})}static GamerSubChatChannelC2S(e,t){net.logic.gamerSubChatChannelC2S(e,t)}static get gamerSubChatChannelS2C(){return net.logic.gamerSubChatChannelS2C}static async AsyncGamerSubChatChannelC2S(e,t){return new Promise(i=>{let s={error:200},a=setTimeout(()=>{i(s)},5e3),n=function(e){clearTimeout(a),es.gamerSubChatChannelS2C.off(n),i(e)};es.gamerSubChatChannelS2C.on(n),es.GamerSubChatChannelC2S(e,t)})}static GamerChangeNameC2S(e){net.logic.gamerChangeNameC2S(e)}static get gamerChangeNameS2C(){return net.logic.gamerChangeNameS2C}static async AsyncGamerChangeNameC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),es.gamerChangeNameS2C.off(a),t(e)};es.gamerChangeNameS2C.on(a),es.GamerChangeNameC2S(e)})}static GamerChangeAvatarC2S(e){net.logic.gamerChangeAvatarC2S(e)}static get gamerChangeAvatarS2C(){return net.logic.gamerChangeAvatarS2C}static async AsyncGamerChangeAvatarC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),es.gamerChangeAvatarS2C.off(a),t(e)};es.gamerChangeAvatarS2C.on(a),es.GamerChangeAvatarC2S(e)})}static GamerGetBackpackC2S(){net.logic.gamerGetBackpackC2S()}static get gamerGetBackpackS2C(){return net.logic.gamerGetBackpackS2C}static async AsyncGamerGetBackpackC2S(){return new Promise(e=>{let t={error:200},i=setTimeout(()=>{e(t)},5e3),s=function(t){clearTimeout(i),es.gamerGetBackpackS2C.off(s),e(t)};es.gamerGetBackpackS2C.on(s),es.GamerGetBackpackC2S()})}static GamerSellItemC2S(e,t,i){net.logic.gamerSellItemC2S(e,t,i)}static get gamerSellItemS2C(){return net.logic.gamerSellItemS2C}static async AsyncGamerSellItemC2S(e,t,i){return new Promise(s=>{let a={error:200},n=setTimeout(()=>{s(a)},5e3),r=function(e){clearTimeout(n),es.gamerSellItemS2C.off(r),s(e)};es.gamerSellItemS2C.on(r),es.GamerSellItemC2S(e,t,i)})}static GamerUseItemC2S(e,t,i){net.logic.gamerUseItemC2S(e,t,i)}static get gamerUseItemS2C(){return net.logic.gamerUseItemS2C}static async AsyncGamerUseItemC2S(e,t,i){return new Promise(s=>{let a={error:200},n=setTimeout(()=>{s(a)},5e3),r=function(e){clearTimeout(n),es.gamerUseItemS2C.off(r),s(e)};es.gamerUseItemS2C.on(r),es.GamerUseItemC2S(e,t,i)})}static GamerFriendChatC2S(e,t){net.logic.gamerFriendChatC2S(e,t)}static get gamerFriendChatS2C(){return net.logic.gamerFriendChatS2C}static async AsyncGamerFriendChatC2S(e,t){return new Promise(i=>{let s={error:200},a=setTimeout(()=>{i(s)},5e3),n=function(e){clearTimeout(a),es.gamerFriendChatS2C.off(n),i(e)};es.gamerFriendChatS2C.on(n),es.GamerFriendChatC2S(e,t)})}static GamerWorldChatC2S(e,t){net.logic.gamerWorldChatC2S(e,t)}static get gamerWorldChatS2C(){return net.logic.gamerWorldChatS2C}static async AsyncGamerWorldChatC2S(e,t){return new Promise(i=>{let s={error:200},a=setTimeout(()=>{i(s)},5e3),n=function(e){clearTimeout(a),es.gamerWorldChatS2C.off(n),i(e)};es.gamerWorldChatS2C.on(n),es.GamerWorldChatC2S(e,t)})}static GamerTestChatC2S(e,t){net.logic.gamerTestChatC2S(e,t)}static get gamerTestChatS2C(){return net.logic.gamerTestChatS2C}static async AsyncGamerTestChatC2S(e,t){return new Promise(i=>{let s={error:200},a=setTimeout(()=>{i(s)},5e3),n=function(e){clearTimeout(a),es.gamerTestChatS2C.off(n),i(e)};es.gamerTestChatS2C.on(n),es.GamerTestChatC2S(e,t)})}static GamerClubRequestC2S(e,t){net.logic.gamerClubRequestC2S(e,t)}static get gamerClubRequestS2C(){return net.logic.gamerClubRequestS2C}static async AsyncGamerClubRequestC2S(e,t){return new Promise(i=>{let s={error:200},a=setTimeout(()=>{i(s)},5e3),n=function(e){clearTimeout(a),es.gamerClubRequestS2C.off(n),i(e)};es.gamerClubRequestS2C.on(n),es.GamerClubRequestC2S(e,t)})}static GamerNewFriendReqC2S(e,t){net.logic.gamerNewFriendReqC2S(e,t)}static get gamerNewFriendReqS2C(){return net.logic.gamerNewFriendReqS2C}static async AsyncGamerNewFriendReqC2S(e,t){return new Promise(i=>{let s={error:200},a=setTimeout(()=>{i(s)},5e3),n=function(e){clearTimeout(a),es.gamerNewFriendReqS2C.off(n),i(e)};es.gamerNewFriendReqS2C.on(n),es.GamerNewFriendReqC2S(e,t)})}static GamerDelFriendC2S(e){net.logic.gamerDelFriendC2S(e)}static get gamerDelFriendS2C(){return net.logic.gamerDelFriendS2C}static async AsyncGamerDelFriendC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),es.gamerDelFriendS2C.off(a),t(e)};es.gamerDelFriendS2C.on(a),es.GamerDelFriendC2S(e)})}static GamerProcessFriendReqC2S(e,t){net.logic.gamerProcessFriendReqC2S(e,t)}static get gamerProcessFriendReqS2C(){return net.logic.gamerProcessFriendReqS2C}static async AsyncGamerProcessFriendReqC2S(e,t){return new Promise(i=>{let s={error:200},a=setTimeout(()=>{i(s)},5e3),n=function(e){clearTimeout(a),es.gamerProcessFriendReqS2C.off(n),i(e)};es.gamerProcessFriendReqS2C.on(n),es.GamerProcessFriendReqC2S(e,t)})}static GamerGetMailC2S(){net.logic.gamerGetMailC2S()}static get gamerGetMailS2C(){return net.logic.gamerGetMailS2C}static async AsyncGamerGetMailC2S(){return new Promise(e=>{let t={error:200},i=setTimeout(()=>{e(t)},5e3),s=function(t){clearTimeout(i),es.gamerGetMailS2C.off(s),e(t)};es.gamerGetMailS2C.on(s),es.GamerGetMailC2S()})}static GamerDelMailC2S(e){net.logic.gamerDelMailC2S(e)}static get gamerDelMailS2C(){return net.logic.gamerDelMailS2C}static async AsyncGamerDelMailC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),es.gamerDelMailS2C.off(a),t(e)};es.gamerDelMailS2C.on(a),es.GamerDelMailC2S(e)})}static GamerDelHaveReadMailC2S(){net.logic.gamerDelHaveReadMailC2S()}static get gamerDelHaveReadMailS2C(){return net.logic.gamerDelHaveReadMailS2C}static async AsyncGamerDelHaveReadMailC2S(){return new Promise(e=>{let t={error:200},i=setTimeout(()=>{e(t)},5e3),s=function(t){clearTimeout(i),es.gamerDelHaveReadMailS2C.off(s),e(t)};es.gamerDelHaveReadMailS2C.on(s),es.GamerDelHaveReadMailC2S()})}static GamerOneKeyRcvMailRewardC2S(){net.logic.gamerOneKeyRcvMailRewardC2S()}static get gamerOneKeyRcvMailRewardS2C(){return net.logic.gamerOneKeyRcvMailRewardS2C}static async AsyncGamerOneKeyRcvMailRewardC2S(){return new Promise(e=>{let t={error:200},i=setTimeout(()=>{e(t)},5e3),s=function(t){clearTimeout(i),es.gamerOneKeyRcvMailRewardS2C.off(s),e(t)};es.gamerOneKeyRcvMailRewardS2C.on(s),es.GamerOneKeyRcvMailRewardC2S()})}static GamerChangeMailStateC2S(e,t){net.logic.gamerChangeMailStateC2S(e,t)}static get gamerChangeMailStateS2C(){return net.logic.gamerChangeMailStateS2C}static async AsyncGamerChangeMailStateC2S(e,t){return new Promise(i=>{let s={error:200},a=setTimeout(()=>{i(s)},5e3),n=function(e){clearTimeout(a),es.gamerChangeMailStateS2C.off(n),i(e)};es.gamerChangeMailStateS2C.on(n),es.GamerChangeMailStateC2S(e,t)})}static GamerNewHeroC2S(e){net.logic.gamerNewHeroC2S(e)}static get gamerNewHeroS2C(){return net.logic.gamerNewHeroS2C}static async AsyncGamerNewHeroC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),es.gamerNewHeroS2C.off(a),t(e)};es.gamerNewHeroS2C.on(a),es.GamerNewHeroC2S(e)})}static GamerUpgradeHeroC2S(e,t){net.logic.gamerUpgradeHeroC2S(e,t)}static get gamerUpgradeHeroS2C(){return net.logic.gamerUpgradeHeroS2C}static async AsyncGamerUpgradeHeroC2S(e,t){return new Promise(i=>{let s={error:200},a=setTimeout(()=>{i(s)},5e3),n=function(e){clearTimeout(a),es.gamerUpgradeHeroS2C.off(n),i(e)};es.gamerUpgradeHeroS2C.on(n),es.GamerUpgradeHeroC2S(e,t)})}static GamerUseHeroMedicineC2S(e,t,i){net.logic.gamerUseHeroMedicineC2S(e,t,i)}static get gamerUseHeroMedicineS2C(){return net.logic.gamerUseHeroMedicineS2C}static async AsyncGamerUseHeroMedicineC2S(e,t,i){return new Promise(s=>{let a={error:200},n=setTimeout(()=>{s(a)},5e3),r=function(e){clearTimeout(n),es.gamerUseHeroMedicineS2C.off(r),s(e)};es.gamerUseHeroMedicineS2C.on(r),es.GamerUseHeroMedicineC2S(e,t,i)})}static GamerUpStarHeroC2S(e){net.logic.gamerUpStarHeroC2S(e)}static get gamerUpStarHeroS2C(){return net.logic.gamerUpStarHeroS2C}static async AsyncGamerUpStarHeroC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),es.gamerUpStarHeroS2C.off(a),t(e)};es.gamerUpStarHeroS2C.on(a),es.GamerUpStarHeroC2S(e)})}static GamerUpHeroSkillC2S(e,t){net.logic.gamerUpHeroSkillC2S(e,t)}static get gamerUpHeroSkillS2C(){return net.logic.gamerUpHeroSkillS2C}static async AsyncGamerUpHeroSkillC2S(e,t){return new Promise(i=>{let s={error:200},a=setTimeout(()=>{i(s)},5e3),n=function(e){clearTimeout(a),es.gamerUpHeroSkillS2C.off(n),i(e)};es.gamerUpHeroSkillS2C.on(n),es.GamerUpHeroSkillC2S(e,t)})}static GamerGetHeroC2S(){net.logic.gamerGetHeroC2S()}static get gamerGetHeroS2C(){return net.logic.gamerGetHeroS2C}static async AsyncGamerGetHeroC2S(){return new Promise(e=>{let t={error:200},i=setTimeout(()=>{e(t)},5e3),s=function(t){clearTimeout(i),es.gamerGetHeroS2C.off(s),e(t)};es.gamerGetHeroS2C.on(s),es.GamerGetHeroC2S()})}static GamerPVPLoadingC2S(e,t){net.logic.gamerPVPLoadingC2S(e,t)}static get gamerPVPLoadingS2C(){return net.logic.gamerPVPLoadingS2C}static async AsyncGamerPVPLoadingC2S(e,t){return new Promise(i=>{let s={error:200},a=setTimeout(()=>{i(s)},5e3),n=function(e){clearTimeout(a),es.gamerPVPLoadingS2C.off(n),i(e)};es.gamerPVPLoadingS2C.on(n),es.GamerPVPLoadingC2S(e,t)})}static GamerPVPSyncC2S(e,t,i,s,a,n,r,o,l,c,h,u){net.logic.gamerPVPSyncC2S(e,t,i,s,a,n,r,o,l,c,h,u)}static get gamerPVPSyncS2C(){return net.logic.gamerPVPSyncS2C}static async AsyncGamerPVPSyncC2S(e,t,i,s,a,n,r,o,l,c,h,u){return new Promise(g=>{let m={error:200},d=setTimeout(()=>{g(m)},5e3),p=function(e){clearTimeout(d),es.gamerPVPSyncS2C.off(p),g(e)};es.gamerPVPSyncS2C.on(p),es.GamerPVPSyncC2S(e,t,i,s,a,n,r,o,l,c,h,u)})}static GamerReliveC2S(e,t){net.logic.gamerReliveC2S(e,t)}static get gamerReliveS2C(){return net.logic.gamerReliveS2C}static async AsyncGamerReliveC2S(e,t){return new Promise(i=>{let s={error:200},a=setTimeout(()=>{i(s)},5e3),n=function(e){clearTimeout(a),es.gamerReliveS2C.off(n),i(e)};es.gamerReliveS2C.on(n),es.GamerReliveC2S(e,t)})}static GamerGetRealTimeRankC2S(){net.logic.gamerGetRealTimeRankC2S()}static get gamerGetRealTimeRankS2C(){return net.logic.gamerGetRealTimeRankS2C}static async AsyncGamerGetRealTimeRankC2S(){return new Promise(e=>{let t={error:200},i=setTimeout(()=>{e(t)},5e3),s=function(t){clearTimeout(i),es.gamerGetRealTimeRankS2C.off(s),e(t)};es.gamerGetRealTimeRankS2C.on(s),es.GamerGetRealTimeRankC2S()})}static GamerCheckPVPBattleC2S(e){net.logic.gamerCheckPVPBattleC2S(e)}static get gamerCheckPVPBattleS2C(){return net.logic.gamerCheckPVPBattleS2C}static async AsyncGamerCheckPVPBattleC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),es.gamerCheckPVPBattleS2C.off(a),t(e)};es.gamerCheckPVPBattleS2C.on(a),es.GamerCheckPVPBattleC2S(e)})}static GamerUploadWXInfoC2S(e){net.logic.gamerUploadWXInfoC2S(e)}static get gamerUploadWXInfoS2C(){return net.logic.gamerUploadWXInfoS2C}static async AsyncGamerUploadWXInfoC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),es.gamerUploadWXInfoS2C.off(a),t(e)};es.gamerUploadWXInfoS2C.on(a),es.GamerUploadWXInfoC2S(e)})}static GamerGetNoviceGuideC2S(){net.logic.gamerGetNoviceGuideC2S()}static get gamerGetNoviceGuideS2C(){return net.logic.gamerGetNoviceGuideS2C}static async AsyncGamerGetNoviceGuideC2S(){return new Promise(e=>{let t={error:200},i=setTimeout(()=>{e(t)},5e3),s=function(t){clearTimeout(i),es.gamerGetNoviceGuideS2C.off(s),e(t)};es.gamerGetNoviceGuideS2C.on(s),es.GamerGetNoviceGuideC2S()})}static GamerNoviceGuideChangeC2S(e){net.logic.gamerNoviceGuideChangeC2S(e)}static get gamerNoviceGuideChangeS2C(){return net.logic.gamerNoviceGuideChangeS2C}static async AsyncGamerNoviceGuideChangeC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),es.gamerNoviceGuideChangeS2C.off(a),t(e)};es.gamerNoviceGuideChangeS2C.on(a),es.GamerNoviceGuideChangeC2S(e)})}static GamerMatchC2S(e,t,i,s,a,n,r,o){net.logic.gamerMatchC2S(e,t,i,s,a,n,r,o)}static get gamerMatchS2C(){return net.logic.gamerMatchS2C}static async AsyncGamerMatchC2S(e,t,i,s,a,n,r,o){return new Promise(l=>{let c={error:200},h=setTimeout(()=>{l(c)},5e3),u=function(e){clearTimeout(h),es.gamerMatchS2C.off(u),l(e)};es.gamerMatchS2C.on(u),es.GamerMatchC2S(e,t,i,s,a,n,r,o)})}static GamerCancelMatchC2S(){net.logic.gamerCancelMatchC2S()}static get gamerCancelMatchS2C(){return net.logic.gamerCancelMatchS2C}static async AsyncGamerCancelMatchC2S(){return new Promise(e=>{let t={error:200},i=setTimeout(()=>{e(t)},5e3),s=function(t){clearTimeout(i),es.gamerCancelMatchS2C.off(s),e(t)};es.gamerCancelMatchS2C.on(s),es.GamerCancelMatchC2S()})}static GamerGetRewardC2S(e){net.logic.gamerGetRewardC2S(e)}static get gamerGetRewardS2C(){return net.logic.gamerGetRewardS2C}static async AsyncGamerGetRewardC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),es.gamerGetRewardS2C.off(a),t(e)};es.gamerGetRewardS2C.on(a),es.GamerGetRewardC2S(e)})}static GamerUseIconC2S(e,t,i){net.logic.gamerUseIconC2S(e,t,i)}static get gamerUseIconS2C(){return net.logic.gamerUseIconS2C}static async AsyncGamerUseIconC2S(e,t,i){return new Promise(s=>{let a={error:200},n=setTimeout(()=>{s(a)},5e3),r=function(e){clearTimeout(n),es.gamerUseIconS2C.off(r),s(e)};es.gamerUseIconS2C.on(r),es.GamerUseIconC2S(e,t,i)})}static GamerExtractGashaponC2S(e){net.logic.gamerExtractGashaponC2S(e)}static get gamerExtractGashaponS2C(){return net.logic.gamerExtractGashaponS2C}static async AsyncGamerExtractGashaponC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),es.gamerExtractGashaponS2C.off(a),t(e)};es.gamerExtractGashaponS2C.on(a),es.GamerExtractGashaponC2S(e)})}static GamerGetGashaponPreviewC2S(e){net.logic.gamerGetGashaponPreviewC2S(e)}static get gamerGetGashaponPreviewS2C(){return net.logic.gamerGetGashaponPreviewS2C}static async AsyncGamerGetGashaponPreviewC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),es.gamerGetGashaponPreviewS2C.off(a),t(e)};es.gamerGetGashaponPreviewS2C.on(a),es.GamerGetGashaponPreviewC2S(e)})}static GetActivityRewardC2S(e){net.logic.getActivityRewardC2S(e)}static get getActivityRewardS2C(){return net.logic.getActivityRewardS2C}static async AsyncGetActivityRewardC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),es.getActivityRewardS2C.off(a),t(e)};es.getActivityRewardS2C.on(a),es.GetActivityRewardC2S(e)})}static CreateGuildC2S(e){net.logic.createGuildC2S(e)}static get createGuildS2C(){return net.logic.createGuildS2C}static async AsyncCreateGuildC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),es.createGuildS2C.off(a),t(e)};es.createGuildS2C.on(a),es.CreateGuildC2S(e)})}static GuildGamerLoginC2S(e){net.logic.guildGamerLoginC2S(e)}static get guildGamerLoginS2C(){return net.logic.guildGamerLoginS2C}static async AsyncGuildGamerLoginC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),es.guildGamerLoginS2C.off(a),t(e)};es.guildGamerLoginS2C.on(a),es.GuildGamerLoginC2S(e)})}static GuildGamerLoginoutC2S(e){net.logic.guildGamerLoginoutC2S(e)}static get guildGamerLoginoutS2C(){return net.logic.guildGamerLoginoutS2C}static async AsyncGuildGamerLoginoutC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),es.guildGamerLoginoutS2C.off(a),t(e)};es.guildGamerLoginoutS2C.on(a),es.GuildGamerLoginoutC2S(e)})}static DissolutionGuildC2S(e){net.logic.dissolutionGuildC2S(e)}static get dissolutionGuildS2C(){return net.logic.dissolutionGuildS2C}static async AsyncDissolutionGuildC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),es.dissolutionGuildS2C.off(a),t(e)};es.dissolutionGuildS2C.on(a),es.DissolutionGuildC2S(e)})}static GetGuildC2S(e){net.logic.getGuildC2S(e)}static get getGuildS2C(){return net.logic.getGuildS2C}static async AsyncGetGuildC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),es.getGuildS2C.off(a),t(e)};es.getGuildS2C.on(a),es.GetGuildC2S(e)})}static GetGuildListC2S(e,t){net.logic.getGuildListC2S(e,t)}static get getGuildListS2C(){return net.logic.getGuildListS2C}static async AsyncGetGuildListC2S(e,t){return new Promise(i=>{let s={error:200},a=setTimeout(()=>{i(s)},5e3),n=function(e){clearTimeout(a),es.getGuildListS2C.off(n),i(e)};es.getGuildListS2C.on(n),es.GetGuildListC2S(e,t)})}static ApplyJoinGuildC2S(e){net.logic.applyJoinGuildC2S(e)}static get applyJoinGuildS2C(){return net.logic.applyJoinGuildS2C}static async AsyncApplyJoinGuildC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),es.applyJoinGuildS2C.off(a),t(e)};es.applyJoinGuildS2C.on(a),es.ApplyJoinGuildC2S(e)})}static ApprovalJoinGuildC2S(e,t,i){net.logic.approvalJoinGuildC2S(e,t,i)}static get approvalJoinGuildS2C(){return net.logic.approvalJoinGuildS2C}static async AsyncApprovalJoinGuildC2S(e,t,i){return new Promise(s=>{let a={error:200},n=setTimeout(()=>{s(a)},5e3),r=function(e){clearTimeout(n),es.approvalJoinGuildS2C.off(r),s(e)};es.approvalJoinGuildS2C.on(r),es.ApprovalJoinGuildC2S(e,t,i)})}static InviteJoinGuildC2S(e,t){net.logic.inviteJoinGuildC2S(e,t)}static get inviteJoinGuildS2C(){return net.logic.inviteJoinGuildS2C}static async AsyncInviteJoinGuildC2S(e,t){return new Promise(i=>{let s={error:200},a=setTimeout(()=>{i(s)},5e3),n=function(e){clearTimeout(a),es.inviteJoinGuildS2C.off(n),i(e)};es.inviteJoinGuildS2C.on(n),es.InviteJoinGuildC2S(e,t)})}static AgreeJoinGuildC2S(e,t){net.logic.agreeJoinGuildC2S(e,t)}static get agreeJoinGuildS2C(){return net.logic.agreeJoinGuildS2C}static async AsyncAgreeJoinGuildC2S(e,t){return new Promise(i=>{let s={error:200},a=setTimeout(()=>{i(s)},5e3),n=function(e){clearTimeout(a),es.agreeJoinGuildS2C.off(n),i(e)};es.agreeJoinGuildS2C.on(n),es.AgreeJoinGuildC2S(e,t)})}static QuitGuildC2S(e){net.logic.quitGuildC2S(e)}static get quitGuildS2C(){return net.logic.quitGuildS2C}static async AsyncQuitGuildC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),es.quitGuildS2C.off(a),t(e)};es.quitGuildS2C.on(a),es.QuitGuildC2S(e)})}static KickOutGuildC2S(e,t){net.logic.kickOutGuildC2S(e,t)}static get kickOutGuildS2C(){return net.logic.kickOutGuildS2C}static async AsyncKickOutGuildC2S(e,t){return new Promise(i=>{let s={error:200},a=setTimeout(()=>{i(s)},5e3),n=function(e){clearTimeout(a),es.kickOutGuildS2C.off(n),i(e)};es.kickOutGuildS2C.on(n),es.KickOutGuildC2S(e,t)})}static GuildChatC2S(e,t){net.logic.guildChatC2S(e,t)}static get guildChatS2C(){return net.logic.guildChatS2C}static async AsyncGuildChatC2S(e,t){return new Promise(i=>{let s={error:200},a=setTimeout(()=>{i(s)},5e3),n=function(e){clearTimeout(a),es.guildChatS2C.off(n),i(e)};es.guildChatS2C.on(n),es.GuildChatC2S(e,t)})}static GMC2S(e){net.logic.gMC2S(e)}static get gMS2C(){return net.logic.gMS2C}static async AsyncGMC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),es.gMS2C.off(a),t(e)};es.gMS2C.on(a),es.GMC2S(e)})}static CheckPointListC2S(){net.logic.checkPointListC2S()}static get checkPointListS2C(){return net.logic.checkPointListS2C}static async AsyncCheckPointListC2S(){return new Promise(e=>{let t={error:200},i=setTimeout(()=>{e(t)},5e3),s=function(t){clearTimeout(i),es.checkPointListS2C.off(s),e(t)};es.checkPointListS2C.on(s),es.CheckPointListC2S()})}static GetPlotStarRewardC2S(e,t){net.logic.getPlotStarRewardC2S(e,t)}static get getPlotStarRewardS2C(){return net.logic.getPlotStarRewardS2C}static async AsyncGetPlotStarRewardC2S(e,t){return new Promise(i=>{let s={error:200},a=setTimeout(()=>{i(s)},5e3),n=function(e){clearTimeout(a),es.getPlotStarRewardS2C.off(n),i(e)};es.getPlotStarRewardS2C.on(n),es.GetPlotStarRewardC2S(e,t)})}static BuyTimesCheckPointC2S(e,t){net.logic.buyTimesCheckPointC2S(e,t)}static get buyTimesCheckPointS2C(){return net.logic.buyTimesCheckPointS2C}static async AsyncBuyTimesCheckPointC2S(e,t){return new Promise(i=>{let s={error:200},a=setTimeout(()=>{i(s)},5e3),n=function(e){clearTimeout(a),es.buyTimesCheckPointS2C.off(n),i(e)};es.buyTimesCheckPointS2C.on(n),es.BuyTimesCheckPointC2S(e,t)})}static SweepCheckPointC2S(e,t){net.logic.sweepCheckPointC2S(e,t)}static get sweepCheckPointS2C(){return net.logic.sweepCheckPointS2C}static async AsyncSweepCheckPointC2S(e,t){return new Promise(i=>{let s={error:200},a=setTimeout(()=>{i(s)},5e3),n=function(e){clearTimeout(a),es.sweepCheckPointS2C.off(n),i(e)};es.sweepCheckPointS2C.on(n),es.SweepCheckPointC2S(e,t)})}static GamerSettlePVEC2S(e,t,i,s){net.logic.gamerSettlePVEC2S(e,t,i,s)}static get gamerSettlePVES2C(){return net.logic.gamerSettlePVES2C}static async AsyncGamerSettlePVEC2S(e,t,i,s){return new Promise(a=>{let n={error:200},r=setTimeout(()=>{a(n)},5e3),o=function(e){clearTimeout(r),es.gamerSettlePVES2C.off(o),a(e)};es.gamerSettlePVES2C.on(o),es.GamerSettlePVEC2S(e,t,i,s)})}static DraugListC2S(){net.logic.draugListC2S()}static get draugListS2C(){return net.logic.draugListS2C}static async AsyncDraugListC2S(){return new Promise(e=>{let t={error:200},i=setTimeout(()=>{e(t)},5e3),s=function(t){clearTimeout(i),es.draugListS2C.off(s),e(t)};es.draugListS2C.on(s),es.DraugListC2S()})}static AwakenDraugC2S(e){net.logic.awakenDraugC2S(e)}static get awakenDraugS2C(){return net.logic.awakenDraugS2C}static async AsyncAwakenDraugC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),es.awakenDraugS2C.off(a),t(e)};es.awakenDraugS2C.on(a),es.AwakenDraugC2S(e)})}static PutDraugIntoPackC2S(){net.logic.putDraugIntoPackC2S()}static get putDraugIntoPackS2C(){return net.logic.putDraugIntoPackS2C}static async AsyncPutDraugIntoPackC2S(){return new Promise(e=>{let t={error:200},i=setTimeout(()=>{e(t)},5e3),s=function(t){clearTimeout(i),es.putDraugIntoPackS2C.off(s),e(t)};es.putDraugIntoPackS2C.on(s),es.PutDraugIntoPackC2S()})}static SwallowDraugC2S(e,t,i){net.logic.swallowDraugC2S(e,t,i)}static get swallowDraugS2C(){return net.logic.swallowDraugS2C}static async AsyncSwallowDraugC2S(e,t,i){return new Promise(s=>{let a={error:200},n=setTimeout(()=>{s(a)},5e3),r=function(e){clearTimeout(n),es.swallowDraugS2C.off(r),s(e)};es.swallowDraugS2C.on(r),es.SwallowDraugC2S(e,t,i)})}static DecomposeDraugC2S(e){net.logic.decomposeDraugC2S(e)}static get decomposeDraugS2C(){return net.logic.decomposeDraugS2C}static async AsyncDecomposeDraugC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),es.decomposeDraugS2C.off(a),t(e)};es.decomposeDraugS2C.on(a),es.DecomposeDraugC2S(e)})}static LockDraugC2S(e){net.logic.lockDraugC2S(e)}static get lockDraugS2C(){return net.logic.lockDraugS2C}static async AsyncLockDraugC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),es.lockDraugS2C.off(a),t(e)};es.lockDraugS2C.on(a),es.LockDraugC2S(e)})}static WearDraugC2S(e,t){net.logic.wearDraugC2S(e,t)}static get wearDraugS2C(){return net.logic.wearDraugS2C}static async AsyncWearDraugC2S(e,t){return new Promise(i=>{let s={error:200},a=setTimeout(()=>{i(s)},5e3),n=function(e){clearTimeout(a),es.wearDraugS2C.off(n),i(e)};es.wearDraugS2C.on(n),es.WearDraugC2S(e,t)})}static UnwearDraugC2S(e,t){net.logic.unwearDraugC2S(e,t)}static get unwearDraugS2C(){return net.logic.unwearDraugS2C}static async AsyncUnwearDraugC2S(e,t){return new Promise(i=>{let s={error:200},a=setTimeout(()=>{i(s)},5e3),n=function(e){clearTimeout(a),es.unwearDraugS2C.off(n),i(e)};es.unwearDraugS2C.on(n),es.UnwearDraugC2S(e,t)})}static DraugSelectHeroC2S(e){net.logic.draugSelectHeroC2S(e)}static get draugSelectHeroS2C(){return net.logic.draugSelectHeroS2C}static async AsyncDraugSelectHeroC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),es.draugSelectHeroS2C.off(a),t(e)};es.draugSelectHeroS2C.on(a),es.DraugSelectHeroC2S(e)})}static HeroGroupListC2S(){net.logic.heroGroupListC2S()}static get heroGroupListS2C(){return net.logic.heroGroupListS2C}static async AsyncHeroGroupListC2S(){return new Promise(e=>{let t={error:200},i=setTimeout(()=>{e(t)},5e3),s=function(t){clearTimeout(i),es.heroGroupListS2C.off(s),e(t)};es.heroGroupListS2C.on(s),es.HeroGroupListC2S()})}static UnlockHeroGroupC2S(e){net.logic.unlockHeroGroupC2S(e)}static get unlockHeroGroupS2C(){return net.logic.unlockHeroGroupS2C}static async AsyncUnlockHeroGroupC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),es.unlockHeroGroupS2C.off(a),t(e)};es.unlockHeroGroupS2C.on(a),es.UnlockHeroGroupC2S(e)})}static ChangeNameHeroGroupC2S(e,t){net.logic.changeNameHeroGroupC2S(e,t)}static get changeNameHeroGroupS2C(){return net.logic.changeNameHeroGroupS2C}static async AsyncChangeNameHeroGroupC2S(e,t){return new Promise(i=>{let s={error:200},a=setTimeout(()=>{i(s)},5e3),n=function(e){clearTimeout(a),es.changeNameHeroGroupS2C.off(n),i(e)};es.changeNameHeroGroupS2C.on(n),es.ChangeNameHeroGroupC2S(e,t)})}static HeroGroupChangeHeroC2S(e,t,i){net.logic.heroGroupChangeHeroC2S(e,t,i)}static get heroGroupChangeHeroS2C(){return net.logic.heroGroupChangeHeroS2C}static async AsyncHeroGroupChangeHeroC2S(e,t,i){return new Promise(s=>{let a={error:200},n=setTimeout(()=>{s(a)},5e3),r=function(e){clearTimeout(n),es.heroGroupChangeHeroS2C.off(r),s(e)};es.heroGroupChangeHeroS2C.on(r),es.HeroGroupChangeHeroC2S(e,t,i)})}static HeroGroupChangeSkillC2S(e,t,i){net.logic.heroGroupChangeSkillC2S(e,t,i)}static get heroGroupChangeSkillS2C(){return net.logic.heroGroupChangeSkillS2C}static async AsyncHeroGroupChangeSkillC2S(e,t,i){return new Promise(s=>{let a={error:200},n=setTimeout(()=>{s(a)},5e3),r=function(e){clearTimeout(n),es.heroGroupChangeSkillS2C.off(r),s(e)};es.heroGroupChangeSkillS2C.on(r),es.HeroGroupChangeSkillC2S(e,t,i)})}static BuyFatigueC2S(e){net.logic.buyFatigueC2S(e)}static get buyFatigueS2C(){return net.logic.buyFatigueS2C}static async AsyncBuyFatigueC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),es.buyFatigueS2C.off(a),t(e)};es.buyFatigueS2C.on(a),es.BuyFatigueC2S(e)})}static GetFatigueWelfareC2S(e){net.logic.getFatigueWelfareC2S(e)}static get getFatigueWelfareS2C(){return net.logic.getFatigueWelfareS2C}static async AsyncGetFatigueWelfareC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),es.getFatigueWelfareS2C.off(a),t(e)};es.getFatigueWelfareS2C.on(a),es.GetFatigueWelfareC2S(e)})}static UpStarEquipC2S(e,t,i,s){net.logic.upStarEquipC2S(e,t,i,s)}static get upStarEquipS2C(){return net.logic.upStarEquipS2C}static async AsyncUpStarEquipC2S(e,t,i,s){return new Promise(a=>{let n={error:200},r=setTimeout(()=>{a(n)},5e3),o=function(e){clearTimeout(r),es.upStarEquipS2C.off(o),a(e)};es.upStarEquipS2C.on(o),es.UpStarEquipC2S(e,t,i,s)})}static EatEquipsC2S(e,t,i){net.logic.eatEquipsC2S(e,t,i)}static get eatEquipsS2C(){return net.logic.eatEquipsS2C}static async AsyncEatEquipsC2S(e,t,i){return new Promise(s=>{let a={error:200},n=setTimeout(()=>{s(a)},5e3),r=function(e){clearTimeout(n),es.eatEquipsS2C.off(r),s(e)};es.eatEquipsS2C.on(r),es.EatEquipsC2S(e,t,i)})}static DesEquipC2S(e){net.logic.desEquipC2S(e)}static get desEquipS2C(){return net.logic.desEquipS2C}static async AsyncDesEquipC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),es.desEquipS2C.off(a),t(e)};es.desEquipS2C.on(a),es.DesEquipC2S(e)})}static TakeOnEquipC2S(e,t,i){net.logic.takeOnEquipC2S(e,t,i)}static get takeOnEquipS2C(){return net.logic.takeOnEquipS2C}static async AsyncTakeOnEquipC2S(e,t,i){return new Promise(s=>{let a={error:200},n=setTimeout(()=>{s(a)},5e3),r=function(e){clearTimeout(n),es.takeOnEquipS2C.off(r),s(e)};es.takeOnEquipS2C.on(r),es.TakeOnEquipC2S(e,t,i)})}static TakeOffEquipC2S(e,t){net.logic.takeOffEquipC2S(e,t)}static get takeOffEquipS2C(){return net.logic.takeOffEquipS2C}static async AsyncTakeOffEquipC2S(e,t){return new Promise(i=>{let s={error:200},a=setTimeout(()=>{i(s)},5e3),n=function(e){clearTimeout(a),es.takeOffEquipS2C.off(n),i(e)};es.takeOffEquipS2C.on(n),es.TakeOffEquipC2S(e,t)})}static RedSpotC2S(){net.logic.redSpotC2S()}static get redSpotS2C(){return net.logic.redSpotS2C}static async AsyncRedSpotC2S(){return new Promise(e=>{let t={error:200},i=setTimeout(()=>{e(t)},5e3),s=function(t){clearTimeout(i),es.redSpotS2C.off(s),e(t)};es.redSpotS2C.on(s),es.RedSpotC2S()})}static MakeTeamC2S(e,t,i,s){net.logic.makeTeamC2S(e,t,i,s)}static get makeTeamS2C(){return net.logic.makeTeamS2C}static async AsyncMakeTeamC2S(e,t,i,s){return new Promise(a=>{let n={error:200},r=setTimeout(()=>{a(n)},5e3),o=function(e){clearTimeout(r),es.makeTeamS2C.off(o),a(e)};es.makeTeamS2C.on(o),es.MakeTeamC2S(e,t,i,s)})}static SetTeamAimC2S(e){net.logic.setTeamAimC2S(e)}static get setTeamAimS2C(){return net.logic.setTeamAimS2C}static async AsyncSetTeamAimC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),es.setTeamAimS2C.off(a),t(e)};es.setTeamAimS2C.on(a),es.SetTeamAimC2S(e)})}static JoinTeamC2S(e,t,i,s){net.logic.joinTeamC2S(e,t,i,s)}static get joinTeamS2C(){return net.logic.joinTeamS2C}static async AsyncJoinTeamC2S(e,t,i,s){return new Promise(a=>{let n={error:200},r=setTimeout(()=>{a(n)},5e3),o=function(e){clearTimeout(r),es.joinTeamS2C.off(o),a(e)};es.joinTeamS2C.on(o),es.JoinTeamC2S(e,t,i,s)})}static ExitTeamC2S(){net.logic.exitTeamC2S()}static get exitTeamS2C(){return net.logic.exitTeamS2C}static async AsyncExitTeamC2S(){return new Promise(e=>{let t={error:200},i=setTimeout(()=>{e(t)},5e3),s=function(t){clearTimeout(i),es.exitTeamS2C.off(s),e(t)};es.exitTeamS2C.on(s),es.ExitTeamC2S()})}static TurnOverTeamLeaderC2S(e){net.logic.turnOverTeamLeaderC2S(e)}static get turnOverTeamLeaderS2C(){return net.logic.turnOverTeamLeaderS2C}static async AsyncTurnOverTeamLeaderC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),es.turnOverTeamLeaderS2C.off(a),t(e)};es.turnOverTeamLeaderS2C.on(a),es.TurnOverTeamLeaderC2S(e)})}static InviteTeamC2S(e){net.logic.inviteTeamC2S(e)}static get inviteTeamS2C(){return net.logic.inviteTeamS2C}static async AsyncInviteTeamC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),es.inviteTeamS2C.off(a),t(e)};es.inviteTeamS2C.on(a),es.InviteTeamC2S(e)})}static RejectTeamC2S(e,t,i){net.logic.rejectTeamC2S(e,t,i)}static get rejectTeamS2C(){return net.logic.rejectTeamS2C}static async AsyncRejectTeamC2S(e,t,i){return new Promise(s=>{let a={error:200},n=setTimeout(()=>{s(a)},5e3),r=function(e){clearTimeout(n),es.rejectTeamS2C.off(r),s(e)};es.rejectTeamS2C.on(r),es.RejectTeamC2S(e,t,i)})}static KickTeamC2S(e){net.logic.kickTeamC2S(e)}static get kickTeamS2C(){return net.logic.kickTeamS2C}static async AsyncKickTeamC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),es.kickTeamS2C.off(a),t(e)};es.kickTeamS2C.on(a),es.KickTeamC2S(e)})}static SetTeamHelpC2S(e){net.logic.setTeamHelpC2S(e)}static get setTeamHelpS2C(){return net.logic.setTeamHelpS2C}static async AsyncSetTeamHelpC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),es.setTeamHelpS2C.off(a),t(e)};es.setTeamHelpS2C.on(a),es.SetTeamHelpC2S(e)})}static SetTeamHeroC2S(e,t,i){net.logic.setTeamHeroC2S(e,t,i)}static get setTeamHeroS2C(){return net.logic.setTeamHeroS2C}static async AsyncSetTeamHeroC2S(e,t,i){return new Promise(s=>{let a={error:200},n=setTimeout(()=>{s(a)},5e3),r=function(e){clearTimeout(n),es.setTeamHeroS2C.off(r),s(e)};es.setTeamHeroS2C.on(r),es.SetTeamHeroC2S(e,t,i)})}static SwitchTeamReadyC2S(){net.logic.switchTeamReadyC2S()}static get switchTeamReadyS2C(){return net.logic.switchTeamReadyS2C}static async AsyncSwitchTeamReadyC2S(){return new Promise(e=>{let t={error:200},i=setTimeout(()=>{e(t)},5e3),s=function(t){clearTimeout(i),es.switchTeamReadyS2C.off(s),e(t)};es.switchTeamReadyS2C.on(s),es.SwitchTeamReadyC2S()})}static TeamBattleC2S(){net.logic.teamBattleC2S()}static get teamBattleS2C(){return net.logic.teamBattleS2C}static async AsyncTeamBattleC2S(){return new Promise(e=>{let t={error:200},i=setTimeout(()=>{e(t)},5e3),s=function(t){clearTimeout(i),es.teamBattleS2C.off(s),e(t)};es.teamBattleS2C.on(s),es.TeamBattleC2S()})}static GetDanInfoC2S(){net.logic.getDanInfoC2S()}static get getDanInfoS2C(){return net.logic.getDanInfoS2C}static async AsyncGetDanInfoC2S(){return new Promise(e=>{let t={error:200},i=setTimeout(()=>{e(t)},5e3),s=function(t){clearTimeout(i),es.getDanInfoS2C.off(s),e(t)};es.getDanInfoS2C.on(s),es.GetDanInfoC2S()})}static GetDuelRankC2S(e,t,i,s){net.logic.getDuelRankC2S(e,t,i,s)}static get getDuelRankS2C(){return net.logic.getDuelRankS2C}static async AsyncGetDuelRankC2S(e,t,i,s){return new Promise(a=>{let n={error:200},r=setTimeout(()=>{a(n)},5e3),o=function(e){clearTimeout(r),es.getDuelRankS2C.off(o),a(e)};es.getDuelRankS2C.on(o),es.GetDuelRankC2S(e,t,i,s)})}static SysListC2S(){net.logic.sysListC2S()}static get sysListS2C(){return net.logic.sysListS2C}static async AsyncSysListC2S(){return new Promise(e=>{let t={error:200},i=setTimeout(()=>{e(t)},5e3),s=function(t){clearTimeout(i),es.sysListS2C.off(s),e(t)};es.sysListS2C.on(s),es.SysListC2S()})}static SysOpenShowC2S(e){net.logic.sysOpenShowC2S(e)}static get sysOpenShowS2C(){return net.logic.sysOpenShowS2C}static async AsyncSysOpenShowC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),es.sysOpenShowS2C.off(a),t(e)};es.sysOpenShowS2C.on(a),es.SysOpenShowC2S(e)})}static GetQuestsC2S(){net.logic.getQuestsC2S()}static get getQuestsS2C(){return net.logic.getQuestsS2C}static async AsyncGetQuestsC2S(){return new Promise(e=>{let t={error:200},i=setTimeout(()=>{e(t)},5e3),s=function(t){clearTimeout(i),es.getQuestsS2C.off(s),e(t)};es.getQuestsS2C.on(s),es.GetQuestsC2S()})}static GetQuestRewardC2S(e){net.logic.getQuestRewardC2S(e)}static get getQuestRewardS2C(){return net.logic.getQuestRewardS2C}static async AsyncGetQuestRewardC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),es.getQuestRewardS2C.off(a),t(e)};es.getQuestRewardS2C.on(a),es.GetQuestRewardC2S(e)})}static GetDailyQuestRewardC2S(e){net.logic.getDailyQuestRewardC2S(e)}static get getDailyQuestRewardS2C(){return net.logic.getDailyQuestRewardS2C}static async AsyncGetDailyQuestRewardC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),es.getDailyQuestRewardS2C.off(a),t(e)};es.getDailyQuestRewardS2C.on(a),es.GetDailyQuestRewardC2S(e)})}static GamerHeroImageChooseC2S(){net.logic.gamerHeroImageChooseC2S()}static get gamerHeroImageChooseS2C(){return net.logic.gamerHeroImageChooseS2C}static async AsyncGamerHeroImageChooseC2S(){return new Promise(e=>{let t={error:200},i=setTimeout(()=>{e(t)},5e3),s=function(t){clearTimeout(i),es.gamerHeroImageChooseS2C.off(s),e(t)};es.gamerHeroImageChooseS2C.on(s),es.GamerHeroImageChooseC2S()})}static GamerHeroImageChangeC2S(e){net.logic.gamerHeroImageChangeC2S(e)}static get gamerHeroImageChangeS2C(){return net.logic.gamerHeroImageChangeS2C}static async AsyncGamerHeroImageChangeC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),es.gamerHeroImageChangeS2C.off(a),t(e)};es.gamerHeroImageChangeS2C.on(a),es.GamerHeroImageChangeC2S(e)})}static GamerBuyRollC2S(e){net.logic.gamerBuyRollC2S(e)}static get gamerBuyRollS2C(){return net.logic.gamerBuyRollS2C}static async AsyncGamerBuyRollC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),es.gamerBuyRollS2C.off(a),t(e)};es.gamerBuyRollS2C.on(a),es.GamerBuyRollC2S(e)})}static GetGamerSecretLandC2S(){net.logic.getGamerSecretLandC2S()}static get getGamerSecretLandS2C(){return net.logic.getGamerSecretLandS2C}static async AsyncGetGamerSecretLandC2S(){return new Promise(e=>{let t={error:200},i=setTimeout(()=>{e(t)},5e3),s=function(t){clearTimeout(i),es.getGamerSecretLandS2C.off(s),e(t)};es.getGamerSecretLandS2C.on(s),es.GetGamerSecretLandC2S()})}static GamerSecretLandBattleRewardC2S(e){net.logic.gamerSecretLandBattleRewardC2S(e)}static get gamerSecretLandBattleRewardS2C(){return net.logic.gamerSecretLandBattleRewardS2C}static async AsyncGamerSecretLandBattleRewardC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),es.gamerSecretLandBattleRewardS2C.off(a),t(e)};es.gamerSecretLandBattleRewardS2C.on(a),es.GamerSecretLandBattleRewardC2S(e)})}static GamerSecretLandWeekRewardC2S(){net.logic.gamerSecretLandWeekRewardC2S()}static get gamerSecretLandWeekRewardS2C(){return net.logic.gamerSecretLandWeekRewardS2C}static async AsyncGamerSecretLandWeekRewardC2S(){return new Promise(e=>{let t={error:200},i=setTimeout(()=>{e(t)},5e3),s=function(t){clearTimeout(i),es.gamerSecretLandWeekRewardS2C.off(s),e(t)};es.gamerSecretLandWeekRewardS2C.on(s),es.GamerSecretLandWeekRewardC2S()})}static GamerSecretLandRankC2S(e){net.logic.gamerSecretLandRankC2S(e)}static get gamerSecretLandRankS2C(){return net.logic.gamerSecretLandRankS2C}static async AsyncGamerSecretLandRankC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),es.gamerSecretLandRankS2C.off(a),t(e)};es.gamerSecretLandRankS2C.on(a),es.GamerSecretLandRankC2S(e)})}static GetGamerSecretLandInfoC2S(){net.logic.getGamerSecretLandInfoC2S()}static get getGamerSecretLandInfoS2C(){return net.logic.getGamerSecretLandInfoS2C}static async AsyncGetGamerSecretLandInfoC2S(){return new Promise(e=>{let t={error:200},i=setTimeout(()=>{e(t)},5e3),s=function(t){clearTimeout(i),es.getGamerSecretLandInfoS2C.off(s),e(t)};es.getGamerSecretLandInfoS2C.on(s),es.GetGamerSecretLandInfoC2S()})}static GamerChangeItemIsSawC2S(e,t){net.logic.gamerChangeItemIsSawC2S(e,t)}static get gamerChangeItemIsSawS2C(){return net.logic.gamerChangeItemIsSawS2C}static async AsyncGamerChangeItemIsSawC2S(e,t){return new Promise(i=>{let s={error:200},a=setTimeout(()=>{i(s)},5e3),n=function(e){clearTimeout(a),es.gamerChangeItemIsSawS2C.off(n),i(e)};es.gamerChangeItemIsSawS2C.on(n),es.GamerChangeItemIsSawC2S(e,t)})}static get gamerNotifyLoginOtherS2C(){return net.logic.gamerNotifyLoginOtherS2C}static get gamerNotifyExpLevelS2C(){return net.logic.gamerNotifyExpLevelS2C}static get gamerNotifyItemChangeS2C(){return net.logic.gamerNotifyItemChangeS2C}static get gamerNotifyNewChatS2C(){return net.logic.gamerNotifyNewChatS2C}static get gamerNotifyNewFriendReqS2C(){return net.logic.gamerNotifyNewFriendReqS2C}static get gamerNotifyNewFriendS2C(){return net.logic.gamerNotifyNewFriendS2C}static get gamerNotifyDelFriendS2C(){return net.logic.gamerNotifyDelFriendS2C}static get gamerNotifyNoticeS2C(){return net.logic.gamerNotifyNoticeS2C}static get gamerNotifyMailS2C(){return net.logic.gamerNotifyMailS2C}static get gamerNotifyNewMailS2C(){return net.logic.gamerNotifyNewMailS2C}static get gamerNotifyHerosChangeS2C(){return net.logic.gamerNotifyHerosChangeS2C}static get gamerNotifyHeroPropUpdateS2C(){return net.logic.gamerNotifyHeroPropUpdateS2C}static get gamerNotifyPVPLoadingS2C(){return net.logic.gamerNotifyPVPLoadingS2C}static get gamerNotifyGamerMiniS2C(){return net.logic.gamerNotifyGamerMiniS2C}static get gamerNotifyPVPSyncS2C(){return net.logic.gamerNotifyPVPSyncS2C}static get gamerNotifyNewPVPResultS2C(){return net.logic.gamerNotifyNewPVPResultS2C}static get gamerNotifyIconChangeS2C(){return net.logic.gamerNotifyIconChangeS2C}static get gamerNotifyDiamonChangeS2C(){return net.logic.gamerNotifyDiamonChangeS2C}static get gamerNotifyEnergyChangeS2C(){return net.logic.gamerNotifyEnergyChangeS2C}static get gamerNotifyExpChangeS2C(){return net.logic.gamerNotifyExpChangeS2C}static get gamerNotifyMatchInfoS2C(){return net.logic.gamerNotifyMatchInfoS2C}static get gamerNotifyGashaponInfoS2C(){return net.logic.gamerNotifyGashaponInfoS2C}static get gamerNotifyActivitiesS2C(){return net.logic.gamerNotifyActivitiesS2C}static get gamerNotifyApplyJoinGuildS2C(){return net.logic.gamerNotifyApplyJoinGuildS2C}static get gamerNotifyInviteJoinGuildS2C(){return net.logic.gamerNotifyInviteJoinGuildS2C}static get gamerNotifyGuildMemUpdateS2C(){return net.logic.gamerNotifyGuildMemUpdateS2C}static get gamerNotifyGuildChatS2C(){return net.logic.gamerNotifyGuildChatS2C}static get gamerNotifyCheckPointListS2C(){return net.logic.gamerNotifyCheckPointListS2C}static get gamerNotifyNewCheckPointListS2C(){return net.logic.gamerNotifyNewCheckPointListS2C}static get gamerNotifyRewardS2C(){return net.logic.gamerNotifyRewardS2C}static get gamerNotifyUnlockPosHeroGroupS2C(){return net.logic.gamerNotifyUnlockPosHeroGroupS2C}static get gamerNotifyFatigueS2C(){return net.logic.gamerNotifyFatigueS2C}static get gamerNotifyTeamS2C(){return net.logic.gamerNotifyTeamS2C}static get gamerNotifyTeamInfoS2C(){return net.logic.gamerNotifyTeamInfoS2C}static get gamerNotifyTeamChangeS2C(){return net.logic.gamerNotifyTeamChangeS2C}static get gamerNotifyTeamMemberChangeS2C(){return net.logic.gamerNotifyTeamMemberChangeS2C}static get gamerNotifyLeaveTeamS2C(){return net.logic.gamerNotifyLeaveTeamS2C}static get gamerNotifyTeamReadyS2C(){return net.logic.gamerNotifyTeamReadyS2C}static get gamerNotifyDanInfoS2C(){return net.logic.gamerNotifyDanInfoS2C}static get gamerNotifyNewSeasonS2C(){return net.logic.gamerNotifyNewSeasonS2C}static get gamerNotifyQuestsS2C(){return net.logic.gamerNotifyQuestsS2C}static get gamerNotifyGamerSecretLandInfoS2C(){return net.logic.gamerNotifyGamerSecretLandInfoS2C}static get gamerNotifySecretLandInfoS2C(){return net.logic.gamerNotifySecretLandInfoS2C}static get gamerNotifySLTreasureBoxS2C(){return net.logic.gamerNotifySLTreasureBoxS2C}static get gamerNotifyNewSecretLandResultS2C(){return net.logic.gamerNotifyNewSecretLandResultS2C}}class ts{constructor(){this.id=0,this.name="TestName",this.vipLevel=1}setGamerMain(e){for(var t in e)this[t]=e[t]}set setGamerMini(e){for(var t in e)this[t]=e[t]}}class is{}class ss extends ts{constructor(){super(),this.maxLevel=80,this.changeNameNum=0,this.isLoginAndGetUserData=!1,this.isShowLevelUp=!1,this.levelSnapshotData=new is,this.InitTestData()}InitTestData(){this.exp=0}setGamerMain(e){super.setGamerMain(e)}levelSnapshot(){this.levelSnapshotData.exp=this.exp,this.levelSnapshotData.level=this.level}}class as extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","PanelMainMenu")}constructFromXML(e){super.constructFromXML(e),this.m_menuLogo=this.getChild("menuLogo"),this.m_btnBar=this.getChild("btnBar")}}as.URL="ui://moe42ygrsqzy7q",as.DependPackages=["GameHome"];class ns extends as{}class rs extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","PanelChooseHero")}constructFromXML(e){super.constructFromXML(e),this.m_btnGroup=this.getChild("btnGroup"),this.m_heroGroup=this.getChild("heroGroup"),this.m_menuTopPanel=this.getChild("menuTopPanel"),this.m_playBtn=this.getChild("playBtn"),this.m_plusBtn=this.getChild("plusBtn"),this.m_nextHeroBtn=this.getChild("nextHeroBtn"),this.m_prevHeroBtn=this.getChild("prevHeroBtn"),this.m_choiceHero=this.getChild("choiceHero")}}rs.URL="ui://moe42ygrsqzy89",rs.DependPackages=["GameHome"];class os extends rs{}class ls extends fgui.GLabel{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","HeroSprite")}constructFromXML(e){super.constructFromXML(e),this.m_sprite=this.getController("sprite"),this.m_icon=this.getChild("icon"),this.m_t0=this.getTransition("t0")}}ls.URL="ui://moe42ygrsqzy8m",ls.DependPackages=["GameHome"];class cs extends ls{}class hs extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","PanelShop")}constructFromXML(e){super.constructFromXML(e),this.m_menuTopPanel=this.getChild("menuTopPanel"),this.m_playBtn=this.getChild("playBtn")}}hs.URL="ui://moe42ygrsqzy8y",hs.DependPackages=["GameHome"];class us extends hs{}class gs extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","PanelChooseGameFormat")}constructFromXML(e){super.constructFromXML(e),this.m_formatGroup=this.getChild("formatGroup"),this.m_menuTopPanel=this.getChild("menuTopPanel"),this.m_format3x3=this.getChild("format3x3"),this.m_format4x4=this.getChild("format4x4")}}gs.URL="ui://moe42ygrsqzy8z",gs.DependPackages=["GameHome"];class ms extends gs{}class ds extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","PanelResult")}constructFromXML(e){super.constructFromXML(e),this.m_btnGroup=this.getChild("btnGroup"),this.m_resultBg=this.getChild("resultBg"),this.m_coinCurrent=this.getChild("coinCurrent"),this.m_coinMax=this.getChild("coinMax"),this.m_resultGroup=this.getChild("resultGroup"),this.m_menuTopPanel=this.getChild("menuTopPanel"),this.m_homeBtn=this.getChild("homeBtn"),this.m_playBtn=this.getChild("playBtn")}}ds.URL="ui://moe42ygrsqzy9d",ds.DependPackages=["GameHome"];class ps extends ds{}class Ss extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","MenuTopPanelWar")}constructFromXML(e){super.constructFromXML(e),this.m_coinText=this.getChild("coinText"),this.m_countText=this.getChild("countText"),this.m_levelTex=this.getChild("levelTex"),this.m_coinText=this.getChild("coinText"),this.m_puaseBtn=this.getChild("puaseBtn")}}Ss.URL="ui://moe42ygrsqzy9e",Ss.DependPackages=["GameHome"];class Cs extends Ss{}class fs extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","FxBarrel")}constructFromXML(e){super.constructFromXML(e)}}fs.URL="ui://moe42ygrsqzy9g",fs.DependPackages=["GameHome"];class ys extends fs{}class ws extends fgui.GLabel{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","CardLifeHero")}constructFromXML(e){super.constructFromXML(e),this.m_title=this.getChild("title")}}ws.URL="ui://moe42ygrsqzy9u",ws.DependPackages=["GameHome"];class Ls extends ws{}class _s extends fgui.GLabel{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","CardLifeWarriow")}constructFromXML(e){super.constructFromXML(e),this.m_title=this.getChild("title")}}_s.URL="ui://moe42ygrsqzy9x",_s.DependPackages=["GameHome"];class vs extends _s{}class Ts extends fgui.GLabel{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","CardLifePowerUp")}constructFromXML(e){super.constructFromXML(e),this.m_title=this.getChild("title")}}Ts.URL="ui://moe42ygrsqzy9z",Ts.DependPackages=["GameHome"];class Gs extends Ts{}class Ps extends fgui.GLabel{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","CardShield")}constructFromXML(e){super.constructFromXML(e),this.m_level=this.getController("level"),this.m_icon=this.getChild("icon"),this.m_title=this.getChild("title")}}Ps.URL="ui://moe42ygrsqzya0",Ps.DependPackages=["GameHome"];class Is extends Ps{}class ks extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","CardShopBar")}constructFromXML(e){super.constructFromXML(e),this.m_shopHeart=this.getChild("shopHeart"),this.m_shopHorseshoe=this.getChild("shopHorseshoe"),this.m_shopLock=this.getChild("shopLock"),this.m_shopKey=this.getChild("shopKey"),this.m_fxHeart=this.getChild("fxHeart")}}ks.URL="ui://moe42ygrsqzya1",ks.DependPackages=["GameHome"];class Ms extends ks{useLuck(){this.m_shopHeart.visible=!1,this.m_fxHeart.visible=!0,this.m_fxHeart.frame=1,this.m_fxHeart.playing=!0,Laya.timer.once(1e3,this,this.refresh)}refresh(){}}class Ds extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","CardViewBack")}constructFromXML(e){super.constructFromXML(e),this.m_cardBack=this.getChild("cardBack")}}Ds.URL="ui://moe42ygrsqzya2",Ds.DependPackages=["GameHome"];class Fs extends Ds{}class As extends fgui.GLabel{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","SpriteEnemy")}constructFromXML(e){super.constructFromXML(e),this.m_sprite=this.getController("sprite"),this.m_icon=this.getChild("icon"),this.m_t0=this.getTransition("t0")}}As.URL="ui://moe42ygrsqzya4",As.DependPackages=["GameHome"];class bs extends As{}class Bs extends fgui.GLabel{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","SpriteBoss")}constructFromXML(e){super.constructFromXML(e),this.m_sprite=this.getController("sprite"),this.m_icon=this.getChild("icon"),this.m_t0=this.getTransition("t0")}}Bs.URL="ui://moe42ygrsqzya5",Bs.DependPackages=["GameHome"];class Hs extends Bs{}class Rs extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","Container")}constructFromXML(e){super.constructFromXML(e)}}Rs.URL="ui://moe42ygrsqzya7",Rs.DependPackages=["GameHome"];class xs extends Rs{}class Ns{static bindAll(){let e=fgui.UIObjectFactory.setPackageItemExtension;e(ns.URL,ns),e(os.URL,os),e(Fe.URL,Fe),e(cs.URL,cs),e(us.URL,us),e(ms.URL,ms),e(yt.URL,yt),e(ps.URL,ps),e(Cs.URL,Cs),e(ys.URL,ys),e(V.URL,V),e(Ls.URL,Ls),e(_.URL,_),e(W.URL,W),e(vs.URL,vs),e(k.URL,k),e(Gs.URL,Gs),e(Is.URL,Is),e(Ms.URL,Ms),e(Fs.URL,Fs),e(N.URL,N),e(bs.URL,bs),e(Hs.URL,Hs),e(R.URL,R),e(xs.URL,xs),e(h.URL,h),e(E.URL,E),e(T.URL,T),e(P.URL,P),e(A.URL,A),e(D.URL,D),e(B.URL,B),e(st.URL,st),e(et.URL,et),e(it.URL,it),e(Xe.URL,Xe),e(We.URL,We),e(nt.URL,nt)}}class Us extends fgui.GLabel{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameLaunch","ScreenBG")}constructFromXML(e){super.constructFromXML(e),this.m_icon=this.getChild("icon")}}Us.URL="ui://47qsdr42f84s1",Us.DependPackages=["GameLaunch"];class Es extends Us{onWindowShow(){this.setScreenSize(),window.screenBG=this,Engine.stage.sResize.add(this.setScreenSize,this)}onWindowHide(){Engine.stage.sResize.remove(this.setScreenSize,this)}setScreenSize(){}}class Os extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameLaunch","DialogCloseWindow")}constructFromXML(e){super.constructFromXML(e),this.m_closeButton=this.getChild("closeButton")}}Os.URL="ui://47qsdr42f84sg",Os.DependPackages=["GameLaunch"];class Ws extends Os{}class Vs extends fgui.GButton{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameLaunch","GMButton")}constructFromXML(e){super.constructFromXML(e)}}Vs.URL="ui://47qsdr42uohx13",Vs.DependPackages=["GameLaunch"];class Xs extends Vs{}class qs extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameLaunch","BGModel")}constructFromXML(e){super.constructFromXML(e)}}qs.URL="ui://47qsdr42ae8aw2h",qs.DependPackages=["GameLaunch"];class Ks extends qs{}class js extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameLaunch","GlobalModalWaiting")}constructFromXML(e){super.constructFromXML(e),this.m_circle=this.getChild("circle"),this.m_rotation=this.getTransition("rotation")}}js.URL="ui://47qsdr42x6asw2i",js.DependPackages=["GameLaunch"];class zs extends js{}class Ys extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameLaunch","WindowModalWaiting")}constructFromXML(e){super.constructFromXML(e),this.m_circle=this.getChild("circle"),this.m_rotation=this.getTransition("rotation")}}Ys.URL="ui://47qsdr42x6asw2j",Ys.DependPackages=["GameLaunch"];class $s extends Ys{}class Js extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameLaunch","LogoView")}constructFromXML(e){super.constructFromXML(e),this.m_t0=this.getTransition("t0")}}Js.URL="ui://47qsdr42tnlhw2t",Js.DependPackages=["GameLaunch"];class Qs extends Js{}class Zs{static bindAll(){let e=fgui.UIObjectFactory.setPackageItemExtension;e(zi.URL,zi),e(Es.URL,Es),e(Ws.URL,Ws),e(Ni.URL,Ni),e(Ei.URL,Ei),e(Fi.URL,Fi),e(Xs.URL,Xs),e(Ks.URL,Ks),e(zs.URL,zs),e($s.URL,$s),e(Ji.URL,Ji),e(Qs.URL,Qs)}}class ea extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("ModuleLogin","LoginPanel")}constructFromXML(e){super.constructFromXML(e),this.m_type=this.getController("type"),this.m_accountInput=this.getChild("accountInput"),this.m_passwordInput=this.getChild("passwordInput"),this.m_btn_login=this.getChild("btn_login"),this.m_btn_offLine=this.getChild("btn_offLine"),this.m_btn_randomLogin=this.getChild("btn_randomLogin"),this.m_btn_testWar=this.getChild("btn_testWar")}}ea.URL="ui://4698ugpknz0c1g",ea.DependPackages=["ModuleLogin"];class ta extends ea{onWindowInited(){console.log("LoginPanel onWindowInited"),this.m_type.selectedIndex=1,this.m_btn_randomLogin.visible=VersionConfig.IsDebugVer,this.m_btn_testWar.visible=VersionConfig.IsDebugVer,window.userAccount=this.m_accountInput.m_txt_account,window.userPassWorld=this.m_passwordInput.m_txt_password,window.loginPanel=this}createDebugButton(e,t,i,s){var a=fgui.UIPackage.createObjectFromURL(this.m_btn_login.resourceURL);a.text=e,a.width=150,a.height=80,a.x=200+200*i,a.y=100+100*s,a.onClick(this,t),fgui.GRoot.inst.addChild(a)}get account(){return this.m_accountInput.m_txt_account.text.trim()}set account(e){this.m_accountInput.m_txt_account.text=e}get password(){return this.m_passwordInput.m_txt_password.text.trim()}set password(e){this.m_passwordInput.m_txt_password.text=e}onWindowShow(){if(console.log("LoginPanel onWindowShow"),isNullOrEmpty(this.account)&&(this.account=$a.localStorage.username,Engine.borwer.isBrowser&&VersionConfig.IsDebugVer)){let e=sessionStorage.getItem("username");this.account=e||""}if(isNullOrEmpty(this.account)&&(this.account=Ie.RandName(2,7)),isNullOrEmpty(this.password)&&(this.password=$a.localStorage.password,Engine.borwer.isBrowser&&VersionConfig.IsDebugVer)){let e=sessionStorage.getItem("password");this.password=e||""}Engine.borwer.isWXGame}async getAuth(){if(Ie.platform instanceof Pe){let e=Ie.platform;if(await e.WXGetSdkAuthSetting())this.setModel(!1);else{this.setModel(!0),await e.WXAuth()&&this.setModel(!1)}}}setModel(e){this.m_btn_login.title=e?z.Auth:z.Login}}class ia extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("ModuleLogin","AccountInput")}constructFromXML(e){super.constructFromXML(e),this.m_txt_account=this.getChild("txt_account"),this.m_accountComboBox=this.getChild("accountComboBox")}}ia.URL="ui://4698ugpknz0c1h",ia.DependPackages=["ModuleLogin"];class sa extends ia{}class aa extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("ModuleLogin","AccountComboBox")}constructFromXML(e){super.constructFromXML(e),this.m_c1=this.getController("c1")}}aa.URL="ui://4698ugpknz0c1i",aa.DependPackages=["ModuleLogin"];class na extends aa{}class ra extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("ModuleLogin","passwordInput")}constructFromXML(e){super.constructFromXML(e),this.m_txt_password=this.getChild("txt_password")}}ra.URL="ui://4698ugpknz0c1n",ra.DependPackages=["ModuleLogin"];class oa extends ra{}class la extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("ModuleLogin","BulletinPanel")}constructFromXML(e){super.constructFromXML(e),this.m_Type=this.getController("Type"),this.m_listTest=this.getChild("listTest"),this.m_listUpdate=this.getChild("listUpdate"),this.m_bg=this.getChild("bg")}}la.URL="ui://4698ugpkrlfx2m",la.DependPackages=["ModuleLogin"];class ca extends la{}class ha extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("ModuleLogin","WxPanel")}constructFromXML(e){super.constructFromXML(e),this.m_btn_login=this.getChild("btn_login")}}ha.URL="ui://4698ugpkneo62p",ha.DependPackages=["ModuleLogin"];class ua extends ha{}class ga extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("ModuleLogin","AccountShow")}constructFromXML(e){super.constructFromXML(e),this.m_txt_account=this.getChild("txt_account")}}ga.URL="ui://4698ugpkneo62q",ga.DependPackages=["ModuleLogin"];class ma extends ga{}class da extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("ModuleLogin","ServerPanel")}constructFromXML(e){super.constructFromXML(e),this.m_Server=this.getController("Server"),this.m_listMenu=this.getChild("listMenu"),this.m_listServer=this.getChild("listServer"),this.m_btnChange=this.getChild("btnChange"),this.m_btnStart=this.getChild("btnStart"),this.m_bg=this.getChild("bg")}}da.URL="ui://4698ugpklm612r",da.DependPackages=["ModuleLogin"];class pa extends da{constructor(){super(...arguments),this.serverList=[],this.openServer=[],this.roles=new Dictionary}onWindowInited(){}onWindowShow(){this.m_listMenu.setItemRenderer(this.MenuRender,this),this.m_listMenu.on(fgui.Events.CLICK_ITEM,this,this.MenuSelect),this.m_listServer.setItemRenderer(this.ServerRender,this),this.m_listServer.on(fgui.Events.CLICK_ITEM,this,this.ServerSelect)}onWindowHide(){this.m_listMenu.itemRenderer.clear(),this.m_listMenu.off(fgui.Events.CLICK_ITEM,this,this.MenuSelect),this.m_listServer.itemRenderer.clear(),this.m_listServer.off(fgui.Events.CLICK_ITEM,this,this.ServerSelect),this.Reset()}MenuRender(e,t){}MenuSelect(e){}ServerRender(e,t){t.RenderItem(this.serverList[e])}ServerSelect(e){let t=e.DataSource;this.lastServer=t,this.m_btnChange.RenderItem(t),this.m_Server.selectedIndex=0}Reset(){this.serverList=[],this.openServer=[],this.roles.clear()}UpdateServer(){let e=this.serverList;this.m_listServer.numItems=e.length,this.m_listMenu.selectedIndex=0;let t=this.openServer;if(!e.length)return;let i,s=$a.localStorage.server;(i=s?this.GetServer(s,!0):t.length?t[t.length-1]:e[e.length-1])&&(this.lastServer=i,this.m_btnChange.RenderItem(i))}Open(e){if(this.serverList=e,this.roles.count)for(let t=0,i=e.length;t<i;t++){let i=e[t];this.roles.hasKey(i.id)&&this.openServer.push(i)}this.UpdateServer()}SetRoles(e){if(e&&e.length)for(let t=0,i=e.length;t<i;t++){let i=e[t];this.roles.add(i.server,i)}}GetRole(e){return this.roles.getValue(e)}GetServer(e,t){let i=t?this.openServer:this.serverList;for(let t=0,s=i.length;t<s;t++)if(i[t].id=e)return i[t];return this.GetServer(e)}}class Sa extends fgui.GButton{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("ModuleLogin","ServerItem")}constructFromXML(e){super.constructFromXML(e),this.m_button=this.getController("button"),this.m_State=this.getController("State"),this.m_Type=this.getController("Type"),this.m_View=this.getController("View"),this.m_labServer=this.getChild("labServer"),this.m_labLevel=this.getChild("labLevel")}}Sa.URL="ui://4698ugpklm612v",Sa.DependPackages=["ModuleLogin"];class Ca extends Sa{RenderItem(e){this.DataSource=e,this.m_labServer.text=e.name,this.m_labLevel.text=""}}class fa extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("ModuleLogin","CdkPanel")}constructFromXML(e){super.constructFromXML(e),this.m_cdkInput=this.getChild("cdkInput"),this.m_btn_cdk=this.getChild("btn_cdk")}}fa.URL="ui://4698ugpkipa82w",fa.DependPackages=["ModuleLogin"];class ya extends fa{get cdk(){return this.m_cdkInput.m_txt_cdk.text.trim()}set cdk(e){this.m_cdkInput.m_txt_cdk.text=e}}class wa extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("ModuleLogin","CdkInput")}constructFromXML(e){super.constructFromXML(e),this.m_txt_cdk=this.getChild("txt_cdk"),this.m_accountComboBox=this.getChild("accountComboBox")}}wa.URL="ui://4698ugpkipa82x",wa.DependPackages=["ModuleLogin"];class La extends wa{}class _a extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("ModuleLogin","CheckIDPanel")}constructFromXML(e){super.constructFromXML(e),this.m_Type=this.getController("Type"),this.m_labName=this.getChild("labName"),this.m_labID=this.getChild("labID"),this.m_btnClose=this.getChild("btnClose"),this.m_btnMake=this.getChild("btnMake")}}_a.URL="ui://4698ugpkqdfe1c",_a.DependPackages=["ModuleLogin"];class va extends _a{}class Ta extends fgui.GButton{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("ModuleLogin","CommonDialogBg")}constructFromXML(e){super.constructFromXML(e),this.m_icon=this.getChild("icon"),this.m_btn_Close=this.getChild("btn_Close")}}Ta.URL="ui://4698ugpkje283k",Ta.DependPackages=["ModuleLogin"];class Ga extends Ta{}class Pa extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("ModuleLogin","BulletinItem")}constructFromXML(e){super.constructFromXML(e),this.m_labtitle=this.getChild("labtitle"),this.m_labItem=this.getChild("labItem")}}Pa.URL="ui://4698ugpkje283x",Pa.DependPackages=["ModuleLogin"];class Ia extends Pa{}class ka{static bindAll(){let e=fgui.UIObjectFactory.setPackageItemExtension;e(ke.URL,ke),e(ta.URL,ta),e(sa.URL,sa),e(na.URL,na),e(oa.URL,oa),e(ca.URL,ca),e(ua.URL,ua),e(ma.URL,ma),e(pa.URL,pa),e(Ca.URL,Ca),e(ya.URL,ya),e(La.URL,La),e(va.URL,va),e(Ga.URL,Ga),e(Ia.URL,Ia)}}class Ma{static bindAll(){fgui.UIObjectFactory.setPackageItemExtension}}class Da{static fguiBinderAll(){Ns.bindAll(),Zs.bindAll(),ka.bindAll(),Ma.bindAll()}}class Fa{static get json(){return this._netConfig}static async GetNetConfig(){return Fa._netConfig&&0==Fa._netConfig.error?new Promise(e=>{e(Fa._netConfig)}):new Promise(e=>{net.auth.config((t,i)=>{Fa._netConfig=i,e(Fa._netConfig)})})}static async GetErrorStr(e){return Fa._netConfig?new Promise(t=>{t(Fa._netConfig.ErrStr[e.toString()])}):(await Fa.GetNetConfig(),new Promise(t=>{t(Fa._netConfig.ErrStr[e.toString()])}))}}Fa.FIRST_SCENE="test",Fa.GAME_WIDTH=1334,Fa.GAME_HEIGHT=750,Fa.GROUP_ID=0,Fa.WXAppID="wxedab64fed19eb5b4",Fa.SHARE_IMG_URL="https://thkdev.123u.com/game/makemore/",Fa.GO_URL="http://192.168.2.80:5000",Fa.shouldShowGuide=!0;class Aa{static async Time(e){return new Promise(t=>{Engine.timer.once(e,this,()=>{t()})})}static async Frame(e){return new Promise(t=>{Engine.timer.frameOnce(e,this,()=>{t()})})}}class ba{constructor(){}install(e){this.installAsync(e)}async installAsync(e){VersionConfig&&VersionConfig.Init(),$a.init(),Z.install(),Lt.install(),$a.version.init(),Engine.borwer.isWXGame?(await this.initFguiSetting(),$a.loader.install(),await this.loadVersionAsync(),$a.localStorage.setString("__basePath__",Laya.URL.basePath,!0)):(await this.loadVersionAsync(),$a.localStorage.setString("__basePath__",Laya.URL.basePath,!0),await this.initFguiSetting(),$a.loader.install()),$a.loader.open(S.Launch),$a.loaderSettingHandler.onBegin(),await this.clearWXFileCache(),await this.initConfig(),await this.initLangConfig(),$a.moduleModel.install(),$a.loaderSettingHandler.onEnd(),$a.sound.install(),window.launcherInitBG&&window.launcherInitBG.removeSelf(),$a.loader.closeAll(),e?e():$a.menu.open(p.War)}loadVersion(){Laya.ResourceVersion.enable("version.json",Laya.Handler.create(this,this.onVersionLoaded),Laya.ResourceVersion.FILENAME_VERSION)}onVersionLoaded(){}async loadVersionAsync(){return new Promise(e=>{Laya.ResourceVersion.enable("version.json?t="+Laya.timer.currTimer,Laya.Handler.create(this,()=>{if(Laya.ResourceVersion.manifest){if(Laya.ResourceVersion.manifest.__ResVersion__){let e=Laya.ResourceVersion.manifest.__ResVersion__;$a.version.localResVersionData.setVersionTxt(e),$a.version.localResVersion=e}if(!VersionConfig.IsUseZip){let e=Laya.ResourceVersion.manifest,s=[];for(var t in e)s.push(t);for(var i of s)e[i.toLowerCase()]=e[i]}Laya.MiniAdpter&&(Laya.MiniAdpter.AutoCacheDownFile=!1)}this.checkWXFileCache(),e()}),Laya.ResourceVersion.FILENAME_VERSION)})}async checkWXFileCache(){if(Engine.borwer.isWXGame){let e=$a.localStorage.getString("__basePath__",!0);e!=Laya.URL.basePath&&(console.log(`资源根目录不一样: preBasePath=${e}, Laya.URL.basePath=${Laya.URL.basePath}`),Laya.MiniFileMgr.onSetVersion(e,Laya.URL.basePath))}}async clearWXFileCache(){let e=VersionConfig.VersionCacheCode;if(Engine.borwer.isWXGame){let t=$a.localStorage.getInt("__verIsNeedClear__",!0);t!=e&&(console.log("清理缓存 v=",t,"vv=",e),$a.loaderSettingHandler.setTip("清理缓存中..."),await Aa.Frame(5),Laya.MiniFileManager.RemoveAll())}$a.localStorage.setInt("__verIsNeedClear__",e,!0)}async initFguiSetting(){$a.guiRes.install(),fgui.UIConfig.packageFileExtension=Yt.packageFileExtension,fgui.UIObjectFactory.setLoaderExtension(oi),Da.fguiBinderAll(),fgui.UIConfig.buttonSound="ui://moe42ygrsqzy7p",fgui.UIConfig.defaultFont="_sans";let e=await $a.asset.loadFguiByPackagenameAsync(ae.GameLaunch);Yt.addPackage(e.packagePath),fgui.UIConfig.globalModalWaiting=fgui.UIPackage.getItemURL(e.packageName,"GlobalModalWaiting"),fgui.UIConfig.windowModalWaiting=fgui.UIPackage.getItemURL(e.packageName,"WindowModalWaiting")}async initConfig(){$a.config.configLoader=$a.asset,$a.config.initList(),$a.config.sLoadProgress.add($a.loaderSettingHandler.onLoadedConfig,$a.loaderSettingHandler),await $a.config.loadAllAsync(),$a.config.sLoadProgress.remove($a.loaderSettingHandler.onLoadedConfig,$a.loaderSettingHandler)}async initLangConfig(){$a.lang.current.configLoader=$a.asset,$a.lang.current.initList(),$a.lang.isUseLang&&($a.lang.current.sLoadProgress.add($a.loaderSettingHandler.onLoadedLangConfig,$a.loaderSettingHandler),await $a.lang.current.loadAllAsync(),$a.lang.current.sLoadProgress.remove($a.loaderSettingHandler.onLoadedLangConfig,$a.loaderSettingHandler))}async installServerList(){VersionConfig.IsDebugVer?(await $a.channel.requestServerListAsync(),net.config.url=$a.channel.serverItem.main):(await $a.channel.requestChannelServerAsync(),net.config.url=$a.channel.serverItem.main),net.logic.onError.on(this.onNetError,this)}async onNetError(e){console.log("onNetError "+e);let t=await Fa.GetErrorStr(e);console.log(`OnNetError no=${e}  txt=${t}`),t||(t="服务器反馈错误: "+e),$a.system.toastText(t)}}class Ba{}class Ha{constructor(){this.packageConfigs=[],this.assets=[],this.isRuning=!1,this.isComplete=!1,this.completeCallbackList=[]}addAssetForFguiPackagename(e){this.assets.push({url:e,type:f.FguiPackage})}addAssetForFguiComponent(e){let t=e.DependPackages;for(let e=0;e<t.length;e++)this.addAssetForFguiPackagename(t[e])}addDynmicAssetForAvatarAll(e){e.getAllAssset(this.assets)}generate(){if(this.list)return;let e=new Dictionary,t=new Dictionary;for(let i=0;i<this.assets.length;i++){let s=this.assets[i],a=null;switch(s.type){case f.FguiPackage:a=$a.guiRes.getconfig(s.url);break;case f.FspritePackage:a=$a.spriteRes.getconfig(s.url)}if(a){t.hasKey(a.packagePath)||t.add(a.packagePath,a);let i=a.loadList;for(let t of i)if(!e.hasKey(t.url)){let i={url:t.url,type:se.layaLoaderType2AssetItemType(t.type)};e.add(i.url,i)}}else e.hasKey(s.url)||e.add(s.url,s)}this.list=e.getValues(),this.packageConfigs=t.getValues()}async start(){return new Promise(e=>{if(this.isComplete)e(!0);else{let t=()=>{e(!0)};this.completeCallbackList.push(t),this.isRuning||(this.generate(),this.list&&0!=this.list.length?$a.asset.loadList(this.list,this,this.onComplete,this.onProgress):this.onComplete())}})}onProgress(e,t,i,s){$a.loaderSettingHandler.onLoadedFgui(t,i)}onComplete(){for(let e of this.packageConfigs)Yt.addPackage(e.packagePath);for(let e of this.completeCallbackList)e.apply(this);this.isComplete=!0}}!function(e){e.SimulationBehaviours="SimulationBehaviours",e.EComponents="EComponents",e.ESystems="ESystems",e.EEvents="EEvents",e.ECSSystems="ECSSystems",e.UnitCmds="UnitCmds",e.UnitCmdActions="UnitCmdActions",e.TookHandlers="TookHandlers",e.RenderComponents="RenderComponents",e.RenderSystems="RenderSystems",e.RenderSimulationBehaviours="RenderSimulationBehaviours"}(Ai||(Ai={})),window.AssemblyNamespace=Ai;class Ra{constructor(){this.menuId=0}init(){}validate(e){return!0}exe(){}__onExe(){}}Ra.__namespace=Ai.TookHandlers;class xa extends Y{constructor(){super(...arguments),this.closeDict=new Dictionary}install(){}addClose(e,t){this.closeDict.add(e,t)}validate(e){let t=!1;if(this.closeDict.hasKey(e)&&(t=this.closeDict.getValue(e).apply(this)),1==t)return!1;$a.config.unlock.getUnlockConfig(e);return this.dict.hasKey(e)?this.dict.getValue(e).apply(this):super.validate(e)}}class Na extends Y{install(){}validate(e){return xa.getInstance().validate(e)}}class Ua extends Ra{constructor(){super(...arguments),this.fixedTimeList=[],this.endedTimeList=[]}validate(e){let t=!1,i=this.fixedTimeList.length;for(let s=0;s<i;s++){let i=this.fixedTimeList[s],a=this.endedTimeList[s];if(e>=i.timestamp){a?(t=e<=a.timestamp)&&a.reseTimestamp():(t=!0)&&i.reseTimestamp();break}}return t}}!function(e){e[e.Day=0]="Day",e[e.Week=1]="Week",e[e.Month=2]="Month"}(bi||(bi={})),function(e){e[e.UnArrival=0]="UnArrival",e[e.Arrival=1]="Arrival",e[e.Overdue=2]="Overdue"}(Bi||(Bi={}));class Ea{constructor(){this.timeType=bi.Day,this.monthDate=0,this.weekDay=0,this.hour=0,this.minute=0,this.second=0,this._timestamp=-1}static CreateHMS(e,t=0,i=0){let s=new Ea;return s.timeType=bi.Day,s.hour=e,s.minute=t,s.second=i,s}static CreateWeek(e,t,i=0,s=0){let a=new Ea;return a.timeType=bi.Week,a.weekDay=e,a.hour=t,a.minute=i,a.second=s,a}static CreateMonthDate(e,t,i=0,s=0){let a=new Ea;return a.timeType=bi.Month,a.monthDate=e,a.hour=t,a.minute=i,a.second=s,a}get timestamp(){return this._timestamp<=0&&this.reseTimestamp(),this._timestamp}reseTimestamp(){let e;switch(this.timeType){case bi.Day:e=Ci.getServerNextDate(this.hour,this.minute,this.second);break;case bi.Week:e=Ci.getServerNextWeekDate(this.weekDay,this.hour,this.minute,this.second);break;case bi.Month:e=Ci.getServerNextMonthDate(this.monthDate,this.hour,this.minute,this.second)}console.log(Ci.ToStr(e)),this._timestamp=e.getTime()}}class Oa extends Ua{init(){let e=Global.updataDayTime;this.fixedTimeList.push(Ea.CreateHMS(e.H,e.Mm,e.S)),super.init()}exe(){super.exe(),console.log("FixedTimeHookHandler_hms exe"),$a.moduleModel.section.sectionData.resetData(),$a.moduleModel.gashapon.resetGashaponData(),$a.event.dispatch(ne.GameFrame_Everyday_Update)}}class Wa{static register(e,t){e.tag=t,this._namespace.addItem(e.__namespace,e)}static get(e){return this._namespace.get(e)}}Wa._namespace=new UnOrderMultiMap,window.Assembly=Wa;class Va{static install(){this.isInstalled||Wa.register(Oa,"FixedTimeHookHandler_hms")}}Va.isInstalled=!1;class Xa{constructor(){this.dict=new Dictionary,this.list=[],this.count=0,this.isInsalled=!1,this.serverMilliseconds=0}install(){if(this.isInsalled)return;this.isInsalled=!0,Va.install();let e=Wa.get(Ai.TookHandlers);if(e)for(let t of e)this.registerSystem(t)}registerSystem(e){let t=e.tag||e.name||e.__tookClassUid;t&&this.dict.hasKey(t)||(t=e.__tookClassUid=Xa.TookClassUid++);let i=new e;i instanceof Ra&&(i.init(),this.dict.add(t,i),this.list.push(i),this.count=this.list.length)}fixedReseTimestamp(){for(let e of this.list)if(e instanceof Ua)for(let t of e.fixedTimeList)t.reseTimestamp()}start(){this.install(),this.stop(),Laya.timer.loop(1e3,this,this.onTick)}stop(){Laya.timer.clear(this,this.onTick)}onTick(){this.serverMilliseconds=$a.time.serverMilliseconds;for(let e=0;e<this.count;e++){let t=this.list[e];this.validate(t)&&(t.exe(),t.__onExe())}}validate(e){if(!$a.user.isLoginAndGetUserData)return!1;let t=!0;if(t&&e.menuId>0&&(t=xa.getInstance().validate(e.menuId)),t&&e.menuId>0&&(t=Na.getInstance().validate(e.menuId)),t&&e.preconditionMenuIds&&e.preconditionMenuIds.length>0){t=!1;for(let i of e.preconditionMenuIds)if($a.menu.isOpened(i)){t=!0;break}}return t&&(t=e.validate(this.serverMilliseconds)),t}}Xa.TookClassUid=1;class qa{async reLogin(){}async login(e,t,i){if(!i&&$a.user.isLoginAndGetUserData)return;fgui.GRoot.inst.showModalWait();let s=await Ie.platform.Login2(e,t);if(fgui.GRoot.inst.closeModalWait(),s.error)return 45!=s.error&&304!=s.error||$a.launch.onNetError(s.error),void(1018==s.error&&$a.event.dispatch("LOGIN_CDK",s.session));$a.localStorage.username=e,$a.localStorage.password=t,Engine.borwer.isBrowser&&VersionConfig.IsDebugVer&&(sessionStorage.setItem("username",e),sessionStorage.setItem("password",t)),$a.event.dispatch("SUCCESS_LOGIN",s.session,s.roles)}async check(e,t,i,s){let a=await Ie.platform.CheckCdk(e,t);a.error?$a.event.dispatch("ERROR_CDK",a.error):this.login(i,s,!0)}async CheckIDCard(e,t,i){let s=await Ie.platform.CheckIDCard(e,t,i);if(console.log("当前验证身份状态：",s.error,s.timelong),0!=s.error&&1023!=s.error){let t=$a.moduleModel.login;t.session=e,t.error=s.error,t.timeLong=s.timelong}$a.event.dispatch("ERROR_IDCARD",s.error)}async newAndUseRole(e,t,i){(await Ie.platform.newAndUseRole(e,t,i)).error||this.enter()}async useRole(e,t){(await Ie.platform.useRole(e,t)).error||this.enter()}async areas(){let e=await Ie.platform.Areas();e.error?$a.event.dispatch("ERROR_AREAS"):$a.event.dispatch("SUCCESS_AREAS",e.areas)}async enter(){fgui.GRoot.inst.showModalWait(),await $a.net.AsyncGamerLoginGetDataC2S(),$a.user.isLoginAndGetUserData=!0,$a.netStat.isLogined=!0,fgui.GRoot.inst.closeModalWait()}}class Ka{async changeName(e){return await $a.net.AsyncGamerChangeNameC2S(e)}async changeHeadIcon(e){await $a.net.AsyncGamerChangeAvatarC2S(e)}async uploadWXInfo(){}async sawHeadIcon(e){await $a.net.GamerChangeItemIsSawC2S(6,e)}}class ja{constructor(){this.login=new qa,this.user=new Ka}}class za{init(){}}class Ya{constructor(){this.isConnnected=!1,this.isTryConnecting=!1,this.isLogined=!1,this.lastSendFrame=0,this.lastResponseFrame=0,this.lastMsgSuccess=!0,this.lastShowErrorFrame=0,this.timeOutShowModelWait=!0}Init(){net.logic.onConnect.on(this.onConnect,this),net.logic.onReconnect.on(this.onReconnect,this),net.logic.onClose.on(this.onClose,this),net.logic.onConnectError.on(this.onConnectError,this),net.logic.onSendTime.on(this.onSendTime,this),net.logic.onResponseTime.on(this.onResponseTime,this),Laya.timer.frameLoop(20,this,this.onLoop)}onConnect(){this.isConnnected=!0,this.isTryConnecting=!1,this.isLogined&&fgui.GRoot.inst.closeModalWait()}onConnectError(){this.isConnnected=!1,this.isTryConnecting=!1,this.isLogined&&$a.system.toastText(z.NET_ERROR)}onClose(){this.isConnnected=!1,this.isTryConnecting=!1,this.isLogined}onReconnect(){this.isConnnected=!1,this.isTryConnecting=!0,this.isLogined&&fgui.GRoot.inst.showModalWait()}onClickConnect(){}onSendTime(){this.lastMsgSuccess&&(this.lastSendFrame=Laya.timer.currFrame),this.lastMsgSuccess=!1}onResponseTime(){this.lastResponseFrame=Laya.timer.currFrame,this.lastMsgSuccess=!0,this.timeOutShowModelWait&&(fgui.GRoot.inst.closeModalWait(),this.timeOutShowModelWait=!1)}onLoop(){this.lastMsgSuccess||this.isTryConnecting||Laya.timer.currFrame-this.lastShowErrorFrame>300&&Laya.timer.currFrame-this.lastSendFrame>300&&(this.lastShowErrorFrame=Laya.timer.currFrame,this.timeOutShowModelWait||fgui.GRoot.inst.showModalWait(),this.timeOutShowModelWait=!0,this.onConnectError())}}class $a{static init(){this.isInited||(this.isInited=!0,this.screenSetting=new Ht,this.deviceSetting=new Nt,this.launchText=new Vi,this.launch=new ba,this.asset=new Qt,this.config=new Bt,this.lang=zt.Instance,this.configExp=new Ba,this.sound=new Ii,this.time=new Mi,this.localStorage=xt.Instance,this.loader=Zi.Instance,this.loaderSettingHandler=new Xi,this.menu=new pi,this.system=new Wi,this.channel=fi.Instance,this.version=Gi.Instance,this.preload=new Ha,this.moduleModel=new _i,this.user=new ss,this.guiRes=new si,this.spriteRes=new ai,this.event=new Emitter,this.net=es,this.netStat=new Ya,this.netStat.Init(),this.protoHandler=new za,this.protoHandler.init(),this.sender=new ja,this.took=new Xa)}}$a.net=es,$a.isInited=!1,window.Game=$a;new class{constructor(){LayaExtendClass(),Laya3D._isInit||this.InitLaya(),e.stat&&Laya.Stat.show(),LayaExtendLogic(),FguiExtend(),Engine.init(),$a.init(),$a.launch.install(),Laya.stage.on(Laya.Event.KEY_DOWN,this,this.OnKeyDownHandler)}OnKeyDownHandler(e){Laya.Keyboard.P==e.keyCode&&(console.error("当前对象池信息:"),console.error(Pool._poolDic))}initLoader(){wx.getSystemInfoSync();var e=new Laya.Sprite;let t=Laya.stage.width,i=Laya.stage.height;e.graphics.drawRect(0,0,t,i,"#FFFFFF"),e.graphics.loadImage("res/fgui/GameLaunch_atlas_upoiw2g.jpg",0,0,t,i),Laya.stage.addChild(e),window.launcherInitBG=e}InitLaya(){window.Laya3D?Laya3D.init(e.width,e.height):Laya.init(e.width,e.height,Laya.WebGL),Laya.Physics&&Laya.Physics.enable(),Laya.DebugPanel&&Laya.DebugPanel.enable(),Laya.stage.scaleMode=e.scaleMode,Laya.stage.screenMode=e.screenMode,Laya.stage.alignV=e.alignV,Laya.stage.alignH=e.alignH,Laya.URL.exportSceneToJson=e.exportSceneToJson,Laya.Shader3D.debugMode=!1,e.physicsDebug&&Laya.PhysicsDebugDraw&&Laya.PhysicsDebugDraw.enable(),Laya.alertGlobalError=!0}}}();