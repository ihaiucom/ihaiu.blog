!function(){"use strict";class e{constructor(){}static get isMobile(){return window.navigator.userAgent.indexOf("Mobile")>-1}static get scaleMode(){return Laya.Stage.SCALE_FIXED_AUTO}static get scaleX(){return Laya.stage.width/this.width}static get scaleY(){return Laya.stage.height/this.height}static init(){Laya.ClassUtils.regClass}}e.width=750,e.height=1334,e.screenMode="none",e.alignV=Laya.Stage.ALIGN_TOP,e.alignH=Laya.Stage.ALIGN_CENTER,e.startScene="test/TestScene.scene",e.sceneRoot="",e.debug=!1,e.stat=!1,e.physicsDebug=!1,e.exportSceneToJson=!0,e.isAntialias=!0,e.init();class i extends excelconfigSources.Card{get name(){if(!Co.lang.isUseLang)return this.zhCnName;let e=Co.lang.getValue("Card",this.id,"zhCnName");return isNullOrEmpty(e)?this.zhCnName:e}}class s extends excelconfigSources.CardScoreType{get name(){if(!Co.lang.isUseLang)return this.zhCnName;let e=Co.lang.getValue("CardScoreType",this.id,"zhCnName");return isNullOrEmpty(e)?this.zhCnName:e}}class a extends excelconfigSources.EffectType{}class n extends excelconfigSources.Item{get name(){if(!Co.lang.isUseLang)return this.zhCnName;let e=Co.lang.getValue("Item",this.id,"zhCnName");return isNullOrEmpty(e)?this.zhCnName:e}get des(){if(!Co.lang.isUseLang)return this.zhCnDes;let e=Co.lang.getValue("Item",this.id,"zhCnDes");return isNullOrEmpty(e)?this.zhCnDes:e}}class r extends excelconfigSources.ItemConsume{get name(){if(!Co.lang.isUseLang)return this.zhCnName;let e=Co.lang.getValue("ItemConsume",this.id,"zhCnName");return isNullOrEmpty(e)?this.zhCnName:e}get itemDes(){if(!Co.lang.isUseLang)return this.zhCnItemdes;let e=Co.lang.getValue("ItemConsume",this.id,"zhCnItemdes");return isNullOrEmpty(e)?this.zhCnItemdes:e}}class o extends excelconfigSources.ItemDecorate{get name(){if(!Co.lang.isUseLang)return this.zhCnName;let e=Co.lang.getValue("ItemDecorate",this.id,"zhCnName");return isNullOrEmpty(e)?this.zhCnName:e}get itemDes(){if(!Co.lang.isUseLang)return this.zhCnItemdes;let e=Co.lang.getValue("ItemDecorate",this.id,"zhCnItemdes");return isNullOrEmpty(e)?this.zhCnItemdes:e}}class l extends excelconfigSources.ItemWeapon{get name(){if(!Co.lang.isUseLang)return this.zhCnName;let e=Co.lang.getValue("ItemWeapon",this.id,"zhCnName");return isNullOrEmpty(e)?this.zhCnName:e}get itemDes(){if(!Co.lang.isUseLang)return this.zhCnItemdes;let e=Co.lang.getValue("ItemWeapon",this.id,"zhCnItemdes");return isNullOrEmpty(e)?this.zhCnItemdes:e}}class c extends excelconfigSources.Level{}class h extends excelconfigSources.Loader{}class u extends excelconfigSources.Menu{get name(){if(!Co.lang.isUseLang)return this.zhCnName;let e=Co.lang.getValue("Menu",this.id,"zhCnName");return isNullOrEmpty(e)?this.zhCnName:e}}class m extends excelconfigSources.Msg{get notice(){if(!Co.lang.isUseLang)return this.zhCnNotice;let e=Co.lang.getValue("Msg",this.id,"zhCnNotice");return isNullOrEmpty(e)?this.zhCnNotice:e}}class g extends excelconfigSources.Property{get name(){if(!Co.lang.isUseLang)return this.zhCnName;let e=Co.lang.getValue("Property",this.id,"zhCnName");return isNullOrEmpty(e)?this.zhCnName:e}}class d extends excelconfigSources.TriggerType{get name(){if(!Co.lang.isUseLang)return this.zhCnName;let e=Co.lang.getValue("TriggerType",this.id,"zhCnName");return isNullOrEmpty(e)?this.zhCnName:e}}class p extends excelconfigSources.Unlock{get name(){if(!Co.lang.isUseLang)return this.zhCnName;let e=Co.lang.getValue("Unlock",this.id,"zhCnName");return isNullOrEmpty(e)?this.zhCnName:e}}class C extends fgui.GButton{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","CardView")}constructFromXML(e){super.constructFromXML(e)}}C.URL="ui://moe42ygrsqzy9s",C.DependPackages=["GameHome"];class S extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","CardViewFrontBg")}constructFromXML(e){super.constructFromXML(e),this.m_state=this.getController("state"),this.m_icon=this.getChild("icon")}}S.URL="ui://moe42ygrsqzya8",S.DependPackages=["GameHome"];class f extends S{}var y;!function(e){e[e.Default=0]="Default",e[e.Warrior=1]="Warrior",e[e.Hero=2]="Hero",e[e.PowerUp=3]="PowerUp"}(y||(y={}));class w extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","CardViewFrontHero")}constructFromXML(e){super.constructFromXML(e),this.m_icon=this.getChild("icon"),this.m_life=this.getChild("life"),this.m_shield=this.getChild("shield"),this.m_shopBar=this.getChild("shopBar")}}w.URL="ui://moe42ygrsqzy9v",w.DependPackages=["GameHome"];class L{}L.Width=640,L.Height=960,L.HeroStartRow=2,L.HeroStartColumn=2,L.CardWidth=198,L.CardHeight=226,L.CardSpaceBetweenWidth=10,L.CardSpaceBetweenHeight=10,L.AnimationTime=185,L.AnimationMultiplier=.5,L.ScaleZoom=1.2,L.ScaleSpeed=50,L.FlipSpeed=200,L.FlipZoom=1.3,L.SmashDelay=200,L.HeroCurrentLife1="HeroCurrentLife1",L.HeroCurrentLife2="HeroCurrentLife2",L.HeroTotalLife1="HeroTotalLife1",L.HeroTotalLife2="HeroTotalLife2",L.CardLife="CardLife",L.CardLife1="CardLife1",L.CardLife2="CardLife2",L.PowerUpCircle="PowerUpCircle",L.PowerUp="PowerUp",L.CardManAnimation="CardManAnimation",L.WaveSize=7,L.ScaleSize=30,L.textFontWeight=22,L.numbersFontWeight=28,L.resultNumbersFontWeight=35,L.creditsColor="#ffffff",L.creditsFontWeight=24,L.BackgroundImageName="BackgroundImageName",L.BackgroundName="BackgroundName",L.LightningDuration=50,L.ShakeIntensity=20,L.ContainerName="container",L.CoinMaxValue=5,L.Shadow="shadow",L.Hero="hero",L.CardWithArm="cardWithArm",L.CardWithMovingArm="cardWithMovingArm",L.ShowTime=300,L.StorageName="pirated-cards-adventure",L.IsDev=!1,L.IsAndroid=!1,L.HighResolutionScale=!1,L.MaxPixelRatio=3,L.WarriorAnimationDuration=500;class _{constructor(){this.onStart=new Signal,this.onComplete=new Signal,this.tweens=[],this.duration=null,this._delay=0}static PoolGet(){return Pool.createByClass(_)}recover(){Laya.timer.clearAll(this),this.recoverArray(this.tweens),this.tweens.length=0,this.onStart.removeAll(),this.onComplete.removeAll(),this.duration=null,this._delay=0,Pool.recoverByClass(this)}recoverArray(e){if(null!=e)if(e instanceof Array)for(var t of e)null!=t&&(t instanceof Array?this.recoverArray(t):t.recover());else e.recover()}get animationDuration(){if(null===this.duration){for(var e=0,t=0,i=this.tweens.length;t<i;t++){var s=this.tweens[t];if(s)if(s instanceof _)e=Math.max(s.animationDuration,e);else if(s instanceof Array)if(s.length>0){var a=s[0];if(a)if(a instanceof _)e=Math.max(a.animationDuration,e);else{var n=a._duration+a._delay;e=Math.max(n,e)}else this.duration=100}else this.duration=100;else{n=s._duration+s._delay;e=Math.max(n,e)}}this.duration=e}return this.duration}set animationDuration(e){this.duration=e}setAnimationDuration(e){return this.duration=e,this}setFirstDelay(e){this._delay=e}restart(){setTimeout(this.onEnd.bind(this),this.animationDuration),this.onStart.dispatch(),this._delay>0?Laya.timer.once(this._delay,this,this.playTweens):this.playTweens()}playTweens(){this.playArray(this.tweens)}playArray(e){if(null!=e)if(e instanceof Array){for(var t of e)if(null!=t)if(t instanceof Array)this.playArray(t);else{if(t instanceof Laya.Tween&&(!t._props||0==t._props.length)){console.error("没设置属性");continue}t.restart()}}else e.restart()}onEnd(){this.onComplete.dispatch(),Laya.timer.once(3e3,this,this.recover)}}var v,T,I,G,P,k,M,x,b,D,B,A,H,F=Laya.Tween;class R{static to(e,t,i,s=null,a=null,n=0,r=!1,o=!0){return Pool.getItemByClass("tween",F)._create(e,t,i,s,a,n,r,!0,o,!1)}static from(e,t,i,s=null,a=null,n=0,r=!1,o=!0){return Pool.getItemByClass("tween",F)._create(e,t,i,s,a,n,r,!1,o,!1)}}class U{static getRandomIntInclusive(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e}static getRandomBool(){return Math.random()>.5}static shuffle(e){for(var t,i,s=e.length;0!==s;)i=Math.floor(Math.random()*s),t=e[s-=1],e[s]=e[i],e[i]=t;return e}}class O{constructor(){this.isInit=!1,this.lastEndTime=0,window.wx&&(wx.onShow(this.onAppShow.bind(this)),wx.onHide(this.onAppHide.bind(this)))}static get instance(){return this._instance||(this._instance=new O),this._instance}onAppShow(e){this.stopAll(),Laya.timer.once(3e3,this,this.playMusic)}onAppHide(e){this.stopAll()}get soundBtnIndex(){return Laya.SoundManager.soundMuted?0:1}changeSoundState(){var e=!Laya.SoundManager.soundMuted;e||Laya.SoundManager.stopMusic(),Laya.SoundManager.musicMuted=Laya.SoundManager.soundMuted=e,e||this.playMusic()}playSound(e){if(!Laya.SoundManager.soundMuted){var t=`res/sounds/mp3/${e}.mp3`;Laya.SoundManager.playSound(t,1)}}playMusic(){if(this.isInit=!0,!Laya.SoundManager._musicMuted){Laya.timer.clearAll(this);Laya.SoundManager.playMusic(`res/sounds/music/music${U.getRandomIntInclusive(6,15)}.mp3`,1,Laya.Handler.create(this,this.onPlayMusicEnd),0)}}onPlayMusicEnd(){console.log("onPlayMusicEnd"),Laya.timer.currTimer-this.lastEndTime<2e4||(this.lastEndTime=Laya.timer.currTimer,Laya.timer.clearAll(this),Laya.timer.once(100,this,this.playMusic))}stopAll(){Laya.timer.clearAll(this),Laya.SoundManager.stopAll()}}class N{}N.Click="click",N.Barrel1="barrel1",N.Barrel2="barrel2",N.Bomb="bomb",N.BossAppearance="bossAppearance",N.Buy="buy",N.Cannon="cannon",N.Card="card",N.ChestOpening="chestOpening",N.Coin="coin",N.CoinsBag="coinsBag",N.CoinsCounting="coinsCounting",N.Health1="health1",N.Health2="health2",N.HeroDies="heroDies",N.Hit1="hit1",N.Hit2="hit2",N.Horseshoe="horseshoe",N.Idol="idol",N.IncorrectClick="incorrectClick",N.Lighting="lighting",N.Melody="melody",N.PickLockFail="picklockFail",N.PickLockNeutral="picklockNeutral",N.PickLockSuccess="picklockSuccess",N.Poison="poison",N.Revive="revive",N.ShieldMetal="shieldMetal",N.ShieldWood="shieldWood",N.Skull="skull",N.Move01="move01",N.Move02="move02",N.Trap="trap";class E{static spriteHide(e){Laya.Tween.clearAll(e),Laya.Tween.to(e,{scaleX:0,scaleY:0,rotation:360,alpha:0},700,null,Laya.Handler.create(this,()=>{e.visible=!1,e.rotation=0,e.alpha=1,e.scaleX=1,e.scaleY=1}))}static spriteShow(e){e.visible=!0,e.alpha=1,Laya.Tween.clearAll(e),Laya.Tween.to(e,{scaleX:0,scaleY:0,alpha:1},100),Laya.Tween.to(e,{scaleX:1.5,scaleY:1.5},250,null,null,100),Laya.Tween.to(e,{scaleX:1,scaleY:1,alpha:1},100,null,null,350)}static spriteShow2(e){e.visible=!0,e.alpha=0,e.scaleX=.5,e.scaleY=.5,Laya.Tween.clearAll(e),Laya.Tween.to(e,{scaleX:1.5,scaleY:1.5,alpha:1},250,null,null,0),Laya.Tween.to(e,{scaleX:1,scaleY:1,alpha:1},100,null,null,250)}static turnAnimationStart(e,t){e||(e=new _);var i=R.to(t,{scaleX:L.ScaleZoom,scaleY:L.ScaleZoom},L.ScaleSpeed);e.tweens.push(i);var s=R.to(t,{scaleX:.1,scaleY:L.FlipZoom},L.FlipSpeed/2,null,null,L.ScaleSpeed,!1);return e.tweens.push(s),e}static turnAnimationEnd(e,t){e||(e=new _);var i=R.to(t,{scaleX:L.ScaleZoom,scaleY:L.ScaleZoom},L.FlipSpeed/2);e.tweens.push(i);var s=R.to(t,{scaleX:1,scaleY:1},L.FlipSpeed);return e.tweens.push(s),e}static TurnCard(e,t){O.instance.playSound(N.Card),t.setScale(0,L.FlipZoom);var i=E.turnAnimationStart(null,e);i.onComplete.add(()=>{e.visible=!1,t.visible=!0,t.scaleX=.1,E.turnAnimationEnd(null,t).restart()},this),i.restart()}static scaleIn(e,t,i=!0){e||(e=new _),t.enabled=!1;var s=R.to(t,{scaleX:0,scaleY:0},.25*L.ShowTime,null,Laya.Handler.create(this,()=>{t.setScale(1,1),t.visible=!1,t.enabled=!0}));return e.tweens.push(s),e}static scaleOut(e,t,i=1){t.setScale(0,0),t.visible=!0,t.enabled=!0,e||(e=new _);var s=R.to(t,{scaleX:i,scaleY:i},.25*L.ShowTime);return e.tweens.push(s),e}}class W extends w{constructFromXML(e){super.constructFromXML(e),this.m_shield.alpha=1,this.m_shield.visible=!1}SetConfig(e){this.cardConfig=e,this.m_icon.m_sprite.setSelectedIndex(e.id%100-1)}SetCard(e){this.card=e}OnRecover(){this.cardView=null,this.cardConfig=null,this.card=null}setArmorHide(){this.m_shield.visible&&E.spriteHide(this.m_shield)}setArmorShowOrChange(){var e=Gt.getArmorLevel(this.card.armor)-1;this.m_shield.m_level.setSelectedIndex(e),E.spriteShow(this.m_shield)}}class V extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","CardViewFrontPowerUp")}constructFromXML(e){super.constructFromXML(e),this.m_icon=this.getChild("icon"),this.m_power=this.getChild("power")}}V.URL="ui://moe42ygrsqzyaa",V.DependPackages=["GameHome"];class X extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","FxSmallRing")}constructFromXML(e){super.constructFromXML(e),this.m_shadow=this.getChild("shadow"),this.m_anim=this.getTransition("anim")}}X.URL="ui://moe42ygrsqzy8w",X.DependPackages=["GameHome"];class q extends X{}class K extends V{constructFromXML(e){super.constructFromXML(e),this.fxSmallRing=q.createInstance(),this.fxSmallRing.x=.5*this.width,this.fxSmallRing.y=.5*this.height,this.addChildAt(this.fxSmallRing,0)}SetConfig(e){this.cardConfig=e,this.m_icon.url=e.spriteUrl}SetCard(e){this.card=e}OnRecover(){this.cardView=null,this.cardConfig=null,this.card=null}}class j extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","CardViewFrontPowerUpBarrel")}constructFromXML(e){super.constructFromXML(e),this.m_icon=this.getChild("icon"),this.m_openFx=this.getChild("openFx"),this.m_power=this.getChild("power")}}j.URL="ui://moe42ygrsqzyab",j.DependPackages=["GameHome"];class z extends j{SetConfig(e){this.cardConfig=e}SetCard(e){this.card=e}OnRecover(){this.cardView=null,this.cardConfig=null,this.card=null}}class Y extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","CardViewFrontPowerUpCannon")}constructFromXML(e){super.constructFromXML(e),this.m_icon=this.getChild("icon"),this.m_fx=this.getChild("fx"),this.m_power=this.getChild("power")}}Y.URL="ui://moe42ygrsqzy9y",Y.DependPackages=["GameHome"];class $ extends Y{SetConfig(e){this.cardConfig=e}SetCard(e){this.card=e}OnRecover(){this.cardView=null,this.cardConfig=null,this.card=null}}class J extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","CardViewFrontPowerUpBomb")}constructFromXML(e){super.constructFromXML(e),this.m_icon=this.getChild("icon"),this.m_fx=this.getChild("fx"),this.m_power=this.getChild("power"),this.m_life=this.getChild("life")}}J.URL="ui://moe42ygrsqzyad",J.DependPackages=["GameHome"];class Q extends J{SetConfig(e){this.cardConfig=e}SetCard(e){this.card=e}OnRecover(){this.cardView=null,this.cardConfig=null,this.card=null}}class Z extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","CardViewFrontPowerUpChest")}constructFromXML(e){super.constructFromXML(e),this.m_state=this.getController("state"),this.m_icon=this.getChild("icon"),this.m_power=this.getChild("power")}}Z.URL="ui://moe42ygrsqzyac",Z.DependPackages=["GameHome"];class ee extends Z{SetConfig(e){this.cardConfig=e}SetCard(e){this.card=e}OnRecover(){this.cardView=null,this.cardConfig=null,this.card=null}}class te extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","CardViewFrontPowerUpSkull")}constructFromXML(e){super.constructFromXML(e),this.m_fx=this.getChild("fx"),this.m_power=this.getChild("power")}}te.URL="ui://moe42ygrsqzyae",te.DependPackages=["GameHome"];class ie extends te{SetConfig(e){this.cardConfig=e}SetCard(e){this.card=e}OnRecover(){this.cardView=null,this.cardConfig=null,this.card=null}}class se extends fgui.GButton{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","CardViewFrontWarriowBoss")}constructFromXML(e){super.constructFromXML(e),this.m_icon=this.getChild("icon"),this.m_life=this.getChild("life"),this.m_step=this.getChild("step")}}se.URL="ui://moe42ygrsqzya6",se.DependPackages=["GameHome"];class ae extends se{SetConfig(e){this.cardConfig=e,this.m_icon.m_sprite.setSelectedIndex(e.id%100-1)}SetCard(e){this.card=e}OnRecover(){this.cardView=null,this.cardConfig=null,this.card=null}}class ne extends fgui.GButton{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","CardViewFrontWarriowEnemy")}constructFromXML(e){super.constructFromXML(e),this.m_icon=this.getChild("icon"),this.m_life=this.getChild("life"),this.m_step=this.getChild("step")}}ne.URL="ui://moe42ygrsqzya3",ne.DependPackages=["GameHome"];class re extends ne{SetConfig(e){this.cardConfig=e,this.m_icon.m_sprite.setSelectedIndex(e.id%100-1)}SetCard(e){this.card=e}OnRecover(){this.cardView=null,this.cardConfig=null,this.card=null}}class oe extends fgui.GButton{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","CardViewFrontWarriowTrap")}constructFromXML(e){super.constructFromXML(e),this.m_icon=this.getChild("icon"),this.m_life=this.getChild("life"),this.m_DoClose=this.getTransition("DoClose"),this.m_DoOpen=this.getTransition("DoOpen")}}oe.URL="ui://moe42ygrsqzya9",oe.DependPackages=["GameHome"];class le extends oe{SetConfig(e){this.cardConfig=e}SetCard(e){this.card=e}OnRecover(){this.cardView=null,this.cardConfig=null,this.card=null}SetOpen(){this.m_DoOpen.play()}SetClose(){this.m_DoClose.play()}}class ce extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","CardViewFrontWarriow")}constructFromXML(e){super.constructFromXML(e),this.m_icon=this.getChild("icon"),this.m_life=this.getChild("life")}}ce.URL="ui://moe42ygrsqzy9w",ce.DependPackages=["GameHome"];class he extends ce{SetConfig(e){this.cardConfig=e,this.m_icon.url=e.spriteUrl}SetCard(e){this.card=e}OnRecover(){this.cardView=null,this.cardConfig=null,this.card=null}}!function(e){e[e.None=0]="None",e[e.Hero=1]="Hero",e[e.Trap=2]="Trap",e[e.Enemy=3]="Enemy",e[e.Boss=4]="Boss",e[e.Warrior=18]="Warrior",e[e.Health=5]="Health",e[e.Gold=6]="Gold",e[e.Armor=7]="Armor",e[e.Cannon=8]="Cannon",e[e.Barrel=9]="Barrel",e[e.Chest=10]="Chest",e[e.Bomb=11]="Bomb",e[e.Poison=12]="Poison",e[e.Horseshoe=13]="Horseshoe",e[e.Lightning=14]="Lightning",e[e.Multiplier=15]="Multiplier",e[e.Skull=16]="Skull",e[e.MultiplierPositive=17]="MultiplierPositive",e[e.MultiplierNegative=18]="MultiplierNegative",e[e.AddPositive=19]="AddPositive",e[e.AddNegative=20]="AddNegative"}(v||(v={})),function(e){e[e.Base=1]="Base",e[e.Bomb=2]="Bomb",e[e.Gun=3]="Gun",e[e.Key=4]="Key"}(T||(T={}));class ue{static degToRad(e){return e*ue.DEG_TO_RAD}static radToDeg(e){return e*ue.RAD_TO_DEG}static getNextPowerOfTwo(e){if(e>0&&0==(e&e-1))return e;for(var t=1;t<e;)t<<=1;return t}static isPowerOfTwo(e,t){return e>0&&0==(e&e-1)&&t>0&&0==(t&t-1)}static random(e,t){if(void 0===e&&(e=0),void 0===t&&(t=1),e===t)return e;if(e>t){var i=e;e=t,t=i}return Math.random()*(t-e)+e}static between(e,t){if(void 0===e&&(e=0),void 0===t&&(t=1),e===t)return e;if(e>t){var i=e;e=t,t=i}return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e}static fuzzyEqual(e,t,i){return void 0===i&&(i=1e-4),Math.abs(e-t)<i}static fuzzyLessThan(e,t,i){return void 0===i&&(i=1e-4),e<t+i}static fuzzyGreaterThan(e,t,i){return void 0===i&&(i=1e-4),e>t-i}static fuzzyCeil(e,t){return void 0===t&&(t=1e-4),Math.ceil(e-t)}static fuzzyFloor(e,t){return void 0===t&&(t=1e-4),Math.floor(e+t)}static average(){for(var e=0,t=arguments.length,i=0;i<t;i++)e+=+arguments[i];return e/t}static shear(e){return e%1}static snapTo(e,t,i){return void 0===i&&(i=0),0===t?e:(e-=i,i+(e=t*Math.round(e/t)))}static snapToFloor(e,t,i){return void 0===i&&(i=0),0===t?e:(e-=i,i+(e=t*Math.floor(e/t)))}static snapToCeil(e,t,i){return void 0===i&&(i=0),0===t?e:(e-=i,i+(e=t*Math.ceil(e/t)))}static roundTo(e,t,i){void 0===t&&(t=0),void 0===i&&(i=10);var s=Math.pow(i,-t);return Math.round(e*s)/s}static floorTo(e,t,i){void 0===t&&(t=0),void 0===i&&(i=10);var s=Math.pow(i,-t);return Math.floor(e*s)/s}static ceilTo(e,t,i){void 0===t&&(t=0),void 0===i&&(i=10);var s=Math.pow(i,-t);return Math.ceil(e*s)/s}static trunc(e){return isFinite(e)?e-e%1||(e<0?-0:0===e?e:0):e}static rotateToAngle(e,t,i){return void 0===i&&(i=.05),e===t?e:(Math.abs(t-e)<=i||Math.abs(t-e)>=ue.PI2-i?e=t:(Math.abs(t-e)>Math.PI&&(t<e?t+=ue.PI2:t-=ue.PI2),t>e?e+=i:t<e&&(e-=i)),e)}static getShortestAngle(e,t){var i=t-e;return 0===i?0:i-360*Math.floor((i- -180)/360)}static angleBetween(e,t,i,s){return Math.atan2(s-t,i-e)}static angleBetweenY(e,t,i,s){return Math.atan2(i-e,s-t)}static angleBetweenPoints(e,t){return Math.atan2(t.y-e.y,t.x-e.x)}static angleBetweenPointsY(e,t){return Math.atan2(t.x-e.x,t.y-e.y)}static reverseAngle(e){return this.normalizeAngle(e+Math.PI)}static normalizeAngle(e){return(e%=2*Math.PI)>=0?e:e+2*Math.PI}static maxAdd(e,t,i){return Math.min(e+t,i)}static minSub(e,t,i){return Math.max(e-t,i)}static wrap(e,t,i){var s=i-t;if(s<=0)return 0;var a=(e-t)%s;return a<0&&(a+=s),a+t}static wrapValue(e,t,i){return((e=Math.abs(e))+(t=Math.abs(t)))%Math.abs(i)}static isOdd(e){return!!(1&e)}static isEven(e){return!(1&e)}static min(){if(1===arguments.length&&"object"==typeof arguments[0])e=arguments[0];else var e=arguments;for(var t=1,i=0,s=e.length;t<s;t++)e[t]<e[i]&&(i=t);return e[i]}static max(){if(1===arguments.length&&"object"==typeof arguments[0])e=arguments[0];else var e=arguments;for(var t=1,i=0,s=e.length;t<s;t++)e[t]>e[i]&&(i=t);return e[i]}static minProperty(e){if(2===arguments.length&&"object"==typeof arguments[1])t=arguments[1];else var t=arguments.slice(1);for(var i=1,s=0,a=t.length;i<a;i++)t[i][e]<t[s][e]&&(s=i);return t[s][e]}static maxProperty(e){if(2===arguments.length&&"object"==typeof arguments[1])t=arguments[1];else var t=arguments.slice(1);for(var i=1,s=0,a=t.length;i<a;i++)t[i][e]>t[s][e]&&(s=i);return t[s][e]}static wrapAngle(e,t){return t?this.wrap(e,-Math.PI,Math.PI):this.wrap(e,-180,180)}static linearInterpolation(e,t){var i=e.length-1,s=i*t,a=Math.floor(s);return t<0?this.linear(e[0],e[1],s):t>1?this.linear(e[i],e[i-1],i-s):this.linear(e[a],e[a+1>i?i:a+1],s-a)}static bezierInterpolation(e,t){for(var i=0,s=e.length-1,a=0;a<=s;a++)i+=Math.pow(1-t,s-a)*Math.pow(t,a)*e[a]*this.bernstein(s,a);return i}static catmullRomInterpolation(e,t){var i=e.length-1,s=i*t,a=Math.floor(s);return e[0]===e[i]?(t<0&&(a=Math.floor(s=i*(1+t))),this.catmullRom(e[(a-1+i)%i],e[a],e[(a+1)%i],e[(a+2)%i],s-a)):t<0?e[0]-(this.catmullRom(e[0],e[0],e[1],e[1],-s)-e[0]):t>1?e[i]-(this.catmullRom(e[i],e[i],e[i-1],e[i-1],s-i)-e[i]):this.catmullRom(e[a?a-1:0],e[a],e[i<a+1?i:a+1],e[i<a+2?i:a+2],s-a)}static linear(e,t,i){return(t-e)*i+e}static bernstein(e,t){return this.factorial(e)/this.factorial(t)/this.factorial(e-t)}static factorial(e){if(0===e)return 1;for(var t=e;--e;)t*=e;return t}static catmullRom(e,t,i,s,a){var n=.5*(i-e),r=.5*(s-t),o=a*a;return(2*t-2*i+n+r)*(a*o)+(-3*t+3*i-2*n-r)*o+n*a+t}static difference(e,t){return Math.abs(e-t)}static roundAwayFromZero(e){return e>0?Math.ceil(e):Math.floor(e)}static sinCosGenerator(e,t,i,s){void 0===t&&(t=1),void 0===i&&(i=1),void 0===s&&(s=1);for(var a=t,n=i,r=s*Math.PI/e,o=[],l=[],c=0;c<e;c++)a+=(n-=a*r)*r,o[c]=n,l[c]=a;return{sin:l,cos:o,length:e}}static hypot(e,t){return Math.sqrt(e*e+t*t)}static distance(e,t,i,s){var a=e-i,n=t-s;return Math.sqrt(a*a+n*n)}static distanceSq(e,t,i,s){var a=e-i,n=t-s;return a*a+n*n}static distancePow(e,t,i,s,a){return void 0===a&&(a=2),Math.sqrt(Math.pow(i-e,a)+Math.pow(s-t,a))}static clamp(e,t,i){return e<t?t:i<e?i:e}static clampBottom(e,t){return e<t?t:e}static within(e,t,i){return Math.abs(e-t)<=i}static mapLinear(e,t,i,s,a){return s+(e-t)*(a-s)/(i-t)}static smoothstep(e,t,i){return(e=Math.max(0,Math.min(1,(e-t)/(i-t))))*e*(3-2*e)}static smootherstep(e,t,i){return(e=Math.max(0,Math.min(1,(e-t)/(i-t))))*e*e*(e*(6*e-15)+10)}static sign(e){return e<0?-1:e>0?1:0}static percent(e,t,i){return void 0===i&&(i=0),e>t||i>t?1:e<i||i>e?0:(e-i)/t}}ue.PI2=2*Math.PI,ue.HALF_PI=.5*Math.PI,ue.DEG_TO_RAD=Math.PI/180,ue.RAD_TO_DEG=180/Math.PI;class me{static getRandomItem(e,t,i){if(null===e)return null;void 0===t&&(t=0),void 0===i&&(i=e.length);var s=t+Math.floor(Math.random()*i);return void 0===e[s]?null:e[s]}static removeRandomItem(e,t,i){if(null==e)return null;void 0===t&&(t=0),void 0===i&&(i=e.length);var s=t+Math.floor(Math.random()*i);if(s<e.length){var a=e.splice(s,1);return void 0===a[0]?null:a[0]}return null}static remove(e,t,i){var s=e.length;if(!(t>=s||0===i)){null==i&&(i=1);for(var a=s-i,n=t;n<a;++n)e[n]=e[n+i];e.length=a}}static shuffle(e){for(var t=e.length-1;t>0;t--){var i=Math.floor(Math.random()*(t+1)),s=e[t];e[t]=e[i],e[i]=s}return e}static transposeMatrix(e){for(var t=e.length,i=e[0].length,s=new Array(i),a=0;a<i;a++){s[a]=new Array(t);for(var n=t-1;n>-1;n--)s[a][n]=e[n][a]}return s}static rotateMatrix(e,t){if("string"!=typeof t&&(t=(t%360+360)%360),90===t||-270===t||"rotateLeft"===t)e=(e=me.transposeMatrix(e)).reverse();else if(-90===t||270===t||"rotateRight"===t)e=e.reverse(),e=me.transposeMatrix(e);else if(180===Math.abs(t)||"rotate180"===t){for(var i=0;i<e.length;i++)e[i].reverse();e=e.reverse()}return e}static findClosest(e,t){if(!t.length)return NaN;if(1===t.length||e<t[0])return t[0];for(var i=1;t[i]<e;)i++;var s=t[i-1],a=i<t.length?t[i]:Number.POSITIVE_INFINITY;return a-e<=e-s?a:s}static rotateRight(e){var t=e.pop();return e.unshift(t),t}static rotateLeft(e){var t=e.shift();return e.push(t),t}static numberArray(e,t){null!=t||(t=e,e=0);for(var i=[],s=e;s<=t;s++)i.push(s);return i}static numberArrayStep(e,t,i){null!=e||(e=0),null!=t||(t=e,e=0),void 0===i&&(i=1);for(var s=[],a=Math.max(ue.roundAwayFromZero((t-e)/(i||1)),0),n=0;n<a;n++)s.push(e),e+=i;return s}}class ge{static isCardScoreTypeNegative(e){return e==v.Trap||e==v.Boss||e==v.Enemy||e==v.Poison||e==v.MultiplierNegative||e==v.AddNegative}static isCardScoreTypePositive(e){return e==v.Health||e==v.Armor||e==v.Cannon||e==v.Horseshoe||e==v.Lightning||e==v.Skull||e==v.MultiplierPositive||e==v.AddPositive}static getRandomFromChest(){return me.getRandomItem(ge.itemsFromChest)}static getRandomPowerUpFromBarrel(){return me.getRandomItem(ge.itemsFromBarrel)}static getRandomPowerUp(){return me.getRandomItem(ge.powerUps)}static isEnemyType(e,t=!1){if(t)switch(e){case v.Hero:case v.Armor:case v.Health:case v.Gold:return!0}else switch(e){case v.Boss:case v.Enemy:case v.Trap:return!0}return!1}}ge.itemsFromChest=[v.Bomb,v.Poison,v.Horseshoe,v.Lightning,v.MultiplierPositive,v.AddNegative,v.Skull],ge.itemsFromBarrel=[v.Health,v.Gold,v.Armor,v.Cannon],ge.powerUps=[v.Health,v.Armor,v.Cannon,v.Barrel,v.Gold];class de{static addGameLevel(){this.gameLevel++}static init(){this.currentHero==T.Key&&(this.isKey=!0),this.isHeroAlive=!0,this.gameLevel=1,this.levelStep=10,this.turnsToBoss=this.levelStep,this.goldPerGame=0,this.movesAfterLastSpecialCard=0,this.cardCounter=0,this.isNeedCreateBoss=!1,this.stepCardNum=0}static load(){Co.localStorage.hasItem(this.DATE_KEY,!1)&&(this.data=Co.localStorage.getJSON(this.DATE_KEY),null==this.data.goldCumulative&&(this.data.goldCumulative=0))}static save(){Co.localStorage.setJSON(this.DATE_KEY,this.data,!1)}static get gold(){return this.data.gold}static set gold(e){this.data.gold=e,this.save(),this.sGold.dispatch()}static get goldCumulative(){return this.data.goldCumulative}static set goldCumulative(e){this.data.goldCumulative=e,this.save()}static addUserGold(e){if(this.data.gold+=e,this.data.goldCumulative+=e,this.save(),this.sGold.dispatch(),window.wx){var t={wxgame:{score:de.goldCumulative,update_time:Date.now()},cost_ms:Date.now()-Tt.launchtimestamp},i=JSON.stringify(t),s=[];s.push({key:"score",value:i}),wx.setUserCloudStorage({KVDataList:s,success:e=>{console.log("上传排行榜数据成功",e)},fail:e=>{console.error("上传排行榜数据失败",e)}})}}static get bestGoldPerGame(){return this.data.bestGoldPerGame}static set bestGoldPerGame(e){this.data.bestGoldPerGame=e,this.save()}static get isTutorialSeen(){return this.data.isTutorialSeen}static set isTutorialSeen(e){this.data.isTutorialSeen=e,this.save()}static get isTutorialStep1Done(){return this.data.isTutorialSeen}static set isTutorialStep1Done(e){this.data.isTutorialStep1Done=e,this.save()}static get isTutorialStep2Done(){return this.data.isTutorialStep2Done}static set isTutorialStep2Done(e){this.data.isTutorialStep2Done=e,this.save()}static get isTutorialChestSeen(){return this.data.isTutorialChestSeen}static set isTutorialChestSeen(e){this.data.isTutorialChestSeen=e,this.save()}static get isBombHero(){return this.data.isBombHero}static set isBombHero(e){this.data.isBombHero=e,this.save()}static get isKeyHero(){return this.data.isKeyHero}static set isKeyHero(e){this.data.isKeyHero=e,this.save()}static get isGunHero(){return this.data.isGunHero}static set isGunHero(e){this.data.isGunHero=e,this.save()}static get isFourXFour(){return this.data.isFourXFour}static set isFourXFour(e){this.data.isFourXFour=e,this.save()}static get isHorseshoe(){return this.data.isHorseshoe}static set isHorseshoe(e){this.data.isHorseshoe=e,this.save()}static get isHeart(){return this.data.isHeart}static set isHeart(e){this.data.isHeart=e,this.save()}static get isLuck(){return this.data.isLuck}static set isLuck(e){this.data.isLuck=e,this.save()}static get isKey(){return this.data.isKey}static set isKey(e){this.data.isKey=e,this.save()}static get lastAdvCoolDown(){return this.data.lastAdvCoolDown}static set lastAdvCoolDown(e){this.data.lastAdvCoolDown=e,this.save()}static get lastResultAdvCoolDown(){return this.data.lastResultAdvCoolDown}static set lastResultAdvCoolDown(e){this.data.lastResultAdvCoolDown=e,this.save()}static get lastItemWithAdv(){return this.data.lastItemWithAdv}static set lastItemWithAdv(e){this.data.lastItemWithAdv=e,this.save()}static addGold(e){this.goldPerGame+=e,this.bestGoldPerGame<this.goldPerGame&&(this.bestGoldPerGame=this.goldPerGame)}static resetShop(){this.isHeart=!1,this.isHorseshoe=!1,this.isLuck=!1,this.isKey=!1}static updateMovesAfterSpecialCard(e){e==v.Health||e==v.Armor?this.movesAfterLastSpecialCard=0:this.movesAfterLastSpecialCard++}static updateCardCounter(e){ge.isCardScoreTypeNegative(e)&&this.cardCounter--,ge.isCardScoreTypePositive(e)&&this.cardCounter++}static stepUpdate(){this.isBossShouldBeCreated()&&(this.isNeedCreateBoss=!0,this.levelStep++,this.turnsToBoss=this.levelStep+1),this.isNeedCreateChestOnNextStep&&(this.isNeedCreateChestOnNextStep=!1,this.isNeedCreateChest=!0)}static isBossShouldBeCreated(){return!this.isNeedCreateBoss&&1==this.turnsToBoss}static decreaseTurnsToBoss(){return this.turnsToBoss&&this.turnsToBoss--}}de.sGold=new Signal,de.DATE_KEY="GameStatus",de.data={goldCumulative:0,gold:0,bestGoldPerGame:0,isTutorialSeen:!1,isTutorialStep1Done:!1,isTutorialStep2Done:!1,isTutorialChestSeen:!1,isBombHero:!1,isKeyHero:!1,isGunHero:!1,isFourXFour:!1,isHorseshoe:!1,isHeart:!1,isLuck:!1,isKey:!1,lastAdvCoolDown:0,lastItemWithAdv:0,lastResultAdvCoolDown:0},de.gameLevel=1,de.levelStep=10,de.turnsToBoss=10,de.goldPerGame=0,de.cardCounter=0,de.isNeedCreateBoss=!1,de.isNeedCreateChest=!1,de.currentHero=T.Base,de.RowCount=3,de.ColumnCount=3,de.isHeroAlive=!1,de.isGameEnd=!1,de.isNeedCreateChestOnNextStep=!1,de.stepCardNum=0,de.movesAfterLastSpecialCard=0,window.GameStatus=de;class pe extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","FxShootLightningBig")}constructFromXML(e){super.constructFromXML(e),this.m_fx=this.getChild("fx")}}pe.URL="ui://moe42ygrsqzyai",pe.DependPackages=["GameHome"];class Ce extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","FxShootLightningSmall")}constructFromXML(e){super.constructFromXML(e),this.m_fx=this.getChild("fx")}}Ce.URL="ui://moe42ygrsqzyal",Ce.DependPackages=["GameHome"];class Se extends Ce{static PoolGet(){var e=Pool.getItem(this.URL);return e||(e=Se.createInstance()),e}PoolRecover(){Laya.timer.clearAll(this),Laya.Tween.clearAll(this.m_fx),this.removeFromParent(),this.m_fx.playing=!1,Pool.recover(Se.URL,this)}Play(){this.m_fx.frame=0,this.m_fx.playing=!0,this.alpha=0;var e=_.PoolGet(),t=R.to(this.m_fx,{alpha:1},1);e.tweens.push(t);t=R.to(this,{alpha:0},1,null,null,102);return e.tweens.push(t),Laya.timer.once(103,this,this.PoolRecover),e.restart(),e}}class fe extends pe{static PoolGet(){var e=Pool.getItem(this.URL);return e||(e=fe.createInstance()),e}PoolRecover(){Laya.timer.clearAll(this),Laya.Tween.clearAll(this.m_fx),this.removeFromParent(),this.m_fx.playing=!1,Pool.recover(fe.URL,this)}Play(){this.m_fx.frame=0,this.m_fx.playing=!0,this.m_fx.alpha=0,this.m_fx.y=20;var e=_.PoolGet(),t=R.to(this.m_fx,{alpha:1},50);e.tweens.push(t);t=R.to(this.m_fx,{y:-20},200,null,null,50);e.tweens.push(t);t=R.to(this.m_fx,{alpha:0},50,null,null,250);return e.tweens.push(t),e.onStart.addOnce(this.onStart,this),Laya.timer.once(300,this,this.PoolRecover),e}onStart(){if(this.parent){var e=Se.PoolGet(),t=L.CardWidth/2-20,i=L.CardHeight/2-20;U.getRandomBool()&&(t=-t),U.getRandomBool()&&(i=-i),this.parent.addChild(e),e.setXY(this.x,this.y),e.m_fx.setXY(t,i),e.Play()}}}class ye{constructor(){this.type=v.None,this.view=It.PoolGet(),this.reset()}poolRecover(){this.reset(),Pool.recoverByClass(this)}reset(){this.view.setXY(-200,-200),this.view.setScale(1,1)}SetEmpty(){this.SetConfig(null)}SetConfig(e){this.config=e,this.view.game=this.game,this.view.SetConfig(e),this.view.SetCard(this)}get isEmpty(){return this.type==v.None}get isHero(){return this.type==v.Hero}get isBoss(){return this.type==v.Boss}get isTrap(){return this.type==v.Trap}get isCannon(){return this.type==v.Cannon}get level(){return this.config.level}setCoordinate(e){this.game.container.addChild(this.view),this.view.setXY(e.x,e.y),this.view.alpha=1}moveTo(e,t){return this.game.container.addChild(this.view),e.alpha=1,R.to(this.view,e,t)}getCenterX(){return this.view.x}getCenterY(){return this.view.y}endTurnAnimationStart(){this.view.setScale(0,L.FlipZoom)}startTurnAnimation(e,t){var i=E.turnAnimationStart(null,this.view);return i.onStart.add(this.playCardSoundInSeconds,this),i.onComplete.add(this.removeShapeFromStage,this),i.onComplete.add(e,t),i}endTurnAnimationEnd(){this.isBoss&&O.instance.playSound(N.BossAppearance),this.view.scaleX=.1,E.turnAnimationEnd(null,this.view).restart()}playCardSoundInSeconds(){setTimeout(this.playCardSound.bind(this),50)}playCardSound(){O.instance.playSound(N.Card)}removeChild(){var e=_.PoolGet(),t=R.to(this.view,{scaleX:1.1,scaleY:1.1},50);return e.tweens.push(t),t=R.to(this.view,{scaleX:1,scaleY:1},50,null,null,50),e.tweens.push(t),t=R.to(this.view,{scaleX:1.1,scaleY:1.1},50,null,null,100),e.tweens.push(t),t=R.to(this.view,{scaleX:0,scaleY:0},80,null,Laya.Handler.create(this,this.removeShapeFromStage),150),e.tweens.push(t),e}removeShapeFromStage(){this.view.parent&&(this.view.removeFromParent(),this.delayPoolRecover())}delayPoolRecover(){Laya.timer.frameOnce(10,this,this.poolRecover)}runLightning(){var e=fe.PoolGet();return e.setXY(this.getCenterX(),this.getCenterY()),this.game.container.addChild(e),e.Play()}getScaleTween(e,t){t||(t=_.PoolGet());var i=R.to(e,{scaleX:2.5,scaleY:2.5},200);return t.tweens.push(i),i=R.to(e,{scaleX:1,scaleY:1},200,null,null,200),t.tweens.push(i),t}}class we extends ye{reset(){super.reset(),this.view.alpha=0}stepUpdate(){}isNegative(){return!1}getScore(){return 0}getGoldValue(){return 0}reduceScoreInNSeconds(e,t){}increaseScoreInNSeconds(e,t){}}class Le extends ye{constructor(){super(...arguments),this.initialLife=0,this.lifeAmount=0,this.powerUpAmount=0,this.step=0,this.stepMax=0,this.isOpen=!1,this.canLightningStrike=!1}static GetDefault(e){var t=Pool.createByClass(we);return t.game=e,t.type=v.None,t.SetEmpty(),t}static GetNew(e,t,i,s,a=0){var n=Co.config.card.getTypeLevelConfig(t,i);null==n&&console.error("没有找到卡牌配置",t,i,s);var r=Pool.createByClass(Le);return r.game=e,r.type=t,r.SetConfig(n),r.setScore(s,a),de.updateCardCounter(t),de.updateMovesAfterSpecialCard(t),r}reset(){this.stepMax>0&&de.stepCardNum>0&&de.stepCardNum--,super.reset(),this.initialLife=0,this.lifeAmount=0,this.powerUpAmount=0,this.stepMax=0,this.step=0,this.isOpen=!1,this.canLightningStrike=!1}increaseScore(e,t){var i;return this.lifeAmount>0?((i=this.view.tweenLife()).onComplete.addOnce(()=>{this.increaseLife(e,t)},this),i):this.powerUpAmount>0?((i=this.view.tweenPowerUp()).onComplete.addOnce(()=>{this.increasePowerUp(e,t)},this),i):null}setScore(e,t=0){switch(this.type){case v.Boss:case v.Enemy:this.initialLife=e,this.setLife(e),this.stepMax=t,this.setStep(t),t>0&&de.stepCardNum++;break;case v.Gold:case v.Health:case v.Armor:case v.Poison:case v.Cannon:case v.Lightning:case v.Multiplier:case v.MultiplierPositive:case v.MultiplierNegative:case v.AddPositive:case v.AddNegative:case v.Skull:case v.Barrel:this.setPowerUp(e);break;case v.Bomb:this.setLife(e),this.setPowerUp(10);break;case v.Trap:this.setPowerUp(e),this.setLife(e),this.changeStatus();break;case v.Chest:break;case v.Horseshoe:this.setPowerUp(1)}}getLife(){return this.lifeAmount}getPowerUp(){return this.powerUpAmount}setPowerUp(e){this.powerUpAmount=e,this.setPowerUpText()}setLife(e){null!=e&&(this.lifeAmount=e),this.setHealthText()}setStep(e){null!=e&&(this.step=e),this.setStepText()}setHealthText(){this.view.setHealthText()}setStepText(){this.view.setStepText()}setPowerUpText(){this.view.setPowerUpText()}increasePowerUpTween(){this.view.tweenPowerUp().restart()}increaseLifeTween(){this.view.tweenLife().restart()}increaseLife(e,t){this.setLife(t?this.lifeAmount*e:this.lifeAmount+e),this.type===v.Trap&&this.setPowerUp(this.powerUpAmount*e)}increasePowerUp(e,t){this.setPowerUp(t?this.powerUpAmount*e:this.powerUpAmount+e)}isNegative(){switch(this.type){case v.Boss:case v.Enemy:case v.Trap:case v.Bomb:case v.Poison:case v.MultiplierNegative:case v.AddNegative:return!0;case v.Health:case v.Gold:case v.Armor:case v.Cannon:case v.Chest:case v.Barrel:case v.Horseshoe:case v.Lightning:case v.Multiplier:case v.Skull:case v.Hero:case v.None:return!1}}isDisplayLife(){switch(this.type){case v.Boss:case v.Enemy:case v.Trap:case v.Poison:return!0}return!1}getScore(){return this.type==v.Trap?this.lifeAmount:this.lifeAmount+this.powerUpAmount}getGoldValue(){return this.initialLife}reduceScoreInNSeconds(e,t){this.powerUpAmount>0&&(this.powerUpAmount=this.powerUpAmount-e,setTimeout(this.setPowerUpText.bind(this),t)),this.lifeAmount>0&&(this.lifeAmount=this.lifeAmount-e,setTimeout(this.setHealthText.bind(this),t))}increaseScoreInNSeconds(e,t){this.powerUpAmount>0&&(this.powerUpAmount=this.powerUpAmount+e,setTimeout(this.increasePowerUpTween.bind(this),t)),this.lifeAmount>0&&(this.lifeAmount=this.lifeAmount+e,setTimeout(this.increaseLifeTween.bind(this),t))}stepUpdate(){if(this.isTrap){var e=this.changeStatus(),t=de.currentHero==T.Gun;this.lifeAmount=t?0:e?this.powerUpAmount:0,this.setHealthText()}this.type==v.Poison&&this.setPowerUp(this.powerUpAmount+1),this.type==v.Bomb&&this.setPowerUp(this.powerUpAmount-1),this.type==v.Barrel&&this.powerUpAmount>2&&this.setPowerUp(this.powerUpAmount-1)}changeStatus(){return this.isOpen?(this.view.setClose(),this.isOpen=!1):(this.view.setOpen(),this.isOpen=!0),this.isOpen}open(){return null}}!function(e){e[e.Right=1]="Right",e[e.Down=2]="Down",e[e.Left=3]="Left",e[e.Up=4]="Up"}(I||(I={}));class _e{constructor(e,t){this.x=0,this.y=0,this.x=e,this.y=t}}class ve{constructor(e,t){this.column=0,this.row=0,this.column=e,this.row=t}getNewPosition(e){var t=new ve(this.column,this.row);switch(e){case I.Right:t.column++;break;case I.Down:t.row++;break;case I.Left:t.column--;break;case I.Up:t.row--}return t}getPoint(){return new _e(this.pointX,this.pointY)}get pointX(){return this.column*L.CardWidth+L.CardWidth/2+this.column*L.CardSpaceBetweenWidth}get pointY(){return this.row*L.CardHeight+L.CardHeight/2+this.row*L.CardSpaceBetweenHeight}}class Te{constructor(){this.columnCount=3,this.rowCount=3}clear(){if(this.items&&0!=this.items.length){for(var e=0;e<this.rowCount;e++)for(var t=0;t<this.columnCount;t++){this.items[t][e].removeShapeFromStage()}this.items.length=0}}init(e=3,t=3,i){this.columnCount=e,this.rowCount=t,this.game=i,this.initArray()}initArray(){this.items=[];for(var e=0;e<this.rowCount;e++){for(var t=[],i=0;i<this.columnCount;i++)t.push(Le.GetDefault(this.game));this.items.push(t)}}getColumnCount(){return this.columnCount}getRowCount(){return this.rowCount}getAll(){for(var e=[],t=0;t<this.rowCount;t++)for(var i=0;i<this.columnCount;i++)e.push(this.items[i][t]);return e}findHeroCard(){for(var e,t=0;t<this.rowCount;t++)for(var i=0;i<this.columnCount;i++)if((e=this.items[i][t]).isHero)return e;return null}findHeroPosition(){for(var e=0;e<this.rowCount;e++)for(var t=0;t<this.columnCount;t++)if(this.items[t][e].isHero)return new ve(t,e);return null}findPosition(e){for(var t=0;t<this.rowCount;t++)for(var i=0;i<this.columnCount;i++){if(this.items[i][t]==e)return new ve(i,t)}return null}getPosition(e){for(var t=0;t<this.rowCount;t++)for(var i=0;i<this.columnCount;i++){var s=new ve(i,t);if(e(this.get(s)))return s}return null}getPositions(e){for(var t=[],i=0;i<this.rowCount;i++)for(var s=0;s<this.columnCount;s++){var a=new ve(s,i);e(this.get(a))&&t.push(a)}return t}get(e){return null==e?null:this.items[e.column][e.row]}set(e,t){this.items[e.column][e.row]=t}any(e){for(var t=0;t<this.rowCount;t++)for(var i=0;i<this.columnCount;i++){var s=new ve(i,t);if(e(this.get(s)))return!0}return!1}find(e){for(var t=[],i=0;i<this.rowCount;i++)for(var s=0;s<this.columnCount;s++){var a=new ve(s,i),n=this.get(a);e(this.get(a))&&t.push(n)}return t}findEnemy(e=!1){var t=this.find(t=>ge.isEnemyType(t.type,e));return t.sort((e,t)=>e.isHero?-1:t.isHero?1:e.getScore()-t.getScore()),t}isPositionValid(e){return e.column>=0&&e.column<this.columnCount&&e.row>=0&&e.row<this.rowCount}}!function(e){e[e.Random=1]="Random",e[e.AfterChest=2]="AfterChest",e[e.AfterBarrel=3]="AfterBarrel",e[e.Positive=4]="Positive"}(G||(G={})),function(e){e[e.Start=1]="Start",e[e.Center=2]="Center",e[e.End=3]="End"}(P||(P={}));class Ie{constructor(e,t,i){this.isHeroAlive=e,this.isChest=t,this.isMove=i}}class Ge{static GetBuyHero(e){return this.BuyHero_0+e}static GetBuyShop(e){return this.BuyShop_0+e}static GetBuyMenuHomeTab(e){return this.MenuHomeTab_0+e}}Ge.SystemPlatform="0",Ge.Open="1",Ge.Menu="2",Ge.War3x3="3",Ge.War4x4="4",Ge.WarOver="5",Ge.Share="6",Ge.ShareBtn="7",Ge.ShareResult="8",Ge.ShareWar="9",Ge.Gold="10",Ge.GoldBest="11",Ge.BuyHero="12",Ge.BuyShop="13",Ge.BuyHero_0=14,Ge.BuyShop_0=19,Ge.MenuHomeTab_0=24;class Pe{static GetBuyHero(e){return"BuyHero_"+e}static GetBuyShop(e){return"BuyShop_"+e}static GetBuyMenuHomeTab(e){return"MenuHomeTab_"+e}}Pe.SystemPlatform="SystemPlatform",Pe.Open="Open",Pe.Menu="Menu",Pe.War3x3="War3x3",Pe.War4x4="War4x4",Pe.WarOver="WarOver",Pe.Share="Share",Pe.ShareBtn="ShareBtn",Pe.ShareResult="ShareResult",Pe.ShareWar="ShareWar",Pe.Gold="Gold",Pe.GoldBest="GoldBest",Pe.BuyHero="BuyHero",Pe.BuyShop="BuyShop",function(e){e[e.Notice=0]="Notice",e[e.Home=100]="Home",e[e.War=601]="War",e[e.Login=101]="Login",e[e.Plot=102]="Plot",e[e.Gashapon=200]="Gashapon",e[e.Hero=201]="Hero",e[e.Bag=202]="Bag",e[e.Equip=203]="Equip",e[e.Draug=204]="Draug",e[e.Sections=207]="Sections",e[e.Quest=300]="Quest",e[e.Team=303]="Team",e[e.BattlePlan=304]="BattlePlan",e[e.PVPHall=401]="PVPHall",e[e.PVEHall=402]="PVEHall",e[e.SystemSetting=500]="SystemSetting",e[e.Mail=501]="Mail",e[e.Rank=502]="Rank",e[e.PlayerInfo=503]="PlayerInfo"}(k||(k={})),window.MenuId=k,function(e){e[e.None=0]="None",e[e.Man=1]="Man",e[e.Woman=2]="Woman"}(M||(M={}));class ke{constructor(){this.isAuthed=!1,this.language="",this.nickName="",this.avatarUrl="",this.gender=M.None,this.country="",this.province="",this.city="",this.unionId="",this.openId="",this.sessionId="",this.sign=""}ToString(){return" UserInfo::<br/>NickName:"+this.nickName+",<br/>AvatarUrl:"+this.avatarUrl+",<br/>OpenID:"+this.openId+",<br/>City:"+this.city+",<br/>SessionID:"+this.sessionId}}class Me{constructor(){this.code=""}}class xe{}!function(e){e[e.RemoveRankList=0]="RemoveRankList",e[e.FetchFriendRankList=1]="FetchFriendRankList",e[e.SubmitScore=3]="SubmitScore",e[e.GameOverRank=4]="GameOverRank",e[e.FetchGroupFriendRankList=5]="FetchGroupFriendRankList",e[e.NotifyTime=6]="NotifyTime"}(x||(x={}));class be{constructor(){this.m_stSystemInfo=null,this.m_stSdkUserInfo=null,this.m_stSdkLoginInfo=null,this.m_stSystemInfo=new xe,this.m_stSdkUserInfo=new ke,this.m_stSdkLoginInfo=new Me}static get platformWX(){return Engine.borwer.isWXGame}get userInfo(){return this.m_stSdkUserInfo}get systemInfo(){return this.m_stSystemInfo}async Login(e=null,t="",i=1,s=1){return null}async Login2(e=null,t=""){return null}async CheckCdk(e,t){return null}async CheckIDCard(e,t,i){return null}async Areas(){return null}async newAndUseRole(e,t,i){return null}async useRole(e,t){return null}async FastLogin(e,t,i){return null}async GameDoSdkAuthAsync(){return null}async GameDoSdkLoginAsync(){return new Promise(e=>{e(this.m_stSdkLoginInfo)})}GetLaunchOptions(){return{}}async UserCheck(){return new Promise(e=>{e(!0)})}async Share(e,t,i){return null}}be.sGetUserInfoBtnVisiable=new TypedSignal;class De extends be{constructor(){super()}async Login(e=null,t="",i=1,s=1){net.config.channel="mine";let a=e;return isNullOrEmpty(a)&&(a=Ae.LocationUrlParam("name")||Ae.RandName(2,7)),new Promise(e=>{net.auth.mineLogin(a,t,a,s,i,function(t,i){if(t){net.logic.connect();let t=function(i){net.logic.gamerLoginS2C.off(t),e(i)};net.logic.gamerLoginS2C.on(t)}else e(i)})})}async Login2(e=null,t=""){net.config.channel="mine";let i=e;return isNullOrEmpty(i)&&(i=Ae.LocationUrlParam("name")||Ae.RandName(2,7)),new Promise(e=>{net.auth.mineLogin2(i,t,function(t,i){e(i)})})}async CheckCdk(e,t){return new Promise(i=>{net.auth.checkcdk(e,t,function(e,t){i(e?{}:t)})})}async CheckIDCard(e,t,i){return new Promise(s=>{net.auth.checkIDCard(e,t,i,function(e,t){s(e?{}:t)})})}async Areas(){return new Promise(e=>{net.auth.areas(function(t,i){t?e(i):this.Areas()})})}async newAndUseRole(e,t,i){return new Promise(s=>{net.auth.newAndUseRole(e,t,1,i,"",function(e,t){if(e){net.logic.connect();let e=function(t){net.logic.gamerLoginS2C.off(e),s(t)};net.logic.gamerLoginS2C.on(e)}else s(t)})})}async useRole(e,t){return new Promise(i=>{net.auth.useRole(e,t,function(e,t){if(e){net.logic.connect();let e=function(t){net.logic.gamerLoginS2C.off(e),i(t)};net.logic.gamerLoginS2C.on(e)}else i(t)})})}async FastLogin(e,t,i){return net.config.channel=t,new Promise(s=>{net.auth.fastLogin(e,t,i,function(e,t){if(e){net.logic.connect();let e=function(t){net.logic.gamerLoginS2C.off(e),s(t)};net.logic.gamerLoginS2C.on(e)}else s(t)})})}async GameDoSdkAuthAsync(){return this.m_stSdkUserInfo.nickName="ANTMINE-NICKNAME",this.m_stSdkUserInfo.avatarUrl="https://wx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKpmpnxfYeeUqFOlwK9x260xibs866I7NpmuHjgerLXgUk1B77HpIo2oZP0wAbnib4Lkc30N7yibYoww/132",this.m_stSdkUserInfo.gender=M.Man,this.m_stSdkUserInfo.city="上海",this.m_stSdkUserInfo.country="中国",this.m_stSdkUserInfo.language="zh_CN",this.m_stSdkUserInfo.province="上海",new Promise(e=>{e(this.m_stSdkUserInfo)})}GetLaunchOptions(){return{key1:Ae.LocationUrlParam("key1"),key2:Ae.LocationUrlParam("key2")}}}class Be extends be{constructor(){super(),this.GetSystemInfo(),wx.setKeepScreenOn&&wx.setKeepScreenOn({keepScreenOn:!0,success:function(){console.log("常亮设置成功！")}})}async WXGetSdkAuthSetting(){return new Promise(e=>{wx.getSetting({success:function(t){console.info("success: wx.getSetting",t),e(t.authSetting["scope.userInfo"])},fail:function(t){console.log("fail: wx.getSetting",t.errMsg),e(!1)}})})}async UserCheck(){return await this.WXGetSdkAuthSetting()}async WXGetSdkUserInfo(){return new Promise(e=>{console.log("发起向微信获取用户信息"),wx.getUserInfo({success:t=>{console.info("success: wx.getUserInfo",t),e(t.userInfo)},fail:t=>{console.log("fail: wx.getUserInfo",t.errMsg),e(null)}})})}async WXAuth(){let e=await this.GameDoSdkAuthAsync();for(;!e;)e=await this.GameDoSdkAuthAsync();return e}async Login(e=null,t="",i=1,s=1){let a=await this.GameDoSdkLoginAsync();for(;!a;)a=await this.GameDoSdkLoginAsync();let n=this.m_stSdkLoginInfo.code;return net.config.channel="wechat",new Promise(e=>{net.auth.sdkLogin(n,"",this.m_stSdkUserInfo.nickName,s,i,null,function(t,i){if(t){net.logic.connect();let t=function(i){net.logic.gamerLoginS2C.off(t),e(i)};net.logic.gamerLoginS2C.on(t)}else e(i)})})}async Login2(e=null,t=""){let i=await this.GameDoSdkLoginAsync();for(;!i;)i=await this.GameDoSdkLoginAsync();let s=this.m_stSdkLoginInfo.code;return net.config.channel="wechat",new Promise(e=>{net.auth.sdkLogin2(s,"",function(t,i){e(i)})})}async CheckCdk(e,t){return new Promise(i=>{net.auth.checkcdk(e,t,function(e,t){i(e?{}:t)})})}async CheckIDCard(e,t,i){return new Promise(s=>{net.auth.checkIDCard(e,t,i,function(e,t){s(e?{}:t)})})}async Areas(){return new Promise(e=>{net.auth.areas(function(t,i){t?e(i):this.Areas()})})}async newAndUseRole(e,t,i){return t=this.m_stSdkLoginInfo.code,new Promise(s=>{net.auth.newAndUseRole(e,t,1,i,"",function(e,t){if(e){net.logic.connect();let e=function(t){net.logic.gamerLoginS2C.off(e),s(t)};net.logic.gamerLoginS2C.on(e)}else s(t)})})}async useRole(e,t){return new Promise(i=>{net.auth.useRole(e,t,function(e,t){if(e){net.logic.connect();let e=function(t){net.logic.gamerLoginS2C.off(e),i(t)};net.logic.gamerLoginS2C.on(e)}else i(t)})})}async GameDoSdkAuthAsync(){let e=await this.WXGetSdkAuthSetting()?await this.WXGetSdkUserInfo():await this.WXCreateWXUserButton();return e?(this.SetUserInfo(e),new Promise(e=>{e(this.m_stSdkUserInfo)})):(console.error("GameDoSdkAuthAsync 获取授权 获取用户信息 失败"),new Promise(e=>{e(null)}))}async GameDoSdkLoginAsync(){return console.log("发起登录微信 wx.login"),new Promise(e=>{wx.login({success:t=>{console.info("success: wx.login",t),this.m_stSdkLoginInfo.code=t.code,e(this.m_stSdkLoginInfo)},fail:t=>{console.info("fail: wx.login",t),e(null)}})})}async WXCreateWXUserButton(){let e=wx.createUserInfoButton({type:"text",lang:"zh_CN",text:"",style:{left:0,top:0,width:2e3,height:2e3,lineHeight:40,textAlign:"center",fontSize:16,borderRadius:4}});return e.show(),be.sGetUserInfoBtnVisiable.dispatch(!0),new Promise(t=>{e.onTap(function(i){i.userInfo?(console.log("按钮获取用户信息成功","wxLogin auth success"),e.hide(),be.sGetUserInfoBtnVisiable.dispatch(!1),t(i.userInfo)):(console.error("按钮获取用户信息失败"),t(null))})})}SetUserInfo(e){console.info("用户信息",e),this.m_stSdkUserInfo.isAuthed=!0,this.m_stSdkUserInfo.language=e.language,this.m_stSdkUserInfo.nickName=e.nickName,this.m_stSdkUserInfo.avatarUrl=e.avatarUrl,this.m_stSdkUserInfo.gender=e.gender,this.m_stSdkUserInfo.country=e.country,this.m_stSdkUserInfo.province=e.province,this.m_stSdkUserInfo.city=e.city}GetSystemInfo(){let e=wx.getSystemInfoSync();return console.info("wx.getSystemInfoSync:",e),this.m_stSystemInfo.benchmarkLevel=e.benchmarkLevel,this.m_stSystemInfo.model=e.model,this.m_stSystemInfo.pixelRatio=e.pixelRatio,this.m_stSystemInfo.platform=e.platform,this.m_stSystemInfo.screenHeight=e.screenHeight,this.m_stSystemInfo.screenWidth=e.screenWidth,this.m_stSystemInfo.system=e.system,this.m_stSystemInfo.version=e.version,this.m_stSystemInfo.windowHeight=e.windowHeight,this.m_stSystemInfo.windowWidth=e.windowWidth,this.m_stSystemInfo.SDKVersion=e.SDKVersion,this.m_stSystemInfo}async Share(e,t,i){return new Promise(s=>{wx.shareAppMessage({title:e,imageUrl:t,query:i,success:function(){console.error("share success!"),s(!0)},fail:function(){console.error("share fail!"),s(!1)}})})}GetLaunchOptions(){return wx.getLaunchOptionsSync().query}}class Ae{static LocationUrlParam(e){if(Engine.borwer.isWXGame)return null;var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),i=window.location.search.substr(1).match(t);return null!=i?unescape(i[2]):null}static RandName(e,t,i=!0){let s="",a=e,n=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"];i&&(a=Math.round(Math.random()*(t-e))+e);for(var r=0;r<a;r++){s+=n[Math.round(Math.random()*(n.length-1))]}return s}static get platform(){return Ae._insPlatform||(Engine.borwer.isWXGame&&Ae.enableWXLogin?Ae._insPlatform=new Be:Ae._insPlatform=new De),Ae._insPlatform}}Ae.enableWXLogin=VersionConfig.IsEnableWx,Ae._insPlatform=null,window.AntFrame=Ae;class He{static Send(e,t){}static SendAnalytics(e,t){}static SendEvent(e,t){Engine.borwer.isWXGame&&wx.aldSendEvent(e,t)}static OnOpen(){var e=(new Date).getDate(),t=Co.localStorage.getInt("ReportManitor_Open_Date",!0),i=Co.localStorage.getInt("ReportManitor_Open",!0);t!=e&&(Co.localStorage.setInt("ReportManitor_Open_Date",e,!0),this.SystemPlatform(),i=0),i++,Co.localStorage.setInt("ReportManitor_Open",i,!0),this.Send(Ge.Open,1),this.SendAnalytics(Pe.Open,i),this.SendEvent("打开游戏",{openNum:i})}static OnMenu(e,t){this.SendEvent("打开菜单",{menuId:e,tabIndex:t}),e==k.Home&&(null==t?t=0:"string"==typeof t&&(t=parseInt(t)),this.Send(Ge.GetBuyMenuHomeTab(t).toString(),1),this.SendAnalytics(Pe.GetBuyMenuHomeTab(t),1))}static OnWar(e){e?(this.SendEvent("进入关卡",{type:3}),this.war4x4++,this.Send(Ge.War4x4,1),this.SendAnalytics(Pe.War4x4,this.war4x4),He.OnStageStart(4,"关卡4x4")):(this.SendEvent("进入关卡",{type:4}),this.war3x3++,this.Send(Ge.War3x3,1),this.SendAnalytics(Pe.War3x3,this.war3x3),He.OnStageStart(3,"关卡3x3"))}static OnWarOver(){this.warOver++,this.SendEvent("战斗结束",{"结束次数":this.warOver}),this.Send(Ge.ShareResult,1),this.SendAnalytics(Pe.ShareResult,this.warOver),this.OnStageEnd(de.gameLevel,de.gold)}static SystemPlatform(){var e=0,t="";Laya.Browser.onAndroid?(t="Android",e=1):Laya.Browser.onIPhone?(t="IPhone",e=2):Laya.Browser.onIPad?(t="IPad",e=3):Laya.Browser.onIOS&&(t="IOS",e=4),this.SendEvent("系统平台",{platform:t}),this.Send(Ge.SystemPlatform,e),this.SendAnalytics(Pe.SystemPlatform,e)}static OnShare(e){this.Send(Ge.Share,1),this.SendAnalytics(Pe.Share,1)}static OnShareBtn(e){this.Send(Ge.ShareBtn,1),this.SendAnalytics(Pe.ShareBtn,1)}static OnShareResult(e){this._shareResult++,this.Send(Ge.ShareResult,1),this.SendAnalytics(Pe.ShareResult,1)}static OnShareWar(e){this._shareWar++,this.Send(Ge.ShareWar,1),this.SendAnalytics(Pe.ShareWar,1)}static OnGload(e){this.SendAnalytics(Pe.Gold,e),this.SendEvent("一次关卡活得金币数量",{value:e})}static OnGloadBest(e){var t=Co.localStorage.getInt("ReportManitor_GoldBest",!1);t!=e&&(Co.localStorage.setInt("ReportManitor_GoldBest",e,!1),this.SendAnalytics(Pe.GoldBest,e),this.SendEvent("一次关卡活得最多金币数量",{value:t}))}static OnBuyHero(e){this.Send(Ge.GetBuyHero(e).toString(),1),this.SendAnalytics(Pe.GetBuyHero(e),1),this.SendEvent(Pe.GetBuyHero(e),{value:1})}static OnBuyShop(e){this.SendEvent(Pe.GetBuyShop(e),{value:1}),this.Send(Ge.GetBuyShop(e).toString(),1),this.SendAnalytics(Pe.GetBuyShop(e),1)}static OnStageStart(e,t){this.stageId=e,this.stageName=t,Engine.borwer.isWXGame&&wx.aldStage.onStart({stageId:e,stageName:t,userId:Ae.platform.userInfo.nickName})}static OnStageRuningTools(e){if(Engine.borwer.isWXGame){var t=Co.moduleModel.item.getItemToolByType(e),i="不知名道具",s="不知名道具";t&&t.itemConfig&&(i=t.itemConfig.name,s=t.itemConfig.itemDes),wx.aldStage.onRunning({stageId:this.stageId,stageName:this.stageName,userId:Ae.platform.userInfo.nickName,event:"tools",params:{itemName:i,itemCount:1,desc:s}})}}static OnStageEnd(e,t){Engine.borwer.isWXGame&&wx.aldStage.onEnd({stageId:this.stageId,stageName:this.stageName,userId:Ae.platform.userInfo.nickName,event:"complete",params:{desc:"关卡完成",gold:t,level:e}})}}He.war4x4=0,He.war3x3=0,He.warOver=0,He._shareResult=0,He._shareWar=0,He.stageId="",He.stageName="",function(e){e[e.Heart=0]="Heart",e[e.Horseshoe=1]="Horseshoe",e[e.Luck=2]="Luck",e[e.Key=3]="Key"}(b||(b={})),function(e){e[e.AddArmor=1]="AddArmor",e[e.AddHPMax=2]="AddHPMax",e[e.AddHP=3]="AddHP",e[e.AddHPPer=4]="AddHPPer",e[e.AddDamageExtra=5]="AddDamageExtra",e[e.TiggerLightning=6]="TiggerLightning",e[e.TiggerCannonOne=8]="TiggerCannonOne",e[e.TiggerBomb=9]="TiggerBomb",e[e.ImmuneFar=10]="ImmuneFar",e[e.ImmunePoison=11]="ImmunePoison",e[e.Invincible=12]="Invincible",e[e.GoldMultiplier=13]="GoldMultiplier",e[e.AutoUnlockChest=14]="AutoUnlockChest"}(D||(D={})),function(e){e[e.Tool=5]="Tool",e[e.Weapon=12]="Weapon",e[e.Decorate=13]="Decorate",e[e.Consume=14]="Consume"}(B||(B={}));class Fe{constructor(){this.sChange=new Signal,this.sStepChange=new Signal,this.step=0,this.stepMax=0}setId(e){this.id=e,e<=0?(this.config=null,this.step=0,this.stepMax=0):(this.config=Co.config.item.getConfig(e),this.config.triggerArgs&&this.config.triggerArgs.length>0?(this.stepMax=this.config.triggerArgs[0],this.step=0):this.stepMax=0),this.sChange.dispatch()}get iconUrl(){return this.config?"res/sprite/icon/"+this.config.icon+".png":""}get effectTypeId(){return this.config?this.config.effectTypeId:0}get effectArg(){return this.config?this.config.effectArgs.length>1?Random.rangeBoth(this.config.effectArgs[0],this.config.effectArgs[1]):this.config.effectArgs[0]:0}onEatCard(e){if(this.config&&this.config.triggerConfig){var t=this.config.triggerConfig.cardTypeIdList;0==t.length?this.addStep(e):-1!=t.indexOf(e.type)&&this.addStep(e)}}addStep(e){this.step<this.stepMax&&(this.step++,this.sStepChange.dispatch()),this.enabelUse&&this.use()}get enabelUse(){return this.step>=this.stepMax}use(){switch(this.effectTypeId){case D.AddHP:case D.AddArmor:case D.AddHPMax:case D.AddHPPer:this.playShoot();break;case D.TiggerCannonOne:}}playShoot(){var e=Re.current.game.field.shootEquipToHero(this.view,300);e.onComplete.addOnce(this.doUse,this),Re.current.game.addToAnimationQueue(e)}doUse(){Re.current.useEquipConsume(this.id),this.onUse()}onUse(){this.step=0,this.sStepChange.dispatch()}}class Re{constructor(){this.sUpLevelChange=new Signal,this.sLevelChange=new Signal,this.sEquipChange=new Signal,this.sExpChange=new Signal,this.level=1,this.levelExp=0,this.levelExpMax=100,this.equipDecorateData=new Fe,this.equipWeaponData=new Fe,this.equips=[],this.randomEquipIgnoreList=[],this.equips.push(this.equipDecorateData),this.equips.push(this.equipWeaponData)}static get current(){return this._current||(this._current=new Re),this._current}getRandomList(e,t){var i=[],s=this.levelConfig.randomWeaponList;for(var a of s){if(Co.config.item.getConfig(a).type==e){if(t&&-1!=t.indexOf(a))continue;i.push(a)}}return 0==i.length&&(i=s),i}randomEquipDecorateId(){var e=this.randomEquipIgnoreList;e.length=0,e.push(this.equipDecorateData.id),e.push(this.equipWeaponData.id);var t=this.getRandomList(B.Decorate,e),i=t[Random.rangeBoth(0,t.length-1)];return e.push(i),i}randomEquipWeaponId(){var e=this.randomEquipIgnoreList,t=this.getRandomList(B.Weapon,e),i=t[Random.rangeBoth(0,t.length-1)];return e.push(i),i}randomEquipConsumeId(){var e=this.randomEquipIgnoreList,t=this.getRandomList(B.Consume,e),i=t[Random.rangeBoth(0,t.length-1)];return e.push(i),i}randomEquip(e,t){var i;(e=e.slice(0)).length>1&&(-1!=(i=e.indexOf(t))&&e.splice(i,1));return e[i=Random.rangeBoth(0,e.length-1)]}reset(){this.levelExp=0,this.setLevel(1),this.equipDecorateData.setId(0),this.equipWeaponData.setId(0),this.sLevelChange.dispatch(),this.sExpChange.dispatch(),this.sEquipChange.dispatch()}setLevel(e){e=Math.min(e,Co.config.level.levelMax),e=Math.max(1,e),this.levelExp>0&&this.levelConfig&&(this.levelExp=this.levelExp-this.levelExpMax,this.levelExp=Math.max(0,this.levelExp)),this.level=e;var t=this.levelConfig=Co.config.level.getConfig(e);this.levelExpMax=t.exp,this.sLevelChange.dispatch(),this.sExpChange.dispatch()}uplevel(){this.level>=Co.config.level.levelMax||(this.setLevel(this.level+1),this.sUpLevelChange.dispatch())}addExp(e){this.levelExp+=e,this.checkUplevel(),this.sExpChange.dispatch()}checkUplevel(){this.levelExp>=this.levelExpMax&&this.uplevel()}onCardToReplaceAfterSmash(e){e.config.exp>0&&this.addExp(e.config.exp)}onEatCard(e){for(var t of(e.config.exp>0&&this.addExp(e.config.exp),this.equips))t.onEatCard(e)}useEquipConsumeDelay(e){Laya.timer.once(500,this,this.useEquipConsume,[e])}useEquipConsume(e){var t=Co.config.item.getConfig(e),i=this.game.field.getHero();i&&i.useEffect(t.effectTypeId,t.effectArgs)}goldMultiplier(){var e=0;for(var t of this.equips)t.enabelUse&&t.effectTypeId==D.GoldMultiplier&&(e+=t.effectArg,t.onUse());return e>1?e:1}damageExtra(){var e=0;for(var t of this.equips)t.enabelUse&&t.effectTypeId==D.AddDamageExtra&&(e+=t.effectArg,t.onUse());return e}invincible(){for(var e of this.equips)if(e.enabelUse&&e.effectTypeId==D.Invincible)return e.onUse(),!0;return!1}autoUnlockChest(){for(var e of this.equips)if(e.enabelUse&&e.effectTypeId==D.AutoUnlockChest)return e.onUse(),!0;return!1}checkTrigger(){for(var e of this.equips)if(e.enabelUse)switch(e.effectTypeId){case D.TiggerCannonOne:case D.TiggerLightning:case D.TiggerBomb:return this.game.field.equipTrigger(e)}}debugCheckTrigger(){for(var e of this.equips)switch(e.effectTypeId){case D.TiggerCannonOne:case D.TiggerLightning:case D.TiggerBomb:return this.game.field.equipTrigger(e)}}}window.Player=Re;class Ue extends ye{constructor(){super(...arguments),this.currentLife=0,this.totalLife=0,this.armor=0,this.needRunLightning=!1,this.lightningScore=0,this.needShoot=!1,this.shootScore=0,this.needShootMultiplier=!1,this.multiplierType=v.MultiplierPositive,this.multiplierScore=0,this.needShootSkull=!1}reset(){super.reset(),this.currentLife=0,this.totalLife=0,this.armor=0,this.needRunLightning=!1,this.lightningScore=0,this.needShoot=!1,this.shootScore=0,this.needShootMultiplier=!1,this.multiplierScore=0,this.needShootSkull=!1}fight(e){Re.current.onEatCard(e);var t=new Ie(!0,!1,!0);switch(e.type){case v.Trap:if(e.getLife()>0&&de.currentHero!=T.Gun){O.instance.playSound(N.Trap);var i=e.getScore();Re.current.invincible()?i=0:(i-=Re.current.damageExtra(),i=Math.max(0,i)),this.currentLife>i?(this.currentLife-=i,de.addGold(e.getScore()),t.isHeroAlive=!0):t.isHeroAlive=!1}break;case v.Boss:case v.Enemy:O.instance.playSound(me.getRandomItem([N.Hit1,N.Hit2])),t.isHeroAlive=this.fightWithEnemy(e),t.isHeroAlive&&e.isBoss&&(t.isNeedIncreaseLifeByOneAfterBoss=!0);break;case v.Armor:O.instance.playSound(N.ShieldWood),de.currentHero==T.Gun?this.needSmashLightning(e.getScore()):this.armor<e.getScore()?(this.armor=e.getScore(),this.setArmorFrame(e)):de.currentHero==T.Base&&this.armor++;break;case v.Gold:1==e.level?O.instance.playSound(N.Coin):O.instance.playSound(N.CoinsBag);i=e.getScore();i*=Re.current.goldMultiplier(),de.addGold(i);break;case v.Health:O.instance.playSound(me.getRandomItem([N.Health1,N.Health2])),this.currentLife+=e.getScore(),this.currentLife>this.totalLife&&(this.currentLife=this.totalLife);break;case v.Cannon:this.needShoot=!0,this.shootScore=e.getScore();break;case v.Chest:t.isChest=!0;break;case v.Poison:if(O.instance.playSound(N.Poison),de.isLuck)return t.isHeroAlive=!0,this.useLuck(),t;if(e.getScore()>=this.currentLife)return t.isHeroAlive=!1,t;this.currentLife-=e.getScore();break;case v.Horseshoe:t.isNeedIncreaseLifeByOne=!0;break;case v.Bomb:break;case v.Lightning:this.needSmashLightning(e.getScore());break;case v.Multiplier:case v.MultiplierPositive:case v.MultiplierNegative:case v.AddPositive:case v.AddNegative:this.needShootMultiplier=!0,this.multiplierType=e.type,this.multiplierScore=e.getScore();break;case v.Skull:this.needShootSkull=!0;break;case v.Barrel:O.instance.playSound(me.getRandomItem([N.Barrel1,N.Barrel2])),t.isMove=!1}return this.setStatus(),t}needSmashLightning(e){this.needRunLightning=!0,this.lightningScore=e}fightWithEnemy(e){var t=e.getScore();if(Re.current.invincible()?t=0:(t-=Re.current.damageExtra(),t=Math.max(0,t)),t>=this.armor+this.currentLife)return!1;if(t<=this.armor)t<this.armor&&de.currentHero==T.Base?this.armor-=1:this.armor-=t;else if(this.armor>0){var i=t-this.armor;this.armor=0,this.currentLife-=i}else this.currentLife-=t;return de.addGold(e.getScore()),!0}increaseLifeByOneTween(){var e=this.view.tweenLife();return e.onStart.addOnce(this.playHorseshoe,this),e.onComplete.addOnce(this.increaseLifeByOne,this),e}playHorseshoe(){O.instance.playSound(N.Horseshoe)}increaseLifeByOne(){this.currentLife++,this.totalLife++,this.setLife()}stepUpdate(){}isNegative(){return!1}getScore(){return this.currentLife+this.armor}getGoldValue(){return 0}reduceScoreInNSeconds(e,t){if(e<=this.armor)this.armor-=e;else{var i=e-this.armor;this.armor=0,this.currentLife-=i}setTimeout(this.setStatus.bind(this),t)}increaseScoreInNSeconds(e,t){this.totalLife-this.currentLife>e?this.currentLife=this.totalLife:this.currentLife+=e,setTimeout(this.setStatus.bind(this),t)}setStatus(){this.setLife(),this.setArmor()}setLife(){this.view.setHealthText()}setArmor(){this.view.setArmor()}setArmorFrame(e){this.view.setArmor()}setShopItemsStatus(){this.view.refreshShopBar()}useLuck(){this.view.useLuck(),de.isLuck=!1,He.OnStageRuningTools(b.Luck)}useHeart(){de.isHeroAlive=!0,this.currentLife=this.totalLife,this.view.useHeart(),setTimeout(()=>{this.setStatus(),this.setShopItemsStatus()},200),He.OnStageRuningTools(b.Heart)}useEffect(e,t){var i=t.length>1?Random.rangeBoth(t[0],t[1]):t[0];switch(e){case D.AddArmor:O.instance.playSound(N.ShieldWood),this.armor+=i,this.setArmor();break;case D.AddHPMax:this.currentLife+=i-1,this.totalLife+=i-1,this.currentLife=Math.min(this.totalLife,this.currentLife),this.increaseLifeByOneTween().restart();break;case D.AddHP:this.addHP(i);break;case D.AddHPPer:i/=100,i=Math.ceil(i*this.totalLife),this.addHP(i)}}addHP(e){this.currentLife+=e,this.currentLife=Math.min(this.totalLife,this.currentLife);var t=this.view.tweenLife();t.onStart.addOnce(this.playHorseshoe,this),t.onComplete.addOnce(this.setLife,this),t.restart()}}class Oe extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","FxShootCannon")}constructFromXML(e){super.constructFromXML(e),this.m_core=this.getChild("core")}}Oe.URL="ui://moe42ygrsqzyaf",Oe.DependPackages=["GameHome"];class Ne extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","FxShootSmoke")}constructFromXML(e){super.constructFromXML(e),this.m_smoke=this.getChild("smoke")}}Ne.URL="ui://moe42ygrsqzyag",Ne.DependPackages=["GameHome"];class Ee extends Ne{static PoolGet(){var e=Pool.getItem(this.URL);return e||(e=Ee.createInstance()),e}PoolRecover(){Laya.timer.clearAll(this),this.removeFromParent(),this.m_smoke.playing=!1,Pool.recover(Ee.URL,this)}Play(){this.m_smoke.frame=0,this.m_smoke.playing=!0;var e=Math.floor(1e4/24);Laya.timer.once(e,this,this.PoolRecover)}}class We extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","FxShootBoom")}constructFromXML(e){super.constructFromXML(e),this.m_boom=this.getChild("boom")}}We.URL="ui://moe42ygrsqzyah",We.DependPackages=["GameHome"];class Ve extends We{static PoolGet(){var e=Pool.getItem(this.URL);return e||(e=Ve.createInstance()),e}PoolRecover(){Laya.timer.clearAll(this),this.removeFromParent(),this.m_boom.playing=!1,Pool.recover(Ve.URL,this)}DelayPalay(e,t){Laya.timer.once(e,this,()=>{t.addChild(this),this.Play()})}Play(){this.m_boom.frame=0,this.m_boom.playing=!0;var e=Math.floor(750);Laya.timer.once(e,this,this.PoolRecover)}}class Xe extends Oe{constructor(){super(...arguments),this._tweenProgress=0}static PoolGet(){var e=Pool.getItem(this.URL);return e||(e=Xe.createInstance()),e}PoolRecover(){Laya.timer.clearAll(this),Laya.Tween.clearAll(this),this&&this.parent&&this.removeFromParent(),Pool.recover(Xe.URL,this)}moveTo(e,t,i,s,a){this.setXY(e,t),this.tweenProgress=0;var n=_.PoolGet(),r=R.to(this,{x:i,y:s,tweenProgress:100},a,null,Laya.Handler.create(this,this.onMoveEnd));return n.tweens.push(r),n}get tweenProgress(){return this._tweenProgress}set tweenProgress(e){if(this._tweenProgress=e,Math.floor(e)%10&&this.parent){var t=Ee.PoolGet();this.parent.addChild(t),t.setXY(this.x,this.y),t.Play()}}onMoveEnd(){if(this.parent){var e=Ve.PoolGet();this.parent.addChild(e),e.setXY(this.x,this.y),e.Play()}Laya.timer.frameOnce(2,this,this.PoolRecover)}}class qe extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","FxSkull")}constructFromXML(e){super.constructFromXML(e),this.m_fx=this.getChild("fx")}}qe.URL="ui://moe42ygrsqzyam",qe.DependPackages=["GameHome"];class Ke extends qe{constructor(){super(...arguments),this._tweenProgress=0}static PoolGet(){var e=Pool.getItem(this.URL);return e||(e=Ke.createInstance()),e}PoolRecover(){Laya.timer.clearAll(this),Laya.Tween.clearAll(this),this.removeFromParent(),Pool.recover(Ke.URL,this)}moveTo(e,t,i,s,a){this.setXY(e,t),this.tweenProgress=0;var n=_.PoolGet(),r=R.to(this,{x:i,y:s,tweenProgress:100},a,null,Laya.Handler.create(this,this.onMoveEnd));return n.tweens.push(r),n}get tweenProgress(){return this._tweenProgress}set tweenProgress(e){if(this._tweenProgress=e,Math.floor(e)%10&&this.parent){var t=Ee.PoolGet();this.parent.addChild(t),t.setXY(this.x,this.y),t.Play()}}onMoveEnd(){if(this.parent){var e=Ve.PoolGet();this.parent.addChild(e),e.setXY(this.x,this.y),e.Play()}Laya.timer.frameOnce(2,this,this.PoolRecover)}}class je{constructor(e){this.step=1,this.field=new Te,this.game=e,this.cardFactory=e.cardFactory}uninstall(){this.field.clear()}initField(){var e=[],t=de.ColumnCount,i=de.RowCount,s=L.AnimationTime-(i*t==9?0:50);this.field.clear(),this.field.init(t,i,this.game);U.getRandomIntInclusive(1,5);for(var a=0;a<i;a++)for(var n=0;n<t;n++){var r=void 0,o=a===L.HeroStartRow-1,l=n===L.HeroStartColumn-1;o&&l?(r=this.cardFactory.getHero(),de.isHeroAlive=!0,de.isGameEnd=!1):r=this.getCardFromFactory();var c=new ve(n,a),h=this.cardFactory.getDefault();e.push(this.moveAndSetWithAnimation(c,h,s)),e.push(this.replaceCardByPosition(c,r).setAnimationDuration(1))}return e}addShadow(){var e=this.game.add.graphics(0,0);e.name=L.Shadow,e.alpha=.5,e.beginFill(0),e.drawRect(2*-this.game.width,2*-this.game.height,4*this.game.width,4*this.game.height),this.cardFactory.container.add(e),this.cardFactory.container.bringToTop(this.cardFactory.container.getByName(L.Hero)),this.cardFactory.container.bringToTop(this.cardFactory.container.getByName(L.CardWithArm))}runArmTween(){var e=this.cardFactory.container.getByName(L.Shadow);e&&this.cardFactory.container.bringToTop(e),this.cardFactory.container.bringToTop(this.cardFactory.container.getByName(L.Hero)),this.cardFactory.container.bringToTop(this.cardFactory.container.getByName(L.CardWithMovingArm)),this.movingArm.alpha=1,this.movingArm.y=this.movingArmY;var t=this.movingArmY+150,i=this.game.add.tween(this.movingArm).to({y:this.movingArmY},200).to({y:t},600),s=this.game.add.tween(this.movingArm).to({y:t},200);i.onStart.add(function(){this.movingArm.changeFrame(1)},this),s.onStart.add(function(){this.movingArm.changeFrame(0)},this),s.onComplete.add(this.runArmTween,this),i.chain(s),i.start()}getChestCardFromFactory(){return this.cardFactory.getChestCard()}getCardFromFactory(e=G.Random,t=0){return this.cardFactory.getCard(e,t,this.getCardTypesOnTheTable())}getEnemyCardFromFactory(e){return this.cardFactory.getEnemy(e)}getHealsCardFromFactory(e){return this.cardFactory.getHealth(e)}getCardTypesOnTheTable(){return this.field.getAll().map(function(e){return e.type})}getCoinCardFromFactory(e){return this.cardFactory.getCoinCard(e)}getHero(){return this.field.get(this.getHeroPosition())}getHeroPosition(){return this.field.findHeroPosition()}getCardToFight(e){var t=this.field.findHeroPosition();if(null!=t){var i=t.getNewPosition(e);if(this.field.isPositionValid(i))return this.field.get(i)}return null}replaceCard(e,t,i=0){var s=this.field.getPosition(function(e){return e instanceof Ue}),a=Array(),n=this.getCardFromFactory(t,i);return a.push(this.replaceCardByPosition(s.getNewPosition(e),n)),a}tutorialStep1(){var e=this;this.movingArm.animations.stop(),this.runArmTween(),de.isTutorialStep1Done=!0,this.field.getAll().forEach(function(t){t instanceof Le&&t.view.name===L.CardWithMovingArm&&t.setOnClickEvent(e.onCardDown,e.onCardUp,e)})}tutorialStep2(e){de.isTutorialStep2Done=!0,this.runAllCardsAroundHero(e)}tutorialStep3(e){this.runAllCardsAroundHero(e)}tutorialStep4(){var e=this.cardFactory.container.getByName(L.Shadow);this.game.add.tween(e).to({alpha:0},100).start().onComplete.add(function(){var i=this;e.destroy(),de.isTutorialSeen=!0,this.field.getAll().forEach(function(e){e instanceof t.Card&&e.setOnClickEvent(i.onCardDown,i.onCardUp,i)})}.bind(this))}runAllCardsAroundHero(e){for(var i=0,s=[e.getNewPosition(I.Left),e.getNewPosition(I.Up),e.getNewPosition(I.Right),e.getNewPosition(I.Down)];i<s.length;i++){var a=s[i];if(this.field.isPositionValid(a)){var n=this.field.get(a);this.cardFactory.container.bringToTop(n.view),n instanceof t.Card&&n.setOnClickEvent(this.onCardDown,this.onCardUp,this)}}}move(e){var t=[],i=this.getHeroPosition(),s=i.getNewPosition(e),a=this.field.get(s);if(a.isEmpty)return t;this.isPlayMove(a)&&setTimeout(this.playMoveSound.bind(this),115);var n=this.field.get(i);if(a.type===v.Bomb)t.push(this.moveAndSetWithAnimation(i.getNewPosition(e),n,L.AnimationTime).setAnimationDuration(1)),t.push(this.moveAndSetWithAnimation(i,a,L.AnimationTime));else{a.isBoss&&de.addGameLevel();var r=this.getCardPositionType(e,i),o=this.getCardToReplace(a),l=_.PoolGet();switch(l.tweens.push(a.removeChild()),t.push(l),r){case P.Center:switch(t.push(this.moveAndSetWithAnimation(i.getNewPosition(e),n,L.AnimationTime)),e){case I.Left:if(0===i.row){var c=i.getNewPosition(I.Down),h=this.moveAllLine(I.Down,I.Up,c,o);t.push(h)}else{c=i.getNewPosition(I.Up),h=this.moveAllLine(I.Up,I.Down,c,o);t.push(h)}break;case I.Right:if(i.row===this.field.getRowCount()-1){c=i.getNewPosition(I.Up),h=this.moveAllLine(I.Up,I.Down,c,o);t.push(h)}else{c=i.getNewPosition(I.Down),h=this.moveAllLine(I.Down,I.Up,c,o);t.push(h)}break;case I.Up:if(i.column===this.field.getColumnCount()-1){c=i.getNewPosition(I.Left),h=this.moveAllLine(I.Left,I.Right,c,o);t.push(h)}else{c=i.getNewPosition(I.Right),h=this.moveAllLine(I.Right,I.Left,c,o);t.push(h)}break;case I.Down:if(0===i.column){c=i.getNewPosition(I.Right),h=this.moveAllLine(I.Right,I.Left,c,o);t.push(h)}else{c=i.getNewPosition(I.Left),h=this.moveAllLine(I.Left,I.Right,c,o);t.push(h)}}break;case P.End:t.push(this.moveAllLine(this.getOppositeMoveType(e),e,i,o))}}return de.isTutorialSeen||this.step++,t}isPlayMove(e){switch(e.type){case v.Boss:case v.Enemy:return!1;case v.Trap:return!e.isOpen;case v.Health:case v.Gold:case v.Armor:case v.Cannon:case v.Barrel:case v.Chest:case v.Bomb:case v.Poison:case v.Horseshoe:case v.Lightning:case v.Multiplier:case v.MultiplierPositive:case v.MultiplierNegative:case v.AddPositive:case v.AddNegative:case v.Skull:return!0}}playMoveSound(){O.instance.playSound(me.getRandomItem([N.Move01,N.Move02]))}getCardToReplace(e){return e.isBoss?this.getChestCardFromFactory():this.getCardFromFactory()}getCardToReplaceAfterSmash(e){var t;return e.isBoss&&(de.isNeedCreateChestOnNextStep=!0),t=e.getGoldValue()>0?e.getGoldValue():e.getScore(),Re.current.onCardToReplaceAfterSmash(e),this.getCoinCardFromFactory(t)}getCardPositionType(e,t){switch(e){case I.Right:return t.column==this.field.getColumnCount()-1?P.Start:0==t.column?P.Center:P.End;case I.Down:return t.row==this.field.getRowCount()-1?P.Start:0==t.row?P.Center:P.End;case I.Left:return 0==t.column?P.Start:t.column==this.field.getColumnCount()-1?P.Center:P.End;case I.Up:return 0==t.row?P.Start:t.row==this.field.getRowCount()-1?P.Center:P.End}}removeAllChild(){var e=[];O.instance.playSound(N.HeroDies);for(var t=this.field.getAll(),i=0,s=t=U.shuffle(t);i<s.length;i++){var a=t[i],n=_.PoolGet();n.animationDuration=U.getRandomIntInclusive(50,150),n.tweens.push(a.removeChild()),e.push(n)}return e}isBossInTheField(){return this.field.any(function(e){return e.isBoss})}moveAllLine(e,t,i,s){for(var a=[],n=L.AnimationTime*L.AnimationMultiplier;this.field.isPositionValid(i);)a.push(this.moveAndSetWithAnimation(i.getNewPosition(t),this.field.get(i),L.AnimationTime).setAnimationDuration(n)),i=i.getNewPosition(e);var r=this.cardFactory.getDefault(),o=i.getNewPosition(t);return a.push(this.moveAndSetWithAnimation(o,r,L.AnimationTime)),a.push(this.replaceCardByPosition(o,s).setAnimationDuration(1)),a}stepUpdate(){for(var e=0,t=this.field.getAll();e<t.length;e++){t[e].stepUpdate()}}shootCannon(){O.instance.playSound(N.Cannon);var e=this.getHeroPosition(),t=this.field.get(e),i=[];return i.push(this.shootCannonInDirection(I.Right,t,e)),i.push(this.shootCannonInDirection(I.Left,t,e)),i.push(this.shootCannonInDirection(I.Up,t,e)),i.push(this.shootCannonInDirection(I.Down,t,e)),i}shootCannonInDirection(e,t,i){var s=[],a=i.getNewPosition(e);if(!this.field.isPositionValid(a))return s;var n=this.field.get(a);if(je.canShootCard(n)){var r=this.shootCard(t.getCenterX(),t.getCenterY(),n.getCenterX(),n.getCenterY(),200);if(s.push(r),n.type===v.Cannon)n.increaseScoreInNSeconds(t.shootScore,400);else if(n.type===v.Barrel){var o=this.getCardFromFactory(G.AfterBarrel,n.getScore());(l=this.replaceCardByPosition(a,o,!0).setAnimationDuration(1)).setFirstDelay(400),s.push(l)}else if(t.shootScore>=n.getScore()){var l;o=this.getCardToReplaceAfterSmash(n);(l=this.replaceCardByPosition(a,o,!0).setAnimationDuration(1)).setFirstDelay(400),s.push(l)}else n.reduceScoreInNSeconds(t.shootScore,400)}return s}shootCard(e,t,i,s,a){var n=Xe.PoolGet();this.game.container.addChild(n);var r=n.moveTo(e,t,i,s,a);return r.animationDuration=1,r}static canShootCard(e){if(e.isEmpty)return!1;if(e.isHero)return!1;switch(e.type){case v.Boss:case v.Enemy:case v.Trap:case v.Armor:case v.Health:case v.Poison:case v.Cannon:case v.Barrel:case v.Multiplier:case v.MultiplierPositive:case v.MultiplierNegative:case v.AddPositive:case v.AddNegative:return!0;default:return!1}}smashBomb(){for(var e=this.field.getPositions(function(e){return e.type===v.Bomb&&e.getPowerUp()<=0}),t=[],i=0;i<e.length;i++){var s=e[i];O.instance.playSound(N.Bomb);var a=this.field.get(s);this.addBombExplosionAnimation(a.view.x,a.view.y,100);var n=this.getCardToReplaceAfterSmash(this.field.get(s)),r=this.replaceCardByPosition(s,n,!0);t.push(r);for(var o=a.getLife(),l=[I.Up,I.Down,I.Left,I.Right],c=0;c<l.length;c++){var h=l[c];if(t.push(this.smashBombInDirection(h,s,o)),!de.isHeroAlive)return t}}return t}smashBombInDirection(e,t,i,s=!1,a=!0){var n=[],r=L.SmashDelay;for(t=t.getNewPosition(e);this.field.isPositionValid(t);){if(n.push(this.smashBombInPosition(t,r,i,s,a)),!de.isHeroAlive)return n;r+=L.SmashDelay,t=t.getNewPosition(e)}return n}smashBombInPosition(e,t,i,s=!1,a=!0){var n=this.field.get(e),r=4==de.RowCount?1e3:500;if(this.game.shake(L.ShakeIntensity,r),this.addBombExplosionAnimation(n.view.x,n.view.y,t),n.type==v.Chest)return[];if(n.isHero&&de.currentHero==T.Bomb)return[];if(!a&&!ge.isEnemyType(n.type,s))return[];if(i>=n.getScore()){if(!n.isHero){var o=this.getCardToReplaceAfterSmash(n);return[this.replaceCardByPosition(e,o,!0).setAnimationDuration(1)]}if(!de.isHeart)return de.isHeroAlive=!1,this.removeAllChild();var l=n;de.isHeart=!1,this.keyboardManager.reset(),l.useHeart()}else n.reduceScoreInNSeconds(i,1.2*t);return[]}addBombExplosionAnimation(e,t,i){setTimeout(this.playBombExplosionAnimation.bind(this,e,t),i)}playBombExplosionAnimation(e,t){var i=Ve.PoolGet();i.setXY(e,t),this.game.container.addChild(i),i.Play()}replaceCardByPosition(e,t,i=!1){var s=_.PoolGet(),a=s.tweens,n=this.field.get(e);return i&&(n.type==v.Chest?a.push(n.open()):n.type==v.Barrel&&a.push(n.open())),n.isBoss&&de.addGameLevel(),this.moveAndSet(e,t),t.endTurnAnimationStart(),s.tweens.push(n.startTurnAnimation(t.endTurnAnimationEnd,t)),s}moveAndSet(e,t){this.field.set(e,t),t.setCoordinate(e.getPoint()),t.view.debugPos()}moveAndSetWithAnimation(e,t,i){var s=e.getPoint();this.field.set(e,t),t.view.debugPos();var a=_.PoolGet();return a.tweens.push(t.moveTo(s,i)),a}getOppositeMoveType(e){switch(e){case I.Up:return I.Down;case I.Down:return I.Up;case I.Left:return I.Right;case I.Right:return I.Left}}shootLightning(){var e=this.getHeroPosition(),t=this.field.get(e),i=[],s=this.shootLightningInAllDirections(t.lightningScore,e,L.LightningDuration);return i.push(s),this.clearLightning(),i.length>0&&O.instance.playSound(N.Lighting),i}clearLightning(){this.field.getAll().forEach(function(e){e.canLightningStrike=!1})}shootLightningInAllDirections(e,t,i,s=!1){var a=[];return a.push(this.shootLightningInDirection(I.Right,e,t,i,s)),a.push(this.shootLightningInDirection(I.Left,e,t,i,s)),a.push(this.shootLightningInDirection(I.Up,e,t,i,s)),a.push(this.shootLightningInDirection(I.Down,e,t,i,s)),a}shootLightningInDirection(e,t,i,s,a=!1){var n=[],r=i.getNewPosition(e);if(!this.field.isPositionValid(r))return n;var o=this.field.get(r);if(o.isHero)return n;if(o.canLightningStrike)return n;if(je.canShootLightning(o,a)){var l=s+L.LightningDuration,c=_.PoolGet();if(c.tweens.push(o.runLightning()),c.setAnimationDuration(L.LightningDuration),n.push(c),t>=o.getScore()){var h;(h=a?this.getEnemyCardFromFactory(1):this.getCardToReplaceAfterSmash(o)).canLightningStrike=!0;var u=this.replaceCardByPosition(r,h,!0).setAnimationDuration(1);u.setFirstDelay(2*l),n.push(u)}else o.reduceScoreInNSeconds(t,2*l);o.canLightningStrike=!0,n.push(this.shootLightningInAllDirections(t,r,l))}return n}static canShootLightning(e,t=!1){if(t)switch(e.type){case v.Armor:case v.Health:case v.Gold:return!0;default:return!1}else switch(e.type){case v.Boss:case v.Enemy:case v.Trap:return!0;default:return!1}}shootMultiplier(){O.instance.playSound(N.Idol);var e=this.getHeroPosition(),t=this.field.get(e),i=[],s=this.field.getPositions(function(e){return!e.isHero});if(t.multiplierType!=v.Multiplier)for(var a=0;a<s.length;a++){var n=s[a],r=this.shootMultiplierInPosition(n,t.multiplierType,t.multiplierScore);i.push(r)}else i.push(this.shootMultiplierInDirection(I.Right,t.multiplierScore,e,t.multiplierType)),i.push(this.shootMultiplierInDirection(I.Left,t.multiplierScore,e,t.multiplierType)),i.push(this.shootMultiplierInDirection(I.Up,t.multiplierScore,e,t.multiplierType)),i.push(this.shootMultiplierInDirection(I.Down,t.multiplierScore,e,t.multiplierType));return i}shootSkull(){O.instance.playSound(N.Skull);for(var e=this.getHeroPosition().getPoint(),t=this.field.getPositions(function(e){return!e.isHero}),i=[],s=0;s<t.length;s++){var a=t[s],n=a.getPoint();i.push(this.shootSkullInCoordinate(e.x,e.y,n.x,n.y,300));var r=this.getCardToReplaceAfterSmash(this.field.get(a)),o=this.replaceCardByPosition(a,r,!0).setAnimationDuration(1);o.setFirstDelay(350),i.push(o)}return i}shootSkullInCoordinate(e,t,i,s,a){var n=Ke.PoolGet(),r=n.moveTo(e,t,i,s,a);return this.game.container.addChild(n),r.animationDuration=1,r}shootMultiplierInDirection(e,t,i,s){var a=i.getNewPosition(e);return this.shootMultiplierInPosition(a,s,t)}shootMultiplierInPosition(e,t,i){var s=[];if(!this.field.isPositionValid(e))return s;var a=this.field.get(e),n=ge.isCardScoreTypeNegative(a.type);switch(t){case v.MultiplierPositive:case v.AddPositive:if(n)return s;break;case v.MultiplierNegative:case v.AddNegative:if(!n)return s}if(je.canMultiply(a.type,a.getScore())){var r;switch(t){case v.MultiplierPositive:case v.MultiplierNegative:r=a.increaseScore(i,!0);break;case v.AddPositive:case v.AddNegative:r=a.increaseScore(i,!1)}if(!r)return s;r.setAnimationDuration(1),s.push(r)}return s}static canMultiply(e,t){switch(e){case v.Armor:case v.Bomb:case v.Cannon:case v.Gold:case v.Health:case v.Lightning:case v.Poison:case v.Boss:case v.Enemy:case v.Barrel:return!0;case v.Trap:return t>0;case v.Multiplier:case v.MultiplierPositive:case v.MultiplierNegative:case v.AddPositive:case v.AddNegative:case v.Horseshoe:case v.Skull:case v.Chest:case v.Chest:return!1}}stopAllAnimations(){}playAllAnimations(){}smashHero(e){var t=this.getHero();this.addBombExplosionAnimation(t.getCenterX(),t.getCenterY(),e)}shootEquipToHero(e,t){return this.shootEquipToCard(e,this.getHero(),t)}shootEquipToCard(e,t,i){var s=new Laya.Point;return s=e.localToGlobal(0,0),s=this.game.container.displayObject.globalToLocal(s),this.shootToCard(s.x,s.y,t,i)}shootToCard(e,t,i,s){var a=i.getCenterX(),n=i.getCenterY(),r=Xe.PoolGet(),o=r.moveTo(e,t,a,n,s);return this.game.container.addChild(r),o.animationDuration=s,o}findEnemy(e=!1){return this.field.findEnemy(e)}onShootCard(e,t=1,i=!1){var s=[],a=this.field.findPosition(e);if(e.type===v.Cannon)e.increaseScoreInNSeconds(t,400);else if(e.type===v.Barrel){var n=this.getCardFromFactory(G.AfterBarrel,e.getScore());(r=this.replaceCardByPosition(a,n,!0).setAnimationDuration(1)).setFirstDelay(400),s.push(r)}else if(t>=e.getScore()){var r;n=i?this.getEnemyCardFromFactory(t):this.getCardToReplaceAfterSmash(e),(r=this.replaceCardByPosition(a,n,!0).setAnimationDuration(1)).setFirstDelay(400),s.push(r)}else e.reduceScoreInNSeconds(t,400);return s}triggerEffect(e,t,i,s=!1){var a=[];switch(e){case D.TiggerCannonOne:a=this.onShootCard(t,i,s);break;case D.TiggerBomb:a=this.triggerShootBomb(t,i,s);break;case D.TiggerLightning:a=this.triggerShootLightning(t,i,s)}return a}equipTrigger(e){var t=[],i=this.findEnemy(!1);if(i.length>0){O.instance.playSound(N.Cannon);var s=i[Random.rangeBoth(0,i.length-1)],a=this.shootEquipToCard(e.view,s,200);a.onComplete.addOnce(()=>{e.onUse()},this),t.push(a);var n=this.triggerEffect(e.effectTypeId,s,e.effectArg);for(var r of n)t.push(r)}return t}cardTrigger(e,t=D.TiggerCannonOne,i=1,s=0){var a=e.isNegative(),n=[],r=this.findEnemy(a);if(r.length>0){O.instance.playSound(N.Cannon);var o=r[0],l=this.shootToCard(e.getCenterX(),e.getCenterY(),o,200);l.setAnimationDuration(100),n.push(l);var c=this.triggerEffect(t,o,i,a);for(var h of c)n.push(h)}return n}triggerShootLightning(e,t=1,i=!1){var s=this.field.findPosition(e),a=[],n=this.onShootCard(e,t,i);a.push(n);n=this.shootLightningInAllDirections(t,s,L.LightningDuration,i);return a.push(n),this.clearLightning(),a.length>0&&O.instance.playSound(N.Lighting),a}triggerShootBomb(e,t=1,i=!1){var s=[];O.instance.playSound(N.Bomb);var a=this.field.findPosition(e);this.addBombExplosionAnimation(e.view.x,e.view.y,100);var n=this.getCardToReplaceAfterSmash(this.field.get(a)),r=this.replaceCardByPosition(a,n,!0);s.push(r);for(var o=t,l=[I.Up,I.Down,I.Left,I.Right],c=0;c<l.length;c++){var h=l[c];if(s.push(this.smashBombInDirection(h,a,o,i,!1)),!de.isHeroAlive)return s}return s}}!function(e){e[e.Home=1]="Home",e[e.HomeTop=2]="HomeTop",e[e.WarUI=3]="WarUI",e[e.Module=4]="Module",e[e.ModuleTop=5]="ModuleTop",e[e.MainUI=6]="MainUI",e[e.Dialog=7]="Dialog",e[e.Guide=8]="Guide",e[e.Loader=9]="Loader",e[e.GM=10]="GM",e[e.FloatMsg=11]="FloatMsg"}(A||(A={}));class ze{static get dialogModel(){return ze._dialogModel||(ze._dialogModel=new fgui.GComponent),ze._dialogModel}static showDialogModel(){ze.dialog.width=Co.screenSetting.screenWidth,ze.dialog.height=Co.screenSetting.screenHeight,ze.dialogModel.alpha=.8,ze.dialogModel.width=Co.screenSetting.screenWidth,ze.dialogModel.height=Co.screenSetting.screenHeight,ze.dialogModel&&ze.dialog.addChildAt(ze.dialogModel,0)}static resetDialogModelSize(){ze.dialog.width=Co.screenSetting.screenWidth,ze.dialog.height=Co.screenSetting.screenHeight,ze.dialogModel.width=Co.screenSetting.screenWidth,ze.dialogModel.height=Co.screenSetting.screenHeight}static hideDialogModel(){ze.dialogModel&&ze.dialogModel.removeFromParent()}static install(){Laya.stage.addChild(fgui.GRoot.inst.displayObject),ze.root=fgui.GRoot.inst,ze.home=ze.createLayer(A.Home,"MenuLayer-home"),ze.warUI=ze.createLayer(A.WarUI,"MenuLayer-warUI"),ze.module=ze.createLayer(A.Module,"MenuLayer-module"),ze.mainUI=ze.createLayer(A.MainUI,"MenuLayer-mainUI"),ze.dialog=ze.createLayer(A.Dialog,"MenuLayer-dialog"),ze.guide=ze.createLayer(A.Guide,"MenuLayer-guide"),ze.loader=ze.createLayer(A.Loader,"MenuLayer-loader"),ze.gm=ze.createLayer(A.GM,"MenuLayer-gm"),ze.floatMsg=ze.createLayer(A.FloatMsg,"MenuLayer-floatMsg"),ze.dict.add(A.Home,ze.home),ze.dict.add(A.WarUI,ze.warUI),ze.dict.add(A.Module,ze.module),ze.dict.add(A.MainUI,ze.mainUI),ze.dict.add(A.Dialog,ze.dialog),ze.dict.add(A.Guide,ze.guide),ze.dict.add(A.Loader,ze.loader),ze.dict.add(A.GM,ze.gm),ze.dict.add(A.FloatMsg,ze.floatMsg)}static getLayer(e){return ze.dict.getValue(e)}static createLayer(e,t){let i=ze.root,s=new fgui.GRoot;if(s.menuLayer=e,t&&(s.name=t),Engine.borwer.isLiuHai)switch(e){case A.Loader:s.x=0,s.y=0,s.setSize(i.width,i.height);break;default:Co.screenSetting.isLandsape?(s.x=Co.screenSetting.liuHaiHeightTop,s.setSize(Co.screenSetting.screenWidthLiuHai,i.height)):(s.y=Co.screenSetting.liuHaiHeightTop,s.setSize(i.width,i.height-Co.screenSetting.screenHeightLiuHai))}else s.setSize(i.width,i.height);return i.addChild(s),s}static getLayerHeight(e){if(Engine.borwer.isLiuHai)switch(e){case ze.loader:return Co.screenSetting.screenHeight;default:return Co.screenSetting.screenHeightLiuHai}return Co.screenSetting.screenHeight}static getLayerWidth(e){if(Engine.borwer.isLiuHai)switch(e){case ze.loader:return Co.screenSetting.screenWidth;default:return Co.screenSetting.screenWidthLiuHai}return Co.screenSetting.screenWidth}}ze.dict=new Dictionary,window.MenuLayer=ze;class Ye{}Ye.GameHome="GameHome",Ye.GameLaunch="GameLaunch",Ye.ModuleLogin="ModuleLogin",Ye.Sound="Sound";class $e{}$e.MVMouseClick="MVMouseClick";class Je{constructor(){this._isInstalled=!1,this._lastTime=0,this.gap=100}install(){this._isInstalled||(this._isInstalled=!0,Laya.stage.on(Laya.Event.MOUSE_DOWN,this,this.onMouseDown))}uninstall(){Laya.stage.off(Laya.Event.MOUSE_DOWN,this,this.onMouseDown)}onMouseDown(e){if(Qe.showCount<10&&Laya.timer.currTimer-this._lastTime>this.gap){let t=Qe.poolGet();t.setXY(e.stageX,e.stageY),t.show(),this._lastTime=Laya.timer.currTimer}}}class Qe{constructor(){this.halfWidth=100,this.halfHeight=100,this.fx=fgui.UIPackage.createObject(Ye.GameHome,$e.MVMouseClick),this.fx.displayObject.blendMode=Laya.BlendMode.ADD,this.halfWidth=this.fx.width>>1,this.halfHeight=this.fx.height>>1}show(){Qe.showCount++,this.fx.setPlaySettings(0,-1,1,-1,Laya.Handler.create(this,this.hide,null,!0)),ze.floatMsg.addChild(this.fx)}hide(){this.fx.removeFromParent(),this.poolRecover(),Qe.showCount--}setXY(e,t){e-=this.halfWidth,t-=this.halfHeight,this.fx.setXY(e,t)}poolRecover(){Qe._poolRecover(this)}static poolGet(){let e;return e=Qe.pool.length>0?Qe.pool.pop():new Qe}static _poolRecover(e){-1==this.pool.indexOf(e)&&this.pool.push(e)}}Qe.showCount=0,Qe.pool=[];class Ze{constructor(){this.items={},this.count=0}reset(){this.items={},this.count=0}ContainsKey(e){return this.items.hasOwnProperty(e)}Count(){return this.count}Add(e,t){this.items.hasOwnProperty(e)||this.count++,this.items[e]=t}Remove(e){var t=this.items[e];return delete this.items[e],this.count--,t}Item(e){return this.items[e]}Keys(){var e=[];for(var t in this.items)this.items.hasOwnProperty(t)&&e.push(t);return e}Values(){var e=[];for(var t in this.items)this.items.hasOwnProperty(t)&&e.push(this.items[t]);return e}}class et{constructor(e=.2,t=.2,i=!1){this.status=new Ze,this.initialStatus=new Ze,this.updateVal=.2,this.step=.2,this.resetToZero=!1,this.updateVal=e,this.step=t,this.resetToZero=i}reset(e=.2,t=.2,i=!1){this.status.reset(),this.initialStatus.reset(),this.updateVal=e,this.step=t,this.resetToZero=i}fillBasket(e,t){for(var i=e;i<=t;i++){var s=3-(i-1)*this.step;this.initialStatus.ContainsKey(i.toString())||(this.initialStatus.Add(i.toString(),s),this.status.Add(i.toString(),s))}}fillBasketWithStep(e,t,i,s){this.fillBasket(e,ue.clamp(t+Math.floor(de.gameLevel/i),e,s))}getFromBasket(){for(var e=this.status.Values().reduce(function(e,t){return e+t}),t=Math.random()*e,i=0,s=0,a=this.status.Keys();s<a.length;s++){var n=a[s],r=this.status.Item(n);if(t>i&&t<r+i)return this.removeFromBasket(n),n;i+=r}throw new Error("Item not found in the basked")}removeFromBasket(e){this.status.Keys().forEach(t=>{t===e?this.resetToZero?this.status.Add(e,0):this.status.Add(e,this.initialStatus.Item(e)):this.status.Add(t,this.status.Item(t)+this.updateVal)})}static AfterChestBasket(){var e=new et(.5,.2,!0);return e.add(v.Horseshoe.toString(),1),e.add(v.Bomb.toString(),1),e.add(v.Lightning.toString(),1),e.add(v.Skull.toString(),1),e.add(v.MultiplierPositive.toString(),1),e.add(v.AddNegative.toString(),1),e}add(e,t){this.status.Add(e,t),this.initialStatus.Add(e,t)}print(e){this.status.Values().reduce(function(e,t){return e+t});for(var t=0,i=this.status.Keys();t<i.length;t++){var s=i[t];this.status.Item(s),this.initialStatus.Item(s)}console.groupEnd()}}class tt{static reset(){this.PositiveCardProbability=0,this.CurrentPositiveCardProbability=0,this.ChanceOfNegativeFromBox=0,this.ChanceOfPositiveFromBox=0}}tt.PositiveCardProbability=0,tt.CurrentPositiveCardProbability=0,tt.ChanceOfNegativeFromBox=0,tt.ChanceOfPositiveFromBox=0;class it{constructor(e){this.movesAfterLastSpecialCard=0,this.healthBasket=new et,this.armorBasket=new et,this.cannonBasket=new et,this.enemyBasket=new et,this.goldBasket=new et,this.chestBasket=et.AfterChestBasket(),this.game=e,this.container=e.container}reset(){this.healthBasket.reset(),this.armorBasket.reset(),this.cannonBasket.reset(),this.enemyBasket.reset(),this.goldBasket.reset(),this.chestBasket.reset(),this.chestBasket=et.AfterChestBasket()}getDefault(){return Le.GetDefault(this.game)}getHero(){var e=Co.config.card.getTypeLevelConfig(v.Hero,de.currentHero),t=new Ue;return t.game=this.game,t.type=v.Hero,t.SetConfig(e),t.setShopItemsStatus(),t.totalLife=10,t.currentLife=10,t.armor=0,de.isHorseshoe&&(t.totalLife+=1,t.currentLife+=1),t.setStatus(),this.movesAfterLastSpecialCard++,t}getCard(e=G.Random,t,i){return de.isNeedCreateBoss&&e==G.Random?(de.isNeedCreateBoss=!1,this.getBoss()):de.isNeedCreateChest&&e==G.Random?(de.isNeedCreateChest=!1,this.getChestCard()):this.generateCardType(e,i)==y.Warrior?this.getEnemy(t):this.getPowerUp(e,t,i)}getHealth(e){var t=v.Health,i=1;return e<=5&&(i=2),Le.GetNew(this.game,t,i,e)}generateCardType(e,t){if(e==G.AfterBarrel&&de.currentHero==T.Key)return y.PowerUp;if(e==G.AfterChest||e==G.Positive)return y.PowerUp;if(e==G.AfterBarrel&&Math.random()<.75)return y.PowerUp;if(tt.reset(),de.cardCounter>2){var i=Math.random();if(tt.ChanceOfNegativeFromBox=i,i<.8)return y.Warrior}if(de.cardCounter<-3){var s=Math.random();if(tt.ChanceOfPositiveFromBox=s,s<.8)return y.PowerUp}return it.isShouldBePositiveCard(t)?y.PowerUp:y.Warrior}static isShouldBePositiveCard(e){var t=e.filter(ge.isCardScoreTypePositive).length,i=e.filter(ge.isCardScoreTypeNegative).length;if(!de.isFourXFour&&Math.random()<.85&&t<=1)return Math.random()<.8;if(de.isFourXFour&&Math.random()<.85&&t<=2)return Math.random()<.8;var s=Math.min(.35,.4-.01*de.levelStep),a=i*(de.isFourXFour?.02:.03),n=ue.clamp(s+a,.2,.75),r=Math.random();return tt.PositiveCardProbability=n,tt.CurrentPositiveCardProbability=r,r<n}getPowerUp(e,t,i){var s=this.generatePowerUpType(e,i),a=1;t=this.generateCardScore(s,t);switch(s){case v.Armor:a=Gt.getArmorLevel(t)}return Le.GetNew(this.game,s,a,t)}generateCardScore(e,t=0){if(0==t)switch(e){case v.Armor:this.armorBasket.fillBasketWithStep(1,4,3,10),t=Number(this.armorBasket.getFromBasket());break;case v.Health:this.healthBasket.fillBasketWithStep(1,4,3,10),t=Number(this.healthBasket.getFromBasket());break;case v.Cannon:this.cannonBasket.fillBasketWithStep(1,1,3,10),t=Number(this.cannonBasket.getFromBasket()),de.currentHero==T.Bomb&&(t+=2);break;case v.Barrel:t=this.generateScore(2,4,3,10);break;case v.Poison:var i=1+Math.ceil(de.gameLevel/2);t=i>10?10:i;break;case v.Lightning:t=this.generateScore(1,4,3,10);break;case v.Gold:this.goldBasket.fillBasketWithStep(1,4,2,1e3),t=Number(this.goldBasket.getFromBasket());break;default:t=this.game.rnd.integerInRange(1,5)}switch(e===v.Bomb&&(t=this.game.rnd.integerInRange(1,4+Math.ceil(de.gameLevel/2)))>10&&(t=10),e===v.Multiplier&&(t=2),e){case v.MultiplierNegative:case v.MultiplierPositive:t=2;break;case v.AddNegative:case v.AddPositive:t=1}return t}generateScore(e,t,i,s){var a=t+Math.ceil(de.gameLevel/i),n=this.game.rnd.integerInRange(e,a);return ue.clamp(n,e,s)}getEnemy(e){var t=this.generateEnemyPower(e);return L.IsDev&&this.enemyBasket.print("Enemy"),0==e&&(e=t,de.gameLevel>10&&(e+=Math.floor((de.gameLevel-10)/2))),0==t?this.getTrap(e+1):10==t?this.getPoison(e):this.getWarrior(t,e)}getPoison(e){return Le.GetNew(this.game,v.Poison,1,e)}getTrap(e){return Le.GetNew(this.game,v.Trap,1,e)}getWarrior(e,t){var i=0;return de.stepCardNum<=0&&de.gameLevel>=8&&(i=3),Le.GetNew(this.game,v.Enemy,e,t,i)}static getTrapScore(){return de.currentHero==T.Gun?0:1+U.getRandomIntInclusive(0,Math.ceil(de.gameLevel/4))}getBoss(){var e=it.generateBossPower(),t=8+de.gameLevel,i=0;return de.gameLevel>8&&(i=3),Le.GetNew(this.game,v.Boss,e,t,i)}getChestCard(){return Le.GetNew(this.game,v.Chest,1,0)}getCoinCard(e){var t=v.Gold;0===e&&(e=this.generateCardScore(t));var i=e<6?1:2;return Le.GetNew(this.game,t,i,e)}static generateBossPower(){return U.getRandomIntInclusive(1,3)}generatePowerUpType(e,t){return e==G.AfterChest?this.generatePowerUpTypeFromChest():e==G.AfterBarrel?it.generatePowerUpTypeFromBarrel(t):it.generatePowerUpCardScoreType(t)}generatePowerUpTypeFromChest(){return Number(this.chestBasket.getFromBasket())}static generatePowerUpTypeFromBarrel(e){return it.generateFromBasket(e,ge.getRandomPowerUpFromBarrel,this.maxPowerUpNumber())}static generatePowerUpCardScoreType(e){return it.generateFromBasket(e,ge.getRandomPowerUp,this.maxPowerUpNumber())}static generateFromBasket(e,t,i){for(var s,a=e=>e===s,n=0;n<10&&(s=t(),!(e.filter(a).length<i));n++);return s}static maxPowerUpNumber(){return U.getRandomIntInclusive(1,2)}generateEnemyPower(e){if(this.enemyBasket.fillBasketWithStep(0,4,2,10),0==e)return Number(this.enemyBasket.getFromBasket());var t=ue.clamp(e,0,10);return this.enemyBasket.removeFromBasket(t.toString()),t}}class st{constructor(e=[]){this.c=1,this.s0=0,this.s1=0,this.s2=0,"string"==typeof e?this.state(e):this.sow(e)}reset(e=[]){this.c=1,this.s0=0,this.s1=0,this.s2=0,"string"==typeof e?this.state(e):this.sow(e)}rnd(){var e=2091639*this.s0+2.3283064365386963e-10*this.c;return this.c=0|e,this.s0=this.s1,this.s1=this.s2,this.s2=e-this.c,this.s2}sow(e){if(this.s0=this.hash(" "),this.s1=this.hash(this.s0),this.s2=this.hash(this.s1),this.c=1,e)for(var t=0;t<e.length&&null!=e[t];t++){var i=e[t];this.s0-=this.hash(i),this.s0+=~~(this.s0<0),this.s1-=this.hash(i),this.s1+=~~(this.s1<0),this.s2-=this.hash(i),this.s2+=~~(this.s2<0)}}hash(e){var t,i,s;for(s=4022871197,e=e.toString(),i=0;i<e.length;i++)t=.02519603282416938*(s+=e.charCodeAt(i)),t-=s=t>>>0,s=(t*=s)>>>0,s+=4294967296*(t-=s);return 2.3283064365386963e-10*(s>>>0)}integer(){return 4294967296*this.rnd.apply(this)}frac(){return this.rnd.apply(this)+1.1102230246251565e-16*(2097152*this.rnd.apply(this)|0)}real(){return this.integer()+this.frac()}integerInRange(e,t){return Math.floor(this.realInRange(0,t-e+1)+e)}between(e,t){return this.integerInRange(e,t)}realInRange(e,t){return this.frac()*(t-e)+e}normal(){return 1-2*this.frac()}uuid(){for(var e=0,t="";e++<36;t+=~e%5|3*e&4?(15^e?8^this.frac()*(20^e?16:4):4).toString(16):"-");return t}pick(e){return e[this.integerInRange(0,e.length-1)]}sign(){return this.pick([-1,1])}weightedPick(e){return e[~~(Math.pow(this.frac(),2)*(e.length-1)+.5)]}timestamp(e,t){return this.realInRange(e||9466848e5,t||1577862e6)}angle(){return this.integerInRange(-180,180)}state(e){return"string"==typeof e&&e.match(/^!rnd/)&&(e=e.split(","),this.c=parseFloat(e[1]),this.s0=parseFloat(e[2]),this.s1=parseFloat(e[3]),this.s2=parseFloat(e[4])),["!rnd",this.c,this.s0,this.s1,this.s2].join(",")}}class at{constructor(){this.isUp=!1,this.isDown=!1,this.isLeft=!1,this.isRight=!1,this.isSpace=!1}init(e){this.game=e}reset(){this.isUp=!1,this.isDown=!1,this.isLeft=!1,this.isRight=!1,this.isSpace=!1}getMoveType(){return this.isDown?I.Down:this.isLeft?I.Left:this.isRight?I.Right:this.isUp?I.Up:void 0}isPressed(){return this.isUp||this.isDown||this.isLeft||this.isRight||this.isSpace}StartListenKeyboard(){Laya.stage.on(Laya.Event.KEY_UP,this,this.OnKeyboard)}StopListenKeyboard(){Laya.stage.off(Laya.Event.KEY_UP,this,this.OnKeyboard)}OnKeyboard(e){switch(e.keyCode){case Laya.Keyboard.LEFT:case Laya.Keyboard.A:this.reset(),this.isLeft=!0;break;case Laya.Keyboard.RIGHT:case Laya.Keyboard.D:this.reset(),this.isRight=!0;break;case Laya.Keyboard.UP:case Laya.Keyboard.W:this.reset(),this.isUp=!0;break;case Laya.Keyboard.DOWN:case Laya.Keyboard.S:this.reset(),this.isDown=!0}}OnClickCard(e){if(!e.isEmpty&&!e.isHero){var t=this.game.field.field.findHeroPosition(),i=this.game.field.field.findPosition(e);if(i){if(t.row==i.row)1==(s=i.column-t.column)?(this.reset(),this.isRight=!0):-1==s&&(this.reset(),this.isLeft=!0);else if(t.column==i.column){var s;1==(s=i.row-t.row)?(this.reset(),this.isDown=!0):-1==s&&(this.reset(),this.isUp=!0)}}else console.error("OnClickCard position=null",e.type)}}}class nt{constructor(){this._isShaking=!1,this._startTime=0,this._offsetPos=[0,0],this.shank_I=0,this._orgX=0,this._orgY=0}exe(e,t=30,i=300,s=6){this._isShaking||(this._isShaking=!0,this._startTime=Laya.timer.currTimer,this._offsetPos=[0,0],this.shank_I=0,this._target=e,this._orgX=e.x,this._orgY=e.y,Laya.timer.loop(t,this,this._pos,[i,s]))}_pos(e,t){this._offsetPos[this.shank_I%2]=this._offsetPos[this.shank_I%2]>0?-t:t,this.shank_I++,this._target.x+=this._offsetPos[0],this._target.y+=this._offsetPos[1],Laya.timer.currTimer-this._startTime>=e&&(Laya.timer.clearAll(this),this.shank_I=0,this._isShaking=!1,this._target.x=this._orgX,this._target.y=this._orgY,this._target=null)}}class rt{constructor(){this.shakeHandler=new nt,this.animationQueue=[],this.keyboardManager=new at,this.isAnimationing=!1,this.isPause=!1,this.isChest=!1,this.isUplevel=!1}init(e){window.game=this,this.windowUI=e,this.container=e.m_container,this.stageClickFx=new Je,this.keyboardManager.init(this),this.rnd=new st([(Date.now()*Math.random()).toString()]),this.cardFactory=new it(this),this.field=new je(this),Re.current.game=this}testCardViews(){for(var e=Co.config.card.getConfigList(),t=0,i=e.length;t<i;t++){var s=e[t],a=It.PoolGet();a.SetConfig(s),this.container.addChild(a);var n=t%5*a.width+.5*a.width,r=Math.floor(t/5)*a.height;a.setXY(n,r),console.log(t,n,r,s.name,s.id)}this.container.setScale(.5,.5)}launch(){this.rnd.reset([(Date.now()*Math.random()).toString()]),this.cardFactory.reset(),Re.current.reset(),He.OnWar(4==de.ColumnCount),de.init(),this.container.width=de.ColumnCount*L.CardWidth+(de.ColumnCount-1)*L.CardSpaceBetweenWidth,this.container.height=de.RowCount*L.CardHeight+(de.RowCount-1)*L.CardSpaceBetweenHeight;var e=(3*L.CardWidth+2*L.CardSpaceBetweenWidth)/this.container.width;this.container.setScale(e,e),this.stageClickFx.install(),this.keyboardManager.StartListenKeyboard(),this.animationQueue=this.field.initField(),Laya.timer.frameLoop(1,this,this.update),this.isUplevel=!1,Re.current.sUpLevelChange.add(this.onUplevel,this),this.windowUI.m_uplevelPanel.Close()}uninstall(){this.isUplevel=!1,Re.current.sUpLevelChange.remove(this.onUplevel,this),Laya.timer.clear(this,this.update),this.stageClickFx.uninstall(),this.keyboardManager.StopListenKeyboard(),this.field.uninstall();for(var e=this.container.numChildren-1;e>=0;e--){var t=this.container.getChildAt(e),i=t.PoolRecover;i&&i.call(t),t.parent&&t.removeFromParent()}this.container}update(){this.isPause||this.isAnimationing||(this.animationQueue.length>0?this.runAnimationFromQueue():this.fillQueue())}playAllAnimations(){for(;this.animationQueue.length>0;)this.runAnimationFromQueue()}runAnimationFromQueue(){var e=this.animationQueue.shift();if(e instanceof _){var t=e.animationDuration;this.isAnimationing=!0,e.restart(),setTimeout(this.onAnimationComplete.bind(this),t)}else console.error(e),this.onAnimationComplete()}onAnimationComplete(){this.isAnimationing=!1,this.keyboardManager.reset()}debugPlayerTrigger(){var e=Re.current.debugCheckTrigger();e&&e.length>0&&this.addToAnimationQueue(e)}fillQueue(){if(de.isHeroAlive){var e=this.field.getHero();if(null==e)return void this.setGameOver();if(e.currentLife>0&&this.checkCardStep())return;var t=Re.current.checkTrigger();if(t&&t.length>0)return void this.addToAnimationQueue(t);if(e.needShoot)return this.addToAnimationQueue(this.field.shootCannon()),void(e.needShoot=!1);if(e.needRunLightning)return this.addToAnimationQueue(this.field.shootLightning()),void(e.needRunLightning=!1);if(e.needShootMultiplier)return this.addToAnimationQueue(this.field.shootMultiplier()),void(e.needShootMultiplier=!1);if(e.needShootSkull)return this.addToAnimationQueue(this.field.shootSkull()),void(e.needShootSkull=!1);this.addToAnimationQueue(this.field.smashBomb()),this.isUplevel&&(this.addToAnimationQueue(this.openUplevelPanel()),this.isUplevel=!1),this.checkKeyHandler()}else de.isGameEnd||this.setGameEnd()}onUplevel(){this.isUplevel=!0}setGameOver(){de.isHeroAlive=!1,this.addToAnimationQueue(this.field.removeAllChild()),this.isPause=!1}setGameEnd(){de.resetShop(),de.isGameEnd=!0,Tt.exit()}addToAnimationQueue(e){if(null!=e)if(e instanceof Array)for(var t of e)null!=t&&(t instanceof Array?this.addToAnimationQueue(t):this.animationQueue.push(t));else this.animationQueue.push(e)}checkKeyHandler(){var e=this.keyboardManager.getMoveType();if(e){var t=this.move(e);t&&t.length>0?(this.field.stepUpdate(),this.addToAnimationQueue(t)):this.keyboardManager.reset()}}checkCardStep(){for(var e=!1,t=0,i=this.field.field.getAll();t<i.length;t++){var s=i[t];if(s.stepMax>0&&0==s.step){var a=this.field.cardTrigger(s,D.TiggerCannonOne,1,200);a&&a.length>0&&(this.addToAnimationQueue(a),s.step=s.stepMax,s.setStepText(),e=!0)}}return e}move(e){var t=this.field.getCardToFight(e);if(null==t)return[];var i,s=this.field.getHero(),a=s.fight(t);if(!a.isHeroAlive)return de.isHeart?(de.isHeart=!1,this.keyboardManager.reset(),s.useHeart(),this.field.move(e)):(de.isHeroAlive=!1,this.field.removeAllChild());if(a.isChest)return this.moveType=e,Re.current.autoUnlockChest()||de.currentHero==T.Key?this.chestOpened():de.isKey?(this.chestOpened(),this.field.getHero().setShopItemsStatus()):this.openChestPopUp(),[];var n=[];if(de.stepUpdate(),a.isNeedIncreaseLifeByOne&&((i=_.PoolGet()).tweens.push(this.field.getHero().increaseLifeByOneTween()),n.push(i)),a.isMove){n.push(this.field.move(e));for(var r=0,o=this.field.field.getAll();r<o.length;r++){var l=o[r];l.step>0&&(l.step--,l.setStepText())}}else{i=_.PoolGet();var c=this.field.replaceCard(e,G.AfterBarrel,t.getScore());i.tweens.push(c),n.push(i)}return a.isNeedIncreaseLifeByOneAfterBoss&&n.push(this.field.getHero().increaseLifeByOneTween()),this.isUplevel&&(n.push(this.openUplevelPanel()),this.isUplevel=!1),this.isChangeTurnsToBoss()&&de.decreaseTurnsToBoss(),n}isChangeTurnsToBoss(){return!de.isNeedCreateBoss&&!this.field.isBossInTheField()}shake(e,t){this.shakeHandler.exe(this.windowUI,e,t)}openUplevelPanel(){var e=_.PoolGet();return e.animationDuration=200,e.onComplete.addOnce(()=>{this.windowUI.m_uplevelPanel.Open()},this),e}openChestPopUp(){this.isPause||this.isChest||(this.isChest=!0,this.windowUI.m_chectPopupPanel.sResult.addOnce(e=>{e?this.chestOpened():this.chestClosed()},this),this.windowUI.m_chectPopupPanel.Open())}chestOpened(){O.instance.playSound(N.ChestOpening),this.isChest=!1,this.playAllAnimations(),this.chestOpenedAction()}chestOpenedAction(){this.destroyChestDelayed(),this.addToAnimationQueue(this.field.replaceCard(this.moveType,G.AfterChest)),de.stepUpdate(),this.isChangeTurnsToBoss(),de.decreaseTurnsToBoss()}destroyChestDelayed(e=1){setTimeout(this.destroyChest.bind(this),e)}destroyChest(){}chestClosed(){this.isChest=!1;var e=4==de.RowCount?1e3:500;this.shake(L.ShakeIntensity,e),this.field.smashHero(600),this.playAllAnimations(),this.destroyChestDelayed(500);var t=this.field.getHero();de.currentHero!=T.Bomb&&t.reduceScoreInNSeconds(1,1),0==t.getScore()?(this.addToAnimationQueue(this.field.removeAllChild()),de.isHeroAlive=!1):this.addToAnimationQueue(this.field.move(this.moveType)),de.stepUpdate(),this.isChangeTurnsToBoss()&&de.decreaseTurnsToBoss()}}class ot extends fgui.Window{constructor(){super(...arguments),this.isAddedStage=!1}get isShowed(){return!!this.contentPane&&null!=this.parent}onWindowWillShow(){this.contentPane&&this.callChildOnWindowWillShow(this.contentPane),this.setScreenSize(),this.isAddedStage||(this.isAddedStage=!0,Laya.stage.on(Laya.Event.RESIZE,this,this.setScreenSize))}onWindowWillHide(){this.contentPane&&this.callChildOnWindowWillHide(this.contentPane),this.isAddedStage=!1,Laya.stage.off(Laya.Event.RESIZE,this,this.setScreenSize)}setScreenSize(){this.contentPane&&(this.windowContainer&&void 0!==this.windowContainer.menuLayer?Co.screenSetting.isLandsape?(this.width=ze.getLayerWidth(this.windowContainer.menuLayer),this.height=this.windowContainer.height,this.contentPane.width=this.width,this.contentPane.height=this.height):(this.width=this.windowContainer.width,this.height=ze.getLayerHeight(this.windowContainer.menuLayer),this.contentPane.width=this.width,this.contentPane.height=this.height):(this.width=Co.screenSetting.screenWidth,this.height=Co.screenSetting.screenHeight,this.contentPane.width=Co.screenSetting.screenWidth,this.contentPane.height=Co.screenSetting.screenHeight),this.callChildOnWindowResize(this.contentPane))}callChildOnWindowWillShow(e){if(e){let t=e.onWindowWillShow;if(t&&t.apply(e),e._children)for(let t=0;t<e._children.length;t++)this.callChildOnWindowWillShow(e._children[t])}}callChildOnWindowWillHide(e){if(e){let t=e.onWindowWillHide;if(t&&t.apply(e),e._children)for(let t=0;t<e._children.length;t++)this.callChildOnWindowWillHide(e._children[t])}}callChildOnWindowResize(e){if(e){let t=e.onWindowResize;if(t&&t.apply(e),e._children)for(let t=0;t<e._children.length;t++)this.callChildOnWindowResize(e._children[t])}}}!function(e){e[e.FguiPackage=0]="FguiPackage",e[e.FspritePackage=1]="FspritePackage",e[e.Image=2]="Image",e[e.TEXTURE2D=3]="TEXTURE2D",e[e.Buffer=4]="Buffer",e[e.Sound=5]="Sound",e[e.Text=6]="Text",e[e.Json=7]="Json",e[e.Xml=8]="Xml",e[e.Font=9]="Font",e[e.TTF=10]="TTF",e[e.PKM=11]="PKM"}(H||(H={}));var lt,ct=Laya.Loader;class ht{static get layaLoaderType2AssetItemTypeDict(){if(!ht._layaLoaderType2AssetItemTypeDict){let e=new Dictionary;e.add(ct.IMAGE,H.Image),e.add(ct.TEXTURE2D,H.TEXTURE2D),e.add(ct.BUFFER,H.Buffer),e.add(ct.SOUND,H.Sound),e.add(ct.TEXT,H.Text),e.add(ct.JSON,H.Json),e.add(ct.XML,H.Xml),e.add(ct.FONT,H.Font),e.add(ct.TTF,H.TTF),ht._layaLoaderType2AssetItemTypeDict=e}return ht._layaLoaderType2AssetItemTypeDict}static get assetItemType2LayaLoaderTypeDict(){if(!ht._assetItemType2LayaLoaderTypeDict){let e=this.layaLoaderType2AssetItemTypeDict.__getDict(),t=new Dictionary;for(let i in e)t[e[i]]=e;ht._assetItemType2LayaLoaderTypeDict=t}return ht._assetItemType2LayaLoaderTypeDict}static layaLoaderType2AssetItemType(e){return ht.layaLoaderType2AssetItemTypeDict.getValue(e)}static assetItemType2LayaLoaderType(e){return ht.assetItemType2LayaLoaderTypeDict.getValue(e)}static getAssetItemKey(e){return e.type+" "+e.url}}!function(e){e[e.None=0]="None",e[e.Tab=2]="Tab",e[e.Subwindow=3]="Subwindow"}(lt||(lt={}));class ut{}ut.Test="Test",ut.GameBattle_onSyncNormal="GameFrame_onSyncNormal",ut.GameBattle_onSyncChasingFrame="GameBattle_onSyncChasingFrame",ut.GameBattle_onEntityCreate="GameBattle_onEntityCreate",ut.GameBattle_onEntityRemove="GameFrame_onEntityRemove",ut.GameBattle_onEntityRollbackBegin="GameFrame_onEntityRollbackBegin",ut.GameBattle_onEntityRollbackEnd="GameBattle_onEntityRollbackEnd",ut.GameBattle_onShowDamageUI="GameBattle_onShowDamageUI",ut.GameBattle_onShowHitUI="GameFrame_onShowHitUI",ut.GameBattle_onShakeScreen="GameFrame_onShakeScreen",ut.GameBattle_onScreenScale="GameBattle_onScreenScale",ut.GameBattle_onScreenMove="GameBattle_onScreenMove",ut.GameBattle_onAnimNotify="GameFrame_onAnimNotify",ut.GameBattle_onChangeNotify="GameFrame_onChangeNotify",ut.GameBattle_onCharacterBorn="GameBattle_onCharacterBorn",ut.GameBattle_OnViewAlphaChange="GameBattle_OnViewAlphaChange",ut.GameBattle_onPlaySound="GameFrame_onPlaySound",ut.GameBattle_onPlaySoundBehit="GameFrame_onPlaySoundBehit",ut.GameBattle_onTiggerEffectScreenShow="GameBattle_onTiggerEffectScreenShow",ut.GameBattle_onTiggerEffectScreenHide="GameBattle_onTiggerEffectScreenHide",ut.GameBattle_onSceneFadeOut="GameFrame_onSceneFadeOut",ut.GameBattle_onTiggerUIScreenShow="GameBattle_onTiggerUIScreenShow",ut.GameBattle_onTiggerUIScreenHide="GameBattle_onTiggerUIScreenHide",ut.GameBattle_onTriggerChangeSceneBg="GameBattle_onTriggerChangeSceneBg",ut.GameBattle_onBossAppear="GameBattle_onBossAppear",ut.GameBttle_showBossSpecialView="GameBttle_showBossSpecialView",ut.GameBattle_onShowGameStart="GameBattle_onShowGameStart",ut.GameBattle_onServerError2300="GameBattle_onServerError2300",ut.GameBattle_MonsterCreater="GameBattle_nextAirWallMonster",ut.GameBattle_WaveChange="GameBattle_WaveChange",ut.GameBattle_MonsterHpChange="GameBattle_MonsterHpChange",ut.GameBattle_EntityTeleport="GameBattle_EntityTeleport",ut.GameBattle_PlayerRevive="GameBattle_PlayerRevive",ut.GameBattle_EntityDead="GameBattle_EntityDead",ut.GameFrame_OpenMenu="GameFrame_OpenMenu",ut.GameFrame_CloseMenu="GameFrame_CloseMenu",ut.GameFrame_ReLoginData_Begin="GameFrame_ReLoginData_Begin",ut.GameFrame_ReLoginData_End="GameFrame_ReLoginData_End",ut.GameFrame_Everyday_Update="GameFrame_Everyday_Update",ut.GameFrame_HideOpenDialog="GameFrame_HideOpenDialog",ut.GameFrame_ShowOpenDialog="GameFrame_ShowOpenDialog",ut.GameFrame_TeamMemberNetStateChange="GameFrame_TeamMemberStateChange",ut.GameFrame_TeamMemberLeave="GameFrame_TeamMemberLeave",ut.GameFrame_UseItem="GameFrame_UseItem",ut.GameFrame_ConsumeItem="GameFrame_ConsumeItem",ut.GameFrame_HeroLevelUp="GameFrame_HeroLevelUp",ut.GameFrame_HeroStarUp="GameFrame_HeroStarUp",ut.GameFrame_AddHero="GameFrame_AddHero",ut.GameFrame_HeroSkillLevel="GameFrame_HeroSkillLevel",ut.GameFrame_HeroLeveling="GameFrame_HeroLeveling",ut.GameFrame_UpdateEXP="GameFrame_UpdateEXP",ut.GameFrame_UpdateProp="GameFrame_UpdateProp",ut.GameFrame_BackUpData="GameFrame_BackUpData",ut.GameFrame_RestoreData="GameFrame_RestoreData",ut.GameFrame_ItemExceedBound="GameFrame_ItemExceedBound",ut.GameFrame_LevelExceedBound="GameFrame_LevelExceedBound",ut.GameFrame_LevelExceedMaxLevelInLoop="GameFrame_LevelExceedMaxLevelInLoop",ut.GameFrame_EquipStarUp="GameFrame_EquipStarUp",ut.GameFrame_EquipLevelUp="GameFrame_EquipLevelUp",ut.GameFrame_EquipQualitySelect="GameFrame_EquipQualitySelect",ut.GameFrame_EquipQualitySort="GameFrame_EquipQualitySort",ut.GameFrame_EquipItemSelect="GameFrame_EquipItemSelect",ut.GameFrame_HeroSelectEquip="GameFrame_HeroSelectEquip",ut.GameFrame_BattlePlanDataUpdate="GameFrame_BattlePlanDataUpdate",ut.GameFrame_BattlePlanUnlockNewTeam="GameFrame_BattlePlanUnlockNewTeam",ut.GameFrame_BattlePlanChangeTeamName="GameFrame_BattlePlanChangeTeamName",ut.GameFrame_BattlePlanChangeHero="GameFrame_BattlePlanChangeHero",ut.GameFrame_BattlePlanTeamCentern="GameFrame_BattlePlanTeamCentern",ut.GameFrame_BattlePlanUnlockNewHeroChair="GameFrame_BattlePlanUnlockNewHeroChair",ut.GameFrame_BattlePlanSelectedTeam="GameFrame_BattlePlanSelectedTeam",ut.GameFrame_BattlePlanSecondHero="GameFrame_BattlePlanSecondHero",ut.GameFrame_BattlePlanRefreshCommonSkill="GameFrame_BattlePlanRefreshCommonSkill",ut.GameFrame_HomeWindowBattleStartBtn="GameFrame_HomeWindowBattleStartBtn",ut.GameFrame_HeroWindowEquipPanel="GameFrame_HeroWindowEquipPanel",ut.GameFrame_HeroPanelBack="GameFrame_HeroPanelBack",ut.Gameframe_HeroEquipClose="Gameframe_HeroEquipClose",ut.GameFrame_BattleEnterOnClick="GameFrame_BattleEnterOnClick",ut.GameFrame_SectionEnterOnClick="GameFrame_SectionEnterOnClick",ut.GameFrame_SectionDeltaEnterOnClick="GameFrame_SectionDeltaEnterOnClick",ut.GameFrame_BattlePlanEnter="GameFrame_BattlePlanEnter",ut.GameFrame_GuideJoystickFinish="GameFrame_GuideJoystickFinish",ut.GameFrame_BattleOneWave="GameFrame_GuideAttackStart",ut.GameFrame_GuideAttackFinish="GameFrame_GuideAttackFinish",ut.GameFrame_GuideFirSkillStart="GameFrame_GuideFirSkillStart",ut.GameFrame_GuideFirSkillEnd="GameFrame_GuideFirSkillEnd",ut.GameFrame_GuideBattleEndRemove="GameFrame_GuideBattleEndRemove",ut.GameFrame_SectionBackBtnOnClick="GameFrame_SectionBackBtnOnClick",ut.GameFrame_HomeHeroBtnOnClick="GameFrame_HomeHeroBtnOnClick",ut.GameFrame_HeroPanelChooseHero="GameFrame_HeroPanelChooseHero",ut.GameFrame_HeroBattleChooseHero="GameFrame_HeroBattleChooseHero",ut.GameFrame_HeroBattleHero="GameFrame_HeroBattleHero",ut.GameFrame_HeroInfoShowAddExpPanel="GameFrame_HeroInfoShowAddExpPanel",ut.GameFrame_HeroExpIncreaseByItem="GameFrame_HeroExpIncreaseByItem",ut.GameFrame_HeroChooseFinish="GameFrame_HeroChooseFinish",ut.gameFrame_GuideOpenLevelUpPanel="gameFrame_GuideOpenLevelUpPanel",ut.gameFrame_GuideEquipUIFinish="gameFrame_GuideEquipUIFinish",ut.gameFrame_GuideEquipList="gameFrame_GuideEquipUIFinish",ut.gameFrame_HeroEquip="gameFrame_HeroEquip",ut.GameFrame_FinishGuideOpenHeroEquip="GameFrame_FinishOpenHeroEquip",ut.GameFrame_OpenHeroEquipList="GameFrame_OpenHeroEquipList",ut.GameFrame_gameStart="GameFrame_onShowGameStart",ut.GameFrame_SectionFinishSuccess="GameFrame_SectionFinishSuccess",ut.GameFrame_HomeEquipBtnOnClick="GameFrame_HomeEquipBtnOnClick",ut.GameFrame_EquipSelectFirst="GameFrame_EquipSelectFirst",ut.GameFrame_EquipStrengthenBtn="GameFrame_EquipStrengthenBtn",ut.GameFrame_EquipStrengthenBtn2="GameFrame_EquipStrengthenBtn2",ut.GameFrame_EquipStrengthenEnterBtn="GameFrame_EquipStrengthenEnterBtn",ut.GameFrame_BattleNormalBtn="GameFrame_BattleNormal",ut.GameFrame_BattleSpecialBtn="GameFrame_BattleSpecialBtn",ut.GameFrame_BattleSpecialList="GameFrame_BattleSpecialList",ut.GameFrame_GuideChangeHero="GameFrame_GuideChangeHero",ut.GameFrame_BtnBackOnClick="GameFrame_BtnBackOnClick",ut.GameFrame_HeroLevelGuideUpClose="GameFrame_HeroLevelUpClose";class mt{static setChildWindow(e,t){if(e&&(e.moduleWindow=t,e._children))for(let i=0;i<e._children.length;i++)this.setChildWindow(e._children[i],t)}static callChildOnWindowInited(e){if(e){let t=e.onWindowInited;if(t&&t.apply(e),e._children)for(let t=0;t<e._children.length;t++)this.callChildOnWindowInited(e._children[t])}}static callChildOnWindowDestory(e){let t;if(e instanceof fgui.GObject&&(t=e.displayObject),e){let i=e.onWindowDestory;if(i&&i.apply(e))return;for(let e=t.numChildren-1;e>=0;e--){let i=t.getChildAt(e);i.$owner&&this.callChildOnWindowDestory(i.$owner)}}}static callChildOnWindowShow(e){if(e){let t=!0,i=e.onWindowShow;if(i){if(void 0!==e.whenSelfVisiableCallWindowShowAndHide){e.whenSelfVisiableCallWindowShowAndHide&&0==e.visible&&(t=!1)}t&&i.apply(e)}if(t&&e._children)for(let t=e._children.length-1;t>=0;t--)this.callChildOnWindowShow(e._children[t])}}static callChildOnWindowHide(e){if(e){let t=!0,i=e.onWindowHide;if(i){if(void 0!==e.whenSelfVisiableCallWindowShowAndHide){e.whenSelfVisiableCallWindowShowAndHide&&0==e.visible&&(t=!1)}t&&i.apply(e)}if(t&&e._children)for(let t=0;t<e._children.length;t++)this.callChildOnWindowHide(e._children[t])}}static callChildOnTabShow(e){if(e){let t=e.onTabShow;if(t&&t.apply(e),e._children)for(let t=0;t<e._children.length;t++)this.callChildOnTabShow(e._children[t])}}static callChildOnTabHide(e){if(e){let t=e.onTabHide;if(t&&t.apply(e),e._children)for(let t=0;t<e._children.length;t++)this.callChildOnTabHide(e._children[t])}}static autoScreenScaleShrink(e,t,i){let s=Co.screenSetting.screenScaleShrink;if(e.scaleX=s,e.scaleY=s,t){let a=fgui.GRoot.inst;switch(t){case Laya.Stage.ALIGN_LEFT:e.x=0;break;case Laya.Stage.ALIGN_CENTER:e.x=.5*(a.width-e.width*s);break;case Laya.Stage.ALIGN_RIGHT:e.x=a.width-e.width*s}switch(i){case Laya.Stage.ALIGN_TOP:e.y=0;break;case Laya.Stage.ALIGN_MIDDLE:e.y=.5*(a.height-e.height*s);break;case Laya.Stage.ALIGN_BOTTOM:e.y=a.height-e.height*s}}}static autoScreenScaleShrink2(e,t=1){let i=Co.screenSetting.screenScaleShrinkMax;e.scaleX=i*t,e.scaleY=i*t,e.parent&&(e.x=.5*e.parent.width,e.y=.5*e.parent.height)}static autoScreenScale(e,t,i){let s=Co.screenSetting.screenScaleExpand;if(e.scaleX=s,e.scaleY=s,t){let a=fgui.GRoot.inst;switch(t){case Laya.Stage.ALIGN_LEFT:e.x=0;break;case Laya.Stage.ALIGN_CENTER:e.x=.5*(a.width-e.width*s);break;case Laya.Stage.ALIGN_RIGHT:e.x=a.width-e.width*s}switch(i){case Laya.Stage.ALIGN_TOP:e.y=0;break;case Laya.Stage.ALIGN_MIDDLE:e.parent?(this.helpPoint.y=.5*(a.height-e.height*s),this.helpPoint=e.parent.globalToLocal(0,this.helpPoint.y,this.helpPoint),e.y=this.helpPoint.y):e.y=.5*(a.height-e.height*s);break;case Laya.Stage.ALIGN_BOTTOM:e.y=a.height-e.height*s}}}static autoScreenScale2(e){let t=Co.screenSetting.screenScaleExpand;e.scaleX=t,e.scaleY=t,e.parent&&(e.x=.5*e.parent.width,e.y=.5*e.parent.height)}static autoScreenScale3(e){let t=Co.screenSetting.screenScaleExpand;e.scaleX=t,e.scaleY=t}static autoScreenSize(e,t,i){let s=Co.screenSetting.screenScaleExpand;if(e.width=e.sourceWidth*s,e.height=e.sourceHeight*s,t){let s=fgui.GRoot.inst;switch(t){case Laya.Stage.ALIGN_LEFT:e.x=0;break;case Laya.Stage.ALIGN_CENTER:e.x=.5*(s.width-e.width);break;case Laya.Stage.ALIGN_RIGHT:e.x=s.width-e.width}switch(i){case Laya.Stage.ALIGN_TOP:e.y=0;break;case Laya.Stage.ALIGN_MIDDLE:e.parent?(this.helpPoint.y=.5*(s.height-e.height),this.helpPoint=e.parent.globalToLocal(0,this.helpPoint.y,this.helpPoint),e.y=this.helpPoint.y):e.y=.5*(s.height-e.height);break;case Laya.Stage.ALIGN_BOTTOM:e.y=s.height-e.height}}}static autoParentSize(e,t,i){let s=Co.screenSetting.screenScaleExpand;if(e.width=e.sourceWidth*s,e.height=e.sourceHeight*s,t){let s=fgui.GRoot.inst;switch(t){case Laya.Stage.ALIGN_LEFT:e.x=0;break;case Laya.Stage.ALIGN_CENTER:e.x=.5*(s.width-e.width);break;case Laya.Stage.ALIGN_RIGHT:e.x=s.width-e.width}switch(i){case Laya.Stage.ALIGN_TOP:e.y=0;break;case Laya.Stage.ALIGN_MIDDLE:e.y=.5*(s.height-e.height);break;case Laya.Stage.ALIGN_BOTTOM:e.y=s.height-e.height}}}static centerScreen(e){e.x=.5*(Co.screenSetting.screenWidth-e.width),e.y=.5*(Co.screenSetting.screenHeight-e.height)}static centerScreenForCenter(e){e.x=.5*Co.screenSetting.screenWidth,e.y=.5*Co.screenSetting.screenHeight}static setScreenSize(e){e.width=Co.screenSetting.screenWidth,e.height=Co.screenSetting.screenHeight}static getValueForPath(e,t,...i){return e.endsWith("()")?mt.getFunResultForPath(e,t,...i):mt.getFieldValueForPath(e,t)}static getFunResultForPath(e,t,...i){if(!e.endsWith("()"))return mt.getFieldValueForPath(e,t);{e=e.replace("()","");let s=mt.getFieldValueForPath(e,t);if(s){let a=e.split(/[\.\/]/);if(1==a.length)return 1==i.length?s.apply(t,i[0]):s.apply(t,i);{let e="",n="";for(let t=0;t<a.length-1;t++)e+=n+a[t],n=".";let r=mt.getFieldValueForPath(e,t);return 1==i.length?s.apply(r,i[0]):s.apply(r,i)}}}}static getFieldValueForPath(e,t){t||(t=window)||(t=this);let i=e.split(/[\.\/]/),s=t;for(let e=0;e<i.length;e++){if(!s[i[e]])return null;s=s[i[e]]}return s}static setStringsSource(e){let t=fgui.TranslationHelper.strings={},i=e.getConfigList();for(let e=0;e<i.length;e++){let r=i[e],o=r.dict.getValue("name"),l=r.dict.getValue("value"),c=o.indexOf("-");if(null!=l&&-1!=c){var s=o.substr(0,c),a=o.substr(c+1),n=t[s];n||(n={},t[s]=n),n[a]=l}}}static setGray(e){if(e){if(!mt.grayscaleFilters){var t=new Laya.ColorFilter(mt.grayscaleMat);mt.grayscaleFilters=[t]}e.displayObject.filters=mt.grayscaleFilters}}static clearFilters(e){e&&(e.displayObject.filters=null)}static get saturationFilters(){return mt._saturationFilters||(mt._saturationFilters=[new Laya.ColorFilter(mt.saturation)]),mt._saturationFilters}static get saturationFilters2(){return mt._saturationFilters2||(mt._saturationFilters2=[new Laya.ColorFilter(mt.saturation2)]),mt._saturationFilters2}static get saturationFilters3(){return mt._saturationFilters3||(mt._saturationFilters3=[(new Laya.ColorFilter).adjustColor(0,-50,-100,0)]),mt._saturationFilters3}static halfStaturation(e){e&&(e.displayObject.filters=mt.saturationFilters)}static half2Staturation(e){e&&(e.displayObject.filters=mt.saturationFilters2)}static half3Staturation(e){e&&(e.displayObject.filters=mt.saturationFilters3)}static boundEffect(e,t=1e3){e.setPivot(.5,.5),e.setScale(.5,.5),Laya.Tween.to(e,{scaleX:1,scaleY:1},t,Laya.Ease.backOut,Laya.Handler.create(null,()=>{}),0,!0,!0)}}mt.helpPoint=new Laya.Point,mt.grayscaleMat=[.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,0,0,0,1,0],mt.grayscaleFilters=null,mt.normalFilters=null,mt.saturation=[.5,0,0,0,0,0,.5,0,0,0,0,0,.5,0,0,0,0,0,1,0],mt.saturation2=[.25,0,0,0,0,0,.25,0,0,0,0,0,.25,0,0,0,0,0,1,0];var gt,dt,pt,Ct,St,ft=Laya.Point,yt=Laya.Handler;class wt extends ot{constructor(){super(...arguments),this.sShowComplete=new Signal,this.sHideComplete=new Signal,this.menuIsCreated=!1,this.isDestoryed=!1,this.enableShowAnimation=!0,this.enableShowSignal=!0,this.enableHideSignal=!0,this._loadAssets=[],this._dynamicAssetsList=[],this.toPoint=new ft,this.srcPoint=new ft,this.sShowSubwindowComplete=new Signal,this.sHideSubwindowComplete=new Signal,this.subwindowDict=new Dictionary,this.subwindowStack=[],this.tabDict=new Dictionary,this.tabHistorys=[],this.tabCtrlViewsMap=new Map,this.sOpenTab=new Typed2Signal}static async AsyncEnableOpen(){return Promise.resolve(!0)}isOpenSubOrTab(e){return this.menuParameter.openIndex==e}addAssetForFguiPackagename(e){this._loadAssets.push({url:e,type:H.FguiPackage})}addAssetForFguiComponent(e){let t=e.DependPackages;for(let e=0;e<t.length;e++)this.addAssetForFguiPackagename(t[e])}getLoadAssets(e,t){let i=this._loadAssets;for(let s=0;s<i.length;s++){let a=ht.getAssetItemKey(i[s]);t.hasKey(a)||(e.push(i[s]),t.add(a,i[s]))}return e}unloadAssetForFguiPackagename(e){switch(e){case Ye._ResImageUIV1:case Ye.__ResFont:case Ye.CommonBase:case Ye.CommonGame:case Ye.CommonFx:case Ye.SystemModuleDialog:return}Co.asset.unloadFgui(e)}unloadAssetForFguiComponent(e){let t=e.DependPackages;for(let e=0;e<t.length;e++)this.unloadAssetForFguiPackagename(t[e])}unloadAssetFroAssetList(){for(let e=0;e<this._loadAssets.length;e++)this.unloadAssetForFguiPackagename(this._loadAssets[e].url)}addDynamicAsset(e){e&&this._dynamicAssetsList.push(e)}addDynmicAssetForAvatarAll(e){e.getAllAssset(this._dynamicAssetsList)}generateAssetsForDynmic(){this._dynamicAssetsList=[]}getLoadAssetsForDynamic(e,t){let i=this._dynamicAssetsList;for(let s=0;s<i.length;s++){let a=ht.getAssetItemKey(i[s]);t.hasKey(a)||(e.push(i[s]),t.add(a,i[s]))}let s=this.subwindowDict.getValues();for(let i=0;i<s.length;i++)s[i].getLoadAssetsForDynamic(e,t);return e}onInit(){this.onMenuCreate(),super.onInit()}onMenuCreate(){this.setChildWindow(this.contentPane),this.callChildOnWindowInited(this.contentPane),this.menuIsCreated=!0,this.onMenuOpen(this.menuParameter)}setCloseBtnEvent(){this.contentPane&&this.contentPane.m_frame&&this.contentPane.m_frame.getChild("closeBtn")&&this.contentPane.m_frame.getChild("closeBtn").onClick(this,this.menuClose)}setBackBtnEvent(){this.contentPane&&this.contentPane.m_frame&&this.contentPane.m_frame.getChild("closeBtn")&&this.contentPane.m_frame.getChild("closeBtn").onClick(this,this.menuBack)}onMenuOpen(e){switch(this.enableShowSignal=!0,this.enableShowAnimation=!0,this.menuParameter=e,e.openType){case lt.Subwindow:this.enableShowSignal=!1,this.enableShowAnimation=!1,this.openSubwindowByIndex(e.openIndex,!1,...e.args);break;case lt.Tab:this.openTab(e.openIndex);break;default:Co.event.dispatch(ut.GameFrame_OpenMenu,this.menuId,e.openType)}}windowShow(){this.windowContainer?this.showOn(this.windowContainer):this.show()}menuShow(e){switch(this.menuParameter.openType){case lt.Subwindow:this.contentPane||this.onInit();break;default:this.showOn(e)}}menuClose(){Co.menu.close(this.menuId)}menuBack(){Co.menu.back(this.menuId)}destory(){this.callChildOnWindowDestory(this.contentPane),this.onMenuDestory(),this.sShowComplete.removeAll(),this.sHideComplete.removeAll(),this.sShowSubwindowComplete.removeAll(),this.sHideSubwindowComplete.removeAll(),this.tabDict.clear();let e=this.subwindowDict.getValues();for(let t=0;t<e.length;t++){e[t].destory()}this.subwindowDict.clear(),this.contentPane&&(this.contentPane.dispose(),this.contentPane=null),this.unloadAssetFroAssetList(),super.dispose(),this.isDestoryed=!0}onMenuDestory(){}doShowAnimation(){this.onWindowWillShow(),1==this.openAnimation?(this.srcPoint.x=this.panel.x,this.srcPoint.y=this.panel.y,this.panel.setScale(.1,.1),this.calBuutonPos(),this.panel.setXY(this.toPoint.x,this.toPoint.y),Laya.Tween.to(this.panel,{scaleX:1,scaleY:1,x:this.srcPoint.x,y:this.srcPoint.y},300,Laya.Ease.quadOut,yt.create(this,()=>{this.onShown()}))):super.doShowAnimation()}get panel(){return this.contentPane.m_panel?this.contentPane.m_panel:this.contentPane}doHideAnimation(){this.onWindowWillHide(),1==this.closeAnimation?(this.panel.setScale(1,1),this.calBuutonPos(),Laya.Tween.to(this.panel,{scaleX:.1,scaleY:.1,x:this.toPoint.x,y:this.toPoint.y},300,Laya.Ease.quadOut,yt.create(this,()=>{this.panel.x=this.srcPoint.x,this.panel.y=this.srcPoint.y,this.hideImmediately()}))):super.doHideAnimation()}get openAnimation(){return null==this.menuConfig?0:this.menuConfig.openAnimation}get closeAnimation(){return null==this.menuConfig?0:this.menuConfig.closeAnimation}get menuConfig(){return this.menuId>0?Co.config.menu.getConfig(this.menuId):null}calBuutonPos(){}onShown(){this.enableHideSignal=!0,this.onShowComplete(),this.contentPane&&this.callChildOnWindowShow(this.contentPane)}onMenuClose(){this.hide();let e=this.subwindowDict.getValues();for(let t=0;t<e.length;t++){e[t].hide()}}onHide(){this.enableShowSignal=!0,this.onHideComplete(),this.clearTabHistorys(),this.contentPane&&this.callChildOnWindowHide(this.contentPane)}onShowComplete(){this.enableShowSignal&&this.sShowComplete.dispatch()}onHideComplete(){this.enableHideSignal&&this.sHideComplete.dispatch()}getSubwindow(e){return this.subwindowDict.getValue(e)}registerSubwindow(e){this.subwindowDict.add(e.subwindowIndex,e)}__onSubWindowClose(e){for(let t=this.subwindowStack.length-1;t>=0;t--)this.subwindowStack[t]==e&&this.subwindowStack.splice(t,1)}__getLastOpenSubWindow(e){for(let t=this.subwindowStack.length-1;t>=0;t--){let i=this.subwindowStack[t];if(!e||-1==e.indexOf(i))return i}return null}closeAllSubwindowSelf(e){let t=[];for(let e=this.subwindowStack.length-1;e>=0;e--)t.push(this.subwindowStack[e]);for(let i=0;i<t.length;i++){let s=t[i];e&&-1!=e.indexOf(s)||s.closeSelf()}}closeLastSubwindowSelf(){let e=this.__getLastOpenSubWindow();e&&e.closeSelf()}getLastMenuParameter(){let e=this.__getLastOpenSubWindow();return e?e.menuParameter:this.menuParameter}openSubwindow(e,t=!1,...i){e.__backSubWindow=this.__getLastOpenSubWindow([e]),this.menuParameter.openType=lt.Subwindow,this.menuParameter.openIndex=e.subwindowIndex,this.menuParameter.args=i;let s={openType:this.menuParameter.openType,openIndex:this.menuParameter.openIndex,args:i,dontCloseOther:t};if(!t){let t={on:()=>{if(e.whenOpenCloseMainwindow&&(this.enableHideSignal=!1,this.hideImmediately()),e.whenOpenCloseOthersubwindow){let t=this.subwindowDict.getValues;for(let i=0;i<t.length;i++){let s=t[i];s!=e&&(s.hideImmediately(),this.__onSubWindowClose(s))}}this.sShowSubwindowComplete.dispatch()}};e.sShowComplete.addOnce(t.on,t)}let a=this.subwindowStack.indexOf(e);-1!=a&&this.subwindowStack.splice(a,1),this.subwindowStack.push(e),e.menuIsCreated?e.onMenuOpen(s):e.menuParameter=s,e.showOn(this.windowContainer),Co.event.dispatch(ut.GameFrame_OpenMenu,this.menuId,s.openType,s.openIndex)}openSubwindowByIndex(e,t=!1,...i){let s=this.getSubwindow(e);this.openSubwindow(s,t,...i)}onSubwindowBack(e){this.menuParameter.openType=lt.None,this.menuParameter.openIndex=0,this.sShowComplete.addOnce(()=>{e.hide()},e),this.windowContainer.parent&&e.hide(),this.showOn(this.windowContainer),this.subwindowStack=[]}getTabDispyaObjects(e){if(this.tabDict.hasKey(e))return this.tabDict.getValue(e);let t=[];return this.tabDict.add(e,t),t}registerControllerTabViews(e,t=null){t||(t=this.contentPane);let i=t.numChildren;for(let a=0;a<i;a++){let i=t.getChildAt(a);if(i._gears&&i._gears.length>0)for(let t of i._gears)if(t&&t.controller==e&&t instanceof fgui.GearDisplay&&t.pages&&t.pages.length>0)for(let e of t.pages){let t=toInt(e);var s;this.registerTab(t,i),this.tabCtrlViewsMap.has(t)?s=this.tabCtrlViewsMap.get(t):(s=[],this.tabCtrlViewsMap.set(t,s)),s.push(i)}}}registerControllerTab(e,t=null){t||(t=this.contentPane);let i=t.numChildren;for(let s=0;s<i;s++){let i=t.getChildAt(s);if(i._gears&&i._gears.length>0)for(let t of i._gears)if(t&&t.controller==e&&t instanceof fgui.GearDisplay&&t.pages&&t.pages.length>0)for(let e of t.pages){let t=toInt(e);this.registerTab(t,i)}}}registerTab(e,t){this.getTabDispyaObjects(e).push(t)}setTabVisiable(e,t){let i;i=e instanceof Array?e:this.getTabDispyaObjects(e);for(let e=0;e<i.length;e++)t?this.callChildOnTabShow(i[e]):i[e].visible&&this.callChildOnTabHide(i[e]),i[e].visible=t}setOpenTab(e){this.menuParameter.openIndex=e;let t=this.tabDict.getKeys();for(let i=0;i<t.length;i++)t[i]!=e&&this.setTabVisiable(t[i],!1);this.tabCtrlViewsMap.forEach((t,i)=>{i!=e&&this.setTabVisiable(t,!1)});var i=this.tabCtrlViewsMap.get(e);i&&this.setTabVisiable(i,!0),this.setTabVisiable(e,!0),this.onOpenTab(e)}openTab(e){this.tabHistorys.push(e),this.setOpenTab(e),this.sOpenTab.dispatch(e,this),Co.event.dispatch(ut.GameFrame_OpenMenu,this.menuId,lt.Tab,e)}onOpenTab(e){}backTab(){if(this.tabHistorys.length>0){let e;for(let t=this.tabHistorys.length-1;t>=0;t--)this.tabHistorys[t]==this.menuParameter.openIndex&&t>0&&this.tabHistorys[t-1]!=this.menuParameter.openIndex&&(e=this.tabHistorys[t-1]);void 0===e?this.menuBack():this.openTab(e)}}clearTabHistorys(){this.tabHistorys=[]}setChildWindow(e){mt.setChildWindow(e,this)}callChildOnWindowInited(e){mt.callChildOnWindowInited(e)}callChildOnWindowDestory(e){mt.callChildOnWindowDestory(e)}callChildOnWindowShow(e){mt.callChildOnWindowShow(e)}callChildOnWindowHide(e){mt.callChildOnWindowHide(e)}callChildOnTabShow(e){mt.callChildOnTabShow(e)}callChildOnTabHide(e){mt.callChildOnTabHide(e)}}class Lt extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","WindowHomeUI")}constructFromXML(e){super.constructFromXML(e),this.m_Tab=this.getController("Tab"),this.m_bg=this.getChild("bg"),this.m_mainMenu=this.getChild("mainMenu"),this.m_chooseHero=this.getChild("chooseHero"),this.m_shop=this.getChild("shop"),this.m_chooseGameFormat=this.getChild("chooseGameFormat"),this.m_result=this.getChild("result"),this.m_menuTopPanel=this.getChild("menuTopPanel"),this.m_shareBtnBar=this.getChild("shareBtnBar")}}Lt.URL="ui://moe42ygrsqzy8a",Lt.DependPackages=["GameHome","GameLaunch"];class _t extends Lt{}!function(e){e[e.MenuMenu=0]="MenuMenu",e[e.ChooseHero=1]="ChooseHero",e[e.Shop=2]="Shop",e[e.ChooseGameFormat=3]="ChooseGameFormat",e[e.Result=4]="Result"}(gt||(gt={})),window.HomeTabType=gt;class vt extends wt{constructor(){super(),this.addAssetForFguiComponent(_t)}generateAssetsForDynmic(){super.generateAssetsForDynmic()}onMenuCreate(){let e=_t.createInstance();this.conent=e,this.contentPane=e,this.registerControllerTabViews(this.conent.m_Tab),super.onMenuCreate(),O.instance.playMusic()}openTab(e){this.conent&&this.conent.m_Tab.setSelectedIndex(e),super.openTab(e)}onShowComplete(){super.onShowComplete()}onHideComplete(){super.onHideComplete()}}class Tt{static init(e){this.isInited||(this.game=new rt,this.game.init(e),this.isInited=!0)}static launch(){this.launchtimestamp=Date.now(),this.uninstall(),this.game.launch()}static setGameOver(){this.game.setGameOver()}static uninstall(){this.game.uninstall()}static exit(){de.addUserGold(de.goldPerGame),He.OnGload(de.goldPerGame),He.OnGloadBest(de.bestGoldPerGame),He.OnWarOver(),this.uninstall(),Co.menu.openTab(k.Home,gt.Result)}}Tt.isInited=!1,Tt.launchtimestamp=0,window.War=Tt;class It extends C{constructor(){super(),this.preArmor=-1}static get FrontClassMap(){if(!this._FrontClassMap){var e=new Map;this._FrontClassMap=e,e.set("CardViewFrontHero",W),e.set("CardViewFrontPowerUp",K),e.set("CardViewFrontPowerUpBarrel",z),e.set("CardViewFrontPowerUpBomb",Q),e.set("CardViewFrontPowerUpCannon",$),e.set("CardViewFrontPowerUpChest",ee),e.set("CardViewFrontPowerUpSkull",ie),e.set("CardViewFrontWarriow",he),e.set("CardViewFrontWarriowBoss",ae),e.set("CardViewFrontWarriowEnemy",re),e.set("CardViewFrontWarriowTrap",le)}return this._FrontClassMap}static GetFrontClass(e){return this.FrontClassMap.has(e)?this.FrontClassMap.get(e):(console.error("没有找到卡牌视图组件",e),K)}static GetFrontView(e){var t=It.GetFrontClass(e),i=Pool.getItem(t.URL);return i||(i=t.createInstance()),i}static GetSpriteUrl(e){return"ui://GameHome/"+e}static PoolGet(){var e=Pool.getItem(this.URL);return e||(e=It.createInstance()),e}PoolRecover(){this.RecoverFront(),this.cardConfig=null,this.cardScoreConfig=null,Pool.recover(It.URL,this)}constructFromXML(e){super.constructFromXML(e),this.InitBg(),this.debugText=new Laya.Text,this.debugText.fontSize=30,this.debugText.color="#ffFF00",this.debugText.bgColor="#00000055",this.debugText.x=10,this.debugText.y=50}InitBg(){this.bg=f.createInstance(),this.addChild(this.bg),this.bg.setXY(.5*this.width,.5*this.height)}SetBg(e){this.bg.m_state.setSelectedIndex(e)}SetFront(e){var t=It.GetFrontView(e);t.displayListContainer.mouseThrough=!0,t.displayListContainer.mouseEnabled=!1,t.cardView=this,this.addChild(t),t.setXY(.5*this.width,.5*this.height),this.front=t;var i=this.front.SetConfig;i&&i.call(this.front,this.cardConfig),this.onClick(this,this.OnClickHandler)}RecoverFront(){if(this.front){this.front.removeFromParent();var e=this.front.OnRecover;e&&e.call(this.front);var t=this.front.constructor.URL;Pool.recover(t,this.front),this.front=null}this.offClick(this,this.OnClickHandler)}SetConfig(e){if(this.RecoverFront(),this.cardConfig=e,e){var t=this.cardScoreConfig=e.cardScoreConfig;t&&null!=t.backgroundType||console.error("!cardScoreConfig || cardScoreConfig.backgroundType == undefined",t,e),this.SetBg(t.backgroundType),this.SetFront(t.frontView)}else this.cardScoreConfig=null,this.SetBg(y.Default)}SetCard(e){if(this.card=e,this.front){var t=this.front.SetCard;t&&t.call(this.front,this.card)}}debugPos(){}OnClickHandler(){this.card&&this.game.keyboardManager.OnClickCard(this.card)}setHealthText(){if(this.card.isHero){var e=this.card;this.front.m_life.title=e.currentLife+"/"+e.totalLife}else{var t=this.card;this.front.m_life&&(this.front.m_life.title=t.lifeAmount.toString())}}setPowerUpText(){var e=this.card;this.front.m_power&&(this.front.m_power.title=e.powerUpAmount.toString())}setStepText(){var e=this.card;this.front.m_step&&(this.front.m_step.title=e.step.toString(),this.front.m_step.visible=e.stepMax>0)}setArmor(){if(this.card.isHero){var e=this.card,t=this.front;e.armor>0?0!=t.m_shield.visible&&this.preArmor==e.armor||(t.setArmorShowOrChange(),this.preArmor=e.armor):t.setArmorHide(),t.m_shield.title=e.armor.toString()}}tweenLife(){var e=this.front.m_life;e||(e=this.front.m_power);var t=this.card.getScaleTween(e);return t.onComplete.addOnce(this.setHealthText,this),t}tweenPowerUp(){var e=this.front.m_power;e||(e=this.front.m_life);var t=this.card.getScaleTween(e);return t.onComplete.addOnce(this.setPowerUpText,this),t}useLuck(){if(this.card.isHero){this.card;this.front.m_shopBar.useLuck()}}useHeart(){if(this.card.isHero){this.card;this.front.m_shopBar.useHeart()}}refreshShopBar(){if(this.card.isHero){this.card;this.front.m_shopBar.refresh()}}setOpen(){this.card.isTrap&&this.front.SetOpen()}setClose(){this.card.isTrap&&this.front.SetClose()}}class Gt extends i{get cardScoreConfig(){return Co.config.cardScoreType.getConfig(this.scoreTypeKey)}get cardScoreType(){var e=this.cardScoreConfig;if(e)return e.id;console.error("CardConfig.cardScoreType    scoreConfig=null",this.name,this)}get heroType(){return this.id%100}get spriteIndex(){return this.heroType-1}get spriteUrl(){return this._spriteUrl||(this._spriteUrl=It.GetSpriteUrl(this.sprite)),this._spriteUrl}static getArmorLevel(e){return e<=3?1:e<=5?2:e<=8?3:e<=10?4:5}}class Pt extends s{}class kt extends a{}class Mt extends n{get itemToolType(){return this.id%100-1}get spriteIndex(){return this.itemToolType}}class xt extends r{constructor(){super(...arguments),this.type=B.Consume}get effectConfig(){return Co.config.effectType.getConfig(this.effectType)}get effectTypeId(){var e=this.effectConfig;if(e)return e.id;console.error("ItemConsumeConfig.effectTypeId    effectConfig=null",this.name,this)}}class bt extends o{constructor(){super(...arguments),this.type=B.Decorate}get effectConfig(){return Co.config.effectType.getConfig(this.effectType)}get effectTypeId(){var e=this.effectConfig;if(e)return e.id;console.error("ItemDecorateConfig.effectTypeId    effectConfig=null",this.name,this)}get triggerConfig(){return Co.config.triggerType.getConfig(this.triggerType)}get triggerTypeId(){var e=this.triggerConfig;if(e)return e.id;console.error("ItemDecorateConfig.triggerTypeId    triggerConfig=null",this.name,this)}}class Dt extends l{constructor(){super(...arguments),this.type=B.Weapon}get effectConfig(){return Co.config.effectType.getConfig(this.effectType)}get effectTypeId(){var e=this.effectConfig;if(e)return e.id;console.error("ItemWeaponConfig.effectTypeId    effectConfig=null",this.name,this)}get triggerConfig(){return Co.config.triggerType.getConfig(this.triggerType)}get triggerTypeId(){var e=this.triggerConfig;if(e)return e.id;console.error("ItemWeaponConfig.triggerTypeId    triggerConfig=null",this.name,this)}}class Bt extends c{}class At extends h{}!function(e){e[e.None=0]="None",e[e.Circle=1]="Circle",e[e.Launch=2]="Launch",e[e.EnterWar=3]="EnterWar",e[e.EnterModule=4]="EnterModule"}(dt||(dt={}));class Ht{static get res3dzip_manifest(){return this.res3dzip+"manifest.json"}static get res3dzip_manifest_pve01(){return this.res3dzip+"pve_01_manifest.json"}static get res3dzip_zip_pve01(){return this.res3dzip+"pve_01.zip"}static get config(){return Ht.root+"config/"}static get PathConfig(){return Ht.root+"config/path/"}static get GmConfig(){return Ht.root+"config/gm/"}static get shader(){return Ht.root+"shader/"}static get particles(){return Ht.root+"particles/"}static get spine(){return Ht.root+"spine/"}static get spineUI(){return Ht.root+"spineUI/"}static getConfigIcon(e){return Ht.fspriteassets+e+".png"}static get fspriteassets(){return Ht.root+"fspriteassets/"}static get actorBodyIcon(){return Ht.root+"fspriteassets/ActorBodyIcon/"}static get draugHeroIcon(){return Ht.root+"fspriteassets/icon/draugHeroIcon/"}static get draugIcon(){return Ht.root+"fspriteassets/icon/draugIcon/"}static get menuIcon(){return Ht.root+"fspriteassets/MenuItemIcon/"}static get HeroIcon(){return Ht.root+"fspriteassets/icon/heroIcon/"}static getActorBodyIcon(e){return Ht.actorBodyIcon+`${e}.png`}static getDraugHeroIcon(e){return-1!=Co.channel.serverItem.shieldHero.indexOf(e)&&(e=1001),Ht.draugHeroIcon+`${e}.png`}static getDraugIcon(e){return Ht.draugIcon+`${e}.png`}static getMenuIcon(e){return Ht.menuIcon+`${e}.png`}static getSpineSKPathF(e,t){return Ht.spine+`${e}_F/${t}_F/${t}_F.sk`}static getSpineSKPathB(e,t){return Ht.spine+`${e}_B/${t}_B/${t}_B.sk`}static getSpinePngPathF(e,t){return Ht.spine+`${e}_F/${t}_F/${t}_F.png`}static getSpinePngPathB(e,t){return Ht.spine+`${e}_B/${t}_B/${t}_B.png`}static getSpineUIPngPath(e){return Ht.spineUI+`${e}.png`}static getSpineUISkPath(e){return Ht.spineUI+`${e}.sk`}static getSpineSoltPartPath(e){return Ht.spine+"SlotTexture/"+e+".png"}static getMenuIconUrl(e){return Ht.fspriteassets+"MenuIcon/"+e+".png"}static getMenuNameIconUrl(e){return Ht.fspriteassets+"MenuNameIcon/"+e+".png"}static getBgUrl(e){return Ht.fspriteassets+"Background/"+e+".png"}static getSpritePath(e){return Ht.root+"sprite/"+e+".png"}static getSpritePathHasExt(e){return Ht.root+"sprite/"+e}static getShaderVS(e){return Ht.shader+e+".vs"}static getShaderPS(e){return Ht.shader+e+".fs"}static getParticles(e){return Ht.particles+e+".part"}static GetBattleRoleIcon(e){return Ht.fspriteassets+e+".png"}static GetAvatarSource(e){let t=Co.config.avatar.getConfig(e);return Ht.fspriteassets+t.icon+".png"}}Ht.res3dsrc="",Ht.res3dzip="res3dzip/",Ht.root="res/";class Ft{}Ft.NET_ERROR="网络连接失败！请检查网络设备!加油哦！！",Ft.Login="登录",Ft.Auth="授权",Ft.LangSelectMsg="语言需要重启游戏才有效!",Ft.FunNoOpen="此功能暂未开放，敬请期待！",Ft.ButtonSelect="选择",Ft.ButtonOk="确定",Ft.ButtonCannel="取消",Ft.ButtonYes="是",Ft.ButtonNo="否",Ft.Disable="内容优化",Ft.Lock="无解锁配置！",Ft.LvUpMax="等级达到最大",Ft.LvUpTo="玩家升级 {0} → {1}",Ft.Lv="{0}级",Ft.LVDot="等级：{0}",Ft.PlayerExp="主公经验：{0}",Ft.FatigueNotEnough="体力不足，无法进行挑战",Ft.cannotRecharge="游客不能充值",Ft.cannotRechargeNoIos="只支持ios内购",Ft.rechargeError="充值失败，请稍候重试",Ft.systemTip="系统提示",Ft.TitleTip="提示",Ft.ErorNoInitProto="没有初始化网络",Ft.ErorRequestServerList="请求服务器列表失败",Ft.ErorAccountFrozen="账号被冻结",Ft.ErorAccountDropped="账号被停用",Ft.TipEnterRoleName="输入你的名称",Ft.ErrorNameEmpty="名字不能是空的",Ft.ErrorContentEmpty="内容不能是空的",Ft.ErrorNameUsed="名称已经被使用",Ft.ErrorFormatName="存在非法字符串，请修改后重试",Ft.ErrorHttpSendFail="[Error] 发送请求失败",Ft.HttpTimeOut="网络超时! 当前设置的超时时间是{0}",Ft.AlertTextBuyActor="是否花费{0}{1}增加艺人数量",Ft.AlertTextScountActor="是否花费{0}{1} 探查艺人？",Ft.ToastTextItemNotEnough="{0}数量不足",Ft.ToastTextItemNotEnough2="数量不足，需要{0} {1}",Ft.ChangeNameCost="本次改名需要 {0}",Ft.DuelTempLevel="当前决斗神殿段位：{0}",Ft.DuelTempMaxLevel="历史最高决斗神殿段位：{0}",Ft.DuelTempCurrentPvpLevel="当前竞技排名：{0}",Ft.DuelTempMaxPvpLevel="历史最高竞技排名：{0}",Ft.BattlePlanTeamHeroNameAndLevel="{0}  {1}级",Ft.BagCapacity="{0}/{1}",Ft.BagItemCount="拥有：{0}",Ft.BagExpiredLimitTip="{0}后过期",Ft.BagExpiredPeriodTip="将在{0}过期",Ft.BagItemSell="出售",Ft.BagItemUse="使用",Ft.BagItemSplit="分解",Ft.BagItemForge="锻造",Ft.BagItemChangeEquip="穿戴",Ft.BagItemLevelUp="使用可增加{0}英雄经验",Ft.EquipPropDes="{0}+{1}",Ft.EquipExclusiveTxtMsg="{0}专属！只有{1}才可穿戴次装备",Ft.EquipExclusiveTxt="{0}专属",Ft.EquipEatExp="该装备可提供{0}的强化经验",Ft.EquipTypeWeapon="武器",Ft.EquipTypeHelmet="头盔",Ft.EquipTypeArmor="战甲",Ft.EquipTypeBoots="战靴",Ft.EquipTypePendant="玉佩",Ft.EquipTypeGem="宝物",Ft.EquipNotEnough="道具不足，无法选择",Ft.EquipLevelUpStr1="下一级属性",Ft.EquipLevelUpStr2="强化到{0}级时属性增加",Ft.EquipAtkRange="系数",Ft.MailTitle="邮件",Ft.DeleteRead="删除已读",Ft.ToReader="致玩家：",Ft.ReawrdMsg="奖励内容：",Ft.Progress="{0}/{1}",Ft.N0="零",Ft.N1="一",Ft.N2="二",Ft.N3="三",Ft.N4="四",Ft.N5="五",Ft.N6="六",Ft.N7="七",Ft.N8="八",Ft.N9="九",Ft.N10="十",Ft.N100="百",Ft.N1000="千",Ft.N10000="万",Ft.RewardItemCount="x{0}",Ft.DATE_MonthBefore="{0}个月前",Ft.DATE_WeekBefore="{0}周前",Ft.DATE_DayBefore="{0}天前",Ft.DATE_HourBefore="{0}小时前",Ft.DATE_MinuteBefore="{0}分钟前",Ft.DATE_SecondeBefore="{0}秒前",Ft.Hour="小时",Ft.Minute="分",Ft.Second="秒",Ft.MissionNotOpen="该关卡尚未开启",Ft.Chapter="第{0}章",Ft.ChapterStarTipTitle="本章累计{0}星可领取",Ft.ChapterStarNotEnough="星星数量不足",Ft.ChapterRewardAlreadyGet="奖励已经领取过",Ft.ChapterSpecialTimes="今日精英剩余次数：{0}",Ft.ChapterMonsterTimes="今日剩余次数：{0}",Ft.SecretBookTimes="今日剩余次数：{0}",Ft.SecretBookTimesNotEnough="该副本今日挑战次数不足",Ft.SectionSpecialTotalTimes="每日一共可购买{0}次精英奖励次数",Ft.SectionMonsterTotalTimes="每日一共可购买{0}次魔王奖励次数",Ft.SecretBookTotalTimes="每日一共可购买{0}次秘闻奖励次数",Ft.SectionBuyTimesToast="奖励次数提升",Ft.SectionCurrentTimes="今日第{0}次购买",Ft.SectionTimesNotEnough="今日次数已用完",Ft.MissionUnlockCondition="{0}级开启",Ft.ChapterCurrentStarNum="{0}/{1}",Ft.SecretTimesRemain="今日剩余次数: {0}",Ft.MissionMaxTime="通关时间低于{0}秒",Ft.MissionKillBoss="打败首领",Ft.MissionHPState="剩余生命超过{0}%",Ft.MissionStamina="x{0}",Ft.SecretMissionTimesRemain="今日剩余次数：{0}",Ft.SecretLand_BestScore="最佳成绩：大秘境{0}",Ft.SecretLand_CurrentKeyStone="当前钥石：{0}级",Ft.SecretLand_Buy_Roll_Tips="是否消耗{0}点体力兑换Roll币",Ft.SecretLand_Roll_tips="当日可兑换次数为{0}，Roll积攒数量上限为{1}",Ft.SecretLand_Fatigue_Not_Enough="您没有足够的体力值，需要{0}体力兑换Roll币",Ft.Keystone_LevelUp_Time_Limit="{0}分钟",Ft.SecretLand_Level_Limit="等级达到{0}后开启{1}层大秘境",Ft.SecretLand_Time_Cost="通关时间: {0}",Ft.SecretLand_New_Keystone="获取新钥匙：{0}{1}级",Ft.Gashapon_NextFreeTime="{0}后免费",Ft.Gashapon_Rate="概率 {0}%",Ft.Gashapon_PropDisplay="{0} +{1}",Ft.Gashapon_Times_Remain="每日可招募{0}次，今日剩余{1}次",Ft.Gashapon_Times_Not_Enough="今日剩余次数不足",Ft.DuelSeasonDuration="{0} - {1}",Ft.DuelSeasonRemainDays="距离赛季结束还有{0}",Ft.DuelCurrentWinTimes="本赛季胜场：{0}",Ft.DuelSelectHeroGroupFirst="请先选择队伍",Ft.DuelTempOldSeason="恭喜您，在上赛季结算时的段位达到了{0}，赛季奖励已经发送 到您的邮箱",Ft.DuelTempNewSeason="由于您上赛季的出色表现，您在本赛季的起始段位为{0}",Ft.DuelTempWinTimes="胜场：{0}",Ft.HeroSkillOpenLevel="英雄等级达到{0}级别后解锁",Ft.HeroMaxLevel="已满级",Ft.HeroInBattle="当前英雄已在队伍中！！！",Ft.HeroStarProStr="成长",Ft.HeroLevelUpNotEnough="当前无法升级，请提升战队等级",Ft.HeroLevelUpItemNotEnough="物品不足，无法升级",Ft.HeroLevelUpMax="已提升当前最高级",Ft.RankMyAllRank="我的全区排行：{0}",Ft.RankNotOnRank="未上榜",Ft.RankDanStar="{0} {1}星",Ft.HeroSkillLevelNotLevel="升级条件不足，需英雄{0}级",Ft.SecretBookHeroLevelNotEnough="英雄{0}级开启",Ft.GuideFinish="现在引导结束了，你可以自由体验了",Ft.GuideGoToBattle="guide_go_section",Ft.GuideBackHome="guide_go_back_home",Ft.GuideBack="guide_go_back";class Rt{constructor(){this.dict=new Dictionary}static getInstance(){return null==this.__instance&&(this.__instance=new this,this.__instance.install()),this.__instance}validate(e){return!this.dict.hasKey(e)||this.dict.getValue(e).apply(this)}validateTab(e,t){return!0}openMenu(e,t){}openTab(e,t,i){}openItem(e,t,i){}closeRed(e){}add(e,t){this.dict.add(e,t)}install(){}}class Ut extends Rt{install(){}validate(e){return super.validate(e)}warEnableOpen(){return!0}}class Ot extends Rt{install(){}validate(e){return!!this.dict.hasKey(e)&&this.dict.getValue(e).apply(this)}}class Nt{constructor(e,t){this.menuId=e,this.windowClass=t}}class Et extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("ModuleLogin","LoginWindowUI")}constructFromXML(e){super.constructFromXML(e),this.m_Show=this.getController("Show"),this.m_txt_resVer=this.getChild("txt_resVer"),this.m_txt_gamever=this.getChild("txt_gamever"),this.m_screenBG=this.getChild("screenBG"),this.m_loginPanel=this.getChild("loginPanel"),this.m_wxPanel=this.getChild("wxPanel"),this.m_cdkPanel=this.getChild("cdkPanel"),this.m_panelCheckID=this.getChild("panelCheckID"),this.m_btnBulletin=this.getChild("btnBulletin"),this.m_panelBulletin=this.getChild("panelBulletin"),this.m_panelServer=this.getChild("panelServer")}}Et.URL="ui://4698ugpknz0c0",Et.DependPackages=["ModuleLogin","GameLaunch"];class Wt extends Et{onWindowShow(){this.m_panelBulletin.m_bg.m_btn_Close.onClick(this,this.onCloseBulletin),this.m_panelServer.m_btnChange.onClick(this,this.onChangeServer),this.m_panelServer.m_btnStart.onClick(this,this.onStartGame),this.m_panelServer.m_bg.m_btn_Close.onClick(this,this.onReturnServer),this.m_panelCheckID.m_btnClose.onClick(this,this.onCloseCheckID),this.m_panelCheckID.m_btnClose.visible=!1,this.m_panelCheckID.m_btnMake.onClick(this,this.onMakeCheckID),this.m_loginPanel.m_btn_login.onClick(this,this.onClickLogin),this.m_loginPanel.m_btn_randomLogin.onClick(this,this.onClickRandomLogin),this.m_cdkPanel.m_btn_cdk.onClick(this,this.onClickCdk),Co.net.gamerLoginS2C.on(this.GamerLoginS2C,this),Co.event.add("SUCCESS_LOGIN",this.LoginSuccess,this),Co.event.add("LOGIN_CDK",this.LoginCdk,this),Co.event.add("ERROR_CDK",this.ErrorCdk,this),Co.event.add("ERROR_IDCARD",this.ErrorIdCard,this),Co.event.add("ERROR_AREAS",this.ErrorAreas,this),Co.event.add("SUCCESS_AREAS",this.SucessAreas,this),Co.event.add("INDULGE_END",this.IndulgeEnd,this),this.Init()}onWindowHide(){this.m_panelBulletin.m_bg.m_btn_Close.offClick(this,this.onCloseBulletin),this.m_panelServer.m_btnChange.offClick(this,this.onChangeServer),this.m_panelServer.m_btnStart.offClick(this,this.onStartGame),this.m_panelServer.m_bg.m_btn_Close.offClick(this,this.onReturnServer),this.m_panelCheckID.m_btnClose.onClick(this,this.onCloseCheckID),this.m_panelCheckID.m_btnMake.onClick(this,this.onMakeCheckID),this.m_loginPanel.m_btn_login.offClick(this,this.onClickLogin),this.m_loginPanel.m_btn_randomLogin.offClick(this,this.onClickRandomLogin),this.m_cdkPanel.m_btn_cdk.offClick(this,this.onClickCdk),Co.net.gamerLoginS2C.off(this.GamerLoginS2C,this),Co.event.remove("SUCCESS_LOGIN",this.LoginSuccess,this),Co.event.remove("LOGIN_CDK",this.LoginCdk,this),Co.event.remove("ERROR_CDK",this.ErrorCdk,this),Co.event.remove("ERROR_IDCARD",this.ErrorIdCard,this),Co.event.remove("ERROR_AREAS",this.ErrorAreas,this),Co.event.remove("SUCCESS_AREAS",this.SucessAreas,this),Co.event.remove("INDULGE_END",this.IndulgeEnd,this),this.Reset()}onCloseBulletin(){this.m_Show.selectedIndex=3}onChangeServer(){this.m_panelServer.m_Server.selectedIndex=1}onReturnServer(){this.m_panelServer.m_Server.selectedIndex=0}onCloseCheckID(){this.GetServer()}onMakeCheckID(){switch(this.m_panelCheckID.m_Type.selectedIndex){case 3:Co.moduleModel.login.isIndulge?this.m_Show.selectedIndex=0:this.GetServer();break;case 1:this.SendIDCard()}}onStartGame(){let e=this.m_panelServer.lastServer;if(!e)return void Co.system.toastText("尚未获取服务器列表！");Co.localStorage.server=e.id;let t=this.m_panelServer.GetRole(e.id);t?Co.sender.login.useRole(this.login_session,t.id):Co.sender.login.newAndUseRole(this.login_session,this.m_loginPanel.account,e.id)}onClickLogin(){this.m_loginPanel.password="123",Boolean(this.m_loginPanel.account)&&Boolean(this.m_loginPanel.password)?Co.sender.login.login(this.m_loginPanel.account,this.m_loginPanel.password,!0):Co.system.toastText("请输入账号和密码！")}onClickRandomLogin(){this.m_loginPanel.account=Ae.RandName(2,7),Co.sender.login.login(this.m_loginPanel.account,"123",!0)}onClickCancel(){this.m_Show.selectedIndex=0}onClickCdk(){let e=this.login_session,t=this.m_cdkPanel.cdk,i=this.m_loginPanel.account,s=this.m_loginPanel.password;Co.sender.login.check(e,t,i,s)}GamerLoginS2C(e){e.error}LoginSuccess(e,t){this.login_session=e,this.m_panelServer.SetRoles(t);let i=this.m_loginPanel.account;VersionConfig.IsOpenIDCard&&-1==["jjsg1","jjsg2","jjsg3","jjsg4","jjsg5","jjsg6"].indexOf(i)?this.SendIDCard():this.GetServer(),this.m_Show.selectedIndex=1}LoginCdk(e){this.login_session=e,this.m_Show.selectedIndex=4}ErrorCdk(e){switch(e){case 1017:Co.system.toastText("验证码错误！");break;case 1001:Co.system.toastText("验证时间超时！"),this.onStartGame()}}ErrorIdCard(e){switch(e){case 0:case 1023:""!=this.m_panelCheckID.m_labName.text&&""!=this.m_panelCheckID.m_labID.text&&Co.system.toastText("实名制验证成功！"),this.GetServer();break;case 1021:case 1022:case 1026:Co.system.toastText("实名制验证失败！");case 1025:this.m_Show.selectedIndex=5,this.m_panelCheckID.m_Type.selectedIndex=1;break;case 1024:this.m_Show.selectedIndex=5,this.m_panelCheckID.m_Type.selectedIndex=3}}ErrorAreas(){Co.system.toastText("拉取服务器错误！")}SucessAreas(e){e.sort((e,t)=>e.id-t.id),this.m_panelServer.Open(e)}IndulgeEnd(){if(5!=this.m_Show.selectedIndex){switch(Co.moduleModel.login.error){case 1024:this.m_panelCheckID.m_Type.selectedIndex=0;break;default:this.m_panelCheckID.m_Type.selectedIndex=3}}}Init(){this.m_txt_gamever.text="GameVersion:"+Co.version.localAppVersionData.toString(),this.m_txt_resVer.text="ResVersion:"+Co.version.localResVersionData.toString(),this.StartGame()}Reset(){this.m_txt_gamever.text="",this.m_txt_resVer.text="",this.m_Show.selectedIndex=0}GetServer(){Co.sender.login.areas()}StartGame(){Ae.platform instanceof Be&&VersionConfig.IsEnableWx?(Co.sender.login.login("",""),this.m_Show.selectedIndex=3):this.m_Show.selectedIndex=0}SendIDCard(){let e=this.login_session,t=this.m_panelCheckID.m_labName.text,i=this.m_panelCheckID.m_labID.text;Co.sender.login.CheckIDCard(e,t,i)}}!function(e){e[e.Login=0]="Login",e[e.LoginGuest=1]="LoginGuest",e[e.Register=2]="Register",e[e.Agreement=3]="Agreement"}(pt||(pt={}));class Vt extends wt{constructor(){super(),this.addAssetForFguiComponent(Wt)}generateAssetsForDynmic(){super.generateAssetsForDynmic()}onMenuCreate(){let e=Wt.createInstance();this.conent=e,this.contentPane=e,super.onMenuCreate()}onShowComplete(){super.onShowComplete()}onHideComplete(){super.onHideComplete()}}class Xt extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","WindowWarUI")}constructFromXML(e){super.constructFromXML(e),this.m_debugBar=this.getChild("debugBar"),this.m_bg=this.getChild("bg"),this.m_menuTopPanel=this.getChild("menuTopPanel"),this.m_shareBtnBar=this.getChild("shareBtnBar"),this.m_playerLevelBar=this.getChild("playerLevelBar"),this.m_container=this.getChild("container"),this.m_chectPopupPanel=this.getChild("chectPopupPanel"),this.m_pausePanel=this.getChild("pausePanel"),this.m_uplevelPanel=this.getChild("uplevelPanel"),this.m_debugBtn_uplevel=this.getChild("debugBtn_uplevel"),this.m_debugBtn_addStageLevel=this.getChild("debugBtn_addStageLevel"),this.m_debugBtn_trigger=this.getChild("debugBtn_trigger"),this.m_debugBtn_music=this.getChild("debugBtn_music"),this.m_gmBtn=this.getChild("gmBtn")}}Xt.URL="ui://moe42ygrsqzy9c",Xt.DependPackages=["GameHome","GameLaunch"];class qt extends Xt{constructor(){super(...arguments),this.preGold=0}onWindowInited(){Tt.init(this),this.m_menuTopPanel.m_puaseBtn.onClick(this,this.OnClickPauseBtn),this.m_debugBtn_uplevel.onClick(this,this.onClickDebugBtn_Uplevel),this.m_debugBtn_addStageLevel.onClick(this,this.onClickDebugBtn_addStageLevel),this.m_debugBtn_trigger.onClick(this,this.onClickDebugBtn_trigger),this.m_debugBtn_music.onClick(this,this.onClickDebugBtn_music),this.initGMBtn()}initGMBtn(){let e=this.m_gmBtn;e.draggable=!0,e.dragBounds=new Laya.Rectangle(-50,-50,Laya.stage.width+100,Laya.stage.height+100),e.visible=!0,window.gmButton=e,e.onClick(this,this.onClickGMBtn)}onClickGMBtn(){this.m_debugBar.visible=!this.m_debugBar.visible}onClickDebugBtn_music(){Laya.SoundManager.musicMuted=!Laya.SoundManager.musicMuted}onClickDebugBtn_Uplevel(){Re.current.uplevel()}onClickDebugBtn_addStageLevel(){de.addGameLevel()}onClickDebugBtn_trigger(){Tt.game.debugPlayerTrigger()}onWindowDestory(){return!1}onWindowWillShow(){this.m_pausePanel.Close()}onWindowWillHide(){}onWindowShow(){this.preGold=0,this.m_menuTopPanel.SetCoinIconState(),Tt.launch(),Laya.timer.frameLoop(1,this,this.OnUpdate)}onWindowHide(){Laya.timer.clearAll(this)}OnClickPauseBtn(){this.m_pausePanel.Open()}OnUpdate(){this.m_menuTopPanel.m_coinText.text=de.goldPerGame+"",this.m_menuTopPanel.m_countText.text=de.turnsToBoss+"",this.m_menuTopPanel.m_levelTex.text=de.gameLevel+"",this.preGold!=de.goldPerGame&&(this.preGold=de.goldPerGame,this.m_menuTopPanel.PlayFxCoin())}}class Kt extends wt{constructor(){super(),this.addAssetForFguiComponent(qt)}generateAssetsForDynmic(){super.generateAssetsForDynmic()}onMenuCreate(){let e=qt.createInstance();this.conent=e,this.contentPane=e,super.onMenuCreate()}onShowComplete(){super.onShowComplete()}onHideComplete(){super.onHideComplete()}}class jt{static get dict(){return this._dict||(this._dict=new Dictionary),this._dict}static get(e){return jt.dict.getValue(e)}static add(e,t){jt.dict.add(e,new Nt(e,t))}static install(){jt.add(k.Login,Vt),jt.add(k.Home,vt),jt.add(k.War,Kt)}}class zt extends u{get menuId(){return this.id}get menuLayer(){return this.layer}get menuCloseOtherType(){return this.closeOtherType}get menuLoaderId(){return dt.Launch}get iconUrl(){return this._iconUrl||isNullOrEmpty(this.icon)||(this._iconUrl=Ht.getMenuIconUrl(this.icon)),this._iconUrl}get nameIconUrl(){return this._nameIcon||isNullOrEmpty(this.moduleNameIcon)||(this._nameIcon=Ht.getMenuNameIconUrl(this.moduleNameIcon)),this._nameIcon}get isSubbarMainButton(){return this.menuId>=k.SubMenuButtonBegin}get isUnlock(){let e=this.menuId;return!Co.config.unlock.hasConfig(e)||Co.moduleModel.home.IsOpen(e)}get lockText(){let e=Co.config.unlock.getUnlockConfig(this.menuId);if(e){let t=e.openLevel<=Co.user.level?"":`需要主公等级达到${e.openLevel}`;if(!e.checkPoint)return t+"后开启";let i=Co.config.checkPoint.getConfig(e.checkPoint),s=Co.moduleModel.section.getMissionDataById(e.checkPoint).isActive,a=`通过关卡${i.chapter}-${i.mapID}`;return Boolean(t)?t+(s?",且"+a:""):a+"后开启"}return Ft.Lock}get lockVisiable(){let e=Co.config.unlock.getConfig(this.menuId);return!e||0==e.showType}get enableOpen(){return Ut.getInstance().validate(this.menuId)}get isNew(){return Ot.getInstance().validate(this.menuId)}async openMenu(){if(this.menuId<k.SubMenuButtonBegin){if(!this.isUnlock)return Co.system.toastText(this.lockText),!1;let e=jt.get(this.menuId);if(!e)return Co.system.toastText(Ft.Disable),!1;if(e.windowClass){if(!await e.windowClass.AsyncEnableOpen())return!1}if(this.enableOpen)return Co.menu.open(this.menuId),!0}return!0}}class Yt extends m{}class $t extends g{}class Jt extends d{get cardTypeIdList(){if(!this._cardTypeIdList){var e=[];for(var t of(this._cardTypeIdList=e,this.cardTypeList)){var i=Co.config.cardScoreType.keyToTypeId(t);i>0&&e.push(i)}}return this._cardTypeIdList}}class Qt extends p{get menuConfig(){return Co.config.menu.getConfig(this.menuId)}get lockvisible(){return 1==this.showType}get isUnlock(){let e=this.menuConfig;return!!e&&e.isUnlock}get IsNew(){let e=this.menuConfig;return!!e&&e.isNew}get isOpenShow(){return!1}get isOpenShowMenu(){return!1}get iconUrl(){return""}}class Zt{constructor(e,t){this._configList=[],this.tableName=e,this.tabelConfigClass=t}onGameLoadedAll(){}get configDict(){return this._configDict||(this._configDict=di.pbconfig[this.tableName]),this._configDict}get configList(){if(0==this._configList.length)for(let e in this.configDict)this._configList.push(this.configDict[e]);return this._configList}getConfigList(){return this.configList}getConfig(e){return this.configDict[e]||console.log(`${this.tableName} 没有 id=${e} 的配置`),this.configDict[e]}hasConfig(e){return!!this.configDict[e]}shieldConfig(e){for(let t=0,i=e.length;t<i;t++){let i=e[t];if(this.hasConfig(i)){delete this._configDict[i];let e=this.configList;for(let t=0,s=e.length;t<s;t++)if(e[t].id==i){e.splice(t,1);break}}}}}class ei extends Zt{constructor(){super(...arguments),this.typeMap=new Map}static GetId(e,t=1){return 100*e+t}getTypeLevelConfig(e,t=1){var i=ei.GetId(e,t);return this.getConfig(i)}onGameLoadedAll(){super.onGameLoadedAll(),this.typeMap.clear();let e=this.configList;for(let s=0;s<e.length;s++){var t,i=e[s];this.typeMap.has(i.cardScoreType)?t=this.typeMap.get(i.cardScoreType):(t=[],this.typeMap.set(i.cardScoreType,t)),t.push(i)}}getConfigListByTypeKey(e){return this.typeMap.get(e)}}class ti extends Zt{constructor(){super(...arguments),this.configsByKey=new Map}onGameLoadedAll(){if(0!=this.configsByKey.size)return;super.onGameLoadedAll();let e=this.configList;for(let t=0;t<e.length;t++){let i=e[t].key;isNullOrEmpty(i)&&(i=e[t].id),this.configsByKey.set(i,e[t])}}getConfig(e){if(0==this.configsByKey.size&&this.onGameLoadedAll(),!this.configsByKey.has(e)){if(this.hasConfig(e))return super.getConfig(e);console.log(`${this.tableName} 没有 key=${e} 的配置`)}return this.configsByKey.get(e)}keyToTypeId(e){var t=this.getConfig(e);if(t)return t.id}}class ii extends Zt{constructor(){super(...arguments),this.configsByKey=new Map}onGameLoadedAll(){if(0!=this.configsByKey.size)return;super.onGameLoadedAll();let e=this.configList;for(let t=0;t<e.length;t++){let i=e[t].effectTypeKey;isNullOrEmpty(i)&&(i=e[t].id),this.configsByKey.set(i,e[t])}}getConfig(e){if(0==this.configsByKey.size&&this.onGameLoadedAll(),!this.configsByKey.has(e)){if(this.hasConfig(e))return super.getConfig(e);console.log(`${this.tableName} 没有 key=${e} 的配置`)}return this.configsByKey.get(e)}keyToTypeId(e){var t=this.getConfig(e);if(t)return t.id}}class si extends Zt{constructor(){super(...arguments),this.typeMap=new Map}onGameLoadedAll(){super.onGameLoadedAll(),this.typeMap.clear();let e=this.configList;var t=Co.config.itemConsume.configList;this.addConfigList(t,B.Consume);t=Co.config.itemDecorate.configList;this.addConfigList(t,B.Decorate);t=Co.config.itemWeapon.configList;this.addConfigList(t,B.Weapon);for(let t=0;t<e.length;t++){var i,s=e[t];this.typeMap.has(s.type)?i=this.typeMap.get(s.type):(i=[],this.typeMap.set(s.type,i)),i.push(s)}}getConfigListByTypeKey(e){return this.typeMap.get(e)}addConfigList(e,t){var i=this.configDict,s=this.configList;for(var a of e)i[a.id]||(a.type=t,i[a.id]=a,s.push(a))}}class ai extends Zt{}class ni extends Zt{}class ri extends Zt{}class oi extends Zt{constructor(){super(...arguments),this.levelMax=0}onGameLoadedAll(){let e=this.configList;for(let t=0;t<e.length;t++){let i=e[t];this.levelMax=Math.max(this.levelMax,i.id)}}}class li extends Zt{}class ci extends Zt{constructor(){super(...arguments),this.barDict=new Dictionary}getBarMenus(e){let t=[],i=[];for(let s=0,a=(t=this.barDict.getValue(e)).length;s<a;s++){let e=t[s],a=Co.config.unlock.getUnlockConfig(e.menuId);a&&2!=a.showType&&e.menuId!=k.Sections&&i.push(e)}return i.sort((e,t)=>e.barIndex-t.barIndex),i}getShowBarMenus(e){let t=[],i=[];for(let s=0,a=(t=this.barDict.getValue(e)).length;s<a;s++){let e=t[s],a=Co.config.unlock.getUnlockConfig(e.menuId);a&&1==a.showType&&a.showLevel<=Co.user.level&&i.push(e)}return i.sort((e,t)=>e.barIndex-t.barIndex),i}onGameLoadedAll(){let e=this.configList;for(let t=0;t<e.length;t++){let i=e[t],s=this.barDict.getValue(i.barType);s||(s=[],this.barDict.add(i.barType,s)),s.push(i)}}}class hi extends Zt{constructor(){super(...arguments),this.configsByKey=new Map}onGameLoadedAll(){super.onGameLoadedAll();let e=this.configList;for(let t=0;t<e.length;t++){let i=e[t].key;isNullOrEmpty(i)&&(i=e[t].id),this.configsByKey.set(i,e[t])}}getConfig(e){if(!this.configsByKey.has(e)){if(this.hasConfig(e))return super.getConfig(e);console.log(`${this.tableName} 没有 key=${e} 的配置`)}return this.configsByKey.get(e)}getTxt(e){let t=this.getConfig(e);return t?t.notice:`[Error]${this.tableName} 没有 key=${e} 的配置`}getTxtFormat(e,...t){return this.getTxt(e).format(...t)}}class ui extends Zt{}class mi extends Zt{constructor(){super(...arguments),this.configsByKey=new Map}onGameLoadedAll(){if(0!=this.configsByKey.size)return;super.onGameLoadedAll();let e=this.configList;for(let t=0;t<e.length;t++){let i=e[t].triggerTypeKey;isNullOrEmpty(i)&&(i=e[t].id),this.configsByKey.set(i,e[t])}}getConfig(e){if(0==this.configsByKey.size&&this.onGameLoadedAll(),!this.configsByKey.has(e)){if(this.hasConfig(e))return super.getConfig(e);console.log(`${this.tableName} 没有 key=${e} 的配置`)}return this.configsByKey.get(e)}keyToTypeId(e){var t=this.getConfig(e);if(t)return t.id}}class gi extends Zt{constructor(){super(...arguments),this.menuConfigs=new Dictionary,this.menuGroups=new Dictionary,this.unlockGroups=new Dictionary,this.sortMenus=new Dictionary}setConfig(e){let t,i,s,a;e.menuIndexId?this.menuConfigs.add(e.menuIndexId,e):this.menuConfigs.add(e.menuId,e),i=e.group,this.menuGroups.hasKey(i)?t=this.menuGroups.getValue(i):(t=[],this.menuGroups.add(i,t)),t.push(e),a=e.openType,this.unlockGroups.hasKey(a)?s=this.unlockGroups.getValue(a):(s=[],this.unlockGroups.add(a,s)),s.push(e)}getUnlockConfig(e){return this.menuConfigs.getValue(e)}getBarMenus(e){let t=this.menuGroups.getValue(e);return 0==this.sortMenus.hasKey(e)&&(t.sort((e,t)=>e.groupId-t.groupId),this.sortMenus.add(e,!0)),t}getUnlocks(e){return this.unlockGroups.getValue(e)}onGameLoadedAll(){let e=this.configList;for(let t of e)this.setConfig(t)}}class di{constructor(){this.card=new ei("Card",Gt),this.cardScoreType=new ti("CardScoreType",Pt),this.effectType=new ii("EffectType",kt),this.item=new si("Item",Mt),this.itemConsume=new ai("ItemConsume",xt),this.itemDecorate=new ni("ItemDecorate",bt),this.itemWeapon=new ri("ItemWeapon",Dt),this.level=new oi("Level",Bt),this.loader=new li("Loader",At),this.menu=new ci("Menu",zt),this.msg=new hi("Msg",Yt),this.property=new ui("Property",$t),this.triggerType=new mi("TriggerType",Jt),this.unlock=new gi("Unlock",Qt)}static Init(){excelconfig.Card=Gt,excelconfig.CardScoreType=Pt,excelconfig.EffectType=kt,excelconfig.Item=Mt,excelconfig.ItemConsume=xt,excelconfig.ItemDecorate=bt,excelconfig.ItemWeapon=Dt,excelconfig.Level=Bt,excelconfig.Loader=At,excelconfig.Menu=zt,excelconfig.Msg=Yt,excelconfig.Property=$t,excelconfig.TriggerType=Jt,excelconfig.Unlock=Qt}}class pi extends di{}!function(e){e[e.pb=0]="pb",e[e.json=1]="json"}(Ct||(Ct={}));class Ci extends pi{constructor(){super(...arguments),this.sLoadProgress=new Typed3Signal,this.sLoaded=new Signal,this.loadProgress=0,this.readers=[],this.readerMap=new Map,this.configType=Ct.json}initList(){di.Init(),this.readers.length=0;for(let e in this){let t=this[e];t instanceof Zt&&(this.readers.push(t),this.readerMap.set(t.tableName,t))}}async loadAllAsync(){this.loadProgress=0;this.readers.length;switch(this.configType){case Ct.pb:await this.loadPB();break;default:await this.loadJson()}window.Global=di.pbconfig.Global,this.onGameLoadedAll()}async loadPB(){let e=await Co.asset.loadResAsync("res/config/pb/excelconfig.bin",Laya.Loader.BUFFER),t=new Uint8Array(e);di.pbconfig=excelconfig.ConfigMng.decode(t)}async loadJson(){let e=await Co.asset.loadResAsync("res/config/pb/excelconfig.json",Laya.Loader.JSON);this.InstallJson(e)}InstallJson(e){let t=di.pbconfig=new excelconfig.ConfigMng,i=e.Global,s=new excelconfig.Global;for(var a in i){this.keyToPbKey(a);s[a]=i[a]}t.Global=s;for(let i in e){let s=e[i];if(!this.readerMap.has(i))continue;let n=this.readerMap.get(i).tabelConfigClass;t[i]={};for(let e in s){let r=s[e],o=new n;for(var a in r){o[this.keyToPbKey(a)]=r[a]}t[i][e]=o}}}keyToPbKey(e){if(-1==e.indexOf("_"))return e;let t=e.split("_");for(let e=1;e<t.length;e++){let i=t[e];i.length>=1&&(t[e]=i.substr(0,1).toUpperCase()+i.substr(1,i.length-1))}return e=t.join("")}onGameLoadedAll(){for(let e=0;e<this.readers.length;e++)this.readers[e].onGameLoadedAll();this.sLoaded.dispatch()}}class Si{constructor(){this.developWidth=750,this.developHeight=1334}get developAspect(){return this.developWidth/this.developHeight}get isLandsape(){return this.developWidth>this.developHeight}get screenWidth(){return Laya.stage.width}get screenHeight(){return Laya.stage.height}get isWX(){return!!window.wx}get safeArea(){if(this.isWX)return wx.getSystemInfoSync().safeArea}get liuHaiHeightTop(){return 44}get liuHaiHeightBottom(){return this.isWX?this.liuHaiHeightTop:44}get screenHeightLiuHai(){return fgui.GRoot.inst.height-this.liuHaiHeightTop-this.liuHaiHeightBottom}get screenWidthLiuHai(){return fgui.GRoot.inst.width-this.liuHaiHeightTop-this.liuHaiHeightBottom}get screenAspect(){return this.screenWidth/this.screenHeight}get screenScaleExpand(){let e=1;return e=this.screenAspect<=this.developAspect?this.screenHeight/this.developHeight/(this.screenWidth/this.developWidth):this.screenWidth/this.developWidth/(this.screenHeight/this.developHeight)}get screenScaleX(){return this.screenWidth/this.developWidth}get screenScaleY(){return this.screenHeight/this.developHeight}get screenScaleShrink(){return Math.min(this.screenScaleX,this.screenScaleY)}get screenScaleShrinkMax(){let e=1;return e=this.screenAspect<=this.developAspect?this.screenHeight/this.developHeight:this.screenWidth/this.developWidth}}class fi{get username(){return this._username||(this._username=this.getString("username",!0)),this._username}set username(e){this._username=e,this.setString("username",e,!0),Co.sound.onLogin()}getKey(e,t=!1){return t?e:this.username+"_"+e}setItem(e,t,i=!1){Laya.LocalStorage.setItem(this.getKey(e,i),t)}getItem(e,t=!1){return Laya.LocalStorage.getItem(this.getKey(e,t))}setString(e,t,i=!1){Laya.LocalStorage.setItem(this.getKey(e,i),t)}getString(e,t=!1){let i=Laya.LocalStorage.getItem(this.getKey(e,t));return null==i&&(i=""),i}setBoolean(e,t,i=!1){Laya.LocalStorage.setItem(this.getKey(e,i),t?"true":"false")}getBoolean(e,t=!1){return"true"==Laya.LocalStorage.getItem(this.getKey(e,t))}setInt(e,t,i=!1){Laya.LocalStorage.setItem(this.getKey(e,i),t.toString())}getInt(e,t=!1){let i=Laya.LocalStorage.getItem(this.getKey(e,t));return i?parseInt(i):0}setFloat(e,t,i=!1){Laya.LocalStorage.setItem(this.getKey(e,i),t.toString())}getFloat(e,t=!1){let i=Laya.LocalStorage.getItem(this.getKey(e,t));return i?parseFloat(i):0}setJSON(e,t,i=!1){Laya.LocalStorage.setJSON(this.getKey(e,i),t)}getJSON(e,t=!1){return Laya.LocalStorage.getJSON(this.getKey(e,t))}removeItem(e,t=!1){return Laya.LocalStorage.removeItem(this.getKey(e,t))}hasItem(e,t=!1){return!isNullOrEmpty(Laya.LocalStorage.getItem(this.getKey(e,t)))}clear(){return Laya.LocalStorage.clear()}}class yi extends fi{static get Instance(){return yi._Instance||(yi._Instance=new yi),yi._Instance}get gmX(){return void 0===this._gmX&&(this._gmX=this.getFloat("gmX",!0)),this._gmX}set gmX(e){this._gmX=e,this.setFloat("gmX",e,!0)}get gmY(){return void 0===this._gmY&&(this.hasItem("gmY",!0)?this._gmY=this.getFloat("gmY",!0):this._gmY=100),this._gmY}set gmY(e){this._gmY=e,this.setFloat("gmY",e,!0)}get fontSetting(){return this._fontSetting||(this._fontSetting=this.getItem("fontSetting",!0)),this._fontSetting}set fontSetting(e){this._fontSetting=e,this.setItem("fontSetting",e,!0)}get serverName(){return this._serverName||(this._serverName=this.getItem("serverName",!0)),this._serverName}set serverName(e){this._serverName=e,this.setItem("serverName",e,!0)}get useraccountList(){return this._useraccountList||(this._useraccountList=this.getJSON("_useraccountList",!0)),this._useraccountList||(this._useraccountList=[]),this._useraccountList}set useraccountList(e){this._useraccountList=e,this.setJSON("_useraccountList",e,!0)}addUseraccount(e,t){let i=!1,s=this.useraccountList?this.useraccountList:[];for(let a=0;a<s.length;a++)s[a].username==e&&(s[a].password=t,s[a].lasttime=Co.time.localTimeMS,i=!0);i||s.push({username:e,password:t,lasttime:Co.time.localTimeMS}),s.sort((e,t)=>t.lasttime-e.lasttime),this.useraccountList=s}get password(){return this._password||(this._password=this.getItem("password"),null==this._password&&(this._password="")),this._password}set password(e){this._password=e,this.setItem("password",e)}get server(){return this._server||(this._server=this.getInt("server"),null==this._server&&(this._server=0)),this._server}set server(e){this._server=e,this.setInt("server",e)}get deviceId(){if(!this._deviceId&&!(this._deviceId&&"undefined"!=this._deviceId&&null!=this._deviceId||(this._deviceId=this.getString("_deviceId",!0),this._deviceId))){let e=(new Date).getTime(),t=Math.random();this._deviceId=e.toString()+"."+t.toString()}return this._deviceId}set deviceId(e){this._deviceId=e,this.setString("_deviceId",e,!0)}get guestusername(){return this._guestusername||(this._guestusername=this.getString("guest",!0)),this._guestusername}set guestusername(e){this._guestusername=e,this.setString("guest",e,!0),Co.sound.onLogin()}get isGuest(){return void 0===this._isGuest&&(this._isGuest=this.getBoolean("isGuest",!0)),this._isGuest}set isGuest(e){this._isGuest=e,this.setBoolean("isGuest",e,!0)}get isGameGuest(){return void 0===this._isGameGuest&&(this._isGameGuest=this.getBoolean("isGameGuest",!0)),this._isGameGuest}set isGameGuest(e){this._isGameGuest=e,this.setBoolean("isGameGuest",e,!0)}get isNoticTodayNoOpen(){return void 0===this._isNoticTodayNoOpen&&(this._isNoticTodayNoOpen=this.getBoolean("isNoticTodayNoOpen",!0)),this._isNoticTodayNoOpen}set isNoticTodayNoOpen(e){this._isNoticTodayNoOpen=e,this.setBoolean("isNoticTodayNoOpen",e,!0)}get lastOpenShopSpecialTime(){return void 0===this._lastOpenShopSpecialTime&&(this._lastOpenShopSpecialTime=this.getFloat("lastOpenShopSpecialTime",!0)),this._lastOpenShopSpecialTime}set lastOpenShopSpecialTime(e){this._lastOpenShopSpecialTime=e,this.setFloat("lastOpenShopSpecialTime",e,!0)}get lastOpenShopSingleTime(){return void 0===this._lastOpenShopSingleTime&&(this._lastOpenShopSingleTime=this.getFloat("lastOpenShopSingleTime",!0)),this._lastOpenShopSingleTime}set lastOpenShopSingleTime(e){this._lastOpenShopSingleTime=e,this.setFloat("lastOpenShopSingleTime",e,!0)}}!function(e){e[e.VeryLower=0]="VeryLower",e[e.Lower=1]="Lower",e[e.Middle=2]="Middle",e[e.Hight=3]="Hight"}(St||(St={}));class wi{constructor(){this.skeletonCacheMaxNum=10,this.unitMaxNum=10,this.roomUnitMaxNum=2,this.menuCacheTime=1e4,this.fguiLoaderCacheNum=100,this.fguiLoaderCacheTime=100,this.trailNum=5,this._performanceType=St.Lower,this._networkType=-1}get performanceType(){return this._performanceType}set performanceType(e){switch(this._performanceType=e,e){case St.VeryLower:this.skeletonCacheMaxNum=5,this.unitMaxNum=18,this.roomUnitMaxNum=2,this.menuCacheTime=3e3,this.fguiLoaderCacheNum=50,this.fguiLoaderCacheTime=3e3,this.trailNum=1;break;case St.Lower:this.skeletonCacheMaxNum=10,this.unitMaxNum=20,this.roomUnitMaxNum=3,this.menuCacheTime=3e3,this.fguiLoaderCacheNum=30,this.fguiLoaderCacheTime=3e3,this.trailNum=2;break;case St.Middle:this.skeletonCacheMaxNum=25,this.unitMaxNum=30,this.roomUnitMaxNum=4,this.menuCacheTime=1e4,this.fguiLoaderCacheNum=60,this.fguiLoaderCacheTime=1e4,this.trailNum=4;break;case St.Hight:this.skeletonCacheMaxNum=50,this.unitMaxNum=50,this.roomUnitMaxNum=4,this.menuCacheTime=3e5,this.fguiLoaderCacheNum=100,this.fguiLoaderCacheTime=1e5,this.trailNum=5}}init(){let e=this.getTotalMem();this.performanceType=e<=0?St.Hight:e<=1048576?St.VeryLower:e<=2097152?St.Middle:St.Hight}get isApp(){return!!window.conch}getTotalMem(){return this.isApp?window.conch.config.getTotalMem():0}getUsedMem(){return this.isApp?window.conch.config.getUsedMem():0}getAvalidMem(){return this.isApp?window.conch.config.getAvalidMem():0}getNetworkType(){return-1!=this._networkType?this._networkType:this.isApp?(this._networkType=window.conch.config.getNetworkType(),this._networkType):NetworkType.NET_UNKNOWN}set networkType(e){this._networkType=e}printInfo(){let e=` TotalMem: ${kbToStr(this.getTotalMem())}\n UsedMem: ${kbToStr(this.getUsedMem())}\n AvalidMem: ${kbToStr(this.getAvalidMem())}\n NetworkType: ${this.getNetworkType()}`;console.log(e)}}class Li{static toLang(e){-1!=(e=e.replace("-","_").toLowerCase()).indexOf("en")&&(e=Li.en);{let t=!1;for(let i in Li)if(i==e){t=!0;break}t||(e=Li.en)}return e}}Li.zh_cn="zh_cn",Li.zh_tw="zh_tw",Li.en="en";class _i{constructor(){this.configs=new Dictionary}getConfigList(){return this.configs.getValues()}get configList(){return this.configs.getValues()}getConfig(e){return this.configs.hasKey(e)||console.log(`${this.tableName} 没有 id=${e} 的配置`),this.configs.getValue(e)}addConfig(e){this.configs.add(e.id,e)}getConfigPath(){return Ht.config+`csv/${this.tableName}.csv`}load(e,t){}reload(e,t){}onGameLoadedAll(){}clear(){this.configs.clear()}}class vi extends _i{constructor(){super(...arguments),this.csvDelimiter="\t",this.csvSeparatorReplace=null,this.csvLineSeparatorReplace="|n|",this.headTypes=new Dictionary,this.headKeyEns=new Dictionary,this.headKeyFields=new Dictionary,this.headKeyCns=new Dictionary}ReplaceSpearator(e){return"TextFgui"==this.tableName&&e.indexOf(this.csvLineSeparatorReplace),e=(e=e.replace(/\|n\|/g,"\n")).replace(/\r/g,"")}load(e,t){e.loadConfig(this.getConfigPath(),(i,s)=>{this.parse(i),t&&t(this),e.unloadConfig(this.getConfigPath())})}reload(e,t){this.clear(),this.load(e,t)}clear(){this.headTypes.clear(),this.headKeyEns.clear(),this.headKeyFields.clear(),this.headKeyCns.clear(),super.clear()}parse(e){if(null==e)return void console.error(`${this.tableName}: txt=${e}`);let t,i,s=e.split("\n");i=(t=s[0]).split(this.csvDelimiter),this.ParseHeadTypes(i),i=(t=s[1]).split(this.csvDelimiter),this.ParseHeadKeyCN(i),i=(t=s[2]).split(this.csvDelimiter),this.ParseHeadKeyEN(i);for(let e=3;e<s.length;e++)if(t=s[e],!isNullOrEmpty(t)){i=t.split(this.csvDelimiter);for(let e=0;e<i.length;e++)i[e]=this.ReplaceSpearator(i[e]);this.ParseCsv(i)}}ParseHeadTypes(e){let t;for(let i=0;i<e.length;i++)t=e[i],isNullOrEmpty(t)||(t=t.trim(),this.headTypes.add(i,t))}ParseHeadKeyCN(e){let t;for(let i=0;i<e.length;i++)t=this.ReplaceSpearator(e[i]),isNullOrEmpty(t)||(t=t.trim(),this.headKeyCns.add(i,t))}ParseHeadKeyEN(e){let t;for(let i=0;i<e.length;i++)t=e[i],isNullOrEmpty(t)||(t=t.trim(),this.headKeyEns.hasKey(t)&&console.error(`${this.tableName}: ParseHeadKeyEN 已经存在key= ${t},  i = ${i}`),this.headKeyEns.add(t,i),this.headKeyFields.add(i,t))}ParseCsv(e){}GetHeadType(e){return this.headTypes.getValue(e)}GetHeadField(e){return this.headKeyFields.getValue(e)}GetHeadIndex(e){return this.headKeyEns.hasKey(e)?this.headKeyEns.getValue(e):(console.error(`${this.tableName}: headKeyEns[${e}] = -1`),-1)}onGameLoadedAll(){}}class Ti{}class Ii extends Ti{constructor(){super(...arguments),this.dict=new Dictionary}}class Gi{}Gi.MString="string",Gi.MStringArray="string[]";class Pi extends vi{constructor(e){super(),this.lang="zh_cn",this.tableName=e}getConfigPath(){return`config/lang/${this.lang}/${this.tableName}.csv`}get headKeyFieldList(){return this._headKeyFieldList||(this._headKeyFieldList=this.headKeyFields.getValues()),this._headKeyFieldList}ParseCsv(e){let t=new Ii;t.id=csvGetInt(e,this.GetHeadIndex("id"));let i=this.headKeyFieldList;for(let s=0;s<i.length;s++){let a=csvGetString(e,this.GetHeadIndex(i[s]));switch(this.GetHeadType(s)){case Gi.MStringArray:t.dict.add(i[s],toStringArray(a));break;default:t.dict.add(i[s],a)}}this.addConfig(t)}}class ki{constructor(){this.lang="zh_cn",this.renders=[],this.textCode=new Pi("TextCode"),this.textFgui=new Pi("TextFgui")}initList(){}}class Mi extends ki{constructor(){super(...arguments),this.sLoadProgress=new Typed3Signal,this.sLoaded=new Signal,this.loadProgress=0,this.isLoadCompleted=!1,this.textRenders=[],this.sTextLoaded=new Signal}async loadAllAsync(){return new Promise(e=>{this.loadAll(),this.sLoaded.addOnce(()=>{e()},this)})}loadAll(){this.loadProgress=0;let e=this.renders.length,t=0,i=()=>{t++,this.loadProgress=t/e,this.sLoadProgress.dispatch(t,e,this.loadProgress),t>=e&&this.onGameLoadedAll()};for(let e=0;e<this.renders.length;e++)this.renders[e].lang=this.lang,this.renders[e].load(this.configLoader,i)}onGameLoadedAll(){for(let e=0;e<this.renders.length;e++)this.renders[e].onGameLoadedAll();this.setCodeTEXT(),mt.setStringsSource(this.textFgui),this.isLoadCompleted=!0,this.sLoaded.dispatch()}loadText(){let e=this.textRenders;0==e.length&&(e.push(this.textCode),e.push(this.textFgui)),this.loadProgress=0;let t=e.length,i=0,s=()=>{++i>=t&&this.onLoadTextComplte()};for(let t=0;t<e.length;t++)e[t].lang=this.lang,e[t].load(this.configLoader,s)}onLoadTextComplte(){let e=this.textRenders;for(let t=0;t<e.length;t++)e[t].onGameLoadedAll();this.setCodeTEXT(),mt.setStringsSource(this.textFgui),this.sTextLoaded.dispatch()}setCodeTEXT(){if(!this._srcTEXT&&Ft){this._srcTEXT=new Dictionary;for(let e in Ft)this._srcTEXT.add(e,Ft[e])}let e=this.textCode.getConfigList();for(let t=0;t<e.length;t++){let i=e[t],s=i.dict.getValue("key"),a=i.dict.getValue("value");isNullOrEmpty(a)||(Ft[s]=a)}}}class xi{constructor(){this.isUseLang=!1,this._lang=null,this.langListDict=new Dictionary}static get Instance(){return xi._Instance||(xi._Instance=new xi),xi._Instance}get httpLang(){return this._httpLang||(this.httpLang=this.lang),this._httpLang}set httpLang(e){if((e=e.replace("_","-")).indexOf("-")){let t=e.split("-");for(let e=1;e<t.length;e++)t[e]=t[e].toUpperCase();e=t.join("-")}this._httpLang=e}get lang(){return this._lang||(Co.localStorage.hasItem("_lang",!0)?this._lang=Co.localStorage.getString("_lang",!0):this._lang=Li.zh_cn,this.httpLang=this._lang),this._lang}set lang(e){this._lang=e,this.httpLang=e,Co.localStorage.setString("_lang",e,!0)}get current(){if(this._current)return this._current;if(!this.langListDict.hasKey(this.lang)){let e=new Mi;e.lang=this.lang,this.langListDict.add(e.lang,e),this._current=e}return this.langListDict.getValue(this.lang)}getValue(e,t,i){let s=this.current[e];if(s){let e=s.getConfig(t);if(e)return e.dict.getValue(i)}return null}}class bi{static getResPackagePath(e,t){return isNullOrEmpty(t)?`${bi.resRoot}${e}`:`${bi.resRoot}${t}/${e}`}static getResPath(e,t){return isNullOrEmpty(t)?`${bi.resRoot}${e}`:`${bi.resRoot}${t}/${e}`}static getMapPath(e){return this.getResPath(e,"map")}static addPackage(e,t){if(bi._uiPackageDict.hasKey(e))return bi._uiPackageDict.getValue(e);{let t=fgui.UIPackage.addPackage(e);return bi._uiPackageDict.add(e,t),t}}static removePackage(e,t){let i=bi._uiPackageDict.getValue(e);i&&(fgui.UIPackage.removePackage(i.id),i.dispose(),bi._uiPackageDict.remove(e)),bi._uiPackageDictForReferenceNum.remove(e)}static hasLoadPackage(e){return bi._uiPackageDict.hasKey(e)}static addPackageReferenceNum(e){let t=bi.getPackageReferenceNum(e)+1;return 0==t&&(t=1),console.log("~~addPackageReferenceNum:  "+t+"  "+e),bi._uiPackageDictForReferenceNum.add(e,t),t}static removePackageReferenceNum(e){let t=bi.getPackageReferenceNum(e)-1;return t<0&&(t=0),console.log("~~removePackageReferenceNum:  "+t+"  "+e),bi._uiPackageDictForReferenceNum.add(e,t),t}static getPackageReferenceNum(e){return bi._uiPackageDictForReferenceNum.hasKey(e)?bi._uiPackageDictForReferenceNum.getValue(e):0}}bi.resRoot="res/",bi.packageFileExtension="bin",bi._uiPackageDict=new Dictionary,bi._uiPackageDictForReferenceNum=new Dictionary;var Di=Laya.Handler,Bi=Laya.Loader;class Ai{constructor(){this.loadedAssets=new Dictionary}loadConfig(e,t){if(t){let i={onLoaded:()=>{let i=Laya.loader.getRes(e);t(i,e)}};Laya.loader.load(e,Di.create(i,i.onLoaded),null,Bi.TEXT)}}unloadConfig(e){Laya.loader.clearRes(e)}loadList(e,t,i,s){let a=e.length,n=0,r={onComplete:r=>{let o=e[n];if(n++,s){s(a>0?n/a:1,n,a,o)}n>=a&&i&&(t?i.apply(t):i())},onProgress:e=>{}};if(e&&e.length>0){let t,i=[];for(let s=0;s<e.length;s++)switch((t=e[s])||r.onComplete(t),t.type){case H.FguiPackage:this.loadFguiByPackagename(t.url,r,r.onComplete);break;case H.FspritePackage:this.loadFSpriteByPackagename(t.url,r,r.onComplete);break;case H.Image:i.push({url:t.url,type:Bi.IMAGE});break;case H.Buffer:i.push({url:t.url,type:Bi.BUFFER});break;case H.Sound:i.push({url:t.url,type:Bi.SOUND});break;case H.Text:i.push({url:t.url,type:Bi.TEXT});break;case H.Json:i.push({url:t.url,type:Bi.JSON});break;case H.Xml:i.push({url:t.url,type:Bi.XML});break;case H.Font:i.push({url:t.url,type:Bi.FONT});break;case H.TTF:i.push({url:t.url,type:Bi.TTF})}if(i.length>0)for(let e=0;e<i.length;e++)this.loadedAssets.hasKey(i[e].url)?r.onComplete(!0):Laya.loader.load([i[e]],Di.create(r,r.onComplete),Di.create(r,r.onProgress)),this.loadedAssets.add(i[e].url,Co.time.localTimeMS)}else r.onComplete(null)}loadFguiByPackagename(e,t,i){let s=Co.guiRes.getconfig(e);this.loadFgui(s,t,i)}async loadFguiByPackagenameAsync(e){return new Promise(t=>{this.loadFguiByPackagename(e,this,e=>{t(e)})})}loadFSpriteByPackagename(e,t,i){let s=Co.spriteRes.getconfig(e);s?this.loadFgui(s,t,i):console.error(`AssetManager loadFSpriteByPackagename: packageConfig=${s} packageName=${e}`)}loadFgui(e,t,i){if(!e)return void console.error(`AssetManager loadFgui: packageConfig=${e}`);let s={apply:()=>{if(bi.addPackage(e.packagePath,e),i){if(t)return i.apply(t,[e]);i(e)}}};bi.addPackageReferenceNum(e.packagePath),bi.hasLoadPackage(e.packagePath)?s.apply():Laya.loader.load(e.loadList,Di.create(s,s.apply))}unloadFgui(e,t){void 0===t&&(t=!1);let i=Co.guiRes.getconfig(e);if(i||(i=Co.spriteRes.getconfig(e)),i){let e=bi.removePackageReferenceNum(i.packagePath);if(!t&&e>0)return;bi.removePackage(i.packagePath,i);let s=i.loadList;for(let e=0;e<s.length;e++)Laya.loader.clearRes(s[e].url)}}loadFx(e,t,i){Laya.loader.load(e,Di.create(null,e=>{i&&(t?i.apply(t,e):i(e))}),null,Bi.JSON)}load(e,t,i,s){Laya.loader.load(e,Di.create(null,e=>{t&&(i?t.apply(i,[e]):t(e))}),null,ht.assetItemType2LayaLoaderType(s))}async loadAsync(e,t){return new Promise(i=>{this.load(e,e=>{i(e)},null,t)})}async loadResAsync(e,t){return new Promise(i=>{Laya.loader.load(e,Laya.Handler.create(null,e=>{Laya.timer.frameOnce(1,null,()=>{i(e)})}),null,t)})}async loadShaderVSAsync(e){return(await this.loadAsync(Ht.getShaderVS(e),H.Text)).replace(/\r/g,"")}async loadShaderPSAsync(e){return(await this.loadAsync(Ht.getShaderPS(e),H.Text)).replace(/\r/g,"")}async preloadAndInstallSoundAsync(e){return new Promise(t=>{if(!Engine.borwer.isWXGame)return void t(!1);let i=Laya.SoundManager.preloadSound(e);i?(i.once(Laya.Event.COMPLETE,this,()=>{t(!0),i.offAll()}),i.once(Laya.Event.ERROR,this,()=>{t(!1),i.offAll()})):t(!1)})}preloadAndInstallSound(e,t,i){var s=e=>{i&&(t?i.call(t,e):i(Vector4))};let a=Laya.SoundManager.preloadSound(e);a?(a.once(Laya.Event.COMPLETE,this,()=>{s(!0),a.offAll()}),a.once(Laya.Event.ERROR,this,()=>{s(!0),a.offAll()})):s(!1)}}window.AssetManager=Ai;var Hi,Fi,Ri=Laya.Loader;class Ui{constructor(){this.resAtlas=[],this.sounds=[]}get loadList(){if(!this._loadList){let e=[];if(e.push({url:bi.getResPath(this.resBin,this.resDir),type:Ri.BUFFER}),this.resAtlas)for(let t=0;t<this.resAtlas.length;t++)e.push({url:bi.getResPath(this.resAtlas[t],this.resDir),type:Ri.IMAGE});if(this.sounds)for(let t=0;t<this.sounds.length;t++)e.push({url:bi.getResPath(this.sounds[t],this.resDir),type:Ri.SOUND});this._loadList=e}return this._loadList}get packagePath(){return bi.getResPackagePath(this.packageName,this.resDir)}}class Oi{constructor(){this.dict=new Dictionary}addconfig(e){this.dict.add(e.packageName,e)}getconfig(e){return this.dict.getValue(e)}install(){let e;(e=new Ui).resDir="fgui",e.packageName="GameHome",e.resBin="GameHome.bin",e.resAtlas.push("GameHome_atlas0.png"),e.resAtlas.push("GameHome_atlas_sqzy0.jpg"),e.resAtlas.push("GameHome_atlas_sqzy1.jpg"),e.sounds.push("GameHome_sqzy7p.mp3"),this.addconfig(e),(e=new Ui).resDir="fgui",e.packageName="GameLaunch",e.resBin="GameLaunch.bin",e.resAtlas.push("GameLaunch_atlas0.png"),e.resAtlas.push("GameLaunch_atlas_qyvzw2s.png"),e.resAtlas.push("GameLaunch_atlas_tnlhw3c.png"),this.addconfig(e),(e=new Ui).resDir="fgui",e.packageName="ModuleLogin",e.resBin="ModuleLogin.bin",e.resAtlas.push("ModuleLogin_atlas0.png"),e.resAtlas.push("ModuleLogin_atlas_je283m.png"),e.resAtlas.push("ModuleLogin_atlas_je283n.png"),e.resAtlas.push("ModuleLogin_atlas_tnlh35.png"),e.resAtlas.push("ModuleLogin_atlas_tnlh3d.png"),e.resAtlas.push("ModuleLogin_atlas_tnlh3e.png"),e.resAtlas.push("ModuleLogin_atlas_tnlh3j.png"),this.addconfig(e),(e=new Ui).resDir="fgui",e.packageName="Sound",e.resBin="Sound.bin",this.addconfig(e)}}class Ni{constructor(){this.dict=new Dictionary}addconfig(e){this.dict.add(e.packageName,e)}getconfig(e){return this.dict.getValue(e)}install(){let e;(e=new Ui).resDir="fsprite",e.packageName="ActivityIcon",e.resBin="ActivityIcon.bin",e.resAtlas.push("ActivityIcon@atlas0.png"),this.addconfig(e),(e=new Ui).resDir="fsprite",e.packageName="ActorBodyIcon",e.resBin="ActorBodyIcon.bin",e.resAtlas.push("ActorBodyIcon@atlas0.png"),e.resAtlas.push("ActorBodyIcon@atlas0_1.png"),e.resAtlas.push("ActorBodyIcon@atlas0_2.png"),e.resAtlas.push("ActorBodyIcon@atlas0_3.png"),e.resAtlas.push("ActorBodyIcon@atlas0_4.png"),e.resAtlas.push("ActorBodyIcon@atlas0_5.png"),this.addconfig(e),(e=new Ui).resDir="fsprite",e.packageName="BlockIcon",e.resBin="BlockIcon.bin",e.resAtlas.push("BlockIcon@atlas0.png"),this.addconfig(e),(e=new Ui).resDir="fsprite",e.packageName="Building",e.resBin="Building.bin",e.resAtlas.push("Building@atlas0.png"),e.resAtlas.push("Building@atlas0_1.png"),this.addconfig(e),(e=new Ui).resDir="fsprite",e.packageName="CinemaIcon",e.resBin="CinemaIcon.bin",e.resAtlas.push("CinemaIcon@atlas0.png"),this.addconfig(e),(e=new Ui).resDir="fsprite",e.packageName="Icon_En",e.resBin="Icon_En.bin",e.resAtlas.push("Icon_En@atlas0.png"),this.addconfig(e),(e=new Ui).resDir="fsprite",e.packageName="Icon_ZH_CN",e.resBin="Icon_ZH_CN.bin",e.resAtlas.push("Icon_ZH_CN@atlas0.png"),this.addconfig(e),(e=new Ui).resDir="fsprite",e.packageName="ItemIcon",e.resBin="ItemIcon.bin",e.resAtlas.push("ItemIcon@atlas0.png"),this.addconfig(e),(e=new Ui).resDir="fsprite",e.packageName="MeetingIcon",e.resBin="MeetingIcon.bin",e.resAtlas.push("MeetingIcon@atlas0.png"),this.addconfig(e),(e=new Ui).resDir="fsprite",e.packageName="MenuIcon",e.resBin="MenuIcon.bin",e.resAtlas.push("MenuIcon@atlas0.png"),this.addconfig(e),(e=new Ui).resDir="fsprite",e.packageName="NPCHeadIcon",e.resBin="NPCHeadIcon.bin",e.resAtlas.push("NPCHeadIcon@atlas0.png"),this.addconfig(e),(e=new Ui).resDir="fsprite",e.packageName="PlayerBodyIcon",e.resBin="PlayerBodyIcon.bin",e.resAtlas.push("PlayerBodyIcon@atlas0.png"),this.addconfig(e),(e=new Ui).resDir="fsprite",e.packageName="PlayerHeadIcon",e.resBin="PlayerHeadIcon.bin",e.resAtlas.push("PlayerHeadIcon@atlas0.png"),this.addconfig(e),(e=new Ui).resDir="fsprite",e.packageName="SettingIcon",e.resBin="SettingIcon.bin",e.resAtlas.push("SettingIcon@atlas0.png"),this.addconfig(e),(e=new Ui).resDir="fsprite",e.packageName="ShootIcon",e.resBin="ShootIcon.bin",e.resAtlas.push("ShootIcon@atlas0.png"),this.addconfig(e),(e=new Ui).resDir="fsprite",e.packageName="SkillIcon",e.resBin="SkillIcon.bin",e.resAtlas.push("SkillIcon@atlas0.png"),this.addconfig(e),(e=new Ui).resDir="fsprite",e.packageName="StoryIcon",e.resBin="StoryIcon.bin",e.resAtlas.push("StoryIcon@atlas0.png"),e.resAtlas.push("StoryIcon@atlas0_1.png"),e.resAtlas.push("StoryIcon@atlas0_2.png"),e.resAtlas.push("StoryIcon@atlas0_3.png"),this.addconfig(e),(e=new Ui).resDir="fsprite",e.packageName="StoryStackIcon",e.resBin="StoryStackIcon.bin",e.resAtlas.push("StoryStackIcon@atlas0.png"),this.addconfig(e)}}!function(e){e[e.Closed=1]="Closed",e[e.Loading=2]="Loading",e[e.Opened=3]="Opened",e[e.Destoryed=4]="Destoryed"}(Hi||(Hi={})),function(e){e[e.None=0]="None",e[e.ExceptSelf_All=1]="ExceptSelf_All",e[e.ExceptSelf_Module=2]="ExceptSelf_Module",e[e.ExceptSelf_SameLayer=3]="ExceptSelf_SameLayer"}(Fi||(Fi={}));class Ei{constructor(){this.sOpen=new Signal,this.backMenuId=-1,this.backExcludeMenuIdMenuId=-1,this.closeTime=0,this.closeIsDestory=!0}open(e){this.openParametar=e,this.moduleWindow||(this.moduleWindow=new this.menuWindowConfig.windowClass,this.moduleWindow.menuId=this.menuId,this.moduleWindow.name=this.menuConfig.name,this.moduleWindow.windowContainer=ze.getLayer(this.menuConfig.menuLayer)),this.load()}close(){this.state!=Hi.Closed&&this.state!=Hi.Destoryed&&this.__menuManager.__onMenuClose(this)}__delayClose(){this.moduleWindow&&this.moduleWindow.menuIsCreated&&(Co.event.dispatch(ut.GameFrame_CloseMenu,this.moduleWindow.menuId),this.moduleWindow.onMenuClose(),this.closeTime=Co.time.localTimeMS),this.state=Hi.Closed}destory(){this.moduleWindow&&(this.moduleWindow.sShowComplete.remove(this.closeOther,this),this.moduleWindow.destory(),this.moduleWindow=null),this.state=Hi.Destoryed}load(){this.state=Hi.Loading;let e=this.getLoadAssets();if(e&&0!=e.length){this.loadBeginTime=Co.time.localTimeMS;let t=Co.loader.open(this.menuConfig.menuLoaderId);t.setMax(e.length),t.setProgress(0);let i=(e,i,s,a)=>{t.setProgress(i)};Co.asset.loadList(e,this,this.onLoadComplete,i)}else this.loadBeginTime=0,this.onLoadComplete()}onLoadComplete(){this.setShow(),Co.loader.close(this.menuConfig.menuLoaderId),this.loadBeginTime>0&&console.log("加载界面花费时间 ("+this.menuConfig.moduleName+") :"+(Co.time.localTimeMS-this.loadBeginTime)+" 毫秒")}getLoadAssets(){let e=[],t=new Dictionary;return this.moduleWindow.menuIsCreated||this.moduleWindow.getLoadAssets(e,t),this.moduleWindow.generateAssetsForDynmic(),this.moduleWindow.getLoadAssetsForDynamic(e,t),e}setShow(){if(this.moduleWindow){switch(console.log(`设置显示面板 ${this.menuConfig.name}(${this.menuConfig.moduleName}): ${this.menuId}`),this.moduleWindow.sShowComplete.addOnce(this.closeOther,this),this.moduleWindow.sShowSubwindowComplete.addOnce(this.closeOther,this),this.state=Hi.Opened,this.moduleWindow.menuIsCreated?this.moduleWindow.onMenuOpen(this.openParametar):this.moduleWindow.menuParameter=this.openParametar,this.moduleWindow.menuShow(this.moduleWindow.windowContainer),this.menuId){case k.Login:case k.Home:}this.sOpen.dispatch()}else console.warn(`设置显示 但是模块已销毁 ${this.menuConfig.name}(${this.menuConfig.moduleName}): ${this.menuId}`)}setCloseDontDestory(){}closeOther(){let e=this.__menuManager.isOpened(k.Home),t=this.__menuManager.getLastModuleOpenMenuId([this.backExcludeMenuIdMenuId,this.menuId]),i=!1,s=Co.menu.dict.getValues();switch(this.menuConfig.menuCloseOtherType){case Fi.None:break;case Fi.ExceptSelf_All:for(let t=0;t<s.length;t++){let a=s[t];a!=this&&(a.closeIsDestory=e,a.close(),i=!0)}break;case Fi.ExceptSelf_Module:for(let t=0;t<s.length;t++){let a=s[t];a!=this&&a.menuConfig.menuLayer==A.Module&&(a.closeIsDestory=e,a.close(),i=!0)}break;case Fi.ExceptSelf_SameLayer:for(let t=0;t<s.length;t++){let a=s[t];a.menuId!=k.Home&&(a!=this&&a.menuConfig.menuLayer==this.menuConfig.menuLayer&&(a.closeIsDestory=e,a.close(),i=!0))}}if(this.menuConfig.closeHomeWindow){let e=this.__menuManager.getMenuCtl(k.Home);e&&e.moduleWindow&&e.close()}i?-1!=t&&(this.backMenuId=t):this.backMenuId=-1}}class Wi extends fgui.GLoader{static get freeList(){Wi._freeList.length>0&&(Wi._freeList.length=0);let e=Wi.freeDictForNum.__getDict();for(let t in e)Wi.freeDictForNum.getValue(t)<=0&&Wi._freeList.push(t);return Wi._freeList}static setUse(e){let t=Wi.freeDictForNum.hasKey(e)?Wi.freeDictForNum.getValue(e)+1:1;Wi.freeDictForNum.add(e,t)}static setFree(e){if(-1!=e.indexOf("/MenuIcon/"))return;Wi.freeDictForTime.add(e,Co.time.localTimeMS);let t=Wi.freeDictForNum.hasKey(e)?Wi.freeDictForNum.getValue(e)-1:0;t<0&&(t=0),Wi.freeDictForNum.add(e,t)}static removeFree(e){Wi.freeDictForTime.remove(e),Wi.freeDictForNum.remove(e)}static clearAllFree(e){for(e||(e=Wi.freeList);e.length>0;){let t=e.pop();Wi.removeFree(t),Laya.loader.clearRes(t)}}static clearFreeLong(){if(Wi.freeDictForNum.count<=Co.deviceSetting.fguiLoaderCacheNum)return;Wi._freeLongList.length=0;let e=Wi.freeDictForNum.__getDict();for(let t in e)if(Wi.freeDictForNum.getValue(t)<=0){Co.time.localTimeMS-Wi.freeDictForTime.getValueOrDefault(t,0)>Co.deviceSetting.fguiLoaderCacheTime&&Wi._freeLongList.push(t)}Wi.clearAllFree(Wi._freeLongList)}loadContent(){super.loadContent()}getPackagenameByUrl(e){return e.replace("ui://","").split("/")[0]}loadFromPackage(e){if(fgui.UIPackage.getItemByURL(e))super.loadFromPackage(e);else{let t=this.getPackagenameByUrl(e),i=Co.spriteRes.getconfig(t);i||(i=Co.guiRes.getconfig(t)),i&&Co.asset.loadFgui(i,this,this.onLoadPackage)}}onLoadPackage(){super.loadFromPackage(this.url)}loadExternal(){Wi.setUse(this.url),super.loadExternal()}freeExternal(e){super.freeExternal(e),isNullOrEmpty(e.url)||(Wi.setFree(e.url),e.url="")}onExternalLoadSuccess(e){super.onExternalLoadSuccess(e)}onExternalLoadFailed(){super.onExternalLoadFailed()}}Wi.freeDictForTime=new Dictionary,Wi.freeDictForNum=new Dictionary,Wi._freeList=[],Wi._freeLongList=[];var Vi,Xi,qi,Ki,ji=Laya.Pool;class zi{constructor(e,t){this.logType=e,this.msg=t+""}poolRecover(){ji.recover(zi.POOL_SIGN,this)}static poolGet(){return ji.getItemByClass(zi.POOL_SIGN,zi)}}zi.POOL_SIGN="LogItem";!function(e){e[e.Debug=0]="Debug",e[e.Info=0]="Info",e[e.Warn=2]="Warn",e[e.Error=3]="Error"}(Vi||(Vi={})),function(e){e.Debug="Debug",e.Info="Info",e.Warn="Warn",e.Error="Error"}(Xi||(Xi={}));class Yi{static get Level(){return this.level}static set Level(e){this.level=e}static Debug(...e){this.level>Vi.Debug||(this.logger.debug(...e),this.mineloger.debug(...e))}static Info(...e){this.level>Vi.Info||(this.logger.info(...e),this.mineloger.info(...e))}static Warn(...e){this.level>Vi.Warn||(this.logger.warn(...e),this.mineloger.warn(...e))}static Error(...e){this.level>Vi.Warn||(this.logger.error(...e),this.mineloger.error(...e))}static clear(){this.logger.clear(),this.mineloger.clear()}}Yi.mineloger=new class{constructor(){this.maxcount=1e3,this.enable=!0,this.dict=new Dictionary,this.list=[]}getList(e){if(this.dict.hasKey(e))return this.dict.getValue(e);let t=[];return this.dict.add(e,t),t}get listAll(){return this.list}getListByTypes(e){let t=[];for(let i=0;i<this.list.length;i++)-1!=e.indexOf(this.list[i].logType)&&t.push(this.list[i]);return t}addLog(e,t,...i){if(this.enable)if(t){let s=zi.poolGet();s.logType=e,s.msg=this.stringFormat(t,...i),this.add(s)}else{let i=zi.poolGet();i.logType=e,i.msg=t,this.add(i)}}add(e){if(!this.enable)return;let t=this.getList(e.logType);t.push(e),this.list.push(e),this.list.length>this.maxcount&&this.list.shift().poolRecover(),t.length>this.maxcount&&t.shift().poolRecover()}clear(){console.clear();for(let e of this.list)e.poolRecover();this.list=[],this.dict.clear()}stringFormat(e,...t){if(t)for(let i=0;i<t.length&&/%s|%d|%i|%o/.test(e);i++)e=e.replace(/%s|%d|%i|%o/,t[i]);return e}debug(e,...t){this.addLog(Vi.Debug,e,...t)}error(e,...t){this.addLog(Vi.Error,e,...t)}info(e,...t){this.addLog(Vi.Info,e,...t)}log(e,...t){this.addLog(Vi.Info,e,...t)}warn(e,...t){this.addLog(Vi.Warn,e,...t)}},Yi.logger=console,Yi.level=Vi.Debug;class $i{constructor(){this.dict=new Dictionary,this.list=[],this.stack=[]}install(){}getMenuCtl(e){return this.dict.getValue(e)}destory(e){let t=this.getMenuCtl(e);t&&(t.state==Hi.Opened?(t.close(),setTimeout(()=>{t.destory()},100)):t.destory())}openTab(e,t,...i){return this._open(e,{openType:lt.Tab,openIndex:t,args:i})}openSubWindow(e,t,...i){return this._open(e,{openType:lt.Subwindow,openIndex:t,args:i})}async openAsync(e,...t){let i=this._open(e,{openType:lt.None,openIndex:0,args:t});return i.state==Hi.Opened?i:new Promise(e=>{i.sOpen.addOnce(()=>{e(i)},this)})}open(e,...t){return this._open(e,{openType:lt.None,openIndex:0,args:t})}openByMenuIndexId(e,...t){let i=Co.config.menuIndex.getConfig(e);if(i)switch(i.openType){case lt.Subwindow:this.openSubWindow(i.menuId,i.menuIndex,...t);break;case lt.Tab:this.openTab(i.menuId,i.menuIndex,...t);break;default:this.open(i.menuId,...t)}else{Co.config.menu.getConfig(e)&&this.open(e,...t)}}openHome(){let e=this.getMenuCtl(k.Home);e&&e.state==Hi.Opened||(e=this.open(k.Home)),e.moduleWindow.contentPane&&!e.moduleWindow.contentPane.visible&&(e.moduleWindow.contentPane.visible=!0)}closeHome(){let e=this.getMenuCtl(k.Home);e&&e.moduleWindow&&e.moduleWindow.contentPane&&(e.moduleWindow.contentPane.visible=!1)}_open(e,t){He.OnMenu(e,t.openIndex);let i=this.getMenuCtl(e);if(!i){let t=Co.config.menu.getConfig(e);if(!t){let t=`MenuManager.open 没有找到menuConfig, menuId=${e}`;return Co.system.toastText(t),Yi.Warn(t),null}let s=jt.get(e);if(!s)return Co.system.toastText(Ft.Disable),Yi.Warn(`MenuManager.open 没有找到menuWindowConfig, menuId=${e}`),null;if(!s.windowClass)return Yi.Error(`MenuManager.open menuWindowConfig.windowClass=${s.windowClass}, menuId=${e}`),null;(i=new Ei).__menuManager=this,i.menuId=e,i.menuConfig=t,i.menuWindowConfig=s,this.dict.add(e,i),i.menuId!=k.Home&&this.list.push(i)}i.open(t);let s=this.stack.indexOf(i);return-1!=s&&this.stack.splice(s,1),this.stack.push(i),i}back(e){this.close(e)}close(e){let t=this.getMenuCtl(e);t&&(t.closeIsDestory=!0,t.backMenuId=-1,t.close())}closeAll(){for(let e=this.stack.length-1;e>=0;e--)this.stack[e].menuId!=k.War&&this.stack[e].close()}__onMenuClose(e){for(let t=this.stack.length-1;t>=0;t--)this.stack[t]==e&&this.stack.splice(t,1);let t=0,i=0,s=0;for(let a of this.list)if(a.menuId!=e.menuId)switch(a.state){case Hi.Opened:if(t++,a.menuConfig.menuLayer==e.menuConfig.menuLayer&&i++,a.menuConfig.menuLayer==A.Module||a.menuConfig.menuLayer==A.ModuleTop||a.menuConfig.menuLayer==A.WarUI){s++;break}}console.log(`关闭面板 ${e.menuConfig.name} ( ${e.menuConfig.moduleName})  :" + openedNum=${t}, sameLayoutOpenedNum=${i}, moduleOpenedNum=${s}`);var a=0==s;if(a&&this.needOpenHomeFun&&(a=this.needOpenHomeFun()),a){let e=this.getMenuCtl(k.Home);e&&e.state==Hi.Opened||(e=this.open(k.Home))}e.__delayClose(),this.onTick(),Wi.clearFreeLong()}getLastOpenMenuId(){return this.stack.length>0?this.stack[this.stack.length-1].menuId:-1}getLastModuleOpenMenuId(e){for(let t=this.stack.length-1;t>=0;t--){let i=this.stack[t];if(i.menuConfig.menuLayer==A.Module||i.menuConfig.menuLayer==A.ModuleTop){if(e&&-1!=e.indexOf(i.menuId))continue;return i.menuId}}return-1}isOpened(e){let t=!1,i=this.getMenuCtl(e);return i&&i.state==Hi.Opened&&(i.menuId==k.Home?i.moduleWindow&&i.moduleWindow.contentPane&&(t=i.moduleWindow.contentPane.visible):t=!0),t}isOpenedSubOrTab(e,t){if(!this.isOpened(e))return!1;let i=this.getMenuCtl(e);return!!i&&i.moduleWindow.isOpenSubOrTab(t)}getSubWindow(e,t){if(!this.isOpened(e))return null;let i=this.getMenuCtl(e);return i?i.moduleWindow.getSubwindow(t):null}onTick(){for(let e=0;e<this.list.length;e++){let t=this.list[e];if(t.state==Hi.Closed&&-1!=t.menuConfig.cacheTime){let e=Math.max(t.menuConfig.cacheTime,Co.deviceSetting.menuCacheTime);Co.time.localTimeMS-t.closeTime>=e&&t.closeIsDestory&&t.destory()}}}}class Ji{static get serverCmdUrl(){return Ht.GmConfig+"ServerGM.json"}static get clientCmdUrl(){return Ht.GmConfig+"ClientGM.json"}static get serverListUrl(){return this._serverListUrl}static getServerMainUrl(e){if(e)return e.https?443==e.port?"https://"+e.ip:"https://"+e.ip+":"+e.port:"http://"+e.ip+":"+e.port}}Ji._serverListUrl="ServerList.json";class Qi{static GetServerMonthDateNum(e,t){let i=this.GetServerDateByTimestamp();return null==e&&(e=i.getFullYear()),null==t&&(t=i.getMonth()+1),(i=new Date(e,t,0)).getDate()}static ToStr(e){return`${e.getFullYear()}-${e.getMonth()+1}-${e.getDate()} 周${0==e.getDay()?7:e.getDay()}  ${e.getHours()}:${e.getMinutes()}:${e.getSeconds()}`}static ToTimeStamp(e){var t=new Date(e.replace(/-/g,"/"));return Math.round(t.valueOf()/1e3)}static GetServerDateByTimestamp(e){return null==e&&(e=Co.time.serverSeconds),new Date(1e3*e-Co.time.localSubServerTimeZone)}static GetServerTimestampByHMS(e=0,t=0,i=0){return this.GetServerDateByHMS(e,t,i).getTime()}static GetServerTimestampByHMSText(e){let t,i,s,a=e.split(":");return a[0]&&(t=Number(a[0])||0),a[1]&&(i=Number(a[1])||0),a[2]&&(s=Number(a[2])||0),this.GetServerTimestampByHMS(t,i,s)}static GetServerDateByHMS(e=0,t=0,i=0){let s=this.GetServerDateByTimestamp();return s.setHours(e),s.setMinutes(t),s.setSeconds(i),s}static getServerNextDate(e=0,t=0,i=0){let s=this.GetServerDateByHMS(e,t,i);return s.getTime()>=Co.time.serverMilliseconds?s:(s.setHours(s.getHours()+24),s)}static getServerNextWeekDate(e,t=0,i=0,s=0){let a=this.GetServerDateByHMS(t,i,s),n=e-a.getDay();return n<0?n+=7:0==n&&a.getTime()<Co.time.serverMilliseconds&&(n+=7),a.setDate(a.getDate()+n),a}static getServerNextMonthDate(e,t=0,i=0,s=0){let a=this.GetServerDateByHMS(t,i,s),n=e;if(0==e?n=a.getDate():e<0&&(n=this.GetServerMonthDateNum()+e+1),a.setDate(n),a.getTime()>=Co.time.serverMilliseconds)return a;let r=this.GetServerMonthDateNum(a.getFullYear(),a.getMonth()+1);return e<0&&(n=r+e+1),n>r&&(n=r),a.setMonth(a.getMonth()+1),a.setDate(n),a}static getServerTomorrowZeroPointTimestamp(){return this.GetServerTimestampByHMS()+1e3*this.ONE_DAY_SECONDS}static IsServerWeek(e,t){return this.GetServerDateByTimestamp(e).getDay()==t}static isToday(e){let t=new Date(1e3*e),i=new Date;return t.getFullYear()==i.getFullYear()&&t.getMonth()==i.getMonth()&&t.getDate()==i.getDate()}static IsServerToday(e){let t=this.GetServerDateByTimestamp(e),i=this.GetServerDateByTimestamp();return t.getFullYear()==i.getFullYear()&&t.getMonth()==i.getMonth()&&t.getDate()==i.getDate()}static IsSameDay(e,t){let i=new Date(1e3*e),s=new Date(1e3*t);return i.getFullYear()==s.getFullYear()&&i.getMonth()==s.getMonth()&&i.getDate()==s.getDate()}static IsServerSameDay(e,t){let i=this.GetServerDateByTimestamp(e),s=this.GetServerDateByTimestamp(t);return i.getFullYear()==s.getFullYear()&&i.getMonth()==s.getMonth()&&i.getDate()==s.getDate()}static IsBeyondTimeInSameDay(e,t=0,i=0,s=0){return this.BeyondTimeInSameDay(e,t,i,s)/1e3<=0}static BeyondTimeInSameDay(e,t=0,i=0,s=0){if(24==t){return t=0,this.GetServerDateByHMS(t,i,s).getTime()/1e3+this.ONE_DAY_SECONDS-e}return this.GetServerDateByHMS(t,i,s).getTime()/1e3-e}static SubSecondTimeInDay(e,t=0,i=0,s=0){let a=this.BeyondTimeInSameDay(e,t,i,s);return a<=0&&(a+=this.ONE_DAY_SECONDS),a}static GetYMDHMS(e,t=!0,i=!1){null!=e&&(e*=1e3);let s=i?this.GetServerDateByTimestamp(e):new Date(e);const a=s.getFullYear(),n=s.getMonth()+1<10?"0"+(s.getMonth()+1):s.getMonth()+1,r=s.getDate()<10?"0"+s.getDate():s.getDate(),o=s.getHours()<10?"0"+s.getHours():s.getHours(),l=s.getMinutes()<10?"0"+s.getMinutes():s.getMinutes();return xi.Instance.lang==Li.zh_cn?t?a+"-"+n+"-"+r+" "+o+":"+l:n+"-"+r+" "+o+":"+l:t?a+" "+Qi.MonthText[s.getMonth()]+" "+r+", "+o+":"+l:Qi.MonthText[s.getMonth()]+" "+r+", "+o+":"+l}static GetYMD(e,t=!1){null!=e&&(e*=1e3);let i=t?this.GetServerDateByTimestamp(e):new Date(e);const s=i.getFullYear(),a=i.getMonth()+1<10?"0"+(i.getMonth()+1):i.getMonth()+1,n=i.getDate()<10?"0"+i.getDate():i.getDate();return xi.Instance.lang==Li.zh_cn?s+"-"+a+"-"+n:s+" "+Qi.MonthText[i.getMonth()]+" "+n}static GetMD(e,t=!1){null!=e&&(e*=1e3);let i=t?this.GetServerDateByTimestamp(e):new Date(e);const s=i.getMonth()+1<10?"0"+(i.getMonth()+1):i.getMonth()+1,a=i.getDate()<10?"0"+i.getDate():i.getDate();return xi.Instance.lang==Li.zh_cn?s+"-"+a:Qi.MonthText[i.getMonth()]+" "+a}static GetHM(e,t=!1){null!=e&&(e*=1e3);let i=t?this.GetServerDateByTimestamp(e):new Date(e);return(i.getHours()<10?"0"+i.getHours():i.getHours())+":"+(i.getMinutes()<10?"0"+i.getMinutes():i.getMinutes())}static DaysLeft(e){let t=0,i=e-Co.time.serverSeconds;return i>0&&(t=Math.floor(i/this.ONE_DAY_SECONDS)),t}static TimeleftHHMMSS(e){let t=e-Co.time.serverSeconds;return t=Math.max(t,0),this.TimeFormatFixedHHMMSS(t)}static TimeleftIsOver(e){return e-Co.time.serverSeconds<=0}static TimeFormatFixedHHMMSS(e){let t="",i=Math.floor(e/3600),s=Math.floor(e%3600/60),a=Math.floor(e%60);return t+=i<10?"0"+i:i,t+=":"+(s<10?"0"+s:s),t+=":"+(a<10?"0"+a:a)}static TimeFormatFixedMMSS(e){let t="",i=Math.floor(e%3600/60),s=Math.floor(e%60);return t+=":"+(i<10?"0"+i:i),t+=":"+(s<10?"0"+s:s)}static TimeFormatFixedHHMMSSCN(e){let t="",i=Math.abs(e),s=Math.floor(i/3600),a=Math.floor(i%3600/60),n=Math.floor(i%60);return e<0&&(t="-"),t+=s<10?"0"+s:s,t+="："+(a<10?"0"+a:a),t+="："+(n<10?"0"+n:n)}static TimeFormatFixedXHXMXS(e){let t="",i=Math.floor(e/3600),s=Math.floor(e%3600/60),a=Math.floor(e%60);return i>0&&(t+=i+Ft.Hour),t+=s+Ft.Minute,t+=a+Ft.Second}static TimeFormatHHMMSS(e){let t="",i=Math.abs(e),s=Math.floor(i/3600),a=Math.floor(i%3600/60),n=Math.floor(i%60);return e<0&&(t="-"),t+=0==s?"":s<10?"0"+s:s,t+=(s>0?":":"")+(a<10?"0"+a:a),t+=":"+(n<10?"0"+n:n)}static TimeFormatXHXMXS(e){let t="",i=Math.floor(e/3600),s=Math.floor(e%3600/60),a=Math.floor(e%60);return i>0&&(t+=i+Ft.Hour),s>0&&(t+=s+Ft.Minute),t+=a+Ft.Second}static TimeFormatXHXMXSWithoutZero(e){let t="",i=Math.floor(e/3600),s=Math.floor(e%3600/60),a=Math.floor(e%60);return i>0&&(t+=i+Ft.Hour),s>0&&(t+=s+Ft.Minute),a>0&&(t+=a+Ft.Second),t}static TimeBeforeByTimestamp(e){let t=Co.time.serverSeconds-e;return this.TimeBefore(t)}static TimeBefore(e){let t=e/this.ONE_DAY_SECONDS;if(t>60)return this.GetYMD(t);if(t>30)return Ft.DATE_MonthBefore.format(1);if(t>14)return Ft.DATE_WeekBefore.format(2);if(t>7)return Ft.DATE_WeekBefore.format(1);if(t>1)return Ft.DATE_DayBefore.format(Math.floor(t));{let t=e/this.ONE_HOUR_SECONDS;if(t>1)return Ft.DATE_HourBefore.format(Math.floor(t));{let t=e/60;return t>1?Ft.DATE_MinuteBefore.format(Math.floor(t)):e>=1?Ft.DATE_SecondeBefore.format(Math.floor(e)):Ft.DATE_SecondeBefore.format(1)}}}}Qi.ONE_DAY_SECONDS=86400,Qi.ONE_HOUR_SECONDS=3600,Qi.MonthText=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],window.TimeHelper=Qi,function(e){e[e.Close=0]="Close",e[e.Noraml=1]="Noraml"}(qi||(qi={})),function(e){e[e.Normal=1]="Normal",e[e.StopServer=2]="StopServer"}(Ki||(Ki={}));class Zi{constructor(){this.defaultServerItem={name:"默认",ip:"nisak.123u.com",port:5e3,state:qi.Noraml,https:!0,test:!1,shieldHero:[],main:"https://nisak.123u.com:5000"},this.channelUrl=`https://h5-jjsg-cdn.123u.com/server_config/config.${VersionConfig.AppVersion}.json`}static get Instance(){return Zi._Instance||(Zi._Instance=new Zi),Zi._Instance}get serverListUrl(){return Ji.serverListUrl}get noticUrl(){return this.serverItem?this.serverItem.noticUrl?this.serverItem.noticUrl:this.serverItem.https?"https://"+this.serverItem.ip+"/notice.html":"http://"+this.serverItem.ip+"/notice.html":"http://172.16.0.93/notice.html"}getServerItem(e){if(!e)return null;if(this.serverList)for(let t=0;t<this.serverList.list.length;t++)if(this.serverList.list[t].name==e)return this.serverList.list[t];return null}get serverName(){if(!this._serverName){if(Co.localStorage.serverName){this.getServerItem(Co.localStorage.serverName)&&(this._serverName=Co.localStorage.serverName)}if(!this._serverName&&this.serverList){this.getServerItem(this.serverList.defaultServer)?this._serverName=this.serverList.defaultServer:this.serverList.list.length>0&&(this._serverName=this.serverList.list[0].name)}}return this._serverName}set serverName(e){this._serverName=e,Co.localStorage.serverName=e}get serverIndex(){if(this.serverList)for(let e=0;e<this.serverList.list.length;e++)if(this.serverList.list[e].name==this.serverName)return e;return-1}get serverItem(){let e=this.getServerItem(this.serverName);return e||this.defaultServerItem}async requestServerListAsync(){if(this.serverList)return!0;let e=this.serverListUrl;console.log("serverListUrl="+e);let t=await Co.asset.loadAsync(e,H.Json);if(t){if(this.serverList=isString(t)?JSON.parse(t):t,this.serverList&&this.serverList.list)for(let e of this.serverList.list)e.main=Ji.getServerMainUrl(e);return console.log("获取服务器列表成功"),!0}return console.log("ChannelManager LoadFail: ServerList.json "),!1}get isTodayOpenedNotice(){if(Co.localStorage.isNoticTodayNoOpen&&Co.localStorage.hasItem("lastOpenNoticeTime",!0)){let e=Co.localStorage.getInt("lastOpenNoticeTime",!0);return!Qi.isToday(e)}return!0}requestNotice(){console.log(this.noticUrl),Engine.loader.load(this.noticUrl,Handler.create(this,this.onResopneNotic))}onResopneNotic(){let e=Engine.loader.getRes(this.noticUrl);if(console.log(e),e)try{if(this.serverNoticData=isString(e)?JSON.parse(e):e,!this.serverNoticData||0==this.serverNoticData.visible)return;this.serverNoticData.type==Ki.Normal?this.isTodayOpenedNotice&&(Co.menu.open(k.Notice),Co.localStorage.setInt("lastOpenNoticeTime",Co.time.localTimeMS,!0)):Co.system.alrtTextFull(this.serverNoticData.content,this.serverNoticData.title,null,()=>{window.conch&&window.conch.exit&&window.conch.exit()})}catch(e){console.warn("通知有问题")}}set channelServer(e){this._channelServer=e}get channelServer(){return this._channelServer}async requestChannelServerAsync(){let e=this.channelUrl,t=await Co.asset.loadAsync(e,H.Json);if(t){let e=isString(t)?JSON.parse(t):t;return e.main=Ji.getServerMainUrl(e),this.serverList={list:[e],defaultServer:e.name},console.log(`ChannelUrl Request Successed: ${e}`),!0}this.requestChannelServerAsync(),console.log(`ChannelUrl Request Failed: ${e} `)}}class es{constructor(){this.sStateChange=new Signal}install(){this.startListen()}refreshState(){}startListen(){}stopListen(){}onStateChange(){this.sStateChange.dispatch()}}class ts extends es{constructor(){super(...arguments),this._timelong=0,this._error=0,this._session=""}get isIndulge(){return!1}set timeLong(e){this._timelong=e}get timeLong(){return this._timelong}set error(e){this._error=e,0!=e&&1023!=e||Laya.timer.clearAll(this)}get error(){return this._error}set session(e){this._session=e}get session(){return this._session}}class is{constructor(){this.id=0,this.isGeted=!1}}class ss extends es{constructor(){super(...arguments),this.LocalStorageKey="HeroModel",this.list=[],this.map=new Map,this.selectId=-1}install(){for(var e=Co.config.card.getConfigListByTypeKey(v.Hero),t=0,i=e.length;t<i;t++){var s=e[t],a=new is;a.cardConfig=s,a.id=s.id,this.list.push(a),this.map.set(a.id,a)}this.list.length>0&&(this.list[0].isGeted=!0,this.selectId=this.list[0].id),this.read()}getItem(e){return this.map.get(e)}get selectHero(){var e=this.getItem(this.selectId);return e||(this.list.length>0?(this.selectId=this.list[0].id,this.list[0]):void 0)}set selectHero(e){this.selectId=e.id,de.currentHero=e.cardConfig.heroType,this.save()}hasNext(){var e=this.list.indexOf(this.selectHero);return++e<this.list.length}hasPrev(){var e=this.list.indexOf(this.selectHero);return--e>=0}getNextItem(){var e=this.list.indexOf(this.selectHero);return++e<this.list.length&&(this.selectHero=this.list[e]),this.selectHero}getPrevItem(){var e=this.list.indexOf(this.selectHero);return--e>=0&&(this.selectHero=this.list[e]),this.selectHero}enableBuy(){return de.gold>=this.selectHero.cardConfig.coin}buy(){this.selectHero.isGeted=!0,de.gold-=this.selectHero.cardConfig.coin,this.save(),He.OnBuyHero(this.selectHero.cardConfig.spriteIndex)}save(){var e={selectId:this.selectId,list:[]};for(var t of this.list)e.list.push({id:t.id,num:t.isGeted?1:0});Co.localStorage.setJSON(this.LocalStorageKey,e,!1)}read(){if(Co.localStorage.hasItem(this.LocalStorageKey,!1)){var e=Co.localStorage.getJSON(this.LocalStorageKey,!1);for(var t of(this.selectId=e.selectId,e.list)){var i=this.getItem(t.id);i&&(i.isGeted=t.num>0)}}}}class as{get isGeted(){return Co.moduleModel.item.getGameStatusVal(this.itemConfig.itemToolType)}set isGeted(e){Co.moduleModel.item.setGameStatusVal(this.itemConfig.itemToolType,e)}get enabelBuy(){return this.itemConfig.coin<=de.gold}buy(){this.isGeted=!0,de.gold-=this.itemConfig.coin,He.OnBuyShop(this.itemConfig.spriteIndex)}}class ns extends es{constructor(){super(...arguments),this.LocalStorageKey="ItemModel",this.list=[],this.map=new Map,this.toolTypeMap=new Map}install(){for(var e=Co.config.item.getConfigListByTypeKey(B.Tool),t=0,i=e.length;t<i;t++){var s=e[t],a=new as;a.itemConfig=s,a.id=s.id,this.list.push(a),this.map.set(a.id,a),this.toolTypeMap.set(a.itemConfig.itemToolType,a)}}getItemTool(e){return this.map.get(e)}getItemToolByType(e){return this.toolTypeMap.get(e)}getGameStatusVal(e){switch(e){case b.Heart:return de.isHeart;case b.Horseshoe:return de.isHorseshoe;case b.Luck:return de.isLuck;case b.Key:return de.isKey}}setGameStatusVal(e,t){switch(e){case b.Heart:de.isHeart=t;break;case b.Horseshoe:de.isHorseshoe=t;break;case b.Luck:de.isLuck=t;break;case b.Key:de.isKey=t}}}class rs{constructor(){this.list=[],this.login=new ts,this.hero=new ss,this.item=new ns}initList(){this.list.push(this.login),this.list.push(this.hero),this.list.push(this.item)}}class os extends rs{install(){this.initList();for(let e=0;e<this.list.length;e++)this.list[e].install()}}class ls{constructor(){this.master=0,this.minor=0,this.revised=0,this.revised2=0}get isZero(){return 0==this.master&&0==this.minor&&0==this.revised&&0==this.revised2}setVersionTxt(e){if(null==e)return this;if(isNullOrEmpty(e.trim()))return this;var t=(e=(e=e.toLowerCase()).replace("version:","").replace("version","").replace("ver","").replace("v","")).split(".");return this.master=parseInt(t[0]),t.length>1&&(this.minor=parseInt(t[1])),t.length>2&&(this.revised=parseInt(t[2])),t.length>3&&(this.revised2=parseInt(t[3])),this}equal(e){return this.master==e.master&&this.minor==e.minor&&this.revised==e.revised&&this.revised2==e.revised2}toString(){return`v${this.master}.${this.minor}.${this.revised}.${this.revised2}`}}var cs=Laya.LocalStorage;class hs{constructor(){this.sLocalVersionChange=new Signal,this.assetCopytoFileVersionData=new ls,this.localAppVersionData=new ls,this.webAppVersionData=new ls,this.localResVersionData=new ls,this.webResVersionData=new ls,this.localPartialVersionData=new ls,this.webPartialVersionData=new ls}static get Instance(){return hs._Instance||(hs._Instance=new hs),hs._Instance}init(){this.localAppVersionData.setVersionTxt(VersionConfig.AppVersion),this.localResVersionData.setVersionTxt(VersionConfig.ResVersion)}get localAppVersion(){return window.VersionConfig&&VersionConfig.AppVersion?VersionConfig.AppVersion:"v1.0.0.0"}get localResVersion(){return this.__localResVersion||(this.__localResVersion=cs.getItem("__localResVersion"),this.__localResVersion||(this.__localResVersion=this.localAppVersion)),this.__localResVersion}set localResVersion(e){this.__localResVersion=e,cs.setItem("__localResVersion",e),this.sLocalVersionChange.dispatch()}get assetsCopytoFileVersion(){return this.__assetsCopytoFileVersion||(this.__assetsCopytoFileVersion=cs.getItem("__assetsCopytoFileVersion"),this.__assetsCopytoFileVersion||(this.__assetsCopytoFileVersion="0.0.0")),this.__assetsCopytoFileVersion}set assetsCopytoFileVersion(e){this.__assetsCopytoFileVersion=e,cs.setItem("__assetsCopytoFileVersion",e)}get localPartialVersion(){return this.__localPartialVersion||(this.__localPartialVersion=cs.getItem("__localPartialVersion"),this.__localPartialVersion||(this.__localPartialVersion="0.0.0")),this.__localPartialVersion}set localPartialVersion(e){this.__localPartialVersion=e,cs.setItem("__localPartialVersion",e)}get isNeedAssetsCopy(){return!1}}class us{static get idDict(){return us._idDict||us.init(),us._idDict}static get extDict(){return us._extDict||us.init(),us._extDict}static getId(e){return us.idDict.hasKey(e)?us.idDict.getValue(e):(console.error("SoundKey 不存在 key="+e),"")}static getUrl(e){return`ui://${us.SoundPackageId}${us.getId(e)}`}static getPath(e){return bi.getResPath(`${us.SoundPackageName}_${us.getId(e)}${us.extDict.getValue(e)}`,"fgui")}static init(){us._idDict=new Dictionary,us._extDict=new Dictionary}}us.SoundPackageName="Sound",us.SoundPackageId="44whq70o";var ms=Laya.SoundManager;Laya.Handler;class gs{constructor(){this.soundPlayingDic=new Dictionary,this.localUseGlobal=!0}install(){}onAppResume(){this.replayMusic()}onLogin(){}playMusic(e,t,i,s){}replayMusic(){this.lastMusic?this.playMusic(this.lastMusic):this.playMusic(us.MM_BGM_01)}playSound(e,t,i,s,a){}playSoundComplete(e){this.soundPlayingDic.hasKey(e)&&this.soundPlayingDic.remove(e)}stopSound(e){let t=us.getPath(e);this.soundPlayingDic.hasKey(t)&&this.soundPlayingDic.remove(t),ms.stopSound(t)}stopAll(){this.soundPlayingDic&&this.soundPlayingDic.clear(),ms.stopAll()}stopAllSound(){this.soundPlayingDic&&this.soundPlayingDic.clear(),ms.stopAllSound()}stopMusic(){ms.stopMusic()}get muted(){return void 0===this._muted&&(this._muted=!!Co.localStorage.hasItem("sound_muted",this.localUseGlobal)&&Co.localStorage.getBoolean("sound_muted",this.localUseGlobal)),this._muted}set muted(e){this._muted=e,Co.localStorage.setBoolean("sound_muted",e,this.localUseGlobal),ms.muted=e}get soundMuted(){return void 0===this._soundMuted&&(this._soundMuted=!!Co.localStorage.hasItem("sound_soundMuted",this.localUseGlobal)&&Co.localStorage.getBoolean("sound_soundMuted",this.localUseGlobal)),this._soundMuted}set soundMuted(e){this._soundMuted=e,Co.localStorage.setBoolean("sound_soundMuted",e,this.localUseGlobal),ms.soundMuted=e}get musicMuted(){return void 0===this._musicMuted&&(this._musicMuted=!!Co.localStorage.hasItem("sound_musicMuted",this.localUseGlobal)&&Co.localStorage.getBoolean("sound_musicMuted",this.localUseGlobal)),this._musicMuted}set musicMuted(e){this._musicMuted=e,Co.localStorage.setBoolean("sound_musicMuted",e,this.localUseGlobal),ms.musicMuted=e,e?ms.stopMusic():this.replayMusic()}get musicVolume(){return void 0===this._musicVolume&&(this._musicVolume=Co.localStorage.hasItem("sound_musicVolume",this.localUseGlobal)?Co.localStorage.getFloat("sound_musicVolume",this.localUseGlobal):1),this._musicVolume}set musicVolume(e){this._musicVolume=e,Co.localStorage.setFloat("sound_musicVolume",e,this.localUseGlobal),ms.musicVolume=e}get soundVolume(){return void 0===this._soundVolume&&(this._soundVolume=Co.localStorage.hasItem("sound_soundVolume",this.localUseGlobal)?Co.localStorage.getFloat("sound_soundVolume",this.localUseGlobal):1),this._soundVolume}set soundVolume(e){this._soundVolume=e,Co.localStorage.setFloat("sound_soundVolume",e,this.localUseGlobal),ms.soundVolume=e}get autoStopMusic(){return this._autoStopMusic}set autoStopMusic(e){ms.autoStopMusic=e,this._autoStopMusic=e}}class ds{CopyValue(e){e.year=this.year,e.month=this.month,e.date=this.date,e.week=this.week,e.hour=this.hour,e.minute=this.minute,e.second=this.second,e.timezone=this.timezone,e.timestamp=this.timezone}}class ps{constructor(){this.sServerDateChange=new Typed2Signal,this._localDateTime=new ds,this._serverDateTime=new ds,this._server2LocalDateTime=new ds,this._preServer2LocalDateTime=new ds,this._preFrame=-1,this._settingTimestampServer=(new Date).getTime(),this._settingTimestampLocal=(new Date).getTime(),this._preServerFrame=0,this.___testTimeDifference=0,this._localSubServerTime=0,this._localSubServerTimeZone=0}get localDateTime(){return this.refresh(),this._localDateTime}IsExcelArrived(e){let t=this.localDateTime;return t.hour>=e.H&&t.minute>=e.Mm&&t.second>=e.S}IsExcelIn(e,t){return this.IsExcelArrived(e)&&!this.IsExcelArrived(t)}get serverDateTime(){return this.refresh(),this._serverDateTime}get server2LocalDateTime(){return this.refresh(),this._server2LocalDateTime}start(){this.stop(),Laya.timer.loop(1e3,this,this.refresh)}stop(){Laya.timer.clearAll(this)}refresh(){if(Laya.timer.currFrame!=this._preFrame){this._preFrame=Laya.timer.currFrame;let e=new Date;this._localDateTime.timestamp=e.getTime(),this._localDateTime.year=e.getFullYear(),this._localDateTime.month=e.getMonth(),this._localDateTime.date=e.getDate(),this._localDateTime.week=e.getDay(),this._localDateTime.hour=e.getHours(),this._localDateTime.minute=e.getMinutes(),this._localDateTime.second=e.getSeconds(),this._serverDateTime.timestamp=this.settingServerTimestamp+this.settingTimeLength,e=new Date(this._serverDateTime.timestamp),this._serverDateTime.year=e.getFullYear(),this._serverDateTime.month=e.getMonth(),this._serverDateTime.date=e.getDate(),this._serverDateTime.week=e.getDay(),this._serverDateTime.hour=e.getHours(),this._serverDateTime.minute=e.getMinutes(),this._serverDateTime.second=e.getSeconds(),this._server2LocalDateTime.timestamp=this._serverDateTime.timestamp,e=new Date(this._serverDateTime.timestamp-this.localSubServerTimeZone),this._server2LocalDateTime.year=e.getFullYear(),this._server2LocalDateTime.month=e.getMonth(),this._server2LocalDateTime.date=e.getDate(),this._server2LocalDateTime.week=e.getDay(),this._server2LocalDateTime.hour=e.getHours(),this._server2LocalDateTime.minute=e.getMinutes(),this._server2LocalDateTime.second=e.getSeconds(),this._server2LocalDateTime.timezone=this._serverDateTime.timezone,this._preServer2LocalDateTime.date&&this._preServer2LocalDateTime.date!=this._server2LocalDateTime.date&&this.sServerDateChange.dispatch(this._preServer2LocalDateTime.date,this._server2LocalDateTime.date),this._server2LocalDateTime.CopyValue(this._preServer2LocalDateTime)}}get serverTimezoneMilliseconds(){return 60*this._serverDateTime.timezone*60*1e3}get localTimeMS(){return this.refresh(),this._localDateTime.timestamp}get localTimeS(){return this.refresh(),Math.floor(this._localDateTime.timestamp/1e3)}settingServerTime(e,t){null!=t&&(this._serverDateTime.timezone=t,this._localSubServerTimeZone=60*(new Date).getTimezoneOffset()*1e3*-1-60*t*60*1e3),null!=e&&(this.settingServerTimestamp=1e3*e)}get settingServerTimestamp(){return this._settingTimestampServer}set settingServerTimestamp(e){this._settingTimestampServer=e,this._settingTimestampLocal=this.localTimeMS,this._localSubServerTime=this._settingTimestampLocal-this._settingTimestampServer}get settingTimeLength(){return this.localTimeMS-this._settingTimestampLocal}get serverSeconds(){return Math.floor(this.serverMilliseconds/1e3)}get serverMilliseconds(){return this.refresh(),this.serverDateTime.timestamp}get localSubServerTime(){return this._localSubServerTime+this.___testTimeDifference}get localSubServerTimeZone(){return this._localSubServerTimeZone+this.___testTimeDifference}getSubSecondsPre(e){let t=this.serverSeconds-e;return t<0&&(t=0),t}getSubSecondsAfter(e){return e-this.serverSeconds}getSubMillisecondsPre(e){return this.serverMilliseconds-e}getSubMillisecondsAfter(e){return e-this.serverMilliseconds}}class Cs extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameLaunch","SystemToastMessage")}constructFromXML(e){super.constructFromXML(e),this.m_title=this.getChild("title")}}Cs.URL="ui://47qsdr42nk8t3",Cs.DependPackages=["GameLaunch"];class Ss extends Cs{play(e,t){this._onCompleteHandler&&this._onCompleteHandler.recover(),this._onCompleteHandler=t,this.m_title.text=e,Tween.clearAll(this),ze.floatMsg.addChild(this),mt.centerScreen(this),this.alpha=0,Tween.to(this,{y:this.y-100,alpha:1},500,Ease.quadInOut),Tween.to(this,{y:this.y-200,alpha:0},500,Ease.quadInOut,Handler.create(this,this.onComplete),1e3)}onComplete(){this.removeFromParent(),this._onCompleteHandler&&(this._onCompleteHandler.runWith(this),this._onCompleteHandler.recover(),this._onCompleteHandler=null)}}var fs,ys,ws,Ls,_s=Laya.Handler;class vs{constructor(){this.list=[],this.pools=[],this.timeSpacing=1}play(e){e!=this.lastTxt?this.show(e):getTime()-this.lastTime>=this.timeSpacing&&this.show(e)}show(e){let t;this.lastTxt=e,this.lastTime=getTime(),this.pools.length>0?t=this.pools.pop():(t=Ss.createInstance(),this.list.push(t)),t.play(e,_s.create(this,this.onItemComplete))}onItemComplete(e){this.pools.push(e)}}class Ts extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameLaunch","SystemAlertMessage")}constructFromXML(e){super.constructFromXML(e),this.m_content=this.getChild("content"),this.m_title=this.getChild("title"),this.m_dialog=this.getChild("dialog"),this.m_okBtn=this.getChild("okBtn")}}Ts.URL="ui://47qsdr42nk8t1",Ts.DependPackages=["GameLaunch"];class Is extends Ts{get closeButton(){return this.m_dialog.m_closeButton}open(e,t="",i=null,s=null,a=null,n=!0,r=!0,o=!0){isNullOrEmpty(t)&&(t=""),this.yesFun=s,this.yesObj=i,this.isClickButtonAutoClose=o,this.m_content.text=e,this.m_title.text=t,this.m_okBtn.title=a,this.m_okBtn.enabled=r,this.closeButton.enabled=r,this.closeButton.visible=n,this.m_okBtn.onClick(this,this.onClickYes),this.closeButton.onClick(this,this.close),ze.showDialogModel(),mt.centerScreen(this),this.scaleX=0,this.scaleY=0,this.x=Co.screenSetting.screenWidth>>1,this.y=Co.screenSetting.screenHeight>>1,this.alpha=0,Tween.to(this,{scaleX:1,scaleY:1,alpha:1},250,Ease.backInOut),ze.floatMsg.addChild(this)}close(){ze.hideDialogModel(),Tween.to(this,{scaleX:0,scaleY:0,alpha:0},250,Ease.quadInOut,Handler.create(this,this.onHide))}onHide(){this.removeFromParent()}onClickYes(){this.isClickButtonAutoClose&&this.close(),this.yesFun&&(this.yesObj?this.yesFun.apply(this.yesObj):this.yesFun())}}class Gs extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameLaunch","SystemConfirmMessage")}constructFromXML(e){super.constructFromXML(e),this.m_content=this.getChild("content"),this.m_title=this.getChild("title"),this.m_dialog=this.getChild("dialog"),this.m_okBtn=this.getChild("okBtn"),this.m_cancleBtn=this.getChild("cancleBtn")}}Gs.URL="ui://47qsdr42nk8t2",Gs.DependPackages=["GameLaunch"];class Ps extends Gs{get closeButton(){return this.m_dialog.m_closeButton}open(e,t="",i=null,s=null,a=null,n=null,r=null,o=!0,l=!0){isNullOrEmpty(t)&&(t=""),this.caller=i,this.yesFun=s,this.noFun=a,this.isClickButtonAutoClose=l,this.m_content.text=e,this.m_title.text=t,this.m_okBtn.title=n,this.m_cancleBtn.title=r,this.closeButton.visible=o,this.m_okBtn.onClick(this,this.onClickYes),this.m_cancleBtn.onClick(this,this.onClickNo),this.closeButton.onClick(this,this.onClickClose),ze.showDialogModel(),mt.centerScreen(this),Tween.clearAll(this),this.scaleX=0,this.scaleY=0,this.x=Co.screenSetting.screenWidth>>1,this.y=Co.screenSetting.screenHeight>>1,this.alpha=0,Tween.to(this,{scaleX:1,scaleY:1,alpha:1},250,Ease.backInOut),ze.floatMsg.addChild(this)}close(){ze.hideDialogModel(),Tween.to(this,{scaleX:0,scaleY:0,alpha:0},250,Ease.quadInOut,Handler.create(this,this.onHide))}onHide(){this.removeFromParent()}onClickYes(){this.isClickButtonAutoClose&&this.close(),this.yesFun&&(this.caller?this.yesFun.apply(this.caller):this.yesFun())}onClickNo(){this.isClickButtonAutoClose&&this.close(),this.noFun&&(this.caller?this.noFun.apply(this.caller):this.noFun())}onClickClose(){this.close()}}class ks{constructor(){this.toastMessage=new vs}playOpenSound(){window.Game&&window.Game._isInstall&&Co.sound.playSound(us.MM02_Popup)}get alertMessage(){return this._alertMessage||(this._alertMessage=Is.createInstance()),this._alertMessage}get confirmMessage(){return this._confirmMessage||(this._confirmMessage=Ps.createInstance()),this._confirmMessage}toastText(e){this.toastMessage.play(e)}toastMsg(e,...t){let i=Co.config.msg.getTxtFormat(e,...t);this.toastMessage.play(i)}toastFormatText(e,...t){this.toastText(format(e,t))}toastItemNotEnough(e){let t=Co.config.item.getConfig(e),i="";i=t?t.name:e.toString(),this.toastText(format(Ft.ToastTextItemNotEnough,i))}alertText(e,t,i){this.alrtTextFull(e,"",t,i)}alertMsg(e,t,i){let s=Co.config.msg.getTxt(e);this.alrtTextFull(s,"",t,i)}alertMsgFormat(e,t,i,s){let a=Co.config.msg.getTxtFormat(e,...t);this.alrtTextFull(a,"",i,s)}alrtTMsgFull(e,t,i="",s=null,a=null,n=null,r=!0,o=!0){let l=Co.config.msg.getTxtFormat(e,...t);this.alrtTextFull(l,"",s,a,n,r,o)}alrtTextFull(e,t="",i=null,s=null,a=null,n=!0,r=!0,o=!0){isNullOrEmpty(a)&&(a=Co.launchText.btnYes),this.alertMessage.open(e,t,i,s,a,n,r,o),this.playOpenSound()}closeAlert(){this.alertMessage.close()}confirmMsg(e,t,i="",s=null,a=null,n=null,r=null,o=null,l=!0,c=!0){let h=Co.config.msg.getTxtFormat(e,...t);this.confirmText(h,i,s,a,n,r,o,l,c)}confirmText(e,t="",i=null,s=null,a=null,n=null,r=null,o=!0,l=!0){isNullOrEmpty(n)&&(n=Ft.ButtonYes),isNullOrEmpty(r)&&(r=Ft.ButtonNo),this.confirmMessage.open(e,t,i,s,a,n,r,o,l),this.playOpenSound()}alertMessageHide(){this._alertMessage&&this._alertMessage.close(),this._confirmMessage&&this._confirmMessage.close()}}class Ms extends ks{}class xs{constructor(){this.tips=[],this.btnYes="确定",this.LoadedConfig="加载配置文件",this.LoadedUI="加载UI",this.LoadedWar="加载战斗资源",this.LoadedWarConfig="加载战斗配置",this.LoadedEnd="加载完成"}setLangForEn(){this.tips=[],this.btnYes="Ok",this.LoadedConfig="Loading Config...",this.LoadedUI="Loading UI...",this.LoadedEnd="Loading Complete"}}class bs{constructor(){this.percent=0,this.showPercent=0}setBegin(){this.percent=0,this.showPercent=0,this.setPercent(0)}loading(e){e<=0?e=.001:e>100&&(e=100),this.percent=e}setTip(e){let t=Co.loader.current;t&&t.setTip(e)}setPercent(e){let t=Co.loader.current;t&&(t.setMax(100),t.setProgress(Math.ceil(e)))}starTweenPrecent(){this.stopTweenPrecent(),this._tweenHandler=setInterval(()=>{this.showPercent=Math.min(100,Math.ceil(Mathf.Lerp(this.showPercent,this.percent,.8))),this.setPercent(this.showPercent),this.showPercent>=100&&this.stopTweenPrecent()},50)}stopTweenPrecent(){this._tweenHandler&&(clearInterval(this._tweenHandler),this._tweenHandler=null)}onBegin(){this.setBegin(),this.starTweenPrecent()}onLoadedConfig(e,t,i){this.setTip(Co.launchText.LoadedConfig),this.loading(0+Math.ceil(40*i))}onLoadedLangConfig(e,t,i){this.setTip(Co.launchText.LoadedConfig),this.loading(40+Math.ceil(20*i))}onLoadedFgui(e,t){this.setTip(Co.launchText.LoadedUI),this.loading(60+Math.ceil(e/t*40))}onEnd(){this.setTip(Co.launchText.LoadedEnd),this.stopTweenPrecent(),this.showPercent=100,this.setPercent(this.showPercent),this.percent=100}Reset(){this.loading(0)}}class Ds{constructor(){this.isOpened=!1,this.delayShowPanelHandler=-1}get isDelayShowPanel(){return this.loaderId==dt.EnterModule}open(){this.isOpened=!0,this.loaderPanel&&(this.loaderPanel.showOn(ze.loader),this.loaderPanel.setContentVisiable(!0),this.isDelayShowPanel&&(this.loaderPanel.setContentVisiable(!1),clearTimeout(this.delayShowPanelHandler),this.delayShowPanelHandler=setTimeout(()=>{this.loaderPanel.setContentVisiable(!0)},100)))}close(){-1!=this.delayShowPanelHandler&&(clearTimeout(this.delayShowPanelHandler),this.delayShowPanelHandler=-1),this.isOpened=!1,this.loaderPanel&&(this.loaderPanel.hide(),this.isDelayShowPanel&&this.loaderPanel.setContentVisiable(!1))}setProgress(e){e<=0&&(e=1),this.loaderPanel&&this.loaderPanel.setValue(e)}setMax(e){this.loaderPanel&&this.loaderPanel.setMax(e)}setTip(e){this.loaderPanel&&this.loaderPanel.setTip(e)}setTips(e){this.loaderPanel&&this.loaderPanel.setTips(e)}setVersion(){this.loaderPanel&&this.loaderPanel.setVersion()}}class Bs extends ot{constructor(){super(),this.sShowComplete=new Signal,this.sHideComplete=new Signal}onInit(){super.onInit()}getContentVisiable(){return!!this.contentPane&&this.contentPane.visible}setContentVisiable(e){this.contentPane&&(this.contentPane.visible=e)}doShowAnimation(){this.onWindowWillShow(),super.doShowAnimation()}doHideAnimation(){this.onWindowWillHide(),super.doHideAnimation()}onShown(){this.sShowComplete.dispatch()}onHide(){this.sHideComplete.dispatch()}setMax(e){}setValue(e){}setTip(e){}setTips(e){}setVersion(){}}class As extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameLaunch","EnterModuleLoader")}constructFromXML(e){super.constructFromXML(e),this.m_Reconnection=this.getController("Reconnection"),this.m_title=this.getChild("title"),this.m_help=this.getChild("help"),this.m_txt_resVer=this.getChild("txt_resVer"),this.m_txt_gamever=this.getChild("txt_gamever"),this.m_screenBG=this.getChild("screenBG"),this.m_progressBar=this.getChild("progressBar")}}As.URL="ui://47qsdr42f84s0",As.DependPackages=["GameLaunch"];class Hs extends As{}class Fs extends Bs{constructor(){super(),this.tips=[],this.__setTipHandlerTimer=-1}onInit(){this.loader=Hs.createInstance(),this.contentPane=this.loader,super.onInit(),this.tips=Co.launchText.tips,this.setVersion()}onShown(){super.onShown(),this.beginTips(),this.setVersion(),Co.version.sLocalVersionChange.add(this.setVersion,this)}onHide(){super.onHide(),this.stopTips(),Co.version.sLocalVersionChange.remove(this.setVersion,this)}beginTips(){this.stopTips(),this.tips&&this.tips.length>0&&this.__setTipHandler()}stopTips(){this.__setTipHandlerTimer>0&&(clearTimeout(this.__setTipHandlerTimer),this.__setTipHandlerTimer=-1)}__setTipHandler(){this.loader.m_help.text=this.tips[Random.range(0,this.tips.length)],this.__setTipHandlerTimer=setTimeout(()=>{this.__setTipHandler()},Random.range(100,400))}setMax(e){this.loader.m_progressBar.max=e}setValue(e){this.loader.m_progressBar.value=e}setTip(e){this.loader.m_title.text=e}setTips(e){}setVersion(){this.loader.m_txt_gamever.text="GameVersion:"+Co.version.localAppVersionData.toString(),this.loader.m_txt_resVer.text="ResVersion:"+Co.version.localResVersionData.toString()}}class Rs extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameLaunch","EnterLoginLoader")}constructFromXML(e){super.constructFromXML(e),this.m_title=this.getChild("title"),this.m_help=this.getChild("help"),this.m_txt_resVer=this.getChild("txt_resVer"),this.m_txt_gamever=this.getChild("txt_gamever"),this.m_progressBar=this.getChild("progressBar"),this.m_imgLogo=this.getChild("imgLogo")}}Rs.URL="ui://47qsdr42mrzrw2o",Rs.DependPackages=["GameLaunch"];class Us extends Rs{}class Os extends Bs{constructor(){super(),this.tips=[],this.__setTipHandlerTimer=-1}onInit(){this.loader=Us.createInstance(),this.contentPane=this.loader,super.onInit(),this.tips=Co.launchText.tips,this.setVersion()}onShown(){super.onShown(),this.beginTips(),this.setVersion(),Co.version.sLocalVersionChange.add(this.setVersion,this)}onHide(){super.onHide(),this.stopTips(),Co.version.sLocalVersionChange.remove(this.setVersion,this)}beginTips(){this.stopTips(),this.tips&&this.tips.length>0&&this.__setTipHandler()}stopTips(){this.__setTipHandlerTimer>0&&(clearTimeout(this.__setTipHandlerTimer),this.__setTipHandlerTimer=-1)}__setTipHandler(){this.loader.m_help.text=this.tips[Random.range(0,this.tips.length)],this.__setTipHandlerTimer=setTimeout(()=>{this.__setTipHandler()},Random.range(100,400))}setMax(e){this.loader.m_progressBar.max=e}setValue(e){this.loader.m_progressBar.value=e}setTip(e){this.loader.m_title.text=e}setTips(e){}setVersion(){this.loader.m_txt_gamever.text="GameVersion:"+Co.version.localAppVersionData.toString(),this.loader.m_txt_resVer.text="ResVersion:"+Co.version.localResVersionData.toString()}}class Ns{constructor(){this.dict=new Dictionary,this.isInited=!1}static get Instance(){return Ns._Instance||(Ns._Instance=new Ns),Ns._Instance}install(){if(this.isInited)return;this.isInited=!0;let e=new Ds;e.loaderId=dt.None,this.dict.add(e.loaderId,e);let t=new Fs;(e=new Ds).loaderId=dt.Circle,e.loaderPanel=t,this.dict.add(e.loaderId,e);let i=new Os;(e=new Ds).loaderId=dt.Launch,e.loaderPanel=i,this.dict.add(e.loaderId,e);let s=new Fs;(e=new Ds).loaderId=dt.EnterModule,e.loaderPanel=s,this.dict.add(e.loaderId,e)}getLoaderCtl(e){return this.dict.getValue(e)}open(e){let t=this.getLoaderCtl(e);return t||console.error("没有找到加载控制器 LoaderManager open loaderId=",e),t.open(),this.current=t,t}close(e){let t=this.getLoaderCtl(e);t&&(this.current==t&&(this.current=null),t.close())}closeAll(){let e=this.dict.getValues();for(let t=0;t<e.length;t++)e[t].close();this.current=null}setProgress(e){this.current&&this.current.setProgress(e)}setMax(e){this.current&&this.current.setMax(e)}}class Es{static get onError(){return net.logic.onError}static get onConnect(){return net.logic.onConnect}static get onClose(){return net.logic.onClose}static get onReconnect(){return net.logic.onReconnect}static get logicPing(){return net.logic.ping}static GamerLoginC2S(e,t){net.logic.gamerLoginC2S(e,t)}static get gamerLoginS2C(){return net.logic.gamerLoginS2C}static async AsyncGamerLoginC2S(e,t){return new Promise(i=>{let s={error:200},a=setTimeout(()=>{i(s)},5e3),n=function(e){clearTimeout(a),Es.gamerLoginS2C.off(n),i(e)};Es.gamerLoginS2C.on(n),Es.GamerLoginC2S(e,t)})}static GamerLoginGetDataC2S(){net.logic.gamerLoginGetDataC2S()}static get gamerLoginGetDataS2C(){return net.logic.gamerLoginGetDataS2C}static async AsyncGamerLoginGetDataC2S(){return new Promise(e=>{let t={error:200},i=setTimeout(()=>{e(t)},5e3),s=function(t){clearTimeout(i),Es.gamerLoginGetDataS2C.off(s),e(t)};Es.gamerLoginGetDataS2C.on(s),Es.GamerLoginGetDataC2S()})}static ServerTimeC2S(){net.logic.serverTimeC2S()}static get serverTimeS2C(){return net.logic.serverTimeS2C}static async AsyncServerTimeC2S(){return new Promise(e=>{let t={error:200},i=setTimeout(()=>{e(t)},5e3),s=function(t){clearTimeout(i),Es.serverTimeS2C.off(s),e(t)};Es.serverTimeS2C.on(s),Es.ServerTimeC2S()})}static GamerSubChatChannelC2S(e,t){net.logic.gamerSubChatChannelC2S(e,t)}static get gamerSubChatChannelS2C(){return net.logic.gamerSubChatChannelS2C}static async AsyncGamerSubChatChannelC2S(e,t){return new Promise(i=>{let s={error:200},a=setTimeout(()=>{i(s)},5e3),n=function(e){clearTimeout(a),Es.gamerSubChatChannelS2C.off(n),i(e)};Es.gamerSubChatChannelS2C.on(n),Es.GamerSubChatChannelC2S(e,t)})}static GamerChangeNameC2S(e){net.logic.gamerChangeNameC2S(e)}static get gamerChangeNameS2C(){return net.logic.gamerChangeNameS2C}static async AsyncGamerChangeNameC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),Es.gamerChangeNameS2C.off(a),t(e)};Es.gamerChangeNameS2C.on(a),Es.GamerChangeNameC2S(e)})}static GamerChangeAvatarC2S(e){net.logic.gamerChangeAvatarC2S(e)}static get gamerChangeAvatarS2C(){return net.logic.gamerChangeAvatarS2C}static async AsyncGamerChangeAvatarC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),Es.gamerChangeAvatarS2C.off(a),t(e)};Es.gamerChangeAvatarS2C.on(a),Es.GamerChangeAvatarC2S(e)})}static GamerGetBackpackC2S(){net.logic.gamerGetBackpackC2S()}static get gamerGetBackpackS2C(){return net.logic.gamerGetBackpackS2C}static async AsyncGamerGetBackpackC2S(){return new Promise(e=>{let t={error:200},i=setTimeout(()=>{e(t)},5e3),s=function(t){clearTimeout(i),Es.gamerGetBackpackS2C.off(s),e(t)};Es.gamerGetBackpackS2C.on(s),Es.GamerGetBackpackC2S()})}static GamerSellItemC2S(e,t,i){net.logic.gamerSellItemC2S(e,t,i)}static get gamerSellItemS2C(){return net.logic.gamerSellItemS2C}static async AsyncGamerSellItemC2S(e,t,i){return new Promise(s=>{let a={error:200},n=setTimeout(()=>{s(a)},5e3),r=function(e){clearTimeout(n),Es.gamerSellItemS2C.off(r),s(e)};Es.gamerSellItemS2C.on(r),Es.GamerSellItemC2S(e,t,i)})}static GamerUseItemC2S(e,t,i){net.logic.gamerUseItemC2S(e,t,i)}static get gamerUseItemS2C(){return net.logic.gamerUseItemS2C}static async AsyncGamerUseItemC2S(e,t,i){return new Promise(s=>{let a={error:200},n=setTimeout(()=>{s(a)},5e3),r=function(e){clearTimeout(n),Es.gamerUseItemS2C.off(r),s(e)};Es.gamerUseItemS2C.on(r),Es.GamerUseItemC2S(e,t,i)})}static GamerFriendChatC2S(e,t){net.logic.gamerFriendChatC2S(e,t)}static get gamerFriendChatS2C(){return net.logic.gamerFriendChatS2C}static async AsyncGamerFriendChatC2S(e,t){return new Promise(i=>{let s={error:200},a=setTimeout(()=>{i(s)},5e3),n=function(e){clearTimeout(a),Es.gamerFriendChatS2C.off(n),i(e)};Es.gamerFriendChatS2C.on(n),Es.GamerFriendChatC2S(e,t)})}static GamerWorldChatC2S(e,t){net.logic.gamerWorldChatC2S(e,t)}static get gamerWorldChatS2C(){return net.logic.gamerWorldChatS2C}static async AsyncGamerWorldChatC2S(e,t){return new Promise(i=>{let s={error:200},a=setTimeout(()=>{i(s)},5e3),n=function(e){clearTimeout(a),Es.gamerWorldChatS2C.off(n),i(e)};Es.gamerWorldChatS2C.on(n),Es.GamerWorldChatC2S(e,t)})}static GamerTestChatC2S(e,t){net.logic.gamerTestChatC2S(e,t)}static get gamerTestChatS2C(){return net.logic.gamerTestChatS2C}static async AsyncGamerTestChatC2S(e,t){return new Promise(i=>{let s={error:200},a=setTimeout(()=>{i(s)},5e3),n=function(e){clearTimeout(a),Es.gamerTestChatS2C.off(n),i(e)};Es.gamerTestChatS2C.on(n),Es.GamerTestChatC2S(e,t)})}static GamerClubRequestC2S(e,t){net.logic.gamerClubRequestC2S(e,t)}static get gamerClubRequestS2C(){return net.logic.gamerClubRequestS2C}static async AsyncGamerClubRequestC2S(e,t){return new Promise(i=>{let s={error:200},a=setTimeout(()=>{i(s)},5e3),n=function(e){clearTimeout(a),Es.gamerClubRequestS2C.off(n),i(e)};Es.gamerClubRequestS2C.on(n),Es.GamerClubRequestC2S(e,t)})}static GamerNewFriendReqC2S(e,t){net.logic.gamerNewFriendReqC2S(e,t)}static get gamerNewFriendReqS2C(){return net.logic.gamerNewFriendReqS2C}static async AsyncGamerNewFriendReqC2S(e,t){return new Promise(i=>{let s={error:200},a=setTimeout(()=>{i(s)},5e3),n=function(e){clearTimeout(a),Es.gamerNewFriendReqS2C.off(n),i(e)};Es.gamerNewFriendReqS2C.on(n),Es.GamerNewFriendReqC2S(e,t)})}static GamerDelFriendC2S(e){net.logic.gamerDelFriendC2S(e)}static get gamerDelFriendS2C(){return net.logic.gamerDelFriendS2C}static async AsyncGamerDelFriendC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),Es.gamerDelFriendS2C.off(a),t(e)};Es.gamerDelFriendS2C.on(a),Es.GamerDelFriendC2S(e)})}static GamerProcessFriendReqC2S(e,t){net.logic.gamerProcessFriendReqC2S(e,t)}static get gamerProcessFriendReqS2C(){return net.logic.gamerProcessFriendReqS2C}static async AsyncGamerProcessFriendReqC2S(e,t){return new Promise(i=>{let s={error:200},a=setTimeout(()=>{i(s)},5e3),n=function(e){clearTimeout(a),Es.gamerProcessFriendReqS2C.off(n),i(e)};Es.gamerProcessFriendReqS2C.on(n),Es.GamerProcessFriendReqC2S(e,t)})}static GamerGetMailC2S(){net.logic.gamerGetMailC2S()}static get gamerGetMailS2C(){return net.logic.gamerGetMailS2C}static async AsyncGamerGetMailC2S(){return new Promise(e=>{let t={error:200},i=setTimeout(()=>{e(t)},5e3),s=function(t){clearTimeout(i),Es.gamerGetMailS2C.off(s),e(t)};Es.gamerGetMailS2C.on(s),Es.GamerGetMailC2S()})}static GamerDelMailC2S(e){net.logic.gamerDelMailC2S(e)}static get gamerDelMailS2C(){return net.logic.gamerDelMailS2C}static async AsyncGamerDelMailC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),Es.gamerDelMailS2C.off(a),t(e)};Es.gamerDelMailS2C.on(a),Es.GamerDelMailC2S(e)})}static GamerDelHaveReadMailC2S(){net.logic.gamerDelHaveReadMailC2S()}static get gamerDelHaveReadMailS2C(){return net.logic.gamerDelHaveReadMailS2C}static async AsyncGamerDelHaveReadMailC2S(){return new Promise(e=>{let t={error:200},i=setTimeout(()=>{e(t)},5e3),s=function(t){clearTimeout(i),Es.gamerDelHaveReadMailS2C.off(s),e(t)};Es.gamerDelHaveReadMailS2C.on(s),Es.GamerDelHaveReadMailC2S()})}static GamerOneKeyRcvMailRewardC2S(){net.logic.gamerOneKeyRcvMailRewardC2S()}static get gamerOneKeyRcvMailRewardS2C(){return net.logic.gamerOneKeyRcvMailRewardS2C}static async AsyncGamerOneKeyRcvMailRewardC2S(){return new Promise(e=>{let t={error:200},i=setTimeout(()=>{e(t)},5e3),s=function(t){clearTimeout(i),Es.gamerOneKeyRcvMailRewardS2C.off(s),e(t)};Es.gamerOneKeyRcvMailRewardS2C.on(s),Es.GamerOneKeyRcvMailRewardC2S()})}static GamerChangeMailStateC2S(e,t){net.logic.gamerChangeMailStateC2S(e,t)}static get gamerChangeMailStateS2C(){return net.logic.gamerChangeMailStateS2C}static async AsyncGamerChangeMailStateC2S(e,t){return new Promise(i=>{let s={error:200},a=setTimeout(()=>{i(s)},5e3),n=function(e){clearTimeout(a),Es.gamerChangeMailStateS2C.off(n),i(e)};Es.gamerChangeMailStateS2C.on(n),Es.GamerChangeMailStateC2S(e,t)})}static GamerNewHeroC2S(e){net.logic.gamerNewHeroC2S(e)}static get gamerNewHeroS2C(){return net.logic.gamerNewHeroS2C}static async AsyncGamerNewHeroC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),Es.gamerNewHeroS2C.off(a),t(e)};Es.gamerNewHeroS2C.on(a),Es.GamerNewHeroC2S(e)})}static GamerUpgradeHeroC2S(e,t){net.logic.gamerUpgradeHeroC2S(e,t)}static get gamerUpgradeHeroS2C(){return net.logic.gamerUpgradeHeroS2C}static async AsyncGamerUpgradeHeroC2S(e,t){return new Promise(i=>{let s={error:200},a=setTimeout(()=>{i(s)},5e3),n=function(e){clearTimeout(a),Es.gamerUpgradeHeroS2C.off(n),i(e)};Es.gamerUpgradeHeroS2C.on(n),Es.GamerUpgradeHeroC2S(e,t)})}static GamerUseHeroMedicineC2S(e,t,i){net.logic.gamerUseHeroMedicineC2S(e,t,i)}static get gamerUseHeroMedicineS2C(){return net.logic.gamerUseHeroMedicineS2C}static async AsyncGamerUseHeroMedicineC2S(e,t,i){return new Promise(s=>{let a={error:200},n=setTimeout(()=>{s(a)},5e3),r=function(e){clearTimeout(n),Es.gamerUseHeroMedicineS2C.off(r),s(e)};Es.gamerUseHeroMedicineS2C.on(r),Es.GamerUseHeroMedicineC2S(e,t,i)})}static GamerUpStarHeroC2S(e){net.logic.gamerUpStarHeroC2S(e)}static get gamerUpStarHeroS2C(){return net.logic.gamerUpStarHeroS2C}static async AsyncGamerUpStarHeroC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),Es.gamerUpStarHeroS2C.off(a),t(e)};Es.gamerUpStarHeroS2C.on(a),Es.GamerUpStarHeroC2S(e)})}static GamerUpHeroSkillC2S(e,t){net.logic.gamerUpHeroSkillC2S(e,t)}static get gamerUpHeroSkillS2C(){return net.logic.gamerUpHeroSkillS2C}static async AsyncGamerUpHeroSkillC2S(e,t){return new Promise(i=>{let s={error:200},a=setTimeout(()=>{i(s)},5e3),n=function(e){clearTimeout(a),Es.gamerUpHeroSkillS2C.off(n),i(e)};Es.gamerUpHeroSkillS2C.on(n),Es.GamerUpHeroSkillC2S(e,t)})}static GamerGetHeroC2S(){net.logic.gamerGetHeroC2S()}static get gamerGetHeroS2C(){return net.logic.gamerGetHeroS2C}static async AsyncGamerGetHeroC2S(){return new Promise(e=>{let t={error:200},i=setTimeout(()=>{e(t)},5e3),s=function(t){clearTimeout(i),Es.gamerGetHeroS2C.off(s),e(t)};Es.gamerGetHeroS2C.on(s),Es.GamerGetHeroC2S()})}static GamerPVPLoadingC2S(e,t){net.logic.gamerPVPLoadingC2S(e,t)}static get gamerPVPLoadingS2C(){return net.logic.gamerPVPLoadingS2C}static async AsyncGamerPVPLoadingC2S(e,t){return new Promise(i=>{let s={error:200},a=setTimeout(()=>{i(s)},5e3),n=function(e){clearTimeout(a),Es.gamerPVPLoadingS2C.off(n),i(e)};Es.gamerPVPLoadingS2C.on(n),Es.GamerPVPLoadingC2S(e,t)})}static GamerPVPSyncC2S(e,t,i,s,a,n,r,o,l,c,h,u){net.logic.gamerPVPSyncC2S(e,t,i,s,a,n,r,o,l,c,h,u)}static get gamerPVPSyncS2C(){return net.logic.gamerPVPSyncS2C}static async AsyncGamerPVPSyncC2S(e,t,i,s,a,n,r,o,l,c,h,u){return new Promise(m=>{let g={error:200},d=setTimeout(()=>{m(g)},5e3),p=function(e){clearTimeout(d),Es.gamerPVPSyncS2C.off(p),m(e)};Es.gamerPVPSyncS2C.on(p),Es.GamerPVPSyncC2S(e,t,i,s,a,n,r,o,l,c,h,u)})}static GamerReliveC2S(e,t){net.logic.gamerReliveC2S(e,t)}static get gamerReliveS2C(){return net.logic.gamerReliveS2C}static async AsyncGamerReliveC2S(e,t){return new Promise(i=>{let s={error:200},a=setTimeout(()=>{i(s)},5e3),n=function(e){clearTimeout(a),Es.gamerReliveS2C.off(n),i(e)};Es.gamerReliveS2C.on(n),Es.GamerReliveC2S(e,t)})}static GamerGetRealTimeRankC2S(){net.logic.gamerGetRealTimeRankC2S()}static get gamerGetRealTimeRankS2C(){return net.logic.gamerGetRealTimeRankS2C}static async AsyncGamerGetRealTimeRankC2S(){return new Promise(e=>{let t={error:200},i=setTimeout(()=>{e(t)},5e3),s=function(t){clearTimeout(i),Es.gamerGetRealTimeRankS2C.off(s),e(t)};Es.gamerGetRealTimeRankS2C.on(s),Es.GamerGetRealTimeRankC2S()})}static GamerCheckPVPBattleC2S(e){net.logic.gamerCheckPVPBattleC2S(e)}static get gamerCheckPVPBattleS2C(){return net.logic.gamerCheckPVPBattleS2C}static async AsyncGamerCheckPVPBattleC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),Es.gamerCheckPVPBattleS2C.off(a),t(e)};Es.gamerCheckPVPBattleS2C.on(a),Es.GamerCheckPVPBattleC2S(e)})}static GamerUploadWXInfoC2S(e){net.logic.gamerUploadWXInfoC2S(e)}static get gamerUploadWXInfoS2C(){return net.logic.gamerUploadWXInfoS2C}static async AsyncGamerUploadWXInfoC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),Es.gamerUploadWXInfoS2C.off(a),t(e)};Es.gamerUploadWXInfoS2C.on(a),Es.GamerUploadWXInfoC2S(e)})}static GamerGetNoviceGuideC2S(){net.logic.gamerGetNoviceGuideC2S()}static get gamerGetNoviceGuideS2C(){return net.logic.gamerGetNoviceGuideS2C}static async AsyncGamerGetNoviceGuideC2S(){return new Promise(e=>{let t={error:200},i=setTimeout(()=>{e(t)},5e3),s=function(t){clearTimeout(i),Es.gamerGetNoviceGuideS2C.off(s),e(t)};Es.gamerGetNoviceGuideS2C.on(s),Es.GamerGetNoviceGuideC2S()})}static GamerNoviceGuideChangeC2S(e){net.logic.gamerNoviceGuideChangeC2S(e)}static get gamerNoviceGuideChangeS2C(){return net.logic.gamerNoviceGuideChangeS2C}static async AsyncGamerNoviceGuideChangeC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),Es.gamerNoviceGuideChangeS2C.off(a),t(e)};Es.gamerNoviceGuideChangeS2C.on(a),Es.GamerNoviceGuideChangeC2S(e)})}static GamerMatchC2S(e,t,i,s,a,n,r,o){net.logic.gamerMatchC2S(e,t,i,s,a,n,r,o)}static get gamerMatchS2C(){return net.logic.gamerMatchS2C}static async AsyncGamerMatchC2S(e,t,i,s,a,n,r,o){return new Promise(l=>{let c={error:200},h=setTimeout(()=>{l(c)},5e3),u=function(e){clearTimeout(h),Es.gamerMatchS2C.off(u),l(e)};Es.gamerMatchS2C.on(u),Es.GamerMatchC2S(e,t,i,s,a,n,r,o)})}static GamerCancelMatchC2S(){net.logic.gamerCancelMatchC2S()}static get gamerCancelMatchS2C(){return net.logic.gamerCancelMatchS2C}static async AsyncGamerCancelMatchC2S(){return new Promise(e=>{let t={error:200},i=setTimeout(()=>{e(t)},5e3),s=function(t){clearTimeout(i),Es.gamerCancelMatchS2C.off(s),e(t)};Es.gamerCancelMatchS2C.on(s),Es.GamerCancelMatchC2S()})}static GamerGetRewardC2S(e){net.logic.gamerGetRewardC2S(e)}static get gamerGetRewardS2C(){return net.logic.gamerGetRewardS2C}static async AsyncGamerGetRewardC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),Es.gamerGetRewardS2C.off(a),t(e)};Es.gamerGetRewardS2C.on(a),Es.GamerGetRewardC2S(e)})}static GamerUseIconC2S(e,t,i){net.logic.gamerUseIconC2S(e,t,i)}static get gamerUseIconS2C(){return net.logic.gamerUseIconS2C}static async AsyncGamerUseIconC2S(e,t,i){return new Promise(s=>{let a={error:200},n=setTimeout(()=>{s(a)},5e3),r=function(e){clearTimeout(n),Es.gamerUseIconS2C.off(r),s(e)};Es.gamerUseIconS2C.on(r),Es.GamerUseIconC2S(e,t,i)})}static GamerExtractGashaponC2S(e){net.logic.gamerExtractGashaponC2S(e)}static get gamerExtractGashaponS2C(){return net.logic.gamerExtractGashaponS2C}static async AsyncGamerExtractGashaponC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),Es.gamerExtractGashaponS2C.off(a),t(e)};Es.gamerExtractGashaponS2C.on(a),Es.GamerExtractGashaponC2S(e)})}static GamerGetGashaponPreviewC2S(e){net.logic.gamerGetGashaponPreviewC2S(e)}static get gamerGetGashaponPreviewS2C(){return net.logic.gamerGetGashaponPreviewS2C}static async AsyncGamerGetGashaponPreviewC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),Es.gamerGetGashaponPreviewS2C.off(a),t(e)};Es.gamerGetGashaponPreviewS2C.on(a),Es.GamerGetGashaponPreviewC2S(e)})}static GetActivityRewardC2S(e){net.logic.getActivityRewardC2S(e)}static get getActivityRewardS2C(){return net.logic.getActivityRewardS2C}static async AsyncGetActivityRewardC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),Es.getActivityRewardS2C.off(a),t(e)};Es.getActivityRewardS2C.on(a),Es.GetActivityRewardC2S(e)})}static CreateGuildC2S(e){net.logic.createGuildC2S(e)}static get createGuildS2C(){return net.logic.createGuildS2C}static async AsyncCreateGuildC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),Es.createGuildS2C.off(a),t(e)};Es.createGuildS2C.on(a),Es.CreateGuildC2S(e)})}static GuildGamerLoginC2S(e){net.logic.guildGamerLoginC2S(e)}static get guildGamerLoginS2C(){return net.logic.guildGamerLoginS2C}static async AsyncGuildGamerLoginC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),Es.guildGamerLoginS2C.off(a),t(e)};Es.guildGamerLoginS2C.on(a),Es.GuildGamerLoginC2S(e)})}static GuildGamerLoginoutC2S(e){net.logic.guildGamerLoginoutC2S(e)}static get guildGamerLoginoutS2C(){return net.logic.guildGamerLoginoutS2C}static async AsyncGuildGamerLoginoutC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),Es.guildGamerLoginoutS2C.off(a),t(e)};Es.guildGamerLoginoutS2C.on(a),Es.GuildGamerLoginoutC2S(e)})}static DissolutionGuildC2S(e){net.logic.dissolutionGuildC2S(e)}static get dissolutionGuildS2C(){return net.logic.dissolutionGuildS2C}static async AsyncDissolutionGuildC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),Es.dissolutionGuildS2C.off(a),t(e)};Es.dissolutionGuildS2C.on(a),Es.DissolutionGuildC2S(e)})}static GetGuildC2S(e){net.logic.getGuildC2S(e)}static get getGuildS2C(){return net.logic.getGuildS2C}static async AsyncGetGuildC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),Es.getGuildS2C.off(a),t(e)};Es.getGuildS2C.on(a),Es.GetGuildC2S(e)})}static GetGuildListC2S(e,t){net.logic.getGuildListC2S(e,t)}static get getGuildListS2C(){return net.logic.getGuildListS2C}static async AsyncGetGuildListC2S(e,t){return new Promise(i=>{let s={error:200},a=setTimeout(()=>{i(s)},5e3),n=function(e){clearTimeout(a),Es.getGuildListS2C.off(n),i(e)};Es.getGuildListS2C.on(n),Es.GetGuildListC2S(e,t)})}static ApplyJoinGuildC2S(e){net.logic.applyJoinGuildC2S(e)}static get applyJoinGuildS2C(){return net.logic.applyJoinGuildS2C}static async AsyncApplyJoinGuildC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),Es.applyJoinGuildS2C.off(a),t(e)};Es.applyJoinGuildS2C.on(a),Es.ApplyJoinGuildC2S(e)})}static ApprovalJoinGuildC2S(e,t,i){net.logic.approvalJoinGuildC2S(e,t,i)}static get approvalJoinGuildS2C(){return net.logic.approvalJoinGuildS2C}static async AsyncApprovalJoinGuildC2S(e,t,i){return new Promise(s=>{let a={error:200},n=setTimeout(()=>{s(a)},5e3),r=function(e){clearTimeout(n),Es.approvalJoinGuildS2C.off(r),s(e)};Es.approvalJoinGuildS2C.on(r),Es.ApprovalJoinGuildC2S(e,t,i)})}static InviteJoinGuildC2S(e,t){net.logic.inviteJoinGuildC2S(e,t)}static get inviteJoinGuildS2C(){return net.logic.inviteJoinGuildS2C}static async AsyncInviteJoinGuildC2S(e,t){return new Promise(i=>{let s={error:200},a=setTimeout(()=>{i(s)},5e3),n=function(e){clearTimeout(a),Es.inviteJoinGuildS2C.off(n),i(e)};Es.inviteJoinGuildS2C.on(n),Es.InviteJoinGuildC2S(e,t)})}static AgreeJoinGuildC2S(e,t){net.logic.agreeJoinGuildC2S(e,t)}static get agreeJoinGuildS2C(){return net.logic.agreeJoinGuildS2C}static async AsyncAgreeJoinGuildC2S(e,t){return new Promise(i=>{let s={error:200},a=setTimeout(()=>{i(s)},5e3),n=function(e){clearTimeout(a),Es.agreeJoinGuildS2C.off(n),i(e)};Es.agreeJoinGuildS2C.on(n),Es.AgreeJoinGuildC2S(e,t)})}static QuitGuildC2S(e){net.logic.quitGuildC2S(e)}static get quitGuildS2C(){return net.logic.quitGuildS2C}static async AsyncQuitGuildC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),Es.quitGuildS2C.off(a),t(e)};Es.quitGuildS2C.on(a),Es.QuitGuildC2S(e)})}static KickOutGuildC2S(e,t){net.logic.kickOutGuildC2S(e,t)}static get kickOutGuildS2C(){return net.logic.kickOutGuildS2C}static async AsyncKickOutGuildC2S(e,t){return new Promise(i=>{let s={error:200},a=setTimeout(()=>{i(s)},5e3),n=function(e){clearTimeout(a),Es.kickOutGuildS2C.off(n),i(e)};Es.kickOutGuildS2C.on(n),Es.KickOutGuildC2S(e,t)})}static GuildChatC2S(e,t){net.logic.guildChatC2S(e,t)}static get guildChatS2C(){return net.logic.guildChatS2C}static async AsyncGuildChatC2S(e,t){return new Promise(i=>{let s={error:200},a=setTimeout(()=>{i(s)},5e3),n=function(e){clearTimeout(a),Es.guildChatS2C.off(n),i(e)};Es.guildChatS2C.on(n),Es.GuildChatC2S(e,t)})}static GMC2S(e){net.logic.gMC2S(e)}static get gMS2C(){return net.logic.gMS2C}static async AsyncGMC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),Es.gMS2C.off(a),t(e)};Es.gMS2C.on(a),Es.GMC2S(e)})}static CheckPointListC2S(){net.logic.checkPointListC2S()}static get checkPointListS2C(){return net.logic.checkPointListS2C}static async AsyncCheckPointListC2S(){return new Promise(e=>{let t={error:200},i=setTimeout(()=>{e(t)},5e3),s=function(t){clearTimeout(i),Es.checkPointListS2C.off(s),e(t)};Es.checkPointListS2C.on(s),Es.CheckPointListC2S()})}static GetPlotStarRewardC2S(e,t){net.logic.getPlotStarRewardC2S(e,t)}static get getPlotStarRewardS2C(){return net.logic.getPlotStarRewardS2C}static async AsyncGetPlotStarRewardC2S(e,t){return new Promise(i=>{let s={error:200},a=setTimeout(()=>{i(s)},5e3),n=function(e){clearTimeout(a),Es.getPlotStarRewardS2C.off(n),i(e)};Es.getPlotStarRewardS2C.on(n),Es.GetPlotStarRewardC2S(e,t)})}static BuyTimesCheckPointC2S(e,t){net.logic.buyTimesCheckPointC2S(e,t)}static get buyTimesCheckPointS2C(){return net.logic.buyTimesCheckPointS2C}static async AsyncBuyTimesCheckPointC2S(e,t){return new Promise(i=>{let s={error:200},a=setTimeout(()=>{i(s)},5e3),n=function(e){clearTimeout(a),Es.buyTimesCheckPointS2C.off(n),i(e)};Es.buyTimesCheckPointS2C.on(n),Es.BuyTimesCheckPointC2S(e,t)})}static SweepCheckPointC2S(e,t){net.logic.sweepCheckPointC2S(e,t)}static get sweepCheckPointS2C(){return net.logic.sweepCheckPointS2C}static async AsyncSweepCheckPointC2S(e,t){return new Promise(i=>{let s={error:200},a=setTimeout(()=>{i(s)},5e3),n=function(e){clearTimeout(a),Es.sweepCheckPointS2C.off(n),i(e)};Es.sweepCheckPointS2C.on(n),Es.SweepCheckPointC2S(e,t)})}static GamerSettlePVEC2S(e,t,i,s){net.logic.gamerSettlePVEC2S(e,t,i,s)}static get gamerSettlePVES2C(){return net.logic.gamerSettlePVES2C}static async AsyncGamerSettlePVEC2S(e,t,i,s){return new Promise(a=>{let n={error:200},r=setTimeout(()=>{a(n)},5e3),o=function(e){clearTimeout(r),Es.gamerSettlePVES2C.off(o),a(e)};Es.gamerSettlePVES2C.on(o),Es.GamerSettlePVEC2S(e,t,i,s)})}static DraugListC2S(){net.logic.draugListC2S()}static get draugListS2C(){return net.logic.draugListS2C}static async AsyncDraugListC2S(){return new Promise(e=>{let t={error:200},i=setTimeout(()=>{e(t)},5e3),s=function(t){clearTimeout(i),Es.draugListS2C.off(s),e(t)};Es.draugListS2C.on(s),Es.DraugListC2S()})}static AwakenDraugC2S(e){net.logic.awakenDraugC2S(e)}static get awakenDraugS2C(){return net.logic.awakenDraugS2C}static async AsyncAwakenDraugC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),Es.awakenDraugS2C.off(a),t(e)};Es.awakenDraugS2C.on(a),Es.AwakenDraugC2S(e)})}static PutDraugIntoPackC2S(){net.logic.putDraugIntoPackC2S()}static get putDraugIntoPackS2C(){return net.logic.putDraugIntoPackS2C}static async AsyncPutDraugIntoPackC2S(){return new Promise(e=>{let t={error:200},i=setTimeout(()=>{e(t)},5e3),s=function(t){clearTimeout(i),Es.putDraugIntoPackS2C.off(s),e(t)};Es.putDraugIntoPackS2C.on(s),Es.PutDraugIntoPackC2S()})}static SwallowDraugC2S(e,t,i){net.logic.swallowDraugC2S(e,t,i)}static get swallowDraugS2C(){return net.logic.swallowDraugS2C}static async AsyncSwallowDraugC2S(e,t,i){return new Promise(s=>{let a={error:200},n=setTimeout(()=>{s(a)},5e3),r=function(e){clearTimeout(n),Es.swallowDraugS2C.off(r),s(e)};Es.swallowDraugS2C.on(r),Es.SwallowDraugC2S(e,t,i)})}static DecomposeDraugC2S(e){net.logic.decomposeDraugC2S(e)}static get decomposeDraugS2C(){return net.logic.decomposeDraugS2C}static async AsyncDecomposeDraugC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),Es.decomposeDraugS2C.off(a),t(e)};Es.decomposeDraugS2C.on(a),Es.DecomposeDraugC2S(e)})}static LockDraugC2S(e){net.logic.lockDraugC2S(e)}static get lockDraugS2C(){return net.logic.lockDraugS2C}static async AsyncLockDraugC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),Es.lockDraugS2C.off(a),t(e)};Es.lockDraugS2C.on(a),Es.LockDraugC2S(e)})}static WearDraugC2S(e,t){net.logic.wearDraugC2S(e,t)}static get wearDraugS2C(){return net.logic.wearDraugS2C}static async AsyncWearDraugC2S(e,t){return new Promise(i=>{let s={error:200},a=setTimeout(()=>{i(s)},5e3),n=function(e){clearTimeout(a),Es.wearDraugS2C.off(n),i(e)};Es.wearDraugS2C.on(n),Es.WearDraugC2S(e,t)})}static UnwearDraugC2S(e,t){net.logic.unwearDraugC2S(e,t)}static get unwearDraugS2C(){return net.logic.unwearDraugS2C}static async AsyncUnwearDraugC2S(e,t){return new Promise(i=>{let s={error:200},a=setTimeout(()=>{i(s)},5e3),n=function(e){clearTimeout(a),Es.unwearDraugS2C.off(n),i(e)};Es.unwearDraugS2C.on(n),Es.UnwearDraugC2S(e,t)})}static DraugSelectHeroC2S(e){net.logic.draugSelectHeroC2S(e)}static get draugSelectHeroS2C(){return net.logic.draugSelectHeroS2C}static async AsyncDraugSelectHeroC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),Es.draugSelectHeroS2C.off(a),t(e)};Es.draugSelectHeroS2C.on(a),Es.DraugSelectHeroC2S(e)})}static HeroGroupListC2S(){net.logic.heroGroupListC2S()}static get heroGroupListS2C(){return net.logic.heroGroupListS2C}static async AsyncHeroGroupListC2S(){return new Promise(e=>{let t={error:200},i=setTimeout(()=>{e(t)},5e3),s=function(t){clearTimeout(i),Es.heroGroupListS2C.off(s),e(t)};Es.heroGroupListS2C.on(s),Es.HeroGroupListC2S()})}static UnlockHeroGroupC2S(e){net.logic.unlockHeroGroupC2S(e)}static get unlockHeroGroupS2C(){return net.logic.unlockHeroGroupS2C}static async AsyncUnlockHeroGroupC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),Es.unlockHeroGroupS2C.off(a),t(e)};Es.unlockHeroGroupS2C.on(a),Es.UnlockHeroGroupC2S(e)})}static ChangeNameHeroGroupC2S(e,t){net.logic.changeNameHeroGroupC2S(e,t)}static get changeNameHeroGroupS2C(){return net.logic.changeNameHeroGroupS2C}static async AsyncChangeNameHeroGroupC2S(e,t){return new Promise(i=>{let s={error:200},a=setTimeout(()=>{i(s)},5e3),n=function(e){clearTimeout(a),Es.changeNameHeroGroupS2C.off(n),i(e)};Es.changeNameHeroGroupS2C.on(n),Es.ChangeNameHeroGroupC2S(e,t)})}static HeroGroupChangeHeroC2S(e,t,i){net.logic.heroGroupChangeHeroC2S(e,t,i)}static get heroGroupChangeHeroS2C(){return net.logic.heroGroupChangeHeroS2C}static async AsyncHeroGroupChangeHeroC2S(e,t,i){return new Promise(s=>{let a={error:200},n=setTimeout(()=>{s(a)},5e3),r=function(e){clearTimeout(n),Es.heroGroupChangeHeroS2C.off(r),s(e)};Es.heroGroupChangeHeroS2C.on(r),Es.HeroGroupChangeHeroC2S(e,t,i)})}static HeroGroupChangeSkillC2S(e,t,i){net.logic.heroGroupChangeSkillC2S(e,t,i)}static get heroGroupChangeSkillS2C(){return net.logic.heroGroupChangeSkillS2C}static async AsyncHeroGroupChangeSkillC2S(e,t,i){return new Promise(s=>{let a={error:200},n=setTimeout(()=>{s(a)},5e3),r=function(e){clearTimeout(n),Es.heroGroupChangeSkillS2C.off(r),s(e)};Es.heroGroupChangeSkillS2C.on(r),Es.HeroGroupChangeSkillC2S(e,t,i)})}static BuyFatigueC2S(e){net.logic.buyFatigueC2S(e)}static get buyFatigueS2C(){return net.logic.buyFatigueS2C}static async AsyncBuyFatigueC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),Es.buyFatigueS2C.off(a),t(e)};Es.buyFatigueS2C.on(a),Es.BuyFatigueC2S(e)})}static GetFatigueWelfareC2S(e){net.logic.getFatigueWelfareC2S(e)}static get getFatigueWelfareS2C(){return net.logic.getFatigueWelfareS2C}static async AsyncGetFatigueWelfareC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),Es.getFatigueWelfareS2C.off(a),t(e)};Es.getFatigueWelfareS2C.on(a),Es.GetFatigueWelfareC2S(e)})}static UpStarEquipC2S(e,t,i,s){net.logic.upStarEquipC2S(e,t,i,s)}static get upStarEquipS2C(){return net.logic.upStarEquipS2C}static async AsyncUpStarEquipC2S(e,t,i,s){return new Promise(a=>{let n={error:200},r=setTimeout(()=>{a(n)},5e3),o=function(e){clearTimeout(r),Es.upStarEquipS2C.off(o),a(e)};Es.upStarEquipS2C.on(o),Es.UpStarEquipC2S(e,t,i,s)})}static EatEquipsC2S(e,t,i){net.logic.eatEquipsC2S(e,t,i)}static get eatEquipsS2C(){return net.logic.eatEquipsS2C}static async AsyncEatEquipsC2S(e,t,i){return new Promise(s=>{let a={error:200},n=setTimeout(()=>{s(a)},5e3),r=function(e){clearTimeout(n),Es.eatEquipsS2C.off(r),s(e)};Es.eatEquipsS2C.on(r),Es.EatEquipsC2S(e,t,i)})}static DesEquipC2S(e){net.logic.desEquipC2S(e)}static get desEquipS2C(){return net.logic.desEquipS2C}static async AsyncDesEquipC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),Es.desEquipS2C.off(a),t(e)};Es.desEquipS2C.on(a),Es.DesEquipC2S(e)})}static TakeOnEquipC2S(e,t,i){net.logic.takeOnEquipC2S(e,t,i)}static get takeOnEquipS2C(){return net.logic.takeOnEquipS2C}static async AsyncTakeOnEquipC2S(e,t,i){return new Promise(s=>{let a={error:200},n=setTimeout(()=>{s(a)},5e3),r=function(e){clearTimeout(n),Es.takeOnEquipS2C.off(r),s(e)};Es.takeOnEquipS2C.on(r),Es.TakeOnEquipC2S(e,t,i)})}static TakeOffEquipC2S(e,t){net.logic.takeOffEquipC2S(e,t)}static get takeOffEquipS2C(){return net.logic.takeOffEquipS2C}static async AsyncTakeOffEquipC2S(e,t){return new Promise(i=>{let s={error:200},a=setTimeout(()=>{i(s)},5e3),n=function(e){clearTimeout(a),Es.takeOffEquipS2C.off(n),i(e)};Es.takeOffEquipS2C.on(n),Es.TakeOffEquipC2S(e,t)})}static RedSpotC2S(){net.logic.redSpotC2S()}static get redSpotS2C(){return net.logic.redSpotS2C}static async AsyncRedSpotC2S(){return new Promise(e=>{let t={error:200},i=setTimeout(()=>{e(t)},5e3),s=function(t){clearTimeout(i),Es.redSpotS2C.off(s),e(t)};Es.redSpotS2C.on(s),Es.RedSpotC2S()})}static MakeTeamC2S(e,t,i,s){net.logic.makeTeamC2S(e,t,i,s)}static get makeTeamS2C(){return net.logic.makeTeamS2C}static async AsyncMakeTeamC2S(e,t,i,s){return new Promise(a=>{let n={error:200},r=setTimeout(()=>{a(n)},5e3),o=function(e){clearTimeout(r),Es.makeTeamS2C.off(o),a(e)};Es.makeTeamS2C.on(o),Es.MakeTeamC2S(e,t,i,s)})}static SetTeamAimC2S(e){net.logic.setTeamAimC2S(e)}static get setTeamAimS2C(){return net.logic.setTeamAimS2C}static async AsyncSetTeamAimC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),Es.setTeamAimS2C.off(a),t(e)};Es.setTeamAimS2C.on(a),Es.SetTeamAimC2S(e)})}static JoinTeamC2S(e,t,i,s){net.logic.joinTeamC2S(e,t,i,s)}static get joinTeamS2C(){return net.logic.joinTeamS2C}static async AsyncJoinTeamC2S(e,t,i,s){return new Promise(a=>{let n={error:200},r=setTimeout(()=>{a(n)},5e3),o=function(e){clearTimeout(r),Es.joinTeamS2C.off(o),a(e)};Es.joinTeamS2C.on(o),Es.JoinTeamC2S(e,t,i,s)})}static ExitTeamC2S(){net.logic.exitTeamC2S()}static get exitTeamS2C(){return net.logic.exitTeamS2C}static async AsyncExitTeamC2S(){return new Promise(e=>{let t={error:200},i=setTimeout(()=>{e(t)},5e3),s=function(t){clearTimeout(i),Es.exitTeamS2C.off(s),e(t)};Es.exitTeamS2C.on(s),Es.ExitTeamC2S()})}static TurnOverTeamLeaderC2S(e){net.logic.turnOverTeamLeaderC2S(e)}static get turnOverTeamLeaderS2C(){return net.logic.turnOverTeamLeaderS2C}static async AsyncTurnOverTeamLeaderC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),Es.turnOverTeamLeaderS2C.off(a),t(e)};Es.turnOverTeamLeaderS2C.on(a),Es.TurnOverTeamLeaderC2S(e)})}static InviteTeamC2S(e){net.logic.inviteTeamC2S(e)}static get inviteTeamS2C(){return net.logic.inviteTeamS2C}static async AsyncInviteTeamC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),Es.inviteTeamS2C.off(a),t(e)};Es.inviteTeamS2C.on(a),Es.InviteTeamC2S(e)})}static RejectTeamC2S(e,t,i){net.logic.rejectTeamC2S(e,t,i)}static get rejectTeamS2C(){return net.logic.rejectTeamS2C}static async AsyncRejectTeamC2S(e,t,i){return new Promise(s=>{let a={error:200},n=setTimeout(()=>{s(a)},5e3),r=function(e){clearTimeout(n),Es.rejectTeamS2C.off(r),s(e)};Es.rejectTeamS2C.on(r),Es.RejectTeamC2S(e,t,i)})}static KickTeamC2S(e){net.logic.kickTeamC2S(e)}static get kickTeamS2C(){return net.logic.kickTeamS2C}static async AsyncKickTeamC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),Es.kickTeamS2C.off(a),t(e)};Es.kickTeamS2C.on(a),Es.KickTeamC2S(e)})}static SetTeamHelpC2S(e){net.logic.setTeamHelpC2S(e)}static get setTeamHelpS2C(){return net.logic.setTeamHelpS2C}static async AsyncSetTeamHelpC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),Es.setTeamHelpS2C.off(a),t(e)};Es.setTeamHelpS2C.on(a),Es.SetTeamHelpC2S(e)})}static SetTeamHeroC2S(e,t,i){net.logic.setTeamHeroC2S(e,t,i)}static get setTeamHeroS2C(){return net.logic.setTeamHeroS2C}static async AsyncSetTeamHeroC2S(e,t,i){return new Promise(s=>{let a={error:200},n=setTimeout(()=>{s(a)},5e3),r=function(e){clearTimeout(n),Es.setTeamHeroS2C.off(r),s(e)};Es.setTeamHeroS2C.on(r),Es.SetTeamHeroC2S(e,t,i)})}static SwitchTeamReadyC2S(){net.logic.switchTeamReadyC2S()}static get switchTeamReadyS2C(){return net.logic.switchTeamReadyS2C}static async AsyncSwitchTeamReadyC2S(){return new Promise(e=>{let t={error:200},i=setTimeout(()=>{e(t)},5e3),s=function(t){clearTimeout(i),Es.switchTeamReadyS2C.off(s),e(t)};Es.switchTeamReadyS2C.on(s),Es.SwitchTeamReadyC2S()})}static TeamBattleC2S(){net.logic.teamBattleC2S()}static get teamBattleS2C(){return net.logic.teamBattleS2C}static async AsyncTeamBattleC2S(){return new Promise(e=>{let t={error:200},i=setTimeout(()=>{e(t)},5e3),s=function(t){clearTimeout(i),Es.teamBattleS2C.off(s),e(t)};Es.teamBattleS2C.on(s),Es.TeamBattleC2S()})}static GetDanInfoC2S(){net.logic.getDanInfoC2S()}static get getDanInfoS2C(){return net.logic.getDanInfoS2C}static async AsyncGetDanInfoC2S(){return new Promise(e=>{let t={error:200},i=setTimeout(()=>{e(t)},5e3),s=function(t){clearTimeout(i),Es.getDanInfoS2C.off(s),e(t)};Es.getDanInfoS2C.on(s),Es.GetDanInfoC2S()})}static GetDuelRankC2S(e,t,i,s){net.logic.getDuelRankC2S(e,t,i,s)}static get getDuelRankS2C(){return net.logic.getDuelRankS2C}static async AsyncGetDuelRankC2S(e,t,i,s){return new Promise(a=>{let n={error:200},r=setTimeout(()=>{a(n)},5e3),o=function(e){clearTimeout(r),Es.getDuelRankS2C.off(o),a(e)};Es.getDuelRankS2C.on(o),Es.GetDuelRankC2S(e,t,i,s)})}static SysListC2S(){net.logic.sysListC2S()}static get sysListS2C(){return net.logic.sysListS2C}static async AsyncSysListC2S(){return new Promise(e=>{let t={error:200},i=setTimeout(()=>{e(t)},5e3),s=function(t){clearTimeout(i),Es.sysListS2C.off(s),e(t)};Es.sysListS2C.on(s),Es.SysListC2S()})}static SysOpenShowC2S(e){net.logic.sysOpenShowC2S(e)}static get sysOpenShowS2C(){return net.logic.sysOpenShowS2C}static async AsyncSysOpenShowC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),Es.sysOpenShowS2C.off(a),t(e)};Es.sysOpenShowS2C.on(a),Es.SysOpenShowC2S(e)})}static GetQuestsC2S(){net.logic.getQuestsC2S()}static get getQuestsS2C(){return net.logic.getQuestsS2C}static async AsyncGetQuestsC2S(){return new Promise(e=>{let t={error:200},i=setTimeout(()=>{e(t)},5e3),s=function(t){clearTimeout(i),Es.getQuestsS2C.off(s),e(t)};Es.getQuestsS2C.on(s),Es.GetQuestsC2S()})}static GetQuestRewardC2S(e){net.logic.getQuestRewardC2S(e)}static get getQuestRewardS2C(){return net.logic.getQuestRewardS2C}static async AsyncGetQuestRewardC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),Es.getQuestRewardS2C.off(a),t(e)};Es.getQuestRewardS2C.on(a),Es.GetQuestRewardC2S(e)})}static GetDailyQuestRewardC2S(e){net.logic.getDailyQuestRewardC2S(e)}static get getDailyQuestRewardS2C(){return net.logic.getDailyQuestRewardS2C}static async AsyncGetDailyQuestRewardC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),Es.getDailyQuestRewardS2C.off(a),t(e)};Es.getDailyQuestRewardS2C.on(a),Es.GetDailyQuestRewardC2S(e)})}static GamerHeroImageChooseC2S(){net.logic.gamerHeroImageChooseC2S()}static get gamerHeroImageChooseS2C(){return net.logic.gamerHeroImageChooseS2C}static async AsyncGamerHeroImageChooseC2S(){return new Promise(e=>{let t={error:200},i=setTimeout(()=>{e(t)},5e3),s=function(t){clearTimeout(i),Es.gamerHeroImageChooseS2C.off(s),e(t)};Es.gamerHeroImageChooseS2C.on(s),Es.GamerHeroImageChooseC2S()})}static GamerHeroImageChangeC2S(e){net.logic.gamerHeroImageChangeC2S(e)}static get gamerHeroImageChangeS2C(){return net.logic.gamerHeroImageChangeS2C}static async AsyncGamerHeroImageChangeC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),Es.gamerHeroImageChangeS2C.off(a),t(e)};Es.gamerHeroImageChangeS2C.on(a),Es.GamerHeroImageChangeC2S(e)})}static GamerBuyRollC2S(e){net.logic.gamerBuyRollC2S(e)}static get gamerBuyRollS2C(){return net.logic.gamerBuyRollS2C}static async AsyncGamerBuyRollC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),Es.gamerBuyRollS2C.off(a),t(e)};Es.gamerBuyRollS2C.on(a),Es.GamerBuyRollC2S(e)})}static GetGamerSecretLandC2S(){net.logic.getGamerSecretLandC2S()}static get getGamerSecretLandS2C(){return net.logic.getGamerSecretLandS2C}static async AsyncGetGamerSecretLandC2S(){return new Promise(e=>{let t={error:200},i=setTimeout(()=>{e(t)},5e3),s=function(t){clearTimeout(i),Es.getGamerSecretLandS2C.off(s),e(t)};Es.getGamerSecretLandS2C.on(s),Es.GetGamerSecretLandC2S()})}static GamerSecretLandBattleRewardC2S(e){net.logic.gamerSecretLandBattleRewardC2S(e)}static get gamerSecretLandBattleRewardS2C(){return net.logic.gamerSecretLandBattleRewardS2C}static async AsyncGamerSecretLandBattleRewardC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),Es.gamerSecretLandBattleRewardS2C.off(a),t(e)};Es.gamerSecretLandBattleRewardS2C.on(a),Es.GamerSecretLandBattleRewardC2S(e)})}static GamerSecretLandWeekRewardC2S(){net.logic.gamerSecretLandWeekRewardC2S()}static get gamerSecretLandWeekRewardS2C(){return net.logic.gamerSecretLandWeekRewardS2C}static async AsyncGamerSecretLandWeekRewardC2S(){return new Promise(e=>{let t={error:200},i=setTimeout(()=>{e(t)},5e3),s=function(t){clearTimeout(i),Es.gamerSecretLandWeekRewardS2C.off(s),e(t)};Es.gamerSecretLandWeekRewardS2C.on(s),Es.GamerSecretLandWeekRewardC2S()})}static GamerSecretLandRankC2S(e){net.logic.gamerSecretLandRankC2S(e)}static get gamerSecretLandRankS2C(){return net.logic.gamerSecretLandRankS2C}static async AsyncGamerSecretLandRankC2S(e){return new Promise(t=>{let i={error:200},s=setTimeout(()=>{t(i)},5e3),a=function(e){clearTimeout(s),Es.gamerSecretLandRankS2C.off(a),t(e)};Es.gamerSecretLandRankS2C.on(a),Es.GamerSecretLandRankC2S(e)})}static GetGamerSecretLandInfoC2S(){net.logic.getGamerSecretLandInfoC2S()}static get getGamerSecretLandInfoS2C(){return net.logic.getGamerSecretLandInfoS2C}static async AsyncGetGamerSecretLandInfoC2S(){return new Promise(e=>{let t={error:200},i=setTimeout(()=>{e(t)},5e3),s=function(t){clearTimeout(i),Es.getGamerSecretLandInfoS2C.off(s),e(t)};Es.getGamerSecretLandInfoS2C.on(s),Es.GetGamerSecretLandInfoC2S()})}static GamerChangeItemIsSawC2S(e,t){net.logic.gamerChangeItemIsSawC2S(e,t)}static get gamerChangeItemIsSawS2C(){return net.logic.gamerChangeItemIsSawS2C}static async AsyncGamerChangeItemIsSawC2S(e,t){return new Promise(i=>{let s={error:200},a=setTimeout(()=>{i(s)},5e3),n=function(e){clearTimeout(a),Es.gamerChangeItemIsSawS2C.off(n),i(e)};Es.gamerChangeItemIsSawS2C.on(n),Es.GamerChangeItemIsSawC2S(e,t)})}static get gamerNotifyLoginOtherS2C(){return net.logic.gamerNotifyLoginOtherS2C}static get gamerNotifyExpLevelS2C(){return net.logic.gamerNotifyExpLevelS2C}static get gamerNotifyItemChangeS2C(){return net.logic.gamerNotifyItemChangeS2C}static get gamerNotifyNewChatS2C(){return net.logic.gamerNotifyNewChatS2C}static get gamerNotifyNewFriendReqS2C(){return net.logic.gamerNotifyNewFriendReqS2C}static get gamerNotifyNewFriendS2C(){return net.logic.gamerNotifyNewFriendS2C}static get gamerNotifyDelFriendS2C(){return net.logic.gamerNotifyDelFriendS2C}static get gamerNotifyNoticeS2C(){return net.logic.gamerNotifyNoticeS2C}static get gamerNotifyMailS2C(){return net.logic.gamerNotifyMailS2C}static get gamerNotifyNewMailS2C(){return net.logic.gamerNotifyNewMailS2C}static get gamerNotifyHerosChangeS2C(){return net.logic.gamerNotifyHerosChangeS2C}static get gamerNotifyHeroPropUpdateS2C(){return net.logic.gamerNotifyHeroPropUpdateS2C}static get gamerNotifyPVPLoadingS2C(){return net.logic.gamerNotifyPVPLoadingS2C}static get gamerNotifyGamerMiniS2C(){return net.logic.gamerNotifyGamerMiniS2C}static get gamerNotifyPVPSyncS2C(){return net.logic.gamerNotifyPVPSyncS2C}static get gamerNotifyNewPVPResultS2C(){return net.logic.gamerNotifyNewPVPResultS2C}static get gamerNotifyIconChangeS2C(){return net.logic.gamerNotifyIconChangeS2C}static get gamerNotifyDiamonChangeS2C(){return net.logic.gamerNotifyDiamonChangeS2C}static get gamerNotifyEnergyChangeS2C(){return net.logic.gamerNotifyEnergyChangeS2C}static get gamerNotifyExpChangeS2C(){return net.logic.gamerNotifyExpChangeS2C}static get gamerNotifyMatchInfoS2C(){return net.logic.gamerNotifyMatchInfoS2C}static get gamerNotifyGashaponInfoS2C(){return net.logic.gamerNotifyGashaponInfoS2C}static get gamerNotifyActivitiesS2C(){return net.logic.gamerNotifyActivitiesS2C}static get gamerNotifyApplyJoinGuildS2C(){return net.logic.gamerNotifyApplyJoinGuildS2C}static get gamerNotifyInviteJoinGuildS2C(){return net.logic.gamerNotifyInviteJoinGuildS2C}static get gamerNotifyGuildMemUpdateS2C(){return net.logic.gamerNotifyGuildMemUpdateS2C}static get gamerNotifyGuildChatS2C(){return net.logic.gamerNotifyGuildChatS2C}static get gamerNotifyCheckPointListS2C(){return net.logic.gamerNotifyCheckPointListS2C}static get gamerNotifyNewCheckPointListS2C(){return net.logic.gamerNotifyNewCheckPointListS2C}static get gamerNotifyRewardS2C(){return net.logic.gamerNotifyRewardS2C}static get gamerNotifyUnlockPosHeroGroupS2C(){return net.logic.gamerNotifyUnlockPosHeroGroupS2C}static get gamerNotifyFatigueS2C(){return net.logic.gamerNotifyFatigueS2C}static get gamerNotifyTeamS2C(){return net.logic.gamerNotifyTeamS2C}static get gamerNotifyTeamInfoS2C(){return net.logic.gamerNotifyTeamInfoS2C}static get gamerNotifyTeamChangeS2C(){return net.logic.gamerNotifyTeamChangeS2C}static get gamerNotifyTeamMemberChangeS2C(){return net.logic.gamerNotifyTeamMemberChangeS2C}static get gamerNotifyLeaveTeamS2C(){return net.logic.gamerNotifyLeaveTeamS2C}static get gamerNotifyTeamReadyS2C(){return net.logic.gamerNotifyTeamReadyS2C}static get gamerNotifyDanInfoS2C(){return net.logic.gamerNotifyDanInfoS2C}static get gamerNotifyNewSeasonS2C(){return net.logic.gamerNotifyNewSeasonS2C}static get gamerNotifyQuestsS2C(){return net.logic.gamerNotifyQuestsS2C}static get gamerNotifyGamerSecretLandInfoS2C(){return net.logic.gamerNotifyGamerSecretLandInfoS2C}static get gamerNotifySecretLandInfoS2C(){return net.logic.gamerNotifySecretLandInfoS2C}static get gamerNotifySLTreasureBoxS2C(){return net.logic.gamerNotifySLTreasureBoxS2C}static get gamerNotifyNewSecretLandResultS2C(){return net.logic.gamerNotifyNewSecretLandResultS2C}}class Ws{constructor(){this.id=0,this.name="TestName",this.vipLevel=1}setGamerMain(e){for(var t in e)this[t]=e[t]}set setGamerMini(e){for(var t in e)this[t]=e[t]}}class Vs{}class Xs extends Ws{constructor(){super(),this.maxLevel=80,this.changeNameNum=0,this.isLoginAndGetUserData=!1,this.isShowLevelUp=!1,this.levelSnapshotData=new Vs,this.InitTestData()}InitTestData(){this.exp=0}setGamerMain(e){super.setGamerMain(e)}levelSnapshot(){this.levelSnapshotData.exp=this.exp,this.levelSnapshotData.level=this.level}}class qs extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","PanelMainMenu")}constructFromXML(e){super.constructFromXML(e),this.m_state=this.getController("state"),this.m_menuLogo=this.getChild("menuLogo"),this.m_btnBar=this.getChild("btnBar"),this.m_getUserInfoBtn=this.getChild("getUserInfoBtn")}}qs.URL="ui://moe42ygrsqzy7q",qs.DependPackages=["GameHome"];class Ks extends qs{onWindowInited(){this.m_btnBar.m_bigPlayBtn.onClick(this,this.OnClickPlayBtn),this.m_btnBar.m_soundBtn.onClick(this,this.OnClickSoundBtn),this.m_btnBar.m_groupBtn.onClick(this,this.OnClickGroupBtn),this.onTabShow()}onWindowShow(){this.m_btnBar.m_soundBtn.SetSoundBtnState()}onTabShow(){be.sGetUserInfoBtnVisiable.add(this.OnGetUserInfoBtnVisiable,this),Ae.platform.userInfo.isAuthed||this.getAuth()}onTabHide(){be.sGetUserInfoBtnVisiable.remove(this.OnGetUserInfoBtnVisiable,this)}OnClickPlayBtn(){Co.menu.openTab(k.Home,gt.ChooseHero)}OnClickSoundBtn(){O.instance.changeSoundState(),this.m_btnBar.m_soundBtn.SetSoundBtnState()}OnClickGroupBtn(){}async getAuth(){if(Ae.platform instanceof Be){let e=Ae.platform,t=await e.WXAuth();t&&(console.log("userInfo:",t),this.OnGetUserInfoBtnVisiable(!1))}}OnGetUserInfoBtnVisiable(e){this.m_state.setSelectedIndex(e?1:0)}}class js extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","BigSoundBtn")}constructFromXML(e){super.constructFromXML(e),this.m_button=this.getController("button"),this.m_off=this.getChild("off"),this.m_on=this.getChild("on")}}js.URL="ui://moe42ygrsqzy87",js.DependPackages=["GameHome"];class zs extends js{SetSoundBtnState(){this.m_button.setSelectedIndex(O.instance.soundBtnIndex)}}class Ys extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","MainMenuBtnBar")}constructFromXML(e){super.constructFromXML(e),this.m_groupBtn=this.getChild("groupBtn"),this.m_soundBtn=this.getChild("soundBtn"),this.m_bigPlayBtn=this.getChild("bigPlayBtn")}}Ys.URL="ui://moe42ygrsqzy88",Ys.DependPackages=["GameHome"];class $s extends Ys{}class Js extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","PanelChooseHero")}constructFromXML(e){super.constructFromXML(e),this.m_btnGroup=this.getChild("btnGroup"),this.m_heroGroup=this.getChild("heroGroup"),this.m_playBtn=this.getChild("playBtn"),this.m_plusBtn=this.getChild("plusBtn"),this.m_nextHeroBtn=this.getChild("nextHeroBtn"),this.m_prevHeroBtn=this.getChild("prevHeroBtn"),this.m_choiceHero=this.getChild("choiceHero")}}Js.URL="ui://moe42ygrsqzy89",Js.DependPackages=["GameHome"];class Qs extends Js{constructor(){super(...arguments),this.heroDataList=[]}onWindowInited(){this.m_playBtn.onClick(this,this.OnClickPlayBtn),this.m_plusBtn.onClick(this,this.OnClickPlusBtn),this.m_nextHeroBtn.onClick(this,this.OnClickNextHeroBtn),this.m_prevHeroBtn.onClick(this,this.OnClickPrevHeroBtn),this.heroDataList=Co.moduleModel.hero.list,this.currentHeroData=Co.moduleModel.hero.selectHero}onWindowShow(){}onTabShow(){this.SetData()}onTabHide(){}SetBtnState(e=!0){e?(this.m_plusBtn.visible=!1,this.m_playBtn.visible=!0):(this.m_playBtn.visible=!1,this.m_plusBtn.visible=Co.moduleModel.hero.enableBuy())}SetData(){this.m_choiceHero.SetData(this.currentHeroData),this.SetBtnState(this.currentHeroData.isGeted),this.m_prevHeroBtn.visible=Co.moduleModel.hero.hasPrev(),this.m_nextHeroBtn.visible=Co.moduleModel.hero.hasNext()}OnClickNextHeroBtn(){this.currentHeroData=Co.moduleModel.hero.getNextItem(),this.SetData(),this.m_choiceHero.SetFront()}OnClickPrevHeroBtn(){this.currentHeroData=Co.moduleModel.hero.getPrevItem(),this.SetData(),this.m_choiceHero.SetFront()}OnClickPlayBtn(){Co.moduleModel.hero.selectHero=this.currentHeroData,Co.menu.openTab(k.Home,gt.Shop)}OnClickPlusBtn(){Co.moduleModel.hero.buy(),this.SetData()}}class Zs extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","MenuTopPanel")}constructFromXML(e){super.constructFromXML(e),this.m_coinText=this.getChild("coinText"),this.m_coinBar=this.getChild("coinBar"),this.m_prevBtn=this.getChild("prevBtn"),this.m_homeBtn=this.getChild("homeBtn")}}Zs.URL="ui://moe42ygrsqzy8b",Zs.DependPackages=["GameHome"];class ea extends Zs{get tabIndex(){var e=gt.MenuMenu;return this.moduleWindow&&this.moduleWindow.menuParameter&&void 0!==this.moduleWindow.menuParameter.openIndex&&(e=this.moduleWindow.menuParameter.openIndex),e}onWindowInited(){de.sGold.add(this.OnGoldChange,this),this.m_homeBtn.onClick(this,this.OnClickHomeBtn),this.m_prevBtn.onClick(this,this.OnClickPrevBtn),this.moduleWindow.sOpenTab.add(this.OnOpenTab,this),this.OnOpenTab(gt.MenuMenu)}onWindowDestory(){return de.sGold.remove(this.OnGoldChange,this),!1}onWindowShow(){this.OnGoldChange()}onTabShow(){this.OnGoldChange()}OnOpenTab(e){this.visible=e>gt.MenuMenu,this.m_prevBtn.visible=e>gt.ChooseHero&&e<gt.Result,this.m_homeBtn.visible=e>gt.MenuMenu&&e<gt.Result}OnGoldChange(){this.m_coinText.text=de.gold+""}OnClickHomeBtn(){Co.menu.openTab(k.Home,gt.MenuMenu)}OnClickPrevBtn(){var e=gt.MenuMenu;this.moduleWindow&&this.moduleWindow.menuParameter&&void 0!==this.moduleWindow.menuParameter.openIndex&&(e=this.moduleWindow.menuParameter.openIndex),e>0&&(e-=1),Co.menu.openTab(k.Home,e)}}class ta extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","ChoiceHero")}constructFromXML(e){super.constructFromXML(e),this.m_info=this.getChild("info"),this.m_card=this.getChild("card")}}ta.URL="ui://moe42ygrsqzy8l",ta.DependPackages=["GameHome"];class ia extends ta{onWindowInited(){this.m_card.m_infoBtn.onClick(this,this.ShowBack),this.m_info.m_backBtn.onClick(this,this.ShowFront)}SetData(e){this.heroData=e,this.m_card.SetData(e),this.m_info.SetData(e)}ShowBack(){E.TurnCard(this.m_card,this.m_info)}ShowFront(){E.TurnCard(this.m_info,this.m_card)}SetFront(){this.m_card.visible=!0,this.m_info.visible=!1,this.m_card.setScale(1,1)}}class sa extends fgui.GLabel{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","HeroSprite")}constructFromXML(e){super.constructFromXML(e),this.m_sprite=this.getController("sprite"),this.m_icon=this.getChild("icon"),this.m_t0=this.getTransition("t0")}}sa.URL="ui://moe42ygrsqzy8m",sa.DependPackages=["GameHome"];class aa extends sa{}class na extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","ChoiceHeroInfo")}constructFromXML(e){super.constructFromXML(e),this.m_hero=this.getController("hero"),this.m_bg=this.getChild("bg"),this.m_heroKey=this.getChild("heroKey"),this.m_heroBase=this.getChild("heroBase"),this.m_heroBomb=this.getChild("heroBomb"),this.m_gunHero=this.getChild("gunHero"),this.m_backBtn=this.getChild("backBtn")}}na.URL="ui://moe42ygrsqzy8p",na.DependPackages=["GameHome"];class ra extends na{SetData(e){this.heroData=e,this.m_hero.setSelectedIndex(e.cardConfig.id%100-1)}}class oa extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","HeroInfoKey")}constructFromXML(e){super.constructFromXML(e)}}oa.URL="ui://moe42ygrsqzy8q",oa.DependPackages=["GameHome"];class la extends oa{}class ca extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","HeroInfoBomb")}constructFromXML(e){super.constructFromXML(e)}}ca.URL="ui://moe42ygrsqzy8s",ca.DependPackages=["GameHome"];class ha extends ca{}class ua extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","HeroInfoGun")}constructFromXML(e){super.constructFromXML(e)}}ua.URL="ui://moe42ygrsqzy8t",ua.DependPackages=["GameHome"];class ma extends ua{}class ga extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","ChoiceHeroCard")}constructFromXML(e){super.constructFromXML(e),this.m_bg=this.getChild("bg"),this.m_coinIcon=this.getChild("coinIcon"),this.m_coinText=this.getChild("coinText"),this.m_coinGroup=this.getChild("coinGroup"),this.m_heroSprite=this.getChild("heroSprite"),this.m_infoBtn=this.getChild("infoBtn"),this.m_lock=this.getChild("lock")}}ga.URL="ui://moe42ygrsqzy8u",ga.DependPackages=["GameHome"];class da extends ga{SetData(e){this.heroData=e,this.m_heroSprite.m_sprite.setSelectedIndex(e.cardConfig.spriteIndex),this.m_coinText.text=e.cardConfig.coin+"",this.m_coinGroup.visible=this.m_lock.visible=!e.isGeted}}class pa extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","ShopCard")}constructFromXML(e){super.constructFromXML(e),this.m_back=this.getChild("back"),this.m_front=this.getChild("front")}}pa.URL="ui://moe42ygrsqzy8v",pa.DependPackages=["GameHome"];class Ca extends pa{constructFromXML(e){super.constructFromXML(e),this.m_front.m_infoBtn.onClick(this,this.ShowBack),this.m_back.m_backBtn.onClick(this,this.ShowFront)}setItemData(e){this.itemData=e,this.m_front.m_ShopType.setSelectedIndex(e.itemConfig.spriteIndex),this.m_back.m_ShopType.setSelectedIndex(e.itemConfig.spriteIndex),this.m_front.SetData(e),this.SetFront()}ShowBack(){E.TurnCard(this.m_front,this.m_back)}ShowFront(){E.TurnCard(this.m_back,this.m_front)}SetFront(){this.m_front.visible=!0,this.m_back.visible=!1,this.m_front.setScale(1,1)}}class Sa extends fgui.GLabel{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","ShopIcon")}constructFromXML(e){super.constructFromXML(e),this.m_icon=this.getChild("icon"),this.m_anim=this.getTransition("anim")}}Sa.URL="ui://moe42ygrsqzy8x",Sa.DependPackages=["GameHome"];class fa extends Sa{}class ya extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","PanelShop")}constructFromXML(e){super.constructFromXML(e),this.m_list=this.getChild("list"),this.m_playBtn=this.getChild("playBtn")}}ya.URL="ui://moe42ygrsqzy8y",ya.DependPackages=["GameHome"];class wa extends ya{constructor(){super(...arguments),this.itemDataList=[]}onWindowInited(){this.m_playBtn.onClick(this,this.OnClickPlayBtn),this.itemDataList=Co.moduleModel.item.list;let e=this.m_list;e.setVirtual(),e.setVirtualAndLoop(),e.setItemRenderer(this.renderListItem,this)}renderListItem(e,t){let i=this.itemDataList[e];t.setItemData(i)}refreshList(){this.m_list.numItems=this.itemDataList.length,this.m_list.refreshVirtualList()}onWindowShow(){}onTabShow(){this.refreshList()}onTabHide(){}OnClickPlayBtn(){Co.menu.openTab(k.Home,gt.ChooseGameFormat)}}class La extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","PanelChooseGameFormat")}constructFromXML(e){super.constructFromXML(e),this.m_formatGroup=this.getChild("formatGroup"),this.m_format3x3=this.getChild("format3x3"),this.m_format4x4=this.getChild("format4x4")}}La.URL="ui://moe42ygrsqzy8z",La.DependPackages=["GameHome"];class _a extends La{onWindowInited(){this.m_format4x4.isFourXFour=!0,this.m_format4x4.ColumnCount=4,this.m_format4x4.RowCount=4,this.m_format4x4.coin=700}onWindowShow(){}onTabShow(){}onTabHide(){}OnClickPlayBtn(){Co.menu.open(k.War)}}class va extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","GameFormatCard")}constructFromXML(e){super.constructFromXML(e),this.m_format=this.getController("format"),this.m_bg=this.getChild("bg"),this.m_coinIcon=this.getChild("coinIcon"),this.m_coinText=this.getChild("coinText"),this.m_coinGroup=this.getChild("coinGroup"),this.m_lock=this.getChild("lock"),this.m_plusBtn=this.getChild("plusBtn"),this.m_playBtn=this.getChild("playBtn"),this.m_fxSmallRing=this.getChild("fxSmallRing"),this.m_icon=this.getChild("icon")}}va.URL="ui://moe42ygrsqzy91",va.DependPackages=["GameHome"];class Ta extends va{constructor(){super(...arguments),this.isFourXFour=!1,this.ColumnCount=3,this.RowCount=3,this.coin=0}onWindowInited(){this.m_playBtn.onClick(this,this.OnClickPlayBtn),this.m_plusBtn.onClick(this,this.OnClickPlusBtn)}onWindowShow(){}onTabShow(){this.SetData()}onTabHide(){}SetData(){var e=!1;this.isFourXFour&&(e=!de.isFourXFour),this.SetBtnState(!e),this.m_lock.visible=e,this.m_coinText.text=this.coin+"",this.m_coinGroup.visible=e}SetBtnState(e=!0){e?(this.m_plusBtn.visible=!1,this.m_playBtn.visible=!0):(this.m_playBtn.visible=!1,this.m_plusBtn.visible=this.coin<=de.gold)}OnClickPlayBtn(){de.ColumnCount=this.ColumnCount,de.RowCount=this.RowCount,Co.menu.open(k.War)}OnClickPlusBtn(){de.gold-=this.coin,de.isFourXFour=!0,this.SetData()}}class Ia extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","FxShadow")}constructFromXML(e){super.constructFromXML(e),this.m_shadow=this.getChild("shadow"),this.m_anim=this.getTransition("anim")}}Ia.URL="ui://moe42ygrsqzy93",Ia.DependPackages=["GameHome"];class Ga extends Ia{}class Pa extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","ShopCardFront")}constructFromXML(e){super.constructFromXML(e),this.m_ShopType=this.getController("ShopType"),this.m_bg=this.getChild("bg"),this.m_coinIcon=this.getChild("coinIcon"),this.m_coinText=this.getChild("coinText"),this.m_coinGroup=this.getChild("coinGroup"),this.m_hasFlag=this.getChild("hasFlag"),this.m_infoBtn=this.getChild("infoBtn"),this.m_fxSmallRing=this.getChild("fxSmallRing"),this.m_shopIcon=this.getChild("shopIcon"),this.m_plusBtn=this.getChild("plusBtn")}}Pa.URL="ui://moe42ygrsqzy94",Pa.DependPackages=["GameHome"];class ka extends Pa{constructFromXML(e){super.constructFromXML(e),this.m_plusBtn.onClick(this,this.OnClosePlusBtn)}SetData(e){this.itemData=e,this.m_coinText.text=e.itemConfig.coin+"";var t=e.isGeted;this.m_hasFlag.visible=t,this.m_plusBtn.visible=!t&&e.enabelBuy}OnClosePlusBtn(){this.itemData.buy(),this.SetData(this.itemData)}}class Ma extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","ShopCardBack")}constructFromXML(e){super.constructFromXML(e),this.m_ShopType=this.getController("ShopType"),this.m_bg=this.getChild("bg"),this.m_backBtn=this.getChild("backBtn"),this.m_heart=this.getChild("heart"),this.m_luck=this.getChild("luck"),this.m_key=this.getChild("key"),this.m_horseshoe=this.getChild("horseshoe")}}Ma.URL="ui://moe42ygrsqzy95",Ma.DependPackages=["GameHome"];class xa extends Ma{}class ba extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","PanelPause")}constructFromXML(e){super.constructFromXML(e),this.m_btnGroup=this.getChild("btnGroup"),this.m_bg=this.getChild("bg"),this.m_logo=this.getChild("logo"),this.m_homeBtn=this.getChild("homeBtn"),this.m_soundBtn=this.getChild("soundBtn"),this.m_resumeBtn=this.getChild("resumeBtn")}}ba.URL="ui://moe42ygrsqzy9a",ba.DependPackages=["GameHome","GameLaunch"];class Da extends ba{onWindowInited(){this.m_homeBtn.onClick(this,this.OnClickHomeBtn),this.m_soundBtn.onClick(this,this.OnClickSoundBtn),this.m_resumeBtn.onClick(this,this.OnClickResumeBtn)}Open(){this.visible=!0,Tt.game.isPause=!0,this.m_soundBtn.SetSoundBtnState()}Close(){this.visible=!1,Tt.game.isPause=!1}OnClickHomeBtn(){Tt.setGameOver(),this.Close()}OnClickSoundBtn(){O.instance.changeSoundState(),this.m_soundBtn.SetSoundBtnState()}OnClickResumeBtn(){this.Close()}}class Ba extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","PanelResult")}constructFromXML(e){super.constructFromXML(e),this.m_btnGroup=this.getChild("btnGroup"),this.m_resultBg=this.getChild("resultBg"),this.m_coinCurrent=this.getChild("coinCurrent"),this.m_coinMax=this.getChild("coinMax"),this.m_resultGroup=this.getChild("resultGroup"),this.m_homeBtn=this.getChild("homeBtn"),this.m_playBtn=this.getChild("playBtn"),this.m_shareBtn=this.getChild("shareBtn")}}Ba.URL="ui://moe42ygrsqzy9d",Ba.DependPackages=["GameHome"];class Aa extends Ba{constructor(){super(...arguments),this.shareCount=0}onWindowInited(){this.m_homeBtn.onClick(this,this.OnClickHome),this.m_playBtn.onClick(this,this.OnClickPlayBtn),this.m_shareBtn.onClick(this,this.OnClickShareBtn)}onTabShow(){this.SetData()}onTabHide(){}SetData(){this.m_coinCurrent.text=de.goldPerGame+"",this.m_coinMax.text=de.bestGoldPerGame+""}OnClickPlayBtn(){Co.menu.openTab(k.Home,gt.ChooseHero)}OnClickHome(){Co.menu.openTab(k.Home,gt.MenuMenu)}OnClickShareBtn(){if(console.log("PanelResult OnClickShareBtn"),!Engine.borwer.isWXGame)return;wx.setMessageToFriendQuery({shareMessageToFriendScene:2});var e="nickName="+Ae.platform.userInfo.nickName,t=this.m_resultGroup.localToGlobal(0,0);t.x=Math.floor(t.x),t.y=Math.floor(t.y);var i=Math.floor(this.m_resultGroup.width),s=Math.floor(this.m_resultGroup.height);console.log("x=",t.x,", y=",t.y,", w=",i,", h=,",s);let a=canvas.toTempFilePathSync({x:t.x,y:t.y,width:i,height:s,destWidth:i,destHeight:s});He.OnShareResult(this.shareCount++),wx.aldShareAppMessage({title:`${Ae.platform.userInfo.nickName} 战绩`,imageUrl:a,query:e})}}class Ha extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","MenuTopPanelWar")}constructFromXML(e){super.constructFromXML(e),this.m_iconCoin=this.getChild("iconCoin"),this.m_coinText=this.getChild("coinText"),this.m_countText=this.getChild("countText"),this.m_levelTex=this.getChild("levelTex"),this.m_leveltex=this.getChild("leveltex"),this.m_fxCoin=this.getChild("fxCoin"),this.m_puaseBtn=this.getChild("puaseBtn")}}Ha.URL="ui://moe42ygrsqzy9e",Ha.DependPackages=["GameHome"];class Fa extends Ha{PlayFxCoin(){Laya.timer.clear(this,this.SetCoinIconState),this.m_iconCoin.visible=!1,this.m_fxCoin.visible=!0,this.m_fxCoin.frame=0,this.m_fxCoin.playing=!0,Laya.timer.frameOnce(Math.ceil(25),this,this.SetCoinIconState)}SetCoinIconState(){this.m_iconCoin.visible=!0,this.m_fxCoin.visible=!1,this.m_fxCoin.playing=!1}}class Ra extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","FxBarrel")}constructFromXML(e){super.constructFromXML(e)}}Ra.URL="ui://moe42ygrsqzy9g",Ra.DependPackages=["GameHome"];class Ua extends Ra{}class Oa extends fgui.GLabel{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","CardLifeHero")}constructFromXML(e){super.constructFromXML(e),this.m_title=this.getChild("title")}}Oa.URL="ui://moe42ygrsqzy9u",Oa.DependPackages=["GameHome"];class Na extends Oa{}class Ea extends fgui.GLabel{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","CardLifeWarriow")}constructFromXML(e){super.constructFromXML(e),this.m_dir=this.getController("dir"),this.m_title=this.getChild("title")}}Ea.URL="ui://moe42ygrsqzy9x",Ea.DependPackages=["GameHome"];class Wa extends Ea{}class Va extends fgui.GLabel{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","CardLifePowerUp")}constructFromXML(e){super.constructFromXML(e),this.m_title=this.getChild("title")}}Va.URL="ui://moe42ygrsqzy9z",Va.DependPackages=["GameHome"];class Xa extends Va{}class qa extends fgui.GLabel{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","CardShield")}constructFromXML(e){super.constructFromXML(e),this.m_level=this.getController("level"),this.m_icon=this.getChild("icon"),this.m_title=this.getChild("title")}}qa.URL="ui://moe42ygrsqzya0",qa.DependPackages=["GameHome"];class Ka extends qa{}class ja extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","CardShopBar")}constructFromXML(e){super.constructFromXML(e),this.m_shopHeart=this.getChild("shopHeart"),this.m_shopHorseshoe=this.getChild("shopHorseshoe"),this.m_shopLock=this.getChild("shopLock"),this.m_shopKey=this.getChild("shopKey"),this.m_fxHeart=this.getChild("fxHeart")}}ja.URL="ui://moe42ygrsqzya1",ja.DependPackages=["GameHome"];class za extends ja{constructor(){super(...arguments),this.shopList=[]}constructFromXML(e){super.constructFromXML(e),this.shopList.push(this.m_shopHeart),this.shopList.push(this.m_shopKey),this.shopList.push(this.m_shopLock),this.shopList.push(this.m_shopHorseshoe)}useLuck(){E.spriteHide(this.m_shopLock),this.m_shopHeart.visible=!1,Laya.timer.once(800,this,this.refresh)}useHeart(){this.m_fxHeart.x=this.m_shopHeart.x,this.m_fxHeart.y=this.m_shopHeart.y,this.m_fxHeart.visible=!0,this.m_fxHeart.frame=1,this.m_fxHeart.playing=!0,Laya.timer.once(2e3,this,this.refresh)}refresh(){this.m_shopHeart.visible=de.isHeart,this.m_shopKey.visible=de.isKey,this.m_shopLock.visible=de.isLuck,this.m_shopHorseshoe.visible=!1,this.m_fxHeart.visible=!1,this.m_fxHeart.frame=1,this.m_fxHeart.playing=!1;for(var e=0,t=0,i=this.shopList.length;t<i;t++){var s=this.shopList[t];s.visible&&(s.x=e+.5*s.width,e+=s.width+3)}}}class Ya extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","CardViewBack")}constructFromXML(e){super.constructFromXML(e),this.m_cardBack=this.getChild("cardBack")}}Ya.URL="ui://moe42ygrsqzya2",Ya.DependPackages=["GameHome"];class $a extends Ya{}class Ja extends fgui.GLabel{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","SpriteEnemy")}constructFromXML(e){super.constructFromXML(e),this.m_sprite=this.getController("sprite"),this.m_icon=this.getChild("icon"),this.m_t0=this.getTransition("t0")}}Ja.URL="ui://moe42ygrsqzya4",Ja.DependPackages=["GameHome"];class Qa extends Ja{}class Za extends fgui.GLabel{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","SpriteBoss")}constructFromXML(e){super.constructFromXML(e),this.m_sprite=this.getController("sprite"),this.m_icon=this.getChild("icon"),this.m_t0=this.getTransition("t0")}}Za.URL="ui://moe42ygrsqzya5",Za.DependPackages=["GameHome"];class en extends Za{}class tn extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","Container")}constructFromXML(e){super.constructFromXML(e)}}tn.URL="ui://moe42ygrsqzya7",tn.DependPackages=["GameHome"];class sn extends tn{}class an extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","PanelPopupChest")}constructFromXML(e){super.constructFromXML(e),this.m_bg=this.getChild("bg"),this.m_lock=this.getChild("lock")}}an.URL="ui://moe42ygrjak7ao",an.DependPackages=["GameHome","GameLaunch"],function(e){e[e.LoadBig=0]="LoadBig",e[e.LoadSmall=1]="LoadSmall",e[e.FixedBig=2]="FixedBig",e[e.FiexedSmall=3]="FiexedSmall"}(fs||(fs={}));class nn{constructor(){var e;this.configs=[{type:fs.LoadBig,angle:40,count:1},{type:fs.LoadSmall,angle:20,count:3},{type:fs.FixedBig,angle:50,count:2},{type:fs.FiexedSmall,angle:24,count:4}],this.beginAngle=-60,this.endAngle=240,this.items=[],this.loadItems=[],this.clickMaxCount=10,this.leftClickCount=10,this.isEnd=!1,this.initItems=[];var t=2,i=-45;for(var s of this.configs)for(var a=0;a<s.count;a++)e={id:t,index:t,groundIndex:a,config:s,angle:i,isOpen:!1},i+=s.angle,this.initItems.push(e),t++}init(){this.isEnd=!1,this.leftClickCount=this.clickMaxCount,this.items.length=0,this.loadItems.length=0,this.initItems=U.shuffle(this.initItems);for(var e=this.beginAngle,t=0,i=this.initItems.length;t<i;t++){var s=this.initItems[t];switch(e+=.5*s.config.angle,s.angle=this.angle360(e),s.isOpen=!1,e+=.5*s.config.angle,this.items.push(s),s.config.type){case fs.LoadBig:case fs.LoadSmall:this.loadItems.push(s)}}}getItemByAngle(e){for(var t of(e=this.angle360(e),this.items)){if(Math.abs(this.angle360(t.angle)-e)<=.5*t.config.angle)return t}}isOpendAll(){for(var e of this.loadItems)if(!e.isOpen)return!1;return!0}angle360(e){return 360==e?e:((e%=360)<0&&(e+=360),e)}static Angle360(e){return 360==e?e:((e%=360)<0&&(e+=360),e)}static AngleSub360(e,t){return e=this.Angle360(e),t=this.Angle360(t),Math.abs(e-t)}}class rn extends an{constructor(){super(...arguments),this.lockData=new nn,this.sResult=new TypedSignal}constructFromXML(e){super.constructFromXML(e),window.panelPopupChest=this}Open(){this.lockData.init(),this.m_lock.Init(this),this.visible=!0,this.alpha=0,Laya.Tween.clearAll(this),Laya.Tween.to(this,{alpha:1},200)}Close(){this.m_lock.OnClose(),Laya.Tween.to(this,{alpha:0},200,null,Laya.Handler.create(this,()=>{this.visible=!1}))}}class on extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","CPLockLamp")}constructFromXML(e){super.constructFromXML(e),this.m_state=this.getController("state"),this.m_bg=this.getChild("bg"),this.m_lighting=this.getChild("lighting")}}on.URL="ui://moe42ygrjak7ar",on.DependPackages=["GameHome"];class ln extends on{}class cn extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","CPLockBridge")}constructFromXML(e){super.constructFromXML(e),this.m_state=this.getController("state")}}cn.URL="ui://moe42ygrjak7as",cn.DependPackages=["GameHome"];class hn extends cn{}class un extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","CPLockSwitch")}constructFromXML(e){super.constructFromXML(e),this.m_button=this.getController("button"),this.m_arrow=this.getChild("arrow")}}un.URL="ui://moe42ygrjak7at",un.DependPackages=["GameHome"];class mn extends un{constructor(){super(...arguments),this.elasticList=[Laya.Ease.linearInOut],this.isRuning=!1}Init(e){this.lockData=e,this.m_arrow.rotation=e.beginAngle}Run(){this.isRuning||(this.isRuning=!0,Laya.timer.frameLoop(1,this,this.onLoop))}Stop(){this.isRuning=!1,Laya.timer.clearAll(this)}get angle(){return this.m_arrow.rotation}set angle(e){this.m_arrow.rotation=e}onLoop(){this.angle+=Laya.timer.delta*mn.speed,this.angle>=this.lockData.endAngle?(this.angle=this.lockData.endAngle,mn.speed*=-1):this.angle<=this.lockData.beginAngle&&(this.angle=this.lockData.beginAngle,mn.speed*=-1)}}mn.speed=.2,window.CPLockSwitch=mn;class gn extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","CPLockArrow")}constructFromXML(e){super.constructFromXML(e),this.m_clickSuccess=this.getTransition("clickSuccess"),this.m_clickFail=this.getTransition("clickFail")}}gn.URL="ui://moe42ygrjak7au",gn.DependPackages=["GameHome"];class dn extends gn{}class pn extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","CPLockLampGroup")}constructFromXML(e){super.constructFromXML(e),this.m_lamp_1=this.getChild("lamp_1"),this.m_lamp_2=this.getChild("lamp_2"),this.m_lamp_3=this.getChild("lamp_3"),this.m_lamp_4=this.getChild("lamp_4")}}pn.URL="ui://moe42ygrjak7av",pn.DependPackages=["GameHome"];class Cn extends pn{Init(e){this.lockData=e;for(var t=e.loadItems,i=0,s=t.length;i<s;i++){var a=t[i],n=this[`m_lamp_${i+1}`];a.itemViewLighting=n,n&&n.m_state.setSelectedIndex(a.isOpen?1:0)}}setItemState(e){e.itemViewLighting&&e.itemViewLighting.m_state.setSelectedIndex(e.isOpen?1:0)}}class Sn extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","CPLockDialLoadBig")}constructFromXML(e){super.constructFromXML(e),this.m_state=this.getController("state")}}Sn.URL="ui://moe42ygrjak7aw",Sn.DependPackages=["GameHome"];class fn extends Sn{}class yn extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","CPLockDialLoadSmall")}constructFromXML(e){super.constructFromXML(e),this.m_state=this.getController("state")}}yn.URL="ui://moe42ygrjak7ax",yn.DependPackages=["GameHome"];class wn extends yn{}class Ln extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","CPLockDialFixedSmall")}constructFromXML(e){super.constructFromXML(e)}}Ln.URL="ui://moe42ygrjak7ay",Ln.DependPackages=["GameHome"];class _n extends Ln{}class vn extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","CPLockDialFixedBig")}constructFromXML(e){super.constructFromXML(e)}}vn.URL="ui://moe42ygrjak7az",vn.DependPackages=["GameHome"];class Tn extends vn{}class In extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","CPLockDial")}constructFromXML(e){super.constructFromXML(e),this.m_fixedBig0=this.getChild("fixedBig0"),this.m_fixedBig1=this.getChild("fixedBig1"),this.m_fixedSmall0=this.getChild("fixedSmall0"),this.m_fixedSmall1=this.getChild("fixedSmall1"),this.m_fixedSmall2=this.getChild("fixedSmall2"),this.m_fixedSmall3=this.getChild("fixedSmall3"),this.m_loadBig0=this.getChild("loadBig0"),this.m_loadSmall0=this.getChild("loadSmall0"),this.m_loadSmall1=this.getChild("loadSmall1"),this.m_loadSmall2=this.getChild("loadSmall2")}}In.URL="ui://moe42ygrjak7b0",In.DependPackages=["GameHome"];class Gn extends In{Init(e){this.lockData=e;var t=e.items;for(var i of t){var s=this.getItemView(i);if(s)switch(s.rotation=i.angle,s.itemData=i,i.itemView=s,i.config.type){case fs.LoadBig:case fs.LoadSmall:var a=s;a.m_state?a.m_state.setSelectedIndex(i.isOpen?1:0):console.error(i.config.type,a)}else console.error("CPLockDial Init itemView = null",i)}}getItemView(e){switch(e.config.type){case fs.LoadBig:return this[`m_loadBig${e.groundIndex}`];case fs.LoadSmall:return this[`m_loadSmall${e.groundIndex}`];case fs.FixedBig:return this[`m_fixedBig${e.groundIndex}`];case fs.FiexedSmall:return this[`m_fixedSmall${e.groundIndex}`]}}setItemState(e){if(e.itemView)switch(e.config.type){case fs.LoadBig:case fs.LoadSmall:e.itemView.m_state.setSelectedIndex(e.isOpen?1:0)}}}class Pn extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","CPLock")}constructFromXML(e){super.constructFromXML(e),this.m_bg=this.getChild("bg"),this.m_dial=this.getChild("dial"),this.m_switch=this.getChild("switch"),this.m_bridge=this.getChild("bridge"),this.m_lampGroup=this.getChild("lampGroup")}}Pn.URL="ui://moe42ygrjak7b1",Pn.DependPackages=["GameHome"];class kn extends Pn{Init(e){this.panel=e;var t=this.lockData=e.lockData;this.m_dial.Init(t),this.m_switch.Init(t),this.m_lampGroup.Init(t),this.m_bridge.m_state.setSelectedIndex(0),this.Run()}Run(){this.panel.on(Laya.Event.MOUSE_DOWN,this,this.onClickHandler),this.m_switch.Run()}onClickHandler(){this.panel.off(Laya.Event.MOUSE_DOWN,this,this.onClickHandler),this.m_switch.Stop();var e=this.m_switch.angle,t=this.lockData.getItemByAngle(e);if(t)if(t.isOpen||this.lockData.isEnd)this.lockData.leftClickCount--,this.m_switch.m_arrow.m_clickFail.play();else switch(t.config.type){case fs.LoadBig:case fs.LoadSmall:t.isOpen=!0,this.m_dial.setItemState(t),this.m_lampGroup.setItemState(t),this.m_switch.m_arrow.m_clickSuccess.play();break;default:this.lockData.leftClickCount--,this.m_switch.m_arrow.m_clickFail.play()}else this.lockData.leftClickCount--,this.m_switch.m_arrow.m_clickSuccess.play();(O.instance.playSound(N.PickLockNeutral),this.lockData.isEnd)||(this.lockData.isOpendAll()?(this.lockData.isEnd=!0,this.OnSuccess()):this.lockData.leftClickCount<=0&&(this.lockData.isEnd=!0,this.OnFail()));Laya.timer.once(500,this,this.Run)}OnSuccess(){this.m_bridge.m_state.setSelectedIndex(1),O.instance.playSound(N.PickLockSuccess),Laya.timer.once(500,this,this.SetResult,[!0])}OnFail(){O.instance.playSound(N.PickLockFail);for(var e=0;e<4;e++){var t=Ve.PoolGet();t.setXY(U.getRandomIntInclusive(-120,120),U.getRandomIntInclusive(-280,120)),t.DelayPalay(U.getRandomIntInclusive(0,200),this)}Laya.timer.once(500,this,this.SetResult,[!1])}SetResult(e=!0){this.panel.sResult.dispatch(e),this.panel.Close()}OnClose(){Laya.timer.clearAll(this),this.m_switch.Stop()}}class Mn extends fgui.GButton{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","GetUserInfoBtn")}constructFromXML(e){super.constructFromXML(e),this.m_title=this.getChild("title"),this.m_icon=this.getChild("icon")}}Mn.URL="ui://moe42ygrgvpab9",Mn.DependPackages=["GameHome"];class xn extends Mn{}class bn extends fgui.GButton{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","ShareBtn")}constructFromXML(e){super.constructFromXML(e),this.m_icon=this.getController("icon"),this.m_icon=this.getChild("icon")}}bn.URL="ui://moe42ygrp1whbd",bn.DependPackages=["GameHome"];class Dn extends bn{}class Bn extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","ShareBtnBar")}constructFromXML(e){super.constructFromXML(e),this.m_wxBtn=this.getChild("wxBtn")}}Bn.URL="ui://moe42ygrp1whbe",Bn.DependPackages=["GameHome"];class An extends Bn{constructor(){super(...arguments),this._shareCount=0}constructFromXML(e){super.constructFromXML(e),this.m_wxBtn.onClick(this,this.OnClickWxBtn),this.InitWXShare()}async OnClickWxBtn(){console.log("ShareBtnBar OnClickWxBtn"),this.getShareImage(),Engine.borwer.isWXGame&&(He.OnShareBtn(this.ShareCount),wx.aldShareAppMessage(this.getShareObj()),this.DelayShareGet())}getShareObj(){return{title:VersionConfig.Title,query:this.getShareQuery(),imageUrl:this.getShareImage()}}getShareQuery(){var e=Co.menu.getLastOpenMenuId(),t=Co.menu.getMenuCtl(e);return"nickName="+Ae.platform.userInfo.nickName+"&menuId="+e+"&tabIndex="+(t&&t.openParametar?t.openParametar.openIndex:0)}getShareImage(){if(Engine.borwer.isWXGame&&Co.menu.isOpened(k.War)&&Tt.game&&Tt.game.container){He.OnShareWar(this.ShareCount);var e=Tt.game.container,t=e.localToGlobal(-.5*e.width,-.5*e.height);t.x=Math.floor(t.x),t.y=Math.floor(t.y);var i=Math.floor(.5*e.width),s=Math.floor(.5*e.height),a=e.localToGlobal(i,s);return i=a.x-t.x,s=a.y-t.y,canvas.toTempFilePathSync({x:t.x,y:t.y,width:i,height:s,destWidth:i,destHeight:s})}return VersionConfig.ShareImgUrl}InitWXShare(){An.isInited||(An.isInited=!0,window.wx&&(wx.showShareMenu(),wx.aldOnShareAppMessage(()=>(He.OnShare(this.ShareCount),this.DelayShareGet(),this.getShareObj()))))}get ShareCount(){var e=Co.localStorage.getInt("ShareDate",!1),t=(new Date).getDate();return this._shareCount=t!=e?0:Co.localStorage.getInt("ShareCount2",!1),this._shareCount}set ShareCount(e){var t=Co.localStorage.getInt("ShareDate",!1),i=(new Date).getDate();i!=t&&(e=1,Co.localStorage.setInt("ShareDate",i)),this._shareCount=e,Co.localStorage.setInt("ShareCount2",e,!1)}DelayShareGet(){Laya.timer.once(1e3,this,this.OnShareGet)}OnShareGet(){this.ShareCount++,this.ShareCount<=10&&(de.addUserGold(100),Co.system.toastText(`今日分享 ${this.ShareCount}/10, 获得奖励金币+100`))}}An.isInited=!1;class Hn extends fgui.GButton{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","ShareIconBtn")}constructFromXML(e){super.constructFromXML(e),this.m_title=this.getChild("title"),this.m_icon=this.getChild("icon")}}Hn.URL="ui://moe42ygrp1whbg",Hn.DependPackages=["GameHome"];class Fn extends Hn{}class Rn extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","PlayerLevelBar")}constructFromXML(e){super.constructFromXML(e),this.m_level=this.getChild("level"),this.m_exp=this.getChild("exp"),this.m_equipDecorate=this.getChild("equipDecorate"),this.m_equipWeapon=this.getChild("equipWeapon")}}Rn.URL="ui://moe42ygrn2s1cm",Rn.DependPackages=["GameHome"];class Un extends Rn{get player(){return Re.current}onWindowShow(){this.SetLevel(),this.SetExp(),this.SetEquip(),this.player.sLevelChange.add(this.SetLevel,this),this.player.sExpChange.add(this.SetExp,this),this.player.sEquipChange.add(this.SetEquip,this)}onWindowHide(){this.player.sLevelChange.remove(this.SetLevel,this),this.player.sExpChange.remove(this.SetExp,this),this.player.sEquipChange.remove(this.SetEquip,this)}SetLevel(){this.m_level.m_title.text=this.player.level+"",this.player.level>1?E.spriteShow(this.m_level):(this.m_level.scaleX=1,this.m_level.scaleY=1,this.m_level.alpha=1)}SetExp(){this.m_exp.max=this.player.levelExpMax,this.m_exp.value=this.player.levelExp}SetEquip(){this.m_equipDecorate.SetData(this.player.equipDecorateData),this.m_equipWeapon.SetData(this.player.equipWeaponData)}}class On extends fgui.GLabel{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","Level")}constructFromXML(e){super.constructFromXML(e),this.m_title=this.getChild("title")}}On.URL="ui://moe42ygrn2s1cn",On.DependPackages=["GameHome"];class Nn extends On{}class En extends fgui.GProgressBar{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","ExpBar")}constructFromXML(e){super.constructFromXML(e),this.m_bar=this.getChild("bar")}}En.URL="ui://moe42ygrn2s1co",En.DependPackages=["GameHome"];class Wn extends En{}class Vn extends fgui.GLabel{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","EquipIcon")}constructFromXML(e){super.constructFromXML(e),this.m_itemType=this.getController("itemType"),this.m_step=this.getController("step"),this.m_bg=this.getChild("bg"),this.m_icon=this.getChild("icon"),this.m_stepText=this.getChild("stepText"),this.m_title=this.getChild("title")}}Vn.URL="ui://moe42ygrn2s1cp",Vn.DependPackages=["GameHome"];class Xn extends fgui.GLabel{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","EquipTip")}constructFromXML(e){super.constructFromXML(e),this.m_title=this.getChild("title")}}Xn.URL="ui://moe42ygr9cgecx",Xn.DependPackages=["GameHome"];class qn extends Xn{static get instance(){return this._instance||(this._instance=qn.createInstance(),this._instance.init()),this._instance}init(){Laya.stage.on(Laya.Event.MOUSE_DOWN,this,this.onStageMouseDown)}onStageMouseDown(e){this.hide()}Show(e){e&&(e instanceof Kn?e.data&&e.data.config&&(this.title=e.data.config.zhCnItemDes):e.config&&(this.title=e.config.zhCnItemDes));var t=e.localToGlobal(0,0);this.x=t.x-.5*this.width,this.y=t.y-.5*e.height-this.height,fgui.GRoot.inst.addChild(this)}hide(){this.removeFromParent()}}class Kn extends Vn{constructFromXML(e){super.constructFromXML(e),this.on(Laya.Event.MOUSE_DOWN,this,this.onMouseDown)}onMouseDown(){null!=this.data&&null!=this.data.config&&(Laya.stage.on(Laya.Event.MOUSE_UP,this,this.onMouseUp),Laya.timer.once(100,this,this.showTip))}onMouseUp(){Laya.timer.clear(this,this.showTip),Laya.stage.off(Laya.Event.MOUSE_UP,this,this.onMouseUp),qn.instance.hide()}showTip(){qn.instance.Show(this)}SetData(e){if(e.view=this,this.data&&(this.data.sChange.remove(this.OnChange,this),this.data.sStepChange.remove(this.SetStep,this)),this.data=e,e&&(this.data.sChange.add(this.OnChange,this),this.data.sStepChange.add(this.SetStep,this),this.data.config)){var t=0;switch(this.data.config.type){case B.Weapon:t=0;break;case B.Decorate:t=1;break;case B.Consume:t=2}this.m_itemType.setSelectedIndex(t)}this.OnChange(),this.scaleX=1,this.scaleY=1,this.alpha=1}OnChange(){this.SetStep(),this.SetIcon(),this.data&&this.data.id>0?(E.spriteShow(this),this.title=this.data.config.name):this.title=""}SetStep(){var e=this.data;e&&e.stepMax>=1?(this.m_stepText.text=e.step+"/"+e.stepMax,this.m_step.setSelectedIndex(1)):(this.m_stepText.text="",this.m_step.setSelectedIndex(0))}SetIcon(){var e=this.data;this.m_icon.url=e?e.iconUrl:""}}class jn extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","PanelUplevel")}constructFromXML(e){super.constructFromXML(e),this.m_bg=this.getChild("bg"),this.m_panel=this.getChild("panel")}}jn.URL="ui://moe42ygrn2s1cq",jn.DependPackages=["GameHome","GameLaunch"];class zn extends jn{onWindowInited(){this.m_panel.panel=this,this.m_panel.m_closeBtn.onClick(this,this.Close)}Open(){this.visible=!0,this.m_panel.Open()}Close(){this.visible=!1}}class Yn extends fgui.GButton{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","EquipSelectIcon")}constructFromXML(e){super.constructFromXML(e),this.m_itemType=this.getController("itemType"),this.m_bg=this.getChild("bg"),this.m_icon=this.getChild("icon"),this.m_title=this.getChild("title"),this.m_iconCoin=this.getChild("iconCoin"),this.m_coinText=this.getChild("coinText")}}Yn.URL="ui://moe42ygrn2s1cr",Yn.DependPackages=["GameHome"];class $n extends Yn{SetId(e){var t=Co.config.item.getConfig(e);this.config=t,this.equipId=e,this.m_icon.url="res/sprite/icon/"+t.icon+".png",this.m_title.text=t.name;var i=0;switch(t.type){case B.Weapon:i=0;break;case B.Decorate:i=1;break;case B.Consume:i=2}t.coin&&t.coin>0&&(this.m_coinText.text=t.coin+""),this.m_itemType.setSelectedIndex(i)}constructFromXML(e){super.constructFromXML(e),this.on(Laya.Event.MOUSE_DOWN,this,this.onMouseDown)}onMouseDown(){Laya.stage.on(Laya.Event.MOUSE_UP,this,this.onMouseUp),Laya.timer.once(500,this,this.showTip)}onMouseUp(){Laya.timer.clear(this,this.showTip),Laya.stage.off(Laya.Event.MOUSE_UP,this,this.onMouseUp),qn.instance.hide()}showTip(){qn.instance.Show(this)}}class Jn extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","UplevelAlert")}constructFromXML(e){super.constructFromXML(e),this.m_closeBtn=this.getChild("closeBtn"),this.m_equipDecorate=this.getChild("equipDecorate"),this.m_equipWeapon=this.getChild("equipWeapon"),this.m_equipConsume=this.getChild("equipConsume")}}Jn.URL="ui://moe42ygrn2s1cs",Jn.DependPackages=["GameHome"];class Qn extends Jn{onWindowInited(){this.m_equipDecorate.onClick(this,this.onClickEquipDecorate),this.m_equipWeapon.onClick(this,this.onClickEquipWeapon),this.m_equipConsume.onClick(this,this.onClickEquipConsume)}Open(){this.m_equipDecorate.SetId(Re.current.randomEquipDecorateId()),this.m_equipWeapon.SetId(Re.current.randomEquipWeaponId()),this.m_equipConsume.SetId(Re.current.randomEquipConsumeId()),E.spriteShow2(this)}onClickEquipDecorate(){this.onSelect(this.m_equipDecorate)}onClickEquipWeapon(){this.onSelect(this.m_equipWeapon)}onClickEquipConsume(){this.onSelect(this.m_equipConsume)}onSelect(e){if(e.config){var t=e.config;if(t.coin&&t.coin>0){if(de.goldPerGame<t.coin)return void Co.system.toastText("金币不够");de.goldPerGame-=t.coin}var i=e.config.id;switch(e.config.type){case B.Weapon:Re.current.equipWeaponData.setId(i);break;case B.Decorate:Re.current.equipDecorateData.setId(i);break;case B.Consume:Re.current.useEquipConsumeDelay(i)}}this.panel.Close()}}class Zn extends fgui.GLabel{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","CardStep")}constructFromXML(e){super.constructFromXML(e),this.m_title=this.getChild("title")}}Zn.URL="ui://moe42ygrn2s1cu",Zn.DependPackages=["GameHome"];class er extends Zn{}class tr extends fgui.GButton{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameHome","TextBtn")}constructFromXML(e){super.constructFromXML(e),this.m_title=this.getChild("title")}}tr.URL="ui://moe42ygr9cgecw",tr.DependPackages=["GameHome"];class ir extends tr{}class sr{static bindAll(){let e=fgui.UIObjectFactory.setPackageItemExtension;e(Ks.URL,Ks),e(zs.URL,zs),e($s.URL,$s),e(Qs.URL,Qs),e(_t.URL,_t),e(ea.URL,ea),e(ia.URL,ia),e(aa.URL,aa),e(ra.URL,ra),e(la.URL,la),e(ha.URL,ha),e(ma.URL,ma),e(da.URL,da),e(Ca.URL,Ca),e(q.URL,q),e(fa.URL,fa),e(wa.URL,wa),e(_a.URL,_a),e(Ta.URL,Ta),e(Ga.URL,Ga),e(ka.URL,ka),e(xa.URL,xa),e(Da.URL,Da),e(qt.URL,qt),e(Aa.URL,Aa),e(Fa.URL,Fa),e(Ua.URL,Ua),e(It.URL,It),e(Na.URL,Na),e(W.URL,W),e(he.URL,he),e(Wa.URL,Wa),e($.URL,$),e(Xa.URL,Xa),e(Ka.URL,Ka),e(za.URL,za),e($a.URL,$a),e(re.URL,re),e(Qa.URL,Qa),e(en.URL,en),e(ae.URL,ae),e(sn.URL,sn),e(f.URL,f),e(le.URL,le),e(K.URL,K),e(z.URL,z),e(ee.URL,ee),e(Q.URL,Q),e(ie.URL,ie),e(Xe.URL,Xe),e(Ee.URL,Ee),e(Ve.URL,Ve),e(fe.URL,fe),e(Se.URL,Se),e(Ke.URL,Ke),e(rn.URL,rn),e(ln.URL,ln),e(hn.URL,hn),e(mn.URL,mn),e(dn.URL,dn),e(Cn.URL,Cn),e(fn.URL,fn),e(wn.URL,wn),e(_n.URL,_n),e(Tn.URL,Tn),e(Gn.URL,Gn),e(kn.URL,kn),e(xn.URL,xn),e(Dn.URL,Dn),e(An.URL,An),e(Fn.URL,Fn),e(Un.URL,Un),e(Nn.URL,Nn),e(Wn.URL,Wn),e(Kn.URL,Kn),e(zn.URL,zn),e($n.URL,$n),e(Qn.URL,Qn),e(er.URL,er),e(ir.URL,ir),e(qn.URL,qn)}}class ar extends fgui.GLabel{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameLaunch","ScreenBG")}constructFromXML(e){super.constructFromXML(e),this.m_icon=this.getChild("icon")}}ar.URL="ui://47qsdr42f84s1",ar.DependPackages=["GameLaunch"];class nr extends ar{onWindowShow(){this.setScreenSize(),window.screenBG=this,Engine.stage.sResize.add(this.setScreenSize,this)}onWindowHide(){Engine.stage.sResize.remove(this.setScreenSize,this)}setScreenSize(){let e=Co.screenSetting.screenScaleShrinkMax;this.m_icon.scaleX=e,this.m_icon.scaleY=e}}class rr extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameLaunch","DialogCloseWindow")}constructFromXML(e){super.constructFromXML(e),this.m_closeButton=this.getChild("closeButton")}}rr.URL="ui://47qsdr42f84sg",rr.DependPackages=["GameLaunch"];class or extends rr{}class lr extends fgui.GButton{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameLaunch","GMButton")}constructFromXML(e){super.constructFromXML(e)}}lr.URL="ui://47qsdr42uohx13",lr.DependPackages=["GameLaunch"];class cr extends lr{}class hr extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameLaunch","BGModel")}constructFromXML(e){super.constructFromXML(e)}}hr.URL="ui://47qsdr42ae8aw2h",hr.DependPackages=["GameLaunch"];class ur extends hr{}class mr extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameLaunch","GlobalModalWaiting")}constructFromXML(e){super.constructFromXML(e),this.m_circle=this.getChild("circle"),this.m_rotation=this.getTransition("rotation")}}mr.URL="ui://47qsdr42x6asw2i",mr.DependPackages=["GameLaunch"];class gr extends mr{}class dr extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameLaunch","WindowModalWaiting")}constructFromXML(e){super.constructFromXML(e),this.m_circle=this.getChild("circle"),this.m_rotation=this.getTransition("rotation")}}dr.URL="ui://47qsdr42x6asw2j",dr.DependPackages=["GameLaunch"];class pr extends dr{}class Cr extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("GameLaunch","LogoView")}constructFromXML(e){super.constructFromXML(e),this.m_t0=this.getTransition("t0")}}Cr.URL="ui://47qsdr42tnlhw2t",Cr.DependPackages=["GameLaunch"];class Sr extends Cr{}class fr{static bindAll(){let e=fgui.UIObjectFactory.setPackageItemExtension;e(Hs.URL,Hs),e(nr.URL,nr),e(or.URL,or),e(Is.URL,Is),e(Ps.URL,Ps),e(Ss.URL,Ss),e(cr.URL,cr),e(ur.URL,ur),e(gr.URL,gr),e(pr.URL,pr),e(Us.URL,Us),e(Sr.URL,Sr)}}class yr extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("ModuleLogin","LoginPanel")}constructFromXML(e){super.constructFromXML(e),this.m_type=this.getController("type"),this.m_accountInput=this.getChild("accountInput"),this.m_passwordInput=this.getChild("passwordInput"),this.m_btn_login=this.getChild("btn_login"),this.m_btn_offLine=this.getChild("btn_offLine"),this.m_btn_randomLogin=this.getChild("btn_randomLogin"),this.m_btn_testWar=this.getChild("btn_testWar")}}yr.URL="ui://4698ugpknz0c1g",yr.DependPackages=["ModuleLogin"];class wr extends yr{onWindowInited(){console.log("LoginPanel onWindowInited"),this.m_type.selectedIndex=1,this.m_btn_randomLogin.visible=VersionConfig.IsDebugVer,this.m_btn_testWar.visible=VersionConfig.IsDebugVer,window.userAccount=this.m_accountInput.m_txt_account,window.userPassWorld=this.m_passwordInput.m_txt_password,window.loginPanel=this}createDebugButton(e,t,i,s){var a=fgui.UIPackage.createObjectFromURL(this.m_btn_login.resourceURL);a.text=e,a.width=150,a.height=80,a.x=200+200*i,a.y=100+100*s,a.onClick(this,t),fgui.GRoot.inst.addChild(a)}get account(){return this.m_accountInput.m_txt_account.text.trim()}set account(e){this.m_accountInput.m_txt_account.text=e}get password(){return this.m_passwordInput.m_txt_password.text.trim()}set password(e){this.m_passwordInput.m_txt_password.text=e}onWindowShow(){if(console.log("LoginPanel onWindowShow"),isNullOrEmpty(this.account)&&(this.account=Co.localStorage.username,Engine.borwer.isBrowser&&VersionConfig.IsDebugVer)){let e=sessionStorage.getItem("username");this.account=e||""}if(isNullOrEmpty(this.account)&&(this.account=Ae.RandName(2,7)),isNullOrEmpty(this.password)&&(this.password=Co.localStorage.password,Engine.borwer.isBrowser&&VersionConfig.IsDebugVer)){let e=sessionStorage.getItem("password");this.password=e||""}Engine.borwer.isWXGame}async getAuth(){if(Ae.platform instanceof Be){let e=Ae.platform;if(await e.WXGetSdkAuthSetting())this.setModel(!1);else{this.setModel(!0),await e.WXAuth()&&this.setModel(!1)}}}setModel(e){this.m_btn_login.title=e?Ft.Auth:Ft.Login}}class Lr extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("ModuleLogin","AccountInput")}constructFromXML(e){super.constructFromXML(e),this.m_txt_account=this.getChild("txt_account"),this.m_accountComboBox=this.getChild("accountComboBox")}}Lr.URL="ui://4698ugpknz0c1h",Lr.DependPackages=["ModuleLogin"];class _r extends Lr{}class vr extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("ModuleLogin","AccountComboBox")}constructFromXML(e){super.constructFromXML(e),this.m_c1=this.getController("c1")}}vr.URL="ui://4698ugpknz0c1i",vr.DependPackages=["ModuleLogin"];class Tr extends vr{}class Ir extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("ModuleLogin","passwordInput")}constructFromXML(e){super.constructFromXML(e),this.m_txt_password=this.getChild("txt_password")}}Ir.URL="ui://4698ugpknz0c1n",Ir.DependPackages=["ModuleLogin"];class Gr extends Ir{}class Pr extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("ModuleLogin","BulletinPanel")}constructFromXML(e){super.constructFromXML(e),this.m_Type=this.getController("Type"),this.m_listTest=this.getChild("listTest"),this.m_listUpdate=this.getChild("listUpdate"),this.m_bg=this.getChild("bg")}}Pr.URL="ui://4698ugpkrlfx2m",Pr.DependPackages=["ModuleLogin"];class kr extends Pr{}class Mr extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("ModuleLogin","WxPanel")}constructFromXML(e){super.constructFromXML(e),this.m_btn_login=this.getChild("btn_login")}}Mr.URL="ui://4698ugpkneo62p",Mr.DependPackages=["ModuleLogin"];class xr extends Mr{}class br extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("ModuleLogin","AccountShow")}constructFromXML(e){super.constructFromXML(e),this.m_txt_account=this.getChild("txt_account")}}br.URL="ui://4698ugpkneo62q",br.DependPackages=["ModuleLogin"];class Dr extends br{}class Br extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("ModuleLogin","ServerPanel")}constructFromXML(e){super.constructFromXML(e),this.m_Server=this.getController("Server"),this.m_listMenu=this.getChild("listMenu"),this.m_listServer=this.getChild("listServer"),this.m_btnChange=this.getChild("btnChange"),this.m_btnStart=this.getChild("btnStart"),this.m_bg=this.getChild("bg")}}Br.URL="ui://4698ugpklm612r",Br.DependPackages=["ModuleLogin"];class Ar extends Br{constructor(){super(...arguments),this.serverList=[],this.openServer=[],this.roles=new Dictionary}onWindowInited(){}onWindowShow(){this.m_listMenu.setItemRenderer(this.MenuRender,this),this.m_listMenu.on(fgui.Events.CLICK_ITEM,this,this.MenuSelect),this.m_listServer.setItemRenderer(this.ServerRender,this),this.m_listServer.on(fgui.Events.CLICK_ITEM,this,this.ServerSelect)}onWindowHide(){this.m_listMenu.itemRenderer.clear(),this.m_listMenu.off(fgui.Events.CLICK_ITEM,this,this.MenuSelect),this.m_listServer.itemRenderer.clear(),this.m_listServer.off(fgui.Events.CLICK_ITEM,this,this.ServerSelect),this.Reset()}MenuRender(e,t){}MenuSelect(e){}ServerRender(e,t){t.RenderItem(this.serverList[e])}ServerSelect(e){let t=e.DataSource;this.lastServer=t,this.m_btnChange.RenderItem(t),this.m_Server.selectedIndex=0}Reset(){this.serverList=[],this.openServer=[],this.roles.clear()}UpdateServer(){let e=this.serverList;this.m_listServer.numItems=e.length,this.m_listMenu.selectedIndex=0;let t=this.openServer;if(!e.length)return;let i,s=Co.localStorage.server;(i=s?this.GetServer(s,!0):t.length?t[t.length-1]:e[e.length-1])&&(this.lastServer=i,this.m_btnChange.RenderItem(i))}Open(e){if(this.serverList=e,this.roles.count)for(let t=0,i=e.length;t<i;t++){let i=e[t];this.roles.hasKey(i.id)&&this.openServer.push(i)}this.UpdateServer()}SetRoles(e){if(e&&e.length)for(let t=0,i=e.length;t<i;t++){let i=e[t];this.roles.add(i.server,i)}}GetRole(e){return this.roles.getValue(e)}GetServer(e,t){let i=t?this.openServer:this.serverList;for(let t=0,s=i.length;t<s;t++)if(i[t].id=e)return i[t];return this.GetServer(e)}}class Hr extends fgui.GButton{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("ModuleLogin","ServerItem")}constructFromXML(e){super.constructFromXML(e),this.m_button=this.getController("button"),this.m_State=this.getController("State"),this.m_Type=this.getController("Type"),this.m_View=this.getController("View"),this.m_labServer=this.getChild("labServer"),this.m_labLevel=this.getChild("labLevel")}}Hr.URL="ui://4698ugpklm612v",Hr.DependPackages=["ModuleLogin"];class Fr extends Hr{RenderItem(e){this.DataSource=e,this.m_labServer.text=e.name,this.m_labLevel.text=""}}class Rr extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("ModuleLogin","CdkPanel")}constructFromXML(e){super.constructFromXML(e),this.m_cdkInput=this.getChild("cdkInput"),this.m_btn_cdk=this.getChild("btn_cdk")}}Rr.URL="ui://4698ugpkipa82w",Rr.DependPackages=["ModuleLogin"];class Ur extends Rr{get cdk(){return this.m_cdkInput.m_txt_cdk.text.trim()}set cdk(e){this.m_cdkInput.m_txt_cdk.text=e}}class Or extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("ModuleLogin","CdkInput")}constructFromXML(e){super.constructFromXML(e),this.m_txt_cdk=this.getChild("txt_cdk"),this.m_accountComboBox=this.getChild("accountComboBox")}}Or.URL="ui://4698ugpkipa82x",Or.DependPackages=["ModuleLogin"];class Nr extends Or{}class Er extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("ModuleLogin","CheckIDPanel")}constructFromXML(e){super.constructFromXML(e),this.m_Type=this.getController("Type"),this.m_labName=this.getChild("labName"),this.m_labID=this.getChild("labID"),this.m_btnClose=this.getChild("btnClose"),this.m_btnMake=this.getChild("btnMake")}}Er.URL="ui://4698ugpkqdfe1c",Er.DependPackages=["ModuleLogin"];class Wr extends Er{}class Vr extends fgui.GButton{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("ModuleLogin","CommonDialogBg")}constructFromXML(e){super.constructFromXML(e),this.m_icon=this.getChild("icon"),this.m_btn_Close=this.getChild("btn_Close")}}Vr.URL="ui://4698ugpkje283k",Vr.DependPackages=["ModuleLogin"];class Xr extends Vr{}class qr extends fgui.GComponent{constructor(){super()}static createInstance(){return fgui.UIPackage.createObject("ModuleLogin","BulletinItem")}constructFromXML(e){super.constructFromXML(e),this.m_labtitle=this.getChild("labtitle"),this.m_labItem=this.getChild("labItem")}}qr.URL="ui://4698ugpkje283x",qr.DependPackages=["ModuleLogin"];class Kr extends qr{}class jr{static bindAll(){let e=fgui.UIObjectFactory.setPackageItemExtension;e(Wt.URL,Wt),e(wr.URL,wr),e(_r.URL,_r),e(Tr.URL,Tr),e(Gr.URL,Gr),e(kr.URL,kr),e(xr.URL,xr),e(Dr.URL,Dr),e(Ar.URL,Ar),e(Fr.URL,Fr),e(Ur.URL,Ur),e(Nr.URL,Nr),e(Wr.URL,Wr),e(Xr.URL,Xr),e(Kr.URL,Kr)}}class zr{static bindAll(){fgui.UIObjectFactory.setPackageItemExtension}}class Yr{static fguiBinderAll(){sr.bindAll(),fr.bindAll(),jr.bindAll(),zr.bindAll()}}class $r{static get json(){return this._netConfig}static async GetNetConfig(){return $r._netConfig&&0==$r._netConfig.error?new Promise(e=>{e($r._netConfig)}):new Promise(e=>{net.auth.config((t,i)=>{$r._netConfig=i,e($r._netConfig)})})}static async GetErrorStr(e){return $r._netConfig?new Promise(t=>{t($r._netConfig.ErrStr[e.toString()])}):(await $r.GetNetConfig(),new Promise(t=>{t($r._netConfig.ErrStr[e.toString()])}))}}$r.FIRST_SCENE="test",$r.GAME_WIDTH=1334,$r.GAME_HEIGHT=750,$r.GROUP_ID=0,$r.WXAppID="wxedab64fed19eb5b4",$r.SHARE_IMG_URL="https://thkdev.123u.com/game/makemore/",$r.GO_URL="http://192.168.2.80:5000",$r.shouldShowGuide=!0;class Jr{static async Time(e){return new Promise(t=>{Engine.timer.once(e,this,()=>{t()})})}static async Frame(e){return new Promise(t=>{Engine.timer.frameOnce(e,this,()=>{t()})})}}class Qr{constructor(){}install(e){this.installAsync(e)}async installAsync(e){VersionConfig&&VersionConfig.Init(),Co.init(),ze.install(),jt.install(),Co.version.init(),Engine.borwer.isWXGame?(await this.initFguiSetting(),Co.loader.install(),await this.loadVersionAsync(),Co.localStorage.setString("__basePath__",Laya.URL.basePath,!0)):(await this.loadVersionAsync(),Co.localStorage.setString("__basePath__",Laya.URL.basePath,!0),await this.initFguiSetting(),Co.loader.install()),Co.loader.open(dt.Launch),Co.loaderSettingHandler.onBegin(),await this.clearWXFileCache(),await this.initConfig(),await this.initLangConfig(),Co.moduleModel.install(),Co.loaderSettingHandler.onEnd(),Co.sound.install(),window.launcherInitBG&&window.launcherInitBG.removeSelf(),de.load(),e?e():Co.menu.openTab(k.Home,gt.MenuMenu)}loadVersion(){Laya.ResourceVersion.enable("version.json",Laya.Handler.create(this,this.onVersionLoaded),Laya.ResourceVersion.FILENAME_VERSION)}onVersionLoaded(){}async loadVersionAsync(){return new Promise(e=>{Laya.ResourceVersion.enable("version.json?t="+Laya.timer.currTimer,Laya.Handler.create(this,()=>{if(Laya.ResourceVersion.manifest){if(Laya.ResourceVersion.manifest.__ResVersion__){let e=Laya.ResourceVersion.manifest.__ResVersion__;Co.version.localResVersionData.setVersionTxt(e),Co.version.localResVersion=e}if(!VersionConfig.IsUseZip){let e=Laya.ResourceVersion.manifest,s=[];for(var t in e)s.push(t);for(var i of s)e[i.toLowerCase()]=e[i]}Laya.MiniAdpter&&(Laya.MiniAdpter.AutoCacheDownFile=!1)}this.checkWXFileCache(),e()}),Laya.ResourceVersion.FILENAME_VERSION)})}async checkWXFileCache(){if(Engine.borwer.isWXGame){let e=Co.localStorage.getString("__basePath__",!0);e!=Laya.URL.basePath&&(console.log(`资源根目录不一样: preBasePath=${e}, Laya.URL.basePath=${Laya.URL.basePath}`),Laya.MiniFileMgr.onSetVersion(e,Laya.URL.basePath))}}async clearWXFileCache(){let e=VersionConfig.VersionCacheCode;if(Engine.borwer.isWXGame){let t=Co.localStorage.getInt("__verIsNeedClear__",!0);t!=e&&(console.log("清理缓存 v=",t,"vv=",e),Co.loaderSettingHandler.setTip("清理缓存中..."),await Jr.Frame(5),Laya.MiniFileManager.RemoveAll())}Co.localStorage.setInt("__verIsNeedClear__",e,!0)}async initFguiSetting(){Co.guiRes.install(),fgui.UIConfig.packageFileExtension=bi.packageFileExtension,fgui.UIObjectFactory.setLoaderExtension(Wi),Yr.fguiBinderAll(),fgui.UIConfig.buttonSound="ui://moe42ygrsqzy7p",fgui.UIConfig.defaultFont="_sans";let e=await Co.asset.loadFguiByPackagenameAsync(Ye.GameLaunch);bi.addPackage(e.packagePath),fgui.UIConfig.globalModalWaiting=fgui.UIPackage.getItemURL(e.packageName,"GlobalModalWaiting"),fgui.UIConfig.windowModalWaiting=fgui.UIPackage.getItemURL(e.packageName,"WindowModalWaiting")}async initConfig(){Co.config.configLoader=Co.asset,Co.config.initList(),Co.config.sLoadProgress.add(Co.loaderSettingHandler.onLoadedConfig,Co.loaderSettingHandler),await Co.config.loadAllAsync(),Co.config.sLoadProgress.remove(Co.loaderSettingHandler.onLoadedConfig,Co.loaderSettingHandler)}async initLangConfig(){Co.lang.current.configLoader=Co.asset,Co.lang.current.initList(),Co.lang.isUseLang&&(Co.lang.current.sLoadProgress.add(Co.loaderSettingHandler.onLoadedLangConfig,Co.loaderSettingHandler),await Co.lang.current.loadAllAsync(),Co.lang.current.sLoadProgress.remove(Co.loaderSettingHandler.onLoadedLangConfig,Co.loaderSettingHandler))}async installServerList(){VersionConfig.IsDebugVer?(await Co.channel.requestServerListAsync(),net.config.url=Co.channel.serverItem.main):(await Co.channel.requestChannelServerAsync(),net.config.url=Co.channel.serverItem.main),net.logic.onError.on(this.onNetError,this)}async onNetError(e){console.log("onNetError "+e);let t=await $r.GetErrorStr(e);console.log(`OnNetError no=${e}  txt=${t}`),t||(t="服务器反馈错误: "+e),Co.system.toastText(t)}}class Zr{}class eo{constructor(){this.packageConfigs=[],this.assets=[],this.isRuning=!1,this.isComplete=!1,this.completeCallbackList=[]}addAssetForFguiPackagename(e){this.assets.push({url:e,type:H.FguiPackage})}addAssetForFguiComponent(e){let t=e.DependPackages;for(let e=0;e<t.length;e++)this.addAssetForFguiPackagename(t[e])}addDynmicAssetForAvatarAll(e){e.getAllAssset(this.assets)}generate(){if(this.list)return;let e=new Dictionary,t=new Dictionary;for(let i=0;i<this.assets.length;i++){let s=this.assets[i],a=null;switch(s.type){case H.FguiPackage:a=Co.guiRes.getconfig(s.url);break;case H.FspritePackage:a=Co.spriteRes.getconfig(s.url)}if(a){t.hasKey(a.packagePath)||t.add(a.packagePath,a);let i=a.loadList;for(let t of i)if(!e.hasKey(t.url)){let i={url:t.url,type:ht.layaLoaderType2AssetItemType(t.type)};e.add(i.url,i)}}else e.hasKey(s.url)||e.add(s.url,s)}this.list=e.getValues(),this.packageConfigs=t.getValues()}async start(){return new Promise(e=>{if(this.isComplete)e(!0);else{let t=()=>{e(!0)};this.completeCallbackList.push(t),this.isRuning||(this.generate(),this.list&&0!=this.list.length?Co.asset.loadList(this.list,this,this.onComplete,this.onProgress):this.onComplete())}})}onProgress(e,t,i,s){Co.loaderSettingHandler.onLoadedFgui(t,i)}onComplete(){for(let e of this.packageConfigs)bi.addPackage(e.packagePath);for(let e of this.completeCallbackList)e.apply(this);this.isComplete=!0}}!function(e){e.SimulationBehaviours="SimulationBehaviours",e.EComponents="EComponents",e.ESystems="ESystems",e.EEvents="EEvents",e.ECSSystems="ECSSystems",e.UnitCmds="UnitCmds",e.UnitCmdActions="UnitCmdActions",e.TookHandlers="TookHandlers",e.RenderComponents="RenderComponents",e.RenderSystems="RenderSystems",e.RenderSimulationBehaviours="RenderSimulationBehaviours"}(ys||(ys={})),window.AssemblyNamespace=ys;class to{constructor(){this.menuId=0}init(){}validate(e){return!0}exe(){}__onExe(){}}to.__namespace=ys.TookHandlers;class io extends Rt{constructor(){super(...arguments),this.closeDict=new Dictionary}install(){}addClose(e,t){this.closeDict.add(e,t)}validate(e){let t=!1;if(this.closeDict.hasKey(e)&&(t=this.closeDict.getValue(e).apply(this)),1==t)return!1;Co.config.unlock.getUnlockConfig(e);return this.dict.hasKey(e)?this.dict.getValue(e).apply(this):super.validate(e)}}class so extends Rt{install(){}validate(e){return io.getInstance().validate(e)}}class ao extends to{constructor(){super(...arguments),this.fixedTimeList=[],this.endedTimeList=[]}validate(e){let t=!1,i=this.fixedTimeList.length;for(let s=0;s<i;s++){let i=this.fixedTimeList[s],a=this.endedTimeList[s];if(e>=i.timestamp){a?(t=e<=a.timestamp)&&a.reseTimestamp():(t=!0)&&i.reseTimestamp();break}}return t}}!function(e){e[e.Day=0]="Day",e[e.Week=1]="Week",e[e.Month=2]="Month"}(ws||(ws={})),function(e){e[e.UnArrival=0]="UnArrival",e[e.Arrival=1]="Arrival",e[e.Overdue=2]="Overdue"}(Ls||(Ls={}));class no{constructor(){this.timeType=ws.Day,this.monthDate=0,this.weekDay=0,this.hour=0,this.minute=0,this.second=0,this._timestamp=-1}static CreateHMS(e,t=0,i=0){let s=new no;return s.timeType=ws.Day,s.hour=e,s.minute=t,s.second=i,s}static CreateWeek(e,t,i=0,s=0){let a=new no;return a.timeType=ws.Week,a.weekDay=e,a.hour=t,a.minute=i,a.second=s,a}static CreateMonthDate(e,t,i=0,s=0){let a=new no;return a.timeType=ws.Month,a.monthDate=e,a.hour=t,a.minute=i,a.second=s,a}get timestamp(){return this._timestamp<=0&&this.reseTimestamp(),this._timestamp}reseTimestamp(){let e;switch(this.timeType){case ws.Day:e=Qi.getServerNextDate(this.hour,this.minute,this.second);break;case ws.Week:e=Qi.getServerNextWeekDate(this.weekDay,this.hour,this.minute,this.second);break;case ws.Month:e=Qi.getServerNextMonthDate(this.monthDate,this.hour,this.minute,this.second)}console.log(Qi.ToStr(e)),this._timestamp=e.getTime()}}class ro extends ao{init(){let e=Global.updataDayTime;this.fixedTimeList.push(no.CreateHMS(e.H,e.Mm,e.S)),super.init()}exe(){super.exe(),console.log("FixedTimeHookHandler_hms exe"),Co.moduleModel.section.sectionData.resetData(),Co.moduleModel.gashapon.resetGashaponData(),Co.event.dispatch(ut.GameFrame_Everyday_Update)}}class oo{static register(e,t){e.tag=t,this._namespace.addItem(e.__namespace,e)}static get(e){return this._namespace.get(e)}}oo._namespace=new UnOrderMultiMap,window.Assembly=oo;class lo{static install(){this.isInstalled||oo.register(ro,"FixedTimeHookHandler_hms")}}lo.isInstalled=!1;class co{constructor(){this.dict=new Dictionary,this.list=[],this.count=0,this.isInsalled=!1,this.serverMilliseconds=0}install(){if(this.isInsalled)return;this.isInsalled=!0,lo.install();let e=oo.get(ys.TookHandlers);if(e)for(let t of e)this.registerSystem(t)}registerSystem(e){let t=e.tag||e.name||e.__tookClassUid;t&&this.dict.hasKey(t)||(t=e.__tookClassUid=co.TookClassUid++);let i=new e;i instanceof to&&(i.init(),this.dict.add(t,i),this.list.push(i),this.count=this.list.length)}fixedReseTimestamp(){for(let e of this.list)if(e instanceof ao)for(let t of e.fixedTimeList)t.reseTimestamp()}start(){}stop(){Laya.timer.clear(this,this.onTick)}onTick(){this.serverMilliseconds=Co.time.serverMilliseconds;for(let e=0;e<this.count;e++){let t=this.list[e];this.validate(t)&&(t.exe(),t.__onExe())}}validate(e){if(!Co.user.isLoginAndGetUserData)return!1;let t=!0;if(t&&e.menuId>0&&(t=io.getInstance().validate(e.menuId)),t&&e.menuId>0&&(t=so.getInstance().validate(e.menuId)),t&&e.preconditionMenuIds&&e.preconditionMenuIds.length>0){t=!1;for(let i of e.preconditionMenuIds)if(Co.menu.isOpened(i)){t=!0;break}}return t&&(t=e.validate(this.serverMilliseconds)),t}}co.TookClassUid=1;class ho{async reLogin(){}async login(e,t,i){if(!i&&Co.user.isLoginAndGetUserData)return;fgui.GRoot.inst.showModalWait();let s=await Ae.platform.Login2(e,t);if(fgui.GRoot.inst.closeModalWait(),s.error)return 45!=s.error&&304!=s.error||Co.launch.onNetError(s.error),void(1018==s.error&&Co.event.dispatch("LOGIN_CDK",s.session));Co.localStorage.username=e,Co.localStorage.password=t,Engine.borwer.isBrowser&&VersionConfig.IsDebugVer&&(sessionStorage.setItem("username",e),sessionStorage.setItem("password",t)),Co.event.dispatch("SUCCESS_LOGIN",s.session,s.roles)}async check(e,t,i,s){let a=await Ae.platform.CheckCdk(e,t);a.error?Co.event.dispatch("ERROR_CDK",a.error):this.login(i,s,!0)}async CheckIDCard(e,t,i){let s=await Ae.platform.CheckIDCard(e,t,i);if(console.log("当前验证身份状态：",s.error,s.timelong),0!=s.error&&1023!=s.error){let t=Co.moduleModel.login;t.session=e,t.error=s.error,t.timeLong=s.timelong}Co.event.dispatch("ERROR_IDCARD",s.error)}async newAndUseRole(e,t,i){(await Ae.platform.newAndUseRole(e,t,i)).error||this.enter()}async useRole(e,t){(await Ae.platform.useRole(e,t)).error||this.enter()}async areas(){let e=await Ae.platform.Areas();e.error?Co.event.dispatch("ERROR_AREAS"):Co.event.dispatch("SUCCESS_AREAS",e.areas)}async enter(){fgui.GRoot.inst.showModalWait(),await Co.net.AsyncGamerLoginGetDataC2S(),Co.user.isLoginAndGetUserData=!0,Co.netStat.isLogined=!0,fgui.GRoot.inst.closeModalWait()}}class uo{async changeName(e){return await Co.net.AsyncGamerChangeNameC2S(e)}async changeHeadIcon(e){await Co.net.AsyncGamerChangeAvatarC2S(e)}async uploadWXInfo(){}async sawHeadIcon(e){await Co.net.GamerChangeItemIsSawC2S(6,e)}}class mo{constructor(){this.login=new ho,this.user=new uo}}class go{init(){}}class po{constructor(){this.isConnnected=!1,this.isTryConnecting=!1,this.isLogined=!1,this.lastSendFrame=0,this.lastResponseFrame=0,this.lastMsgSuccess=!0,this.lastShowErrorFrame=0,this.timeOutShowModelWait=!0}Init(){window.net&&(net.logic.onConnect.on(this.onConnect,this),net.logic.onReconnect.on(this.onReconnect,this),net.logic.onClose.on(this.onClose,this),net.logic.onConnectError.on(this.onConnectError,this),net.logic.onSendTime.on(this.onSendTime,this),net.logic.onResponseTime.on(this.onResponseTime,this),Laya.timer.frameLoop(20,this,this.onLoop))}onConnect(){this.isConnnected=!0,this.isTryConnecting=!1,this.isLogined&&fgui.GRoot.inst.closeModalWait()}onConnectError(){this.isConnnected=!1,this.isTryConnecting=!1,this.isLogined&&Co.system.toastText(Ft.NET_ERROR)}onClose(){this.isConnnected=!1,this.isTryConnecting=!1,this.isLogined}onReconnect(){this.isConnnected=!1,this.isTryConnecting=!0,this.isLogined&&fgui.GRoot.inst.showModalWait()}onClickConnect(){}onSendTime(){this.lastMsgSuccess&&(this.lastSendFrame=Laya.timer.currFrame),this.lastMsgSuccess=!1}onResponseTime(){this.lastResponseFrame=Laya.timer.currFrame,this.lastMsgSuccess=!0,this.timeOutShowModelWait&&(fgui.GRoot.inst.closeModalWait(),this.timeOutShowModelWait=!1)}onLoop(){this.lastMsgSuccess||this.isTryConnecting||Laya.timer.currFrame-this.lastShowErrorFrame>300&&Laya.timer.currFrame-this.lastSendFrame>300&&(this.lastShowErrorFrame=Laya.timer.currFrame,this.timeOutShowModelWait||fgui.GRoot.inst.showModalWait(),this.timeOutShowModelWait=!0,this.onConnectError())}}class Co{static init(){this.isInited||(this.isInited=!0,this.screenSetting=new Si,this.deviceSetting=new wi,this.launchText=new xs,this.launch=new Qr,this.asset=new Ai,this.config=new Ci,this.lang=xi.Instance,this.configExp=new Zr,this.sound=new gs,this.time=new ps,this.localStorage=yi.Instance,this.loader=Ns.Instance,this.loaderSettingHandler=new bs,this.menu=new $i,this.system=new Ms,this.channel=Zi.Instance,this.version=hs.Instance,this.preload=new eo,this.moduleModel=new os,this.user=new Xs,this.guiRes=new Oi,this.spriteRes=new Ni,this.event=new Emitter,this.net=Es,this.netStat=new po,this.netStat.Init(),this.protoHandler=new go,this.protoHandler.init(),this.sender=new mo,this.took=new co)}}Co.net=Es,Co.isInited=!1,window.Game=Co;new class{constructor(){LayaExtendClass(),Laya.stage||this.InitLaya(),e.stat&&Laya.Stat.show(),LayaExtendLogic(),FguiExtend(),Engine.init(),Co.init(),He.OnOpen(),Co.launch.install(),Laya.stage.on(Laya.Event.KEY_DOWN,this,this.OnKeyDownHandler)}OnKeyDownHandler(e){Laya.Keyboard.P==e.keyCode&&(console.error("当前对象池信息:"),console.error(Pool._poolDic))}initLoader(){wx.getSystemInfoSync();var e=new Laya.Sprite;let t=Laya.stage.width,i=Laya.stage.height;e.graphics.drawRect(0,0,t,i,"#FFFFFF"),e.graphics.loadImage("res/fgui/GameLaunch_atlas_upoiw2g.jpg",0,0,t,i),Laya.stage.addChild(e),window.launcherInitBG=e}InitLaya(){window.Laya3D?Laya3D.init(e.width,e.height):Laya.init(e.width,e.height,Laya.WebGL),Laya.Physics&&Laya.Physics.enable(),Laya.DebugPanel&&Laya.DebugPanel.enable(),Laya.stage.scaleMode=e.scaleMode,Laya.stage.screenMode=e.screenMode,Laya.stage.alignV=e.alignV,Laya.stage.alignH=e.alignH,Laya.URL.exportSceneToJson=e.exportSceneToJson,window.Laya3D&&(Laya.Shader3D.debugMode=!1),e.physicsDebug&&Laya.PhysicsDebugDraw&&Laya.PhysicsDebugDraw.enable(),Laya.alertGlobalError=!0}}}();