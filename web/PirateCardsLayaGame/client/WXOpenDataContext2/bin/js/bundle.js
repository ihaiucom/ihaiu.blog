var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
/**This class is automatically generated by LayaAirIDE, please do not make any modifications. */
var bigItem_1 = require("./view/bigItem");
/*
* 游戏初始化配置;
*/
var GameConfig = /** @class */ (function () {
    function GameConfig() {
    }
    GameConfig.init = function () {
        var reg = Laya.ClassUtils.regClass;
        reg("view/bigItem.ts", bigItem_1.default);
    };
    GameConfig.width = 640;
    GameConfig.height = 1136;
    GameConfig.scaleMode = "fixedwidth";
    GameConfig.screenMode = "none";
    GameConfig.alignV = "top";
    GameConfig.alignH = "left";
    GameConfig.startScene = "test/Big.scene";
    GameConfig.sceneRoot = "";
    GameConfig.debug = false;
    GameConfig.stat = false;
    GameConfig.physicsDebug = false;
    GameConfig.exportSceneToJson = true;
    return GameConfig;
}());
exports.default = GameConfig;
GameConfig.init();
},{"./view/bigItem":5}],2:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var GameConfig_1 = require("./GameConfig");
var BigRank_1 = require("./view/BigRank");
var Main = /** @class */ (function () {
    function Main() {
        //设置子域
        Laya.isWXOpenDataContext = true;
        Laya.isWXPosMsg = true;
        //根据IDE设置初始化引擎		
        Laya.init(GameConfig_1.default.width, GameConfig_1.default.height, false);
        Laya.stage.scaleMode = GameConfig_1.default.scaleMode;
        Laya.stage.screenMode = GameConfig_1.default.screenMode;
        Laya.stage.alignV = GameConfig_1.default.alignV;
        Laya.stage.alignH = GameConfig_1.default.alignH;
        // 关于透传接口，请参考: https://ldc2.layabox.com/doc/?nav=zh-ts-5-0-7
        if (Laya.Browser.onMiniGame)
            wx.onMessage(function (data) {
                if (data.url == "res/atlas/test.atlas") {
                    Laya.loader.load("res/atlas/test.atlas", Laya.Handler.create(this, this.onComplete));
                }
            }.bind(this));
        else
            Laya.loader.load("res/atlas/test.atlas", Laya.Handler.create(this, this.onComplete));
    }
    Main.prototype.onComplete = function () {
        //初始化rank排行榜
        var rank = new BigRank_1.default();
        //初始化
        rank.init();
    };
    return Main;
}());
//激活启动类
new Main();
},{"./GameConfig":1,"./view/BigRank":4}],3:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var REG = Laya.ClassUtils.regClass;
var ui;
(function (ui) {
    var test;
    (function (test) {
        var BigUI = /** @class */ (function (_super) {
            __extends(BigUI, _super);
            function BigUI() {
                return _super.call(this) || this;
            }
            BigUI.prototype.createChildren = function () {
                _super.prototype.createChildren.call(this);
                this.createView(BigUI.uiView);
            };
            BigUI.uiView = { "type": "Scene", "props": { "width": 610, "height": 757 }, "compId": 2, "child": [{ "type": "Sprite", "props": { "y": 0, "x": 0, "texture": "test/2.png" }, "compId": 4 }, { "type": "List", "props": { "y": 104, "x": 13, "width": 585, "var": "_list", "vScrollBarSkin": " ", "spaceY": 20, "repeatX": 1, "height": 629, "elasticEnabled": true }, "compId": 3, "child": [{ "type": "bigItem", "props": { "runtime": "view/bigItem.ts", "renderType": "render" }, "compId": 5 }] }], "loadList": ["test/2.png"], "loadList3D": [] };
            return BigUI;
        }(Laya.Scene));
        test.BigUI = BigUI;
        REG("ui.test.BigUI", BigUI);
        var BigItemUI = /** @class */ (function (_super) {
            __extends(BigItemUI, _super);
            function BigItemUI() {
                return _super.call(this) || this;
            }
            BigItemUI.prototype.createChildren = function () {
                _super.prototype.createChildren.call(this);
                this.createView(BigItemUI.uiView);
            };
            BigItemUI.uiView = { "type": "View", "props": { "width": 580, "height": 100 }, "compId": 2, "child": [{ "type": "Sprite", "props": { "y": 0, "x": 0, "width": 575, "texture": "test/3.png", "height": 99 }, "compId": 7 }, { "type": "Image", "props": { "y": 6, "x": 22, "width": 80, "var": "img_head", "skin": "test/4.png", "height": 80 }, "compId": 3, "child": [{ "type": "Sprite", "props": { "y": -1, "x": -1, "width": 82, "texture": "test/c1.png", "renderType": "mask", "height": 82 }, "compId": 10 }] }, { "type": "Label", "props": { "y": 38.5, "x": 136, "width": 259, "var": "text_name", "text": "名字", "overflow": "scroll", "height": 24, "fontSize": 20, "font": "Microsoft YaHei", "color": "#ffffff", "align": "center" }, "compId": 4 }, { "type": "Label", "props": { "y": 42.5, "x": 496, "var": "text_score", "text": "分数", "fontSize": 20, "color": "#ffffff", "align": "center" }, "compId": 5 }], "loadList": ["test/3.png", "test/4.png", "test/c1.png"], "loadList3D": [] };
            return BigItemUI;
        }(Laya.View));
        test.BigItemUI = BigItemUI;
        REG("ui.test.BigItemUI", BigItemUI);
    })(test = ui.test || (ui.test = {}));
})(ui = exports.ui || (exports.ui = {}));
},{}],4:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var layaMaxUI_1 = require("../ui/layaMaxUI");
var BigRank = /** @class */ (function (_super) {
    __extends(BigRank, _super);
    function BigRank() {
        var _this = _super.call(this) || this;
        /**获取好友排行榜时的key */
        _this._key = 'test10086';
        /**list初始化使用的数据 */
        _this.arr = [
            { index: 1, avatarIP: 'test/4.png', UserName: "测试用户1", RankValue: 100 },
            { index: 2, avatarIP: 'test/4.png', UserName: "测试用户2", RankValue: 75 },
            { index: 3, avatarIP: 'test/4.png', UserName: "测试用户3", RankValue: 50 },
            { index: 4, avatarIP: 'test/4.png', UserName: "测试用户4", RankValue: 25 }
        ];
        return _this;
    }
    /**
     * 初始化
     */
    BigRank.prototype.init = function () {
        Laya.stage.addChild(this);
        //初始化list数据
        this.setlist(this.arr);
        if (Laya.Browser.onMiniGame) {
            //接受来自主域的信息
            wx.onMessage(this.recevieData.bind(this));
            // 直接展示数据
            this.getFriendData();
        }
    };
    /**
     * 获取好友排行
     */
    BigRank.prototype.getFriendData = function () {
        var _$this = this;
        wx.getFriendCloudStorage({
            keyList: [this._key],
            success: function (res) {
                //关于拿到的数据详细情况可以产看微信文档
                //https://developers.weixin.qq.com/minigame/dev/api/UserGameData.html
                var listData;
                var obj;
                var kv;
                var arr = [];
                console.log('-----------------getFriendCloudStorage------------');
                if (res.data) {
                    for (var i = 0; i < res.data.length; i++) {
                        obj = res.data[i];
                        if (!(obj.KVDataList.length))
                            continue;
                        //拉取数据是，使用了多少个key- KVDataList的数组就有多少
                        //更详细的KVData可以查看微信文档:https://developers.weixin.qq.com/minigame/dev/api/KVData.html
                        kv = obj.KVDataList[0];
                        if (kv.key != _$this._key)
                            continue;
                        kv = JSON.parse(kv.value);
                        listData = {};
                        listData.avatarIP = obj.avatarUrl;
                        listData.UserName = obj.nickname;
                        listData.openID = obj.openid;
                        listData.RankValue = kv.wxgame.value1;
                        listData.update_time = kv.wxgame.update_time;
                        arr.push(listData);
                    }
                    //根据RankValue排序
                    arr = arr.sort(function (a, b) {
                        return b.RankValue - a.RankValue;
                    });
                    //增加一个用于查看的index排名
                    for (var i = 0; i < arr.length; i++) {
                        arr[i].index = i + 1;
                    }
                    //设置数组
                    _$this.setlist(arr);
                }
            },
            fail: function (data) {
                console.log('------------------获取托管数据失败--------------------');
                console.log(data);
            }
        });
    };
    /**
     * 接收信息
     * @param message 收到的主域传过来的信息
     */
    BigRank.prototype.recevieData = function (message) {
        var _$this = this;
        var type = message.type;
        switch (type) {
            default:
                break;
        }
    };
    /**
     * 上报自己的数据
     * @param data 上报数据
     */
    BigRank.prototype.setSelfData = function (data) {
        var kvDataList = [];
        var obj = {};
        obj.wxgame = {};
        obj.wxgame.value1 = data;
        obj.wxgame.update_time = Laya.Browser.now();
        kvDataList.push({ "key": this._key, "value": JSON.stringify(obj) });
        wx.setUserCloudStorage({
            KVDataList: kvDataList,
            success: function (e) {
                console.log('-----success:' + JSON.stringify(e));
            },
            fail: function (e) {
                console.log('-----fail:' + JSON.stringify(e));
            },
            complete: function (e) {
                console.log('-----complete:' + JSON.stringify(e));
            }
        });
    };
    /**
     * 设置list arr
     * @param arr 赋值用的arr
     */
    BigRank.prototype.setlist = function (arr) {
        this._list.array = arr;
        this._list.refresh();
    };
    return BigRank;
}(layaMaxUI_1.ui.test.BigUI));
exports.default = BigRank;
},{"../ui/layaMaxUI":3}],5:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var layaMaxUI_1 = require("../ui/layaMaxUI");
var BigItem = /** @class */ (function (_super) {
    __extends(BigItem, _super);
    function BigItem() {
        return _super.call(this) || this;
    }
    Object.defineProperty(BigItem.prototype, "dataSource", {
        set: function (value) {
            if (!value)
                return;
            this.img_head.skin = value.avatarIP;
            this.text_name.text = value.UserName;
            this.text_score.text = value.RankValue;
        },
        enumerable: true,
        configurable: true
    });
    return BigItem;
}(layaMaxUI_1.ui.test.BigItemUI));
exports.default = BigItem;
},{"../ui/layaMaxUI":3}]},{},[2])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uLy4uL1Byb2dyYW0gRmlsZXMvTGF5YUFpcklERTJfNF8yMDIwMDIyOC9yZXNvdXJjZXMvYXBwL25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvR2FtZUNvbmZpZy50cyIsInNyYy9NYWluLnRzIiwic3JjL3VpL2xheWFNYXhVSS50cyIsInNyYy92aWV3L0JpZ1JhbmsudHMiLCJzcmMvdmlldy9iaWdJdGVtLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ1ZBLGdHQUFnRztBQUNoRywwQ0FBb0M7QUFDcEM7O0VBRUU7QUFDRjtJQWFJO0lBQWMsQ0FBQztJQUNSLGVBQUksR0FBWDtRQUNJLElBQUksR0FBRyxHQUFhLElBQUksQ0FBQyxVQUFVLENBQUMsUUFBUSxDQUFDO1FBQzdDLEdBQUcsQ0FBQyxpQkFBaUIsRUFBQyxpQkFBTyxDQUFDLENBQUM7SUFDbkMsQ0FBQztJQWhCTSxnQkFBSyxHQUFRLEdBQUcsQ0FBQztJQUNqQixpQkFBTSxHQUFRLElBQUksQ0FBQztJQUNuQixvQkFBUyxHQUFRLFlBQVksQ0FBQztJQUM5QixxQkFBVSxHQUFRLE1BQU0sQ0FBQztJQUN6QixpQkFBTSxHQUFRLEtBQUssQ0FBQztJQUNwQixpQkFBTSxHQUFRLE1BQU0sQ0FBQztJQUNyQixxQkFBVSxHQUFLLGdCQUFnQixDQUFDO0lBQ2hDLG9CQUFTLEdBQVEsRUFBRSxDQUFDO0lBQ3BCLGdCQUFLLEdBQVMsS0FBSyxDQUFDO0lBQ3BCLGVBQUksR0FBUyxLQUFLLENBQUM7SUFDbkIsdUJBQVksR0FBUyxLQUFLLENBQUM7SUFDM0IsNEJBQWlCLEdBQVMsSUFBSSxDQUFDO0lBTTFDLGlCQUFDO0NBbEJELEFBa0JDLElBQUE7a0JBbEJvQixVQUFVO0FBbUIvQixVQUFVLENBQUMsSUFBSSxFQUFFLENBQUM7Ozs7QUN4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QUFPLEVBQUMsRUFBRSxFQUFDLEtBQUssRUFBQyxVQUFVLEVBQUMsTUFBTSxFQUFDLFlBQVksRUFBQyxRQUFRLEVBQUMsRUFBRSxFQUFDLEVBQUMsUUFBUSxFQUFDLENBQUMsRUFBQyxPQUFPLEVBQUMsQ0FBQyxFQUFDLE1BQU0sRUFBQyxRQUFRLEVBQUMsT0FBTyxFQUFDLEVBQUMsR0FBRyxFQUFDLENBQUMsQ0FBQyxFQUFDLEdBQUcsRUFBQyxDQUFDLENBQUMsRUFBQyxPQUFPLEVBQUMsRUFBRSxFQUFDLFNBQVMsRUFBQyxhQUFhLEVBQUMsWUFBWSxFQUFDLE1BQU0sRUFBQyxRQUFRLEVBQUMsRUFBRSxFQUFDLEVBQUMsUUFBUSxFQUFDLEVBQUUsRUFBQyxDQUFDLEVBQUMsRUFBQyxFQUFDLE1BQU0sRUFBQyxPQUFPLEVBQUMsT0FBTyxFQUFDLEVBQUMsR0FBRyxFQUFDLElBQUksRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLE9BQU8sRUFBQyxHQUFHLEVBQUMsS0FBSyxFQUFDLFdBQVcsRUFBQyxNQUFNLEVBQUMsSUFBSSxFQUFDLFVBQVUsRUFBQyxRQUFRLEVBQUMsUUFBUSxFQUFDLEVBQUUsRUFBQyxVQUFVLEVBQUMsRUFBRSxFQUFDLE1BQU0sRUFBQyxpQkFBaUIsRUFBQyxPQUFPLEVBQUMsU0FBUyxFQUFDLE9BQU8sRUFBQyxRQUFRLEVBQUMsRUFBQyxRQUFRLEVBQUMsQ0FBQyxFQUFDLEVBQUMsRUFBQyxNQUFNLEVBQUMsT0FBTyxFQUFDLE9BQU8sRUFBQyxFQUFDLEdBQUcsRUFBQyxJQUFJLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxLQUFLLEVBQUMsWUFBWSxFQUFDLE1BQU0sRUFBQyxJQUFJLEVBQUMsVUFBVSxFQUFDLEVBQUUsRUFBQyxPQUFPLEVBQUMsU0FBUyxFQUFDLE9BQU8sRUFBQyxRQUFRLEVBQUMsRUFBQyxRQUFRLEVBQUMsQ0FBQyxFQUFDLENBQUMsRUFBQyxVQUFVLEVBQUMsQ0FBQyxZQUFZLEVBQUMsWUFBWSxFQUFDLGFBQWEsQ0FBQyxFQUFDLFlBQVksRUFBQyxFQUFF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QUNQLENBQUM7SUFDRDs7O09BR0c7SUFDSyx5QkFBTyxHQUFmLFVBQWdCLEdBQUc7UUFDZixJQUFJLENBQUMsS0FBSyxDQUFDLEtBQUssR0FBRSxHQUFHLENBQUM7UUFDdEIsSUFBSSxDQUFDLEtBQUssQ0FBQyxPQUFPLEVBQUUsQ0FBQztJQUN6QixDQUFDO0lBQ0wsY0FBQztBQUFELENBL0hKLEFBK0hLLENBL0hnQyxjQUFFLENBQUMsSUFBSSxDQUFDLEtBQUssR0ErSDdDOzs7OztBQ2hJTCw2Q0FBcUM7QUFDakM7SUFBcUMsMkJBQWlCO0lBQ2xEO2VBQ0ksaUJBQU87SUFDWCxDQUFDO0lBRUEsc0JBQVcsK0JBQVU7YUFBckIsVUFBc0IsS0FBSztZQUN4QixJQUFHLENBQUMsS0FBSztnQkFDTCxPQUFPO1lBQ1gsSUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLEdBQUcsS0FBSyxDQUFDLFFBQVEsQ0FBQztZQUNwQyxJQUFJLENBQUMsU0FBUyxDQUFDLElBQUksR0FBRyxLQUFLLENBQUMsUUFBUSxDQUFDO1lBQ3JDLElBQUksQ0FBQyxVQUFVLENBQUMsSUFBSSxHQUFHLEtBQUssQ0FBQyxTQUFTLENBQUM7UUFDM0MsQ0FBQzs7O09BQUE7SUFDTCxjQUFDO0FBQUQsQ0FaQSxBQVlDLENBWm9DLGNBQUUsQ0FBQyxJQUFJLENBQUMsU0FBUyxHQVlyRCIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcclxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XHJcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcclxuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxyXG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcclxuICAgIH07XHJcbn0pKCk7XHJcbihmdW5jdGlvbigpe2Z1bmN0aW9uIHIoZSxuLHQpe2Z1bmN0aW9uIG8oaSxmKXtpZighbltpXSl7aWYoIWVbaV0pe3ZhciBjPVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmU7aWYoIWYmJmMpcmV0dXJuIGMoaSwhMCk7aWYodSlyZXR1cm4gdShpLCEwKTt2YXIgYT1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK2krXCInXCIpO3Rocm93IGEuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixhfXZhciBwPW5baV09e2V4cG9ydHM6e319O2VbaV1bMF0uY2FsbChwLmV4cG9ydHMsZnVuY3Rpb24ocil7dmFyIG49ZVtpXVsxXVtyXTtyZXR1cm4gbyhufHxyKX0scCxwLmV4cG9ydHMscixlLG4sdCl9cmV0dXJuIG5baV0uZXhwb3J0c31mb3IodmFyIHU9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZSxpPTA7aTx0Lmxlbmd0aDtpKyspbyh0W2ldKTtyZXR1cm4gb31yZXR1cm4gcn0pKCkiLCIvKipUaGlzIGNsYXNzIGlzIGF1dG9tYXRpY2FsbHkgZ2VuZXJhdGVkIGJ5IExheWFBaXJJREUsIHBsZWFzZSBkbyBub3QgbWFrZSBhbnkgbW9kaWZpY2F0aW9ucy4gKi9cclxuaW1wb3J0IGJpZ0l0ZW0gZnJvbSBcIi4vdmlldy9iaWdJdGVtXCJcclxuLypcclxuKiDmuLjmiI/liJ3lp4vljJbphY3nva47XHJcbiovXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEdhbWVDb25maWd7XHJcbiAgICBzdGF0aWMgd2lkdGg6bnVtYmVyPTY0MDtcclxuICAgIHN0YXRpYyBoZWlnaHQ6bnVtYmVyPTExMzY7XHJcbiAgICBzdGF0aWMgc2NhbGVNb2RlOnN0cmluZz1cImZpeGVkd2lkdGhcIjtcclxuICAgIHN0YXRpYyBzY3JlZW5Nb2RlOnN0cmluZz1cIm5vbmVcIjtcclxuICAgIHN0YXRpYyBhbGlnblY6c3RyaW5nPVwidG9wXCI7XHJcbiAgICBzdGF0aWMgYWxpZ25IOnN0cmluZz1cImxlZnRcIjtcclxuICAgIHN0YXRpYyBzdGFydFNjZW5lOmFueT1cInRlc3QvQmlnLnNjZW5lXCI7XHJcbiAgICBzdGF0aWMgc2NlbmVSb290OnN0cmluZz1cIlwiO1xyXG4gICAgc3RhdGljIGRlYnVnOmJvb2xlYW49ZmFsc2U7XHJcbiAgICBzdGF0aWMgc3RhdDpib29sZWFuPWZhbHNlO1xyXG4gICAgc3RhdGljIHBoeXNpY3NEZWJ1Zzpib29sZWFuPWZhbHNlO1xyXG4gICAgc3RhdGljIGV4cG9ydFNjZW5lVG9Kc29uOmJvb2xlYW49dHJ1ZTtcclxuICAgIGNvbnN0cnVjdG9yKCl7fVxyXG4gICAgc3RhdGljIGluaXQoKXtcclxuICAgICAgICB2YXIgcmVnOiBGdW5jdGlvbiA9IExheWEuQ2xhc3NVdGlscy5yZWdDbGFzcztcclxuICAgICAgICByZWcoXCJ2aWV3L2JpZ0l0ZW0udHNcIixiaWdJdGVtKTtcclxuICAgIH1cclxufVxyXG5HYW1lQ29uZmlnLmluaXQoKTsiLCJpbXBvcnQgR2FtZUNvbmZpZyBmcm9tIFwiLi9HYW1lQ29uZmlnXCI7XHJcbmltcG9ydCBCaWdSYW5rIGZyb20gXCIuL3ZpZXcvQmlnUmFua1wiO1xyXG5jbGFzcyBNYWluIHtcclxuXHRjb25zdHJ1Y3RvcigpIHtcclxuXHRcdCAvL+iuvue9ruWtkOWfn1xyXG5cdFx0TGF5YS5pc1dYT3BlbkRhdGFDb250ZXh0ID0gdHJ1ZTtcclxuXHRcdExheWEuaXNXWFBvc01zZyA9IHRydWU7XHJcblx0XHQvL+agueaNrklEReiuvue9ruWIneWni+WMluW8leaTjlx0XHRcclxuXHRcdExheWEuaW5pdChHYW1lQ29uZmlnLndpZHRoLCBHYW1lQ29uZmlnLmhlaWdodCxmYWxzZSk7XHJcblx0XHRMYXlhLnN0YWdlLnNjYWxlTW9kZSA9IEdhbWVDb25maWcuc2NhbGVNb2RlO1xyXG5cdFx0TGF5YS5zdGFnZS5zY3JlZW5Nb2RlID0gR2FtZUNvbmZpZy5zY3JlZW5Nb2RlO1xyXG5cdFx0TGF5YS5zdGFnZS5hbGlnblYgPSBHYW1lQ29uZmlnLmFsaWduVjtcclxuXHRcdExheWEuc3RhZ2UuYWxpZ25IID0gR2FtZUNvbmZpZy5hbGlnbkg7XHJcblx0XHQvLyDlhbPkuo7pgI/kvKDmjqXlj6PvvIzor7flj4LogIM6IGh0dHBzOi8vbGRjMi5sYXlhYm94LmNvbS9kb2MvP25hdj16aC10cy01LTAtN1xyXG5cdFx0aWYoTGF5YS5Ccm93c2VyLm9uTWluaUdhbWUpXHJcblx0XHRcdHd4Lm9uTWVzc2FnZShmdW5jdGlvbihkYXRhKXtcclxuXHRcdFx0XHRpZihkYXRhLnVybCA9PSBcInJlcy9hdGxhcy90ZXN0LmF0bGFzXCIgKXtcclxuXHRcdFx0XHRcdExheWEubG9hZGVyLmxvYWQoXCJyZXMvYXRsYXMvdGVzdC5hdGxhc1wiLExheWEuSGFuZGxlci5jcmVhdGUodGhpcyx0aGlzLm9uQ29tcGxldGUpKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0uYmluZCh0aGlzKSk7XHJcblx0XHRlbHNlXHJcblx0XHRcdExheWEubG9hZGVyLmxvYWQoXCJyZXMvYXRsYXMvdGVzdC5hdGxhc1wiLExheWEuSGFuZGxlci5jcmVhdGUodGhpcyx0aGlzLm9uQ29tcGxldGUpKTtcclxuXHRcdFx0XHRcclxuXHR9XHJcblxyXG5cdG9uQ29tcGxldGUoKTogdm9pZCB7XHJcblx0XHQvL+WIneWni+WMlnJhbmvmjpLooYzmppxcclxuXHRcdHZhciByYW5rID0gbmV3IEJpZ1JhbmsoKTtcclxuXHRcdC8v5Yid5aeL5YyWXHJcblx0XHRyYW5rLmluaXQoKTtcclxuXHR9XHJcbn1cclxuLy/mv4DmtLvlkK/liqjnsbtcclxubmV3IE1haW4oKTtcclxuIiwiLyoqVGhpcyBjbGFzcyBpcyBhdXRvbWF0aWNhbGx5IGdlbmVyYXRlZCBieSBMYXlhQWlySURFLCBwbGVhc2UgZG8gbm90IG1ha2UgYW55IG1vZGlmaWNhdGlvbnMuICovXG5pbXBvcnQgVmlldz1MYXlhLlZpZXc7XHJcbmltcG9ydCBEaWFsb2c9TGF5YS5EaWFsb2c7XHJcbmltcG9ydCBTY2VuZT1MYXlhLlNjZW5lO1xudmFyIFJFRzogRnVuY3Rpb24gPSBMYXlhLkNsYXNzVXRpbHMucmVnQ2xhc3M7XG5leHBvcnQgbW9kdWxlIHVpLnRlc3Qge1xyXG4gICAgZXhwb3J0IGNsYXNzIEJpZ1VJIGV4dGVuZHMgTGF5YS5TY2VuZSB7XHJcblx0XHRwdWJsaWMgX2xpc3Q6TGF5YS5MaXN0O1xuICAgICAgICBwdWJsaWMgc3RhdGljICB1aVZpZXc6YW55ID17XCJ0eXBlXCI6XCJTY2VuZVwiLFwicHJvcHNcIjp7XCJ3aWR0aFwiOjYxMCxcImhlaWdodFwiOjc1N30sXCJjb21wSWRcIjoyLFwiY2hpbGRcIjpbe1widHlwZVwiOlwiU3ByaXRlXCIsXCJwcm9wc1wiOntcInlcIjowLFwieFwiOjAsXCJ0ZXh0dXJlXCI6XCJ0ZXN0LzIucG5nXCJ9LFwiY29tcElkXCI6NH0se1widHlwZVwiOlwiTGlzdFwiLFwicHJvcHNcIjp7XCJ5XCI6MTA0LFwieFwiOjEzLFwid2lkdGhcIjo1ODUsXCJ2YXJcIjpcIl9saXN0XCIsXCJ2U2Nyb2xsQmFyU2tpblwiOlwiIFwiLFwic3BhY2VZXCI6MjAsXCJyZXBlYXRYXCI6MSxcImhlaWdodFwiOjYyOSxcImVsYXN0aWNFbmFibGVkXCI6dHJ1ZX0sXCJjb21wSWRcIjozLFwiY2hpbGRcIjpbe1widHlwZVwiOlwiYmlnSXRlbVwiLFwicHJvcHNcIjp7XCJydW50aW1lXCI6XCJ2aWV3L2JpZ0l0ZW0udHNcIixcInJlbmRlclR5cGVcIjpcInJlbmRlclwifSxcImNvbXBJZFwiOjV9XX1dLFwibG9hZExpc3RcIjpbXCJ0ZXN0LzIucG5nXCJdLFwibG9hZExpc3QzRFwiOltdfTtcclxuICAgICAgICBjb25zdHJ1Y3RvcigpeyBzdXBlcigpfVxyXG4gICAgICAgIGNyZWF0ZUNoaWxkcmVuKCk6dm9pZCB7XHJcbiAgICAgICAgICAgIHN1cGVyLmNyZWF0ZUNoaWxkcmVuKCk7XHJcbiAgICAgICAgICAgIHRoaXMuY3JlYXRlVmlldyhCaWdVSS51aVZpZXcpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIFJFRyhcInVpLnRlc3QuQmlnVUlcIixCaWdVSSk7XHJcbiAgICBleHBvcnQgY2xhc3MgQmlnSXRlbVVJIGV4dGVuZHMgTGF5YS5WaWV3IHtcclxuXHRcdHB1YmxpYyBpbWdfaGVhZDpMYXlhLkltYWdlO1xuXHRcdHB1YmxpYyB0ZXh0X25hbWU6TGF5YS5MYWJlbDtcblx0XHRwdWJsaWMgdGV4dF9zY29yZTpMYXlhLkxhYmVsO1xuICAgICAgICBwdWJsaWMgc3RhdGljICB1aVZpZXc6YW55ID17XCJ0eXBlXCI6XCJWaWV3XCIsXCJwcm9wc1wiOntcIndpZHRoXCI6NTgwLFwiaGVpZ2h0XCI6MTAwfSxcImNvbXBJZFwiOjIsXCJjaGlsZFwiOlt7XCJ0eXBlXCI6XCJTcHJpdGVcIixcInByb3BzXCI6e1wieVwiOjAsXCJ4XCI6MCxcIndpZHRoXCI6NTc1LFwidGV4dHVyZVwiOlwidGVzdC8zLnBuZ1wiLFwiaGVpZ2h0XCI6OTl9LFwiY29tcElkXCI6N30se1widHlwZVwiOlwiSW1hZ2VcIixcInByb3BzXCI6e1wieVwiOjYsXCJ4XCI6MjIsXCJ3aWR0aFwiOjgwLFwidmFyXCI6XCJpbWdfaGVhZFwiLFwic2tpblwiOlwidGVzdC80LnBuZ1wiLFwiaGVpZ2h0XCI6ODB9LFwiY29tcElkXCI6MyxcImNoaWxkXCI6W3tcInR5cGVcIjpcIlNwcml0ZVwiLFwicHJvcHNcIjp7XCJ5XCI6LTEsXCJ4XCI6LTEsXCJ3aWR0aFwiOjgyLFwidGV4dHVyZVwiOlwidGVzdC9jMS5wbmdcIixcInJlbmRlclR5cGVcIjpcIm1hc2tcIixcImhlaWdodFwiOjgyfSxcImNvbXBJZFwiOjEwfV19LHtcInR5cGVcIjpcIkxhYmVsXCIsXCJwcm9wc1wiOntcInlcIjozOC41LFwieFwiOjEzNixcIndpZHRoXCI6MjU5LFwidmFyXCI6XCJ0ZXh0X25hbWVcIixcInRleHRcIjpcIuWQjeWtl1wiLFwib3ZlcmZsb3dcIjpcInNjcm9sbFwiLFwiaGVpZ2h0XCI6MjQsXCJmb250U2l6ZVwiOjIwLFwiZm9udFwiOlwiTWljcm9zb2Z0IFlhSGVpXCIsXCJjb2xvclwiOlwiI2ZmZmZmZlwiLFwiYWxpZ25cIjpcImNlbnRlclwifSxcImNvbXBJZFwiOjR9LHtcInR5cGVcIjpcIkxhYmVsXCIsXCJwcm9wc1wiOntcInlcIjo0Mi41LFwieFwiOjQ5NixcInZhclwiOlwidGV4dF9zY29yZVwiLFwidGV4dFwiOlwi5YiG5pWwXCIsXCJmb250U2l6ZVwiOjIwLFwiY29sb3JcIjpcIiNmZmZmZmZcIixcImFsaWduXCI6XCJjZW50ZXJcIn0sXCJjb21wSWRcIjo1fV0sXCJsb2FkTGlzdFwiOltcInRlc3QvMy5wbmdcIixcInRlc3QvNC5wbmdcIixcInRlc3QvYzEucG5nXCJdLFwibG9hZExpc3QzRFwiOltdfTtcclxuICAgICAgICBjb25zdHJ1Y3RvcigpeyBzdXBlcigpfVxyXG4gICAgICAgIGNyZWF0ZUNoaWxkcmVuKCk6dm9pZCB7XHJcbiAgICAgICAgICAgIHN1cGVyLmNyZWF0ZUNoaWxkcmVuKCk7XHJcbiAgICAgICAgICAgIHRoaXMuY3JlYXRlVmlldyhCaWdJdGVtVUkudWlWaWV3KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBSRUcoXCJ1aS50ZXN0LkJpZ0l0ZW1VSVwiLEJpZ0l0ZW1VSSk7XHJcbn1cciIsImltcG9ydCB7IHVpIH0gZnJvbSBcIi4uL3VpL2xheWFNYXhVSVwiXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEJpZ1JhbmsgZXh0ZW5kcyB1aS50ZXN0LkJpZ1VJe1xyXG4gICAgICAgIGNvbnN0cnVjdG9yKCl7XHJcbiAgICAgICAgICAgIHN1cGVyKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKirojrflj5blpb3lj4vmjpLooYzmppzml7bnmoRrZXkgKi9cclxuICAgICAgICBwcml2YXRlIF9rZXk6U3RyaW5nID0gJ3Rlc3QxMDA4Nic7XHJcbiAgICAgICAgLyoqbGlzdOWIneWni+WMluS9v+eUqOeahOaVsOaNriAqL1xyXG4gICAgICAgIHByaXZhdGUgYXJyOkFycmF5PGFueT4gPSBbXHJcbiAgICAgICAge2luZGV4OjEsYXZhdGFySVA6J3Rlc3QvNC5wbmcnLFVzZXJOYW1lOlwi5rWL6K+V55So5oi3MVwiLFJhbmtWYWx1ZToxMDB9LFxyXG4gICAgICAgIHtpbmRleDoyLGF2YXRhcklQOid0ZXN0LzQucG5nJyxVc2VyTmFtZTpcIua1i+ivleeUqOaItzJcIixSYW5rVmFsdWU6NzV9LFxyXG4gICAgICAgIHtpbmRleDozLGF2YXRhcklQOid0ZXN0LzQucG5nJyxVc2VyTmFtZTpcIua1i+ivleeUqOaItzNcIixSYW5rVmFsdWU6NTB9LFxyXG4gICAgICAgIHtpbmRleDo0LGF2YXRhcklQOid0ZXN0LzQucG5nJyxVc2VyTmFtZTpcIua1i+ivleeUqOaItzRcIixSYW5rVmFsdWU6MjV9XHJcbiAgICAgICAgXVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiDliJ3lp4vljJZcclxuICAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgaW5pdCgpIHtcclxuICAgICAgICAgICAgTGF5YS5zdGFnZS5hZGRDaGlsZCh0aGlzKTtcclxuICAgICAgICAgICAgLy/liJ3lp4vljJZsaXN05pWw5o2uXHJcbiAgICAgICAgICAgIHRoaXMuc2V0bGlzdCh0aGlzLmFycik7XHJcbiAgICAgICAgICAgIGlmKExheWEuQnJvd3Nlci5vbk1pbmlHYW1lKXtcclxuICAgICAgICAgICAgICAgIC8v5o6l5Y+X5p2l6Ieq5Li75Z+f55qE5L+h5oGvXHJcbiAgICAgICAgICAgICAgICB3eC5vbk1lc3NhZ2UodGhpcy5yZWNldmllRGF0YS5iaW5kKHRoaXMpKTtcclxuICAgICAgICAgICAgICAgIC8vIOebtOaOpeWxleekuuaVsOaNrlxyXG4gICAgICAgICAgICAgICAgdGhpcy5nZXRGcmllbmREYXRhKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiBcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiDojrflj5blpb3lj4vmjpLooYxcclxuICAgICAgICAgKi9cclxuICAgICAgICBwcml2YXRlICBnZXRGcmllbmREYXRhKCk6dm9pZHtcclxuICAgICAgICAgICAgdmFyIF8kdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgICAgIHd4LmdldEZyaWVuZENsb3VkU3RvcmFnZSh7XHJcbiAgICAgICAgICAgICAgICBrZXlMaXN0Olt0aGlzLl9rZXldLFxyXG4gICAgICAgICAgICAgICAgc3VjY2VzczpmdW5jdGlvbihyZXMpOnZvaWR7XHJcbiAgICAgICAgICAgICAgICAgICAgLy/lhbPkuo7mi7/liLDnmoTmlbDmja7or6bnu4bmg4XlhrXlj6/ku6XkuqfnnIvlvq7kv6HmlofmoaNcclxuICAgICAgICAgICAgICAgICAgICAvL2h0dHBzOi8vZGV2ZWxvcGVycy53ZWl4aW4ucXEuY29tL21pbmlnYW1lL2Rldi9hcGkvVXNlckdhbWVEYXRhLmh0bWxcclxuICAgICAgICAgICAgICAgICAgICB2YXIgbGlzdERhdGE7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG9iajtcclxuICAgICAgICAgICAgICAgICAgICB2YXIga3Y7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGFyciA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCctLS0tLS0tLS0tLS0tLS0tLWdldEZyaWVuZENsb3VkU3RvcmFnZS0tLS0tLS0tLS0tLScpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKHJlcy5kYXRhKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yKHZhciBpID0gMDtpPHJlcy5kYXRhLmxlbmd0aDtpKyspe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqID0gcmVzLmRhdGFbaV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZighKG9iai5LVkRhdGFMaXN0Lmxlbmd0aCkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5ouJ5Y+W5pWw5o2u5piv77yM5L2/55So5LqG5aSa5bCR5Liqa2V5LSBLVkRhdGFMaXN055qE5pWw57uE5bCx5pyJ5aSa5bCRXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+abtOivpue7hueahEtWRGF0YeWPr+S7peafpeeci+W+ruS/oeaWh+ahozpodHRwczovL2RldmVsb3BlcnMud2VpeGluLnFxLmNvbS9taW5pZ2FtZS9kZXYvYXBpL0tWRGF0YS5odG1sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBrdiA9IG9iai5LVkRhdGFMaXN0WzBdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoa3Yua2V5IT1fJHRoaXMuX2tleSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAga3YgPSBKU09OLnBhcnNlKGt2LnZhbHVlKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGlzdERhdGEgPSB7fTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpc3REYXRhLmF2YXRhcklQID0gb2JqLmF2YXRhclVybDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpc3REYXRhLlVzZXJOYW1lID0gb2JqLm5pY2tuYW1lO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGlzdERhdGEub3BlbklEID0gb2JqLm9wZW5pZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpc3REYXRhLlJhbmtWYWx1ZSA9IGt2Lnd4Z2FtZS52YWx1ZTE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaXN0RGF0YS51cGRhdGVfdGltZT1rdi53eGdhbWUudXBkYXRlX3RpbWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcnIucHVzaChsaXN0RGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy/moLnmja5SYW5rVmFsdWXmjpLluo9cclxuICAgICAgICAgICAgICAgICAgICAgICAgYXJyID0gYXJyLnNvcnQoZnVuY3Rpb24oYSxiKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBiLlJhbmtWYWx1ZSAtIGEuUmFua1ZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy/lop7liqDkuIDkuKrnlKjkuo7mn6XnnIvnmoRpbmRleOaOkuWQjVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IodmFyIGkgPSAwOyBpPCBhcnIubGVuZ3RoO2krKyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcnJbaV0uaW5kZXggPSBpICsgMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL+iuvue9ruaVsOe7hFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfJHRoaXMuc2V0bGlzdChhcnIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICxmYWlsOmZ1bmN0aW9uKGRhdGEpOnZvaWR7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJy0tLS0tLS0tLS0tLS0tLS0tLeiOt+WPluaJmOeuoeaVsOaNruWksei0pS0tLS0tLS0tLS0tLS0tLS0tLS0tJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiDmjqXmlLbkv6Hmga9cclxuICAgICAgICAgKiBAcGFyYW0gbWVzc2FnZSDmlLbliLDnmoTkuLvln5/kvKDov4fmnaXnmoTkv6Hmga9cclxuICAgICAgICAgKi9cclxuICAgICAgICBwcml2YXRlIHJlY2V2aWVEYXRhKG1lc3NhZ2UpOnZvaWR7XHJcbiAgICAgICAgICAgIHZhciBfJHRoaXMgPXRoaXM7XHJcbiAgICAgICAgICAgIHZhciB0eXBlOlN0cmluZyA9IG1lc3NhZ2UudHlwZTtcclxuICAgICAgICAgICAgc3dpdGNoKHR5cGUpXHJcbiAgICAgICAgICAgIHsgICBcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog5LiK5oql6Ieq5bex55qE5pWw5o2uXHJcbiAgICAgICAgICogQHBhcmFtIGRhdGEg5LiK5oql5pWw5o2uXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHJpdmF0ZSBzZXRTZWxmRGF0YShkYXRhOlN0cmluZyk6dm9pZHtcclxuICAgICAgICAgICAgdmFyIGt2RGF0YUxpc3QgPSBbXTtcclxuICAgICAgICAgICAgdmFyIG9iajphbnkgPSB7fTtcclxuICAgICAgICAgICAgb2JqLnd4Z2FtZSA9e307XHJcbiAgICAgICAgICAgIG9iai53eGdhbWUudmFsdWUxID0gZGF0YTtcclxuICAgICAgICAgICAgb2JqLnd4Z2FtZS51cGRhdGVfdGltZSA9IExheWEuQnJvd3Nlci5ub3coKTtcclxuICAgICAgICAgICAga3ZEYXRhTGlzdC5wdXNoKHtcImtleVwiOnRoaXMuX2tleSxcInZhbHVlXCI6SlNPTi5zdHJpbmdpZnkob2JqKX0pO1xyXG4gICAgICAgICAgICB3eC5zZXRVc2VyQ2xvdWRTdG9yYWdlKHtcclxuICAgICAgICAgICAgICAgIEtWRGF0YUxpc3Q6a3ZEYXRhTGlzdCxcclxuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6ZnVuY3Rpb24oZSk6dm9pZHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnLS0tLS1zdWNjZXNzOicgKyBKU09OLnN0cmluZ2lmeShlKSk7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgZmFpbDpmdW5jdGlvbihlKTp2b2lke1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCctLS0tLWZhaWw6JyArIEpTT04uc3RyaW5naWZ5KGUpKTtcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBjb21wbGV0ZTpmdW5jdGlvbihlKTp2b2lke1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCctLS0tLWNvbXBsZXRlOicgKyBKU09OLnN0cmluZ2lmeShlKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiDorr7nva5saXN0IGFyclxyXG4gICAgICAgICAqIEBwYXJhbSBhcnIg6LWL5YC855So55qEYXJyXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHJpdmF0ZSBzZXRsaXN0KGFycik6dm9pZHtcclxuICAgICAgICAgICAgdGhpcy5fbGlzdC5hcnJheSA9YXJyO1xyXG4gICAgICAgICAgICB0aGlzLl9saXN0LnJlZnJlc2goKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiIsImltcG9ydCB7IHVpIH0gIGZyb20gXCIuLi91aS9sYXlhTWF4VUlcIlxyXG4gICAgZXhwb3J0IGRlZmF1bHQgY2xhc3MgQmlnSXRlbSBleHRlbmRzIHVpLnRlc3QuQmlnSXRlbVVJe1xyXG4gICAgICAgIGNvbnN0cnVjdG9yKCl7XHJcbiAgICAgICAgICAgIHN1cGVyKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAgcHVibGljIHNldCBkYXRhU291cmNlKHZhbHVlKXtcclxuICAgICAgICAgICAgaWYoIXZhbHVlKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB0aGlzLmltZ19oZWFkLnNraW4gPSB2YWx1ZS5hdmF0YXJJUDtcclxuICAgICAgICAgICAgdGhpcy50ZXh0X25hbWUudGV4dCA9IHZhbHVlLlVzZXJOYW1lO1xyXG4gICAgICAgICAgICB0aGlzLnRleHRfc2NvcmUudGV4dCA9IHZhbHVlLlJhbmtWYWx1ZTtcclxuICAgICAgICB9XHJcbiAgICB9ICAgXHJcbiJdfQ==
