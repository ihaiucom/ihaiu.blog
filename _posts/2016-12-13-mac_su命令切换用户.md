---
layout: post
title: su命令切换用户
date: 2016-12-13 16:00:00
categories: mac
tags: mac su
excerpt: su命令切换用户
thread: 20161213160000
author: 大海明月
authorQQ: 593705098
authorEmail: zengfeng75@qq.com
thumbnail:

sh: false
sh_csharp: true
---



<pre>
MacServerdeiMac:test macserver$ su git
Password:
bash-3.2$ pwd
/Users/macserver/zf/workspaces/unity/github/test
bash-3.2$ cd ~/
bash-3.2$ pwd
/Users/git
bash-3.2$ 
</pre>





<h2 class="nav1">su命令的详细用法</h2>


<pre>

1.命令作用

su的作用是变更为其它使用者的身份，超级用户除外，需要键入该使用者的密码。

2.使用方式

su [-fmp] [-c command] [-s shell] [--help] [--version] [-] [USER [ARG]]

3.参数说明

-f ， –fast：不必读启动文件（如 csh.cshrc 等），仅用于csh或tcsh两种Shell。

-l ， –login：加了这个参数之后，就好像是重新登陆一样，大部分环境变量(例如HOME、SHELL和USER等)都是以该使用者(USER)为主，并

且工作目录也会改变。如果没有指定USER，缺省情况是root。

-m， -p ，–preserve-environment：执行su时不改变环境变数。

-c command：变更账号为USER的使用者，并执行指令（command）后再变回原来使用者。

–help 显示说明文件
–version 显示版本资讯

USER：欲变更的使用者账号，
ARG:  传入新的Shell参数。

4.例子

su -c ls root 变更帐号为 root 并在执行 ls 指令后退出变回原使用者。

su [用户名]

a>在root用户下, 输入 su 普通用户. 则切换至普通用户, 从root切换到变通用户不需要密码

b>在普通用户下, 输入 su [用户名]
提示 password:
输入用户的PASSWORD, 则切换至该用户

扩展阅读一:Linux下 su命令与su - 命令有什么区别？

su 是切换到其他用户，但是不切换环境变量（比如说那些export命令查看一下，就知道两个命令的区别了）

su - 是完整的切换到一个用户环境

所以建议大家切换用户的时候,尽量使用 su -  linuxso 这样 否则可能发现某些命令执行不了

扩展阅读二:su和sudo的区别

 

由于su 对切换到超级权限用户root后，权限的无限制性，所以su并不能担任多个管理员所管理的系统。如果用su 来切换到超级用户来管理系统，也不能明确哪些工作是由哪个管理员进行的操作。特别是对于服务器的管理有多人参与管理时，最好是针对每个管理员的技术特长和 管理范围，并且有针对性的下放给权限，并且约定其使用哪些工具来完成与其相关的工作，这时我们就有必要用到 sudo。

通过sudo，我们能把某些超级权限有针对性的下放，并且不需要普通用户知道root密码，所以sudo 相对于权限无限制性的su来说，还是比较安全的，所以sudo 也能被称为受限制的su ；另外sudo 是需要授权许可的，所以也被称为授权许可的su；

sudo 执行命令的流程是当前用户切换到root（或其它指定切换到的用户），然后以root（或其它指定的切换到的用户）身份执行命令，执行完成后，直接退回到当前用户；而这些的前提是要通过sudo的配置文件/etc/sudoers来进行授权；
</pre>
<p></p>

<h2 class="nav1"> su命令与su - 命令有什么区别？</h2>

<pre>

Linux中切换用户的命令是su或su -。
su命令和su -命令最大的本质区别就是：前者只是切换了root身份，但Shell环境仍然是普通用户的Shell；
而后者连用户和Shell环境一起切换成root身份了。只有切换了Shell环境才不会出现PATH环境变量错误。su切换成root用户以后，pwd
一下，发现工作目录仍然是普通用户的工作目录；而用su -命令切换以后，工作目录变成root的工作目录了。用echo 
$PATH命令看一下su和su -以后的环境变量有何不同。以此类推，要从当前用户切换到其它用户也一样，应该使用su -命令。
1.su的作用是变更为其它使用者的身份，需要键入该使用者的密码（超级用户除外）。

2.格式

su [选项]... [-] [USER [ARG]...]

3.主要参数

-f ， --fast：不必读启动文件（如 csh.cshrc 等），仅用于csh或tcsh两种Shell。

-l ， --login：加了这个参数之后，就似乎是重新登陆为该使用者一样，大部分环境变量（例如HOME、SHELL和USER等）都是以该使用者（USER）为主，并且工作目录也会改变。假如没有指定USER，缺省情况是root。

-m， -p ，--preserve-environment：执行su时不改变环境变数。

-c command：变更账号为USER的使用者，并执行指令（command）后再变回原来使用者。

USER：欲变更的使用者账号，ARG传入新的Shell参数。

</pre>

<p></p>
<p>su</p>
<pre>
MacServerdeiMac:test macserver$ su
Password:
sh-3.2# pwd
/Users/macserver/zf/workspaces/unity/github/test
sh-3.2# cd ~/
sh-3.2# pwd
/var/root
</pre>

<p></p>
<p>su -</p>
<pre>
MacServerdeiMac:test macserver$ su -
Password:
MacServerdeiMac:~ root# pwd
/var/root


<p></p>
<p>su git</p>
<pre>
MacServerdeiMac:test macserver$ su git
Password:
bash-3.2$ pwd
/Users/macserver/zf/workspaces/unity/github/test
bash-3.2$ cd ~/
bash-3.2$ pwd
/Users/git
</pre>

