---
layout: post
title: Unity C# 多线程下载
date: 2017-01-10 20:51:00
categories: C#
tags: C# Unity Thread
excerpt: 多线程下载，支持断点续传
shareexcerpt: 多线程下载，支持断点续传
thread: 20170111205100
author: 大海明月
authorQQ: 593705098
authorEmail: zengfeng75@qq.com
thumbnail: /assets/docpic/unity_download_2.png

sh: true
sh_csharp: true
---


<br>
<br>
<h2 class="nav1">下载 </h2>
<p><a href="https://github.com/ihaiucom/ihaiu.MultiThreadDownload" target="_blank" >[源码] gihtub</a></p>
<p><a href="/assets/down/ihaiu.MnutiThreadDownload For Mac.zip" target="_blank" >[Demo] ihaiu.MnutiThreadDownload For Mac.zip</a>
<p><a href="/assets/down/ihaiu.MnutiThreadDownload For Windows.zip" target="_blank" >[Demo] ihaiu.MnutiThreadDownload For Windows.zip</a></p>

<br>
<br>


<h2 class="nav1">[Demo] 下载器 </h2>

<p>添加任务：支持多行批量下载</p>
<br>
<p><img src="/assets/docpic/unity_download_1.png" style="border: solid 1px #666;" /></p>
<br>
<br>

<p>下载界面</p>
<br>
<p><img src="/assets/docpic/unity_download_2.png" style="border: solid 1px #666;" /></p>

<br>
<br>


<h2 class="nav1">[API] HttpDownload </h2>

<pre class="brush: csharp; ">
public static DownloadFile Add(string url, string localPath);
public static DownloadFile Add(string url, string localPath, int size);
public static DownloadFile Add(string url, string localPath,  Action&lt;DownloadFile&gt; callback);
public static DownloadFile Add(string url, string localPath, int size, Action&lt;DownloadFile&gt; callback);


public static void Add(DownloadFile downloadFile);
public static void Remove(DownloadFile downloadFile);

/** 退出，会退出所有线程*/
public static void Exit();


/** 设置线程数量 */
public static int ProcessorCount
{
    get
    {
//      return Mathf.Max(Environment.ProcessorCount - 1, 1);
        return 4;
    }
}
</pre>

<br>
<br>

<h2 class="nav1">[API] DownloadFile </h2>

<pre class="brush: csharp; ">
/** 下载链接 */
public string   url;

/** 本地存储路径 */
public string   localPath;

/** 文件大小 */
public long     size        = 0;

/** 已加载大小 */
public long     loadedSize  = 0;

/** 状态 */
public StateType state = StateType.None;

/** 加载完成回调 */
public Action&lt;DownloadFile&gt; completeCallback;




/** 添加到异步队列 */
public void AsyncLoad();

/** 从异步队列移除 */
public void AsyncRemove();


/** 同步下载 */
public void Load();
</pre>



<br>
<br>
