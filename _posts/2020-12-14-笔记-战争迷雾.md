---


layout: post
title: 【笔记】《英雄联盟》战争迷雾
date: 2020-12-14 13:51:00
categories: 游戏技术
tags: 游戏技术
excerpt: 战争迷雾
shareexcerpt: 战争迷雾
thread: 20201214205400
author: 大海明月
authorQQ: 593705098
authorEmail: zengfeng75@qq.com
thumbnail:

sh: true
sh_csharp: true
sh_cpp: true
---





# 描述

1. 英雄联盟先用 128*128的图保存源数据
2. [图像缩放技术] 将128 * 128 放大4倍到 512 * 512

![img](https://blog.ihaiu.com/assets/docpic/2020-12-14-笔记-战争迷雾/fow_diagram.png)

3. [图像模糊技术] 高斯模糊处理512 * 512





# 相关文档

[《英雄联盟》战争迷雾 https://technology.riotgames.com/news/story-fog-and-war](https://technology.riotgames.com/news/story-fog-and-war)

[高斯模糊]: https://en.wikipedia.org/wiki/Gaussian_blur

![img](https://blog.ihaiu.com/assets/docpic/2020-12-14-笔记-战争迷雾/image-20201214213612475.png)



[线性采用的高效高斯模糊]: http://rastergrid.com/blog/2010/09/efficient-gaussian-blur-with-linear-sampling/

![img](https://blog.ihaiu.com/assets/docpic/2020-12-14-笔记-战争迷雾/gaussian_function_2D.png)

![img](https://blog.ihaiu.com/assets/docpic/2020-12-14-笔记-战争迷雾/gaussian_graph.png)

![img](https://blog.ihaiu.com/assets/docpic/2020-12-14-笔记-战争迷雾/gaussian_function_1D.png)

![img](https://blog.ihaiu.com/assets/docpic/2020-12-14-笔记-战争迷雾/binomial_coeff2.png)

```glsl
uniform sampler2D image;
 
out vec4 FragmentColor;
 
uniform float offset[5] = float[](0.0, 1.0, 2.0, 3.0, 4.0);
uniform float weight[5] = float[](0.2270270270, 0.1945945946, 0.1216216216,
                                  0.0540540541, 0.0162162162);
 
void main(void) {

    FragmentColor = texture2D(image, vec2(gl_FragCoord) / 1024.0) * weight[0];

    for (int i=1; i<5; i++) {

        FragmentColor +=
            texture2D(image, (vec2(gl_FragCoord) + vec2(0.0, offset[i])) / 1024.0)
                * weight[i];

        FragmentColor +=
            texture2D(image, (vec2(gl_FragCoord) - vec2(0.0, offset[i])) / 1024.0)
                * weight[i];
    }
}
```

![img](https://blog.ihaiu.com/assets/docpic/2020-12-14-笔记-战争迷雾/gaussian_weight_equation.png)

```glsl
uniform sampler2D image;
 
out vec4 FragmentColor;
 
uniform float offset[3] = float[](0.0, 1.3846153846, 3.2307692308);
uniform float weight[3] = float[](0.2270270270, 0.3162162162, 0.0702702703);
 
void main(void) {

    FragmentColor = texture2D(image, vec2(gl_FragCoord) / 1024.0) * weight[0];

    for (int i=1; i<3; i++) {

        FragmentColor +=
            texture2D(image, (vec2(gl_FragCoord) + vec2(0.0, offset[i])) / 1024.0)
                * weight[i];

        FragmentColor +=
            texture2D(image, (vec2(gl_FragCoord) - vec2(0.0, offset[i])) / 1024.0)
                * weight[i];
    }
}
```



[图像滤镜 可分离性]: https://en.wikipedia.org/wiki/Separable_filter
[缩放图像技术 hqx]: https://en.wikipedia.org/wiki/Hqx

![img](https://blog.ihaiu.com/assets/docpic/2020-12-14-笔记-战争迷雾/image-20201214212934623.png)





[缩放图像技术 hqx 滤镜代码和原理]: http://blog.pkh.me/p/19-butchering-hqx-scaling-filters.html

hqx有 hqx2、hqx3、hqx4 分别是放大2倍、3倍、4倍。

hq2x 放大2倍技术

![centerimg](2020-12-14-笔记-战争迷雾/hq2x-all-combs.png)





[缩放图像技术论文 SIGGRAPH 2011]: http://johanneskopf.de/publications/pixelart/

![img](https://blog.ihaiu.com/assets/docpic/2020-12-14-笔记-战争迷雾/image-20201214213808608.png)





[缩放图像技术 不同算法效果展示]: http://johanneskopf.de/publications/pixelart/supplementary/multi_comparison.html

![img](https://blog.ihaiu.com/assets/docpic/2020-12-14-笔记-战争迷雾/image-20201214214018715.png)
