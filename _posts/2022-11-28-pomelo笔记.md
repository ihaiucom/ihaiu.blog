---
layout: post
title: pomelo笔记
date: 2022-11-28 13:51:00
categories: pomelo
tags: pomelo
excerpt: pomelo
shareexcerpt: pomelo
thread: 2022112812510000
author: 大海明月
authorQQ: 593705098
authorEmail: zengfeng75@qq.com
thumbnail:

sh: true
sh_csharp: true
sh_cpp: true
---





```
components/backendSession.js -> common/service/BackendSessionService.js

​	-> rpc

​		-> common/service/sessionService.js
```



```
components/channel.js  -> common/service/channelService.js
  -> rpc
  	-> common/remote/frontend/channelRemote.js
  -> common/remote/frontend/channelRemote.js
  	[pushMessage, broadcast]-> [send] components/connector.js

```



```
components/connector.js
	-> connectors/hybridconnector.js
		-> connectors/hybridsocket.js
		-> connectors/common/coder.js
		
		[connection]-> [hostFilter, bindEvents] components/connector.js
			[bindEvents]->[getSession] components/connector.js
			[getSession] -> [get, create, closed] common/service/sessionService.js
		
                [closed] -> [onSessionClose] components/connector.js
                [bind] -> [addLoginedUser]common/service/connectionService.js
                [unbind] -> [removeLoginedUser]common/service/connectionService.js
                [handleMessage] -> [globalHandle] server/server.js
    
    [doSend] -> [schedule] components/pushScheduler.js
    	[schedule]-> [schedule] pushSchedulers/direct.js
    		[doBatchPush]->[sendMessage] common/service/sessionService.js -> Session.send
    			->[send] connectors/hybridsocket.js
    				-> client....
    	
    	[schedule]-> [doBroadcast] pushSchedulers/direct.js
    		[doBroadcast]->[broadcastFilter] common/service/channelService.js
    		[doBroadcast]->[sendMessage]common/service/sessionService.js -> Session.send
    			->[send] connectors/hybridsocket.js
    				-> client....
    		
```



```
common/service/sessionService.js
	-> [closed, bind, unbind] lib/components/connector.js
	-> [bind] lib/components/connector.js
		[bind] -> [addLoginedUser]common/service/connectionService.js
		[unbind] -> [removeLoginedUser]common/service/connectionService.js
	
	

```

