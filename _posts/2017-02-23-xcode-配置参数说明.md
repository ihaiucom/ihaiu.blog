---
layout: post
title: xcode 配置参数笔记
date: 2017-02-23 13:51:00
categories: xcode
tags: xcode IOS
excerpt: xcode 配置参数笔记
shareexcerpt: xcode 配置参数笔记
thread: 2017023112510000
author: 大海明月
authorQQ: 593705098
authorEmail: zengfeng75@qq.com
thumbnail:

sh: true
sh_csharp: true
sh_cpp: true
---


<h2 class="nav1">Build Settings </h2>
<a href="http://small.qiang.blog.163.com/blog/static/978493072013112571950/" target="_blank">关于Xcode的Other Linker Flags (链接器)  </a> <br><br>
<a href="http://www.cnblogs.com/mybkn/articles/2381224.html" target="_blank">Objective-C Automatic Reference Counting (ARC 内存自动回收)  </a> <br><br>
<a href="http://www.cocoachina.com/ios/20150818/13078.html" target="_blank">Enable Bitcode (一种中间代码, Unity发布CPP要用，是AppStroe优化用的)  </a> <br>
<a href="http://www.cocoachina.com/ios/20150818/13078.html" target="_blank">理解Bitcode：一种中间代码  </a> <br><br>


<h2 class="nav1">General </h2>
<h3>如横屏的时候游戏需要勾选竖屏支持，如图</h3>
<p><img src="/assets/docpic/xcode_setting_1.png" style="border: solid 1px #666;" /></p>

<br><br>


<h2 class="nav1">Info.plist </h2>
<a href="http://www.th7.cn/Program/IOS/201605/859481.shtml" target="_blank">xcode 中 info.plist 键值对应关系  </a> <br><br>
<a href="http://www.cnblogs.com/linyc/p/4180336.html" target="_blank">Xcode中Info.plist文件各个键的作用说明  </a> <br><br>



<h3>NSAppTransportSecurity,(简称ATS) ios9 HTTP请求  </h3>

<a href="https://my.oschina.net/vimfung/blog/494687" target="_blank">关于iOS9中的App Transport Security相关说明及适配 </a> <br>
<a href="https://segmentfault.com/a/1190000002933776?utm_source=tuicool&utm_medium=referral" target="_blank">iOS9 HTTP 不能正常使用的解决办法</a> <br>
<a href="http://blog.csdn.net/mad1989/article/details/8560796" target="_blank">ios 简单的plist文件读写操作（Document和NSUserDefaults）</a> <br>

<pre>

&lt;key&gt;NSAppTransportSecurity&lt;/key&gt; 
&lt;dict&gt;
    &lt;key&gt;NSAllowsArbitraryLoads&lt;/key&gt;
    &lt;true/&gt; 
&lt;/dict&gt;

</pre>
<br>
<br>



<h3>LSApplicationQueriesSchemes 白名单  </h3>
<a href="http://www.jianshu.com/p/a8cce94d508e" target="_blank"> iOS9适配 之 关于info.plist 第三方登录 添加URL Schemes白名单  </a> <br>
<a href="http://www.jianshu.com/p/5ba888badebd" target="_blank"> IOS集成第三方支付、分享、登录功能小结 </a> <br>

<pre>
	&lt;key&gt;LSApplicationQueriesSchemes&lt;/key&gt; 
	&lt;array&gt;
		&lt;string&gt;alipay&lt;/string&gt; 
		&lt;string&gt;weixin&lt;/string&gt; 
		&lt;string&gt;mqqapiwallet&lt;/string&gt; 
		&lt;string&gt;i4Tool4008227229&lt;/string&gt;
	&lt;/array&gt;
</pre>
<br>
<br>


<h3>NSCameraUsageDescription 相册访问权限(iOS10 新添加)  </h3>
<a href="http://blog.csdn.net/zp511253886/article/details/52584210" target="_blank"> xcode8 iOS10上关于NSPhotoLibraryUsageDescription NSCameraUsageDescription 等问题  </a> <br>

<pre>
<body> 
	&lt;key&gt;NSCameraUsageDescription&lt;/key&gt; 
	&lt;string&gt;使用相机&lt;/string&gt;

	&lt;key&gt;NSPhotoLibraryUsageDescription&lt;/key&gt; 
	&lt;string&gt;使用相册&lt;/string&gt;

	&lt;key&gt;NSContactsUsageDescription&lt;/key&gt; 
	&lt;string&gt;使用通讯录&lt;/string&gt;

	&lt;key&gt;NSMicrophoneUsageDescription&lt;/key&gt; 
	&lt;string&gt;使用麦克风&lt;/string&gt;

	&lt;key&gt;NSLocationAlwaysUsageDescription&lt;/key&gt; 
	&lt;string&gt;使用地理位置服务&lt;/string&gt;
	
	&lt;key&gt;NSLocationWhenInUseUsageDescription&lt;/key&gt; 
	&lt;string&gt;使用地理位置服务&lt;/string&gt;
</body>
</pre>
<br>

<pre>
NSContactsUsageDescription -> 通讯录

NSMicrophoneUsageDescription -> 麦克风

NSPhotoLibraryUsageDescription -> 相册

NSCameraUsageDescription -> 相机

NSLocationAlwaysUsageDescription -> 地理位置

NSLocationWhenInUseUsageDescription -> 地理位置
</pre>

<br>
<br>

<h2 class="nav1">Unity 修改 Unity-iPhone.xcodeproj/project.pbxproj 和 Info.plist </h2>
<a href="http://www.jianshu.com/p/dbd7c4b205b0" target="_blank"> Unity iOS 省心打包  </a> <br>
<a href="http://blog.csdn.net/blog_lee/article/details/52400535" target="_blank">Unity iOS 自动修改Xcode配置</a> <br>
<pre class="brush: csharp; ">

using UnityEngine;
using System.Collections;
using UnityEditor.Callbacks;
using UnityEditor;
using UnityEditor.iOS.Xcode;
using System.IO;

public class AsBuildEditor 
{


    //构建完毕处理
    [PostProcessBuild]
    public static void OnPostProcessBuild(BuildTarget buildTarget, string path)
    {
        if (buildTarget == BuildTarget.iOS) 
        {
            OnPostProcessBuild_As(buildTarget, path);
        }
    }

    // 爱思
    public static void OnPostProcessBuild_As(BuildTarget buildTarget, string path)
    {
       string projPath = path + "/Unity-iPhone.xcodeproj/project.pbxproj";
        PBXProject proj = new PBXProject();
        proj.ReadFromString(File.ReadAllText(projPath));
        string target = proj.TargetGuidByName("Unity-iPhone");


        // 添加依赖库 
        proj.AddFrameworkToProject(target, "CoreMotion.framework", true);
        proj.AddFrameworkToProject(target, "CoreTelephony.framework", true);
        proj.AddFrameworkToProject(target, "Security.framework", true);
        proj.AddFrameworkToProject(target, "SystemConfiguration.framework", true);
        proj.AddFrameworkToProject(target, "AdSupport.framework", true);
        proj.AddFrameworkToProject(target, "AudioToolbox.framework", true);
        proj.AddFrameworkToProject(target, "MediaPlayer.framework", true);
        proj.AddFrameworkToProject(target, "AVFoundation.framework", true);
        proj.AddFrameworkToProject(target, "CFNetwork.framework", true);
        proj.AddFrameworkToProject(target, "CoreGraphics.framework", true);
        proj.AddFrameworkToProject(target, "CoreText.framework", true);

        proj.AddFileToBuild(target, proj.AddFile("usr/lib/libsqlite3.dylib", "Frameworks/libsqlite3.dylib", PBXSourceTree.Sdk));
        //        proj.AddFileToBuild(target, proj.AddFile("usr/lib/libsqlite3.tbd", "Frameworks/libsqlite3.tbd", PBXSourceTree.Sdk));

        proj.AddFileToBuild(target, proj.AddFile("usr/lib/libz.dylib", "Frameworks/libz.dylib", PBXSourceTree.Sdk));
        //        proj.AddFileToBuild(target, proj.AddFile("usr/lib/libz.tbd", "Frameworks/libz.tbd", PBXSourceTree.Sdk));

        proj.AddFileToBuild(target, proj.AddFile("usr/lib/libstdc++.dylib", "Frameworks/libstdc++.dylib", PBXSourceTree.Sdk));
        //        proj.AddFileToBuild(target, proj.AddFile("usr/lib/libstdc++.tbd", "Frameworks/libstdc++.tbd", PBXSourceTree.Sdk));
        // 链接器
        proj.AddBuildProperty(target, "OTHER_LDFLAGS", "$(inherited)\n" + "-ObjC");
        // 对所有的编译配置设置选项  
        proj.SetBuildProperty(target, "ENABLE_BITCODE", "NO"); 


        // Team

        File.WriteAllText(projPath, proj.WriteToString());

        Debug.Log(projPath);


        //Info.plist  
        PlistElementArray arr;
        PlistElementDict dict;
        PlistElementArray arr2;

        string plistPath = path + "/Info.plist";  
        PlistDocument plist = new PlistDocument();  
        plist.ReadFromString(File.ReadAllText(plistPath));  
        PlistElementDict rootDict = plist.root;  

        // 权限
        rootDict.SetString ("NSCameraUsageDescription", "使用摄像机");  
        rootDict.SetString ("NSPhotoLibraryUsageDescription", "使用相册"); 

        // 白名单
        arr = rootDict.CreateArray("LSApplicationQueriesSchemes");
        arr.AddString("alipay");
        arr.AddString("weixin");
        arr.AddString("mqqapiwallet");
        arr.AddString("i4Tool4008227229");

        // 设置支持HTTP
        dict = rootDict.CreateDict("NSAppTransportSecurity");
        dict.SetBoolean("NSAllowsArbitraryLoads", true);

        // 配置支付宝和 QQ 钱包的 URLSchemes
        arr = rootDict.CreateArray("CFBundleURLTypes");
        dict = arr.AddDict();
        dict.SetString("CFBundleTypeRole", "None");
        arr2 = dict.CreateArray("CFBundleURLSchemes");
        arr2.AddString("As2558");

        File.WriteAllText(plistPath, plist.WriteToString());  

        Debug.Log(plistPath);
    }
}


</pre>


